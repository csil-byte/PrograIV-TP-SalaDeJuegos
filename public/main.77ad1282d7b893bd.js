(self.webpackChunkTP_SalaDeJuegos=self.webpackChunkTP_SalaDeJuegos||[]).push([[179],{2011:(bt,Me,U)=>{"use strict";U.d(Me,{Dh:()=>he,GT:()=>Ee,cc:()=>Fe,hO:()=>Ye,on:()=>X,pX:()=>le,xv:()=>ye});var d=U(5e3),G=U(127),L=U(5813);bt=U.hmd(bt);const ue=["ngOnDestroy"],le=(Ae,st,qe,Le={})=>new Proxy(Ae,{get:(Re,Te)=>qe.runOutsideAngular(()=>{var Je;if(Ae[Te])return(null===(Je=null==Le?void 0:Le.spy)||void 0===Je?void 0:Je.get)&&Le.spy.get(Te,Ae[Te]),Ae[Te];if(ue.indexOf(Te)>-1)return()=>{};const B=st.toPromise().then(Xe=>{const ne=Xe&&Xe[Te];return"function"==typeof ne?ne.bind(Xe):ne&&ne.then?ne.then(me=>qe.run(()=>me)):qe.run(()=>ne)});return new Proxy(()=>{},{get:(Xe,ne)=>B[ne],apply:(Xe,ne,me)=>B.then(ce=>{var ae;const Be=ce&&ce(...me);return(null===(ae=null==Le?void 0:Le.spy)||void 0===ae?void 0:ae.apply)&&Le.spy.apply(Te,me,Be),Be})})})}),Ee=(Ae,st)=>{st.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(Le=>{Object.defineProperty(Ae.prototype,Le,Object.getOwnPropertyDescriptor(qe.prototype||qe,Le))})})};class ge{constructor(st){return st}}const he=new d.OlP("angularfire2.app.options"),ye=new d.OlP("angularfire2.app.name");function X(Ae,st,qe){const Re="object"==typeof qe&&qe||{};Re.name=Re.name||"string"==typeof qe&&qe||"[DEFAULT]";const Je=G.Z.apps.filter(B=>B&&B.name===Re.name)[0]||st.runOutsideAngular(()=>G.Z.initializeApp(Ae,Re));try{JSON.stringify(Ae)!==JSON.stringify(Je.options)&&Q("error",`${Je.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(B){}return new ge(Je)}const Q=(Ae,...st)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ae](...st)},oe={provide:ge,useFactory:X,deps:[he,d.R0b,[new d.FiY,ye]]};let Ye=(()=>{class Ae{constructor(qe){G.Z.registerVersion("angularfire",L.q4.full,"core"),G.Z.registerVersion("angularfire",L.q4.full,"app-compat"),G.Z.registerVersion("angular",d.q4F.full,qe.toString())}static initializeApp(qe,Le){return{ngModule:Ae,providers:[{provide:he,useValue:qe},{provide:ye,useValue:Le}]}}}return Ae.\u0275fac=function(qe){return new(qe||Ae)(d.LFG(d.Lbi))},Ae.\u0275mod=d.oAB({type:Ae}),Ae.\u0275inj=d.cJS({providers:[oe]}),Ae})();function Fe(Ae,st,qe,Le,Re){const[,Te,Je]=globalThis.\u0275AngularfireInstanceCache.find(B=>B[0]===Ae)||[];if(Te)return function He(Ae,st){try{return Ae.toString()===st.toString()}catch(qe){return Ae===st}}(Re,Je)||(we("error",`${st} was already initialized on the ${qe} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Re,was:Je})),Te;{const B=Le();return globalThis.\u0275AngularfireInstanceCache.push([Ae,B,Re]),B}}const ze=!!bt.hot,we=(Ae,...st)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ae](...st)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(bt,Me,U)=>{"use strict";U.d(Me,{q4:()=>za,iC:()=>ks,fc:()=>ro,HU:()=>bf,vb:()=>Tu,JM:()=>wy,u3:()=>$d});var d=U(5e3),G=U(5867),L=U(5861),ue=U(9681),le=U(2090),Ee=U(4859),ge=U(1877);const he="@firebase/installations",Q="w:0.5.7",oe="FIS_v2",Ae=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(D){return D instanceof le.ZR&&D.code.includes("request-failed")}function qe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Le(D){return{token:D.token,requestStatus:2,expiresIn:me(D.expiresIn),creationTime:Date.now()}}function Re(D,S){return Te.apply(this,arguments)}function Te(){return(Te=(0,L.Z)(function*(D,S){const Z=(yield S.json()).error;return Ae.create("request-failed",{requestName:D,serverCode:Z.code,serverMessage:Z.message,serverStatus:Z.status})})).apply(this,arguments)}function Je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function B(D,{refreshToken:S}){const k=Je(D);return k.append("Authorization",function ce(D){return`${oe} ${D}`}(S)),k}function Xe(D){return ne.apply(this,arguments)}function ne(){return(ne=(0,L.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function me(D){return Number(D.replace("s","000"))}function ae(D,S){return Be.apply(this,arguments)}function Be(){return(Be=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:k}){const Z=qe(D),re=Je(D),de=S.getImmediate({optional:!0});if(de){const Bt=yield de.getHeartbeatsHeader();Bt&&re.append("x-firebase-client",Bt)}const Ze={method:"POST",headers:re,body:JSON.stringify({fid:k,authVersion:oe,appId:D.appId,sdkVersion:Q})},Nt=yield Xe(()=>fetch(Z,Ze));if(Nt.ok){const Bt=yield Nt.json();return{fid:Bt.fid||k,registrationStatus:2,refreshToken:Bt.refreshToken,authToken:Le(Bt.authToken)}}throw yield Re("Create Installation",Nt)})).apply(this,arguments)}function fe(D){return new Promise(S=>{setTimeout(S,D)})}const cn=/^[cdef][\w-]{21}$/;function pt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const k=function lt(D){return function St(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return cn.test(k)?k:""}catch(D){return""}}function an(D){return`${D.appName}!${D.appId}`}const Tn=new Map;function vr(D,S){const k=an(D);dn(k,S),function Pn(D,S){const k=function Ir(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=D=>{dn(D.data.key,D.data.fid)}),rr}();k&&k.postMessage({key:D,fid:S}),function ur(){0===Tn.size&&rr&&(rr.close(),rr=null)}()}(k,S)}function dn(D,S){const k=Tn.get(D);if(k)for(const Z of k)Z(S)}let rr=null;const wr="firebase-installations-store";let Kn=null;function Fn(){return Kn||(Kn=(0,le.X3)("firebase-installations-database",1,(D,S)=>{0===S&&D.createObjectStore(wr)})),Kn}function ct(D,S){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,L.Z)(function*(D,S){const k=an(D),re=(yield Fn()).transaction(wr,"readwrite"),de=re.objectStore(wr),je=yield de.get(k);return yield de.put(S,k),yield re.complete,(!je||je.fid!==S.fid)&&vr(D,S.fid),S})).apply(this,arguments)}function hn(D){return fn.apply(this,arguments)}function fn(){return(fn=(0,L.Z)(function*(D){const S=an(D),Z=(yield Fn()).transaction(wr,"readwrite");yield Z.objectStore(wr).delete(S),yield Z.complete})).apply(this,arguments)}function Yn(D,S){return qr.apply(this,arguments)}function qr(){return(qr=(0,L.Z)(function*(D,S){const k=an(D),re=(yield Fn()).transaction(wr,"readwrite"),de=re.objectStore(wr),je=yield de.get(k),Ze=S(je);return void 0===Ze?yield de.delete(k):yield de.put(Ze,k),yield re.complete,Ze&&(!je||je.fid!==Ze.fid)&&vr(D,Ze.fid),Ze})).apply(this,arguments)}function It(D){return mn.apply(this,arguments)}function mn(){return(mn=(0,L.Z)(function*(D){let S;const k=yield Yn(D.appConfig,Z=>{const re=Hn(Z),de=gi(D,re);return S=de.registrationPromise,de.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function Hn(D){return Jt(D||{fid:pt(),registrationStatus:0})}function gi(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Ae.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},Z=function Tt(D,S){return rt.apply(this,arguments)}(D,k);return{installationEntry:k,registrationPromise:Z}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:dt(D)}:{installationEntry:S}}function rt(){return(rt=(0,L.Z)(function*(D,S){try{const k=yield ae(D,S);return ct(D.appConfig,k)}catch(k){throw st(k)&&409===k.customData.serverCode?yield hn(D.appConfig):yield ct(D.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function dt(D){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,L.Z)(function*(D){let S=yield $n(D.appConfig);for(;1===S.registrationStatus;)yield fe(100),S=yield $n(D.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:Z}=yield It(D);return Z||k}return S})).apply(this,arguments)}function $n(D){return Yn(D,S=>{if(!S)throw Ae.create("installation-not-found");return Jt(S)})}function Jt(D){return function Si(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function zn(D,S){return _n.apply(this,arguments)}function _n(){return(_n=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},k){const Z=Dt(D,k),re=B(D,k),de=S.getImmediate({optional:!0});if(de){const Bt=yield de.getHeartbeatsHeader();Bt&&re.append("x-firebase-client",Bt)}const Ze={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},Nt=yield Xe(()=>fetch(Z,Ze));if(Nt.ok)return Le(yield Nt.json());throw yield Re("Generate Auth Token",Nt)})).apply(this,arguments)}function Dt(D,{fid:S}){return`${qe(D)}/${S}/authTokens:generate`}function Gn(D){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,L.Z)(function*(D,S=!1){let k;const Z=yield Yn(D.appConfig,de=>{if(!kt(de))throw Ae.create("not-registered");const je=de.authToken;if(!S&&ee(je))return de;if(1===je.requestStatus)return k=Se(D,S),de;{if(!navigator.onLine)throw Ae.create("app-offline");const Ze=te(de);return k=Ct(D,Ze),Ze}});return k?yield k:Z.authToken})).apply(this,arguments)}function Se(D,S){return xe.apply(this,arguments)}function xe(){return(xe=(0,L.Z)(function*(D,S){let k=yield ot(D.appConfig);for(;1===k.authToken.requestStatus;)yield fe(100),k=yield ot(D.appConfig);const Z=k.authToken;return 0===Z.requestStatus?Gn(D,S):Z})).apply(this,arguments)}function ot(D){return Yn(D,S=>{if(!kt(S))throw Ae.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ct(D,S){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,L.Z)(function*(D,S){try{const k=yield zn(D,S),Z=Object.assign(Object.assign({},S),{authToken:k});return yield ct(D.appConfig,Z),k}catch(k){if(!st(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const Z=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ct(D.appConfig,Z)}else yield hn(D.appConfig);throw k}})).apply(this,arguments)}function kt(D){return void 0!==D&&2===D.registrationStatus}function ee(D){return 2===D.requestStatus&&!function W(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function te(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function z(){return(z=(0,L.Z)(function*(D){const S=D,{installationEntry:k,registrationPromise:Z}=yield It(S);return Z?Z.catch(console.error):Gn(S).catch(console.error),k.fid})).apply(this,arguments)}function pe(){return(pe=(0,L.Z)(function*(D,S=!1){const k=D;return yield $e(k),(yield Gn(k,S)).token})).apply(this,arguments)}function $e(D){return et.apply(this,arguments)}function et(){return(et=(0,L.Z)(function*(D){const{registrationPromise:S}=yield It(D);S&&(yield S)})).apply(this,arguments)}function Et(D){return Ae.create("missing-app-config-values",{valueName:D})}const Sa="installations",tt=D=>{const S=D.getProvider("app").getImmediate(),k=function xi(D){if(!D||!D.options)throw Et("App Configuration");if(!D.name)throw Et("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!D.options[k])throw Et(k);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ue._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},qt=D=>{const S=D.getProvider("app").getImmediate(),k=(0,ue._getProvider)(S,Sa).getImmediate();return{getId:()=>function V(D){return z.apply(this,arguments)}(k),getToken:re=>function q(D){return pe.apply(this,arguments)}(k,re)}};(function An(){(0,ue._registerComponent)(new Ee.wA(Sa,tt,"PUBLIC")),(0,ue._registerComponent)(new Ee.wA("installations-internal",qt,"PRIVATE"))})(),(0,ue.registerVersion)(he,"0.5.7"),(0,ue.registerVersion)(he,"0.5.7","esm2017");const Fr="@firebase/remote-config",Qn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vl{constructor(S,k,Z,re){this.client=S,this.storage=k,this.storageCache=Z,this.logger=re}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Z=Date.now()-k,re=Z<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Z}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${re}.`),re}fetch(S){var k=this;return(0,L.Z)(function*(){const[Z,re]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(re&&k.isCachedDataFresh(S.cacheMaxAgeMillis,Z))return re;S.eTag=re&&re.eTag;const de=yield k.client.fetch(S),je=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&je.push(k.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(je),de})()}}function Yo(D=navigator){return D.languages&&D.languages[0]||D.language}class ls{constructor(S,k,Z,re,de,je){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=Z,this.projectId=re,this.apiKey=de,this.appId=je}fetch(S){var k=this;return(0,L.Z)(function*(){const[Z,re]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Nt={sdk_version:k.sdkVersion,app_instance_id:Z,app_instance_id_token:re,app_id:k.appId,language_code:Yo()},Bt={method:"POST",headers:Ze,body:JSON.stringify(Nt)},sn=fetch(je,Bt),Ot=new Promise((yi,ai)=>{S.signal.addEventListener(()=>{const zd=new Error("The operation was aborted.");zd.name="AbortError",ai(zd)})});let Yr;try{yield Promise.race([sn,Ot]),Yr=yield sn}catch(yi){let ai="fetch-client-network";throw"AbortError"===yi.name&&(ai="fetch-timeout"),Qn.create(ai,{originalErrorMessage:yi.message})}let Hr=Yr.status;const No=Yr.headers.get("ETag")||void 0;let Ns,Fi;if(200===Yr.status){let yi;try{yi=yield Yr.json()}catch(ai){throw Qn.create("fetch-client-parse",{originalErrorMessage:ai.message})}Ns=yi.entries,Fi=yi.state}if("INSTANCE_STATE_UNSPECIFIED"===Fi?Hr=500:"NO_CHANGE"===Fi?Hr=304:("NO_TEMPLATE"===Fi||"EMPTY_CONFIG"===Fi)&&(Ns={}),304!==Hr&&200!==Hr)throw Qn.create("fetch-status",{httpStatus:Hr});return{status:Hr,eTag:No,config:Ns}})()}}class us{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,L.Z)(function*(){const Z=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,Z)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:Z}){var re=this;return(0,L.Z)(function*(){yield function ri(D,S){return new Promise((k,Z)=>{const re=Math.max(S-Date.now(),0),de=setTimeout(k,re);D.addEventListener(()=>{clearTimeout(de),Z(Qn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const de=yield re.client.fetch(S);return yield re.storage.deleteThrottleMetadata(),de}catch(de){if(!function xd(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(de))throw de;const je={throttleEndTimeMillis:Date.now()+(0,le.$s)(Z),backoffCount:Z+1};return yield re.storage.setThrottleMetadata(je),re.attemptFetch(S,je)}})()}}class Pd{constructor(S,k,Z,re,de){this.app=S,this._client=k,this._storageCache=Z,this._storage=re,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qo(D,S){const k=D.target.error||void 0;return Qn.create(S,{originalErrorMessage:k&&k.message})}const yo="app_namespace_store";class iu{constructor(S,k,Z,re=function Od(){return new Promise((D,S)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=Z=>{S(Qo(Z,"storage-open"))},k.onsuccess=Z=>{D(Z.target.result)},k.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(yo,{keyPath:"compositeKey"})}}catch(k){S(Qn.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=S,this.appName=k,this.namespace=Z,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,L.Z)(function*(){const Z=yield k.openDbPromise;return new Promise((re,de)=>{const Ze=Z.transaction([yo],"readonly").objectStore(yo),Nt=k.createCompositeKey(S);try{const Bt=Ze.get(Nt);Bt.onerror=sn=>{de(Qo(sn,"storage-get"))},Bt.onsuccess=sn=>{const Ot=sn.target.result;re(Ot?Ot.value:void 0)}}catch(Bt){de(Qn.create("storage-get",{originalErrorMessage:Bt&&Bt.message}))}})})()}set(S,k){var Z=this;return(0,L.Z)(function*(){const re=yield Z.openDbPromise;return new Promise((de,je)=>{const Nt=re.transaction([yo],"readwrite").objectStore(yo),Bt=Z.createCompositeKey(S);try{const sn=Nt.put({compositeKey:Bt,value:k});sn.onerror=Ot=>{je(Qo(Ot,"storage-set"))},sn.onsuccess=()=>{de()}}catch(sn){je(Qn.create("storage-set",{originalErrorMessage:sn&&sn.message}))}})})()}delete(S){var k=this;return(0,L.Z)(function*(){const Z=yield k.openDbPromise;return new Promise((re,de)=>{const Ze=Z.transaction([yo],"readwrite").objectStore(yo),Nt=k.createCompositeKey(S);try{const Bt=Ze.delete(Nt);Bt.onerror=sn=>{de(Qo(sn,"storage-delete"))},Bt.onsuccess=()=>{re()}}catch(Bt){de(Qn.create("storage-delete",{originalErrorMessage:Bt&&Bt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class vo{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const k=S.storage.getLastFetchStatus(),Z=S.storage.getLastSuccessfulFetchTimestampMillis(),re=S.storage.getActiveConfig(),de=yield k;de&&(S.lastFetchStatus=de);const je=yield Z;je&&(S.lastSuccessfulFetchTimestampMillis=je);const Ze=yield re;Ze&&(S.activeConfig=Ze)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function su(){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,L.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Rd(){(0,ue._registerComponent)(new Ee.wA("remote-config",function D(S,{instanceIdentifier:k}){const Z=S.getProvider("app").getImmediate(),re=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Qn.create("registration-window");if(!(0,le.hl)())throw Qn.create("indexed-db-unavailable");const{projectId:de,apiKey:je,appId:Ze}=Z.options;if(!de)throw Qn.create("registration-project-id");if(!je)throw Qn.create("registration-api-key");if(!Ze)throw Qn.create("registration-app-id");const Nt=new iu(Ze,Z.name,k=k||"firebase"),Bt=new vo(Nt),sn=new ge.Yd(Fr);sn.logLevel=ge.in.ERROR;const Ot=new ls(re,ue.SDK_VERSION,k,de,je,Ze),Yr=new us(Ot,Nt),Hr=new vl(Yr,Nt,Bt,sn),No=new Pd(Z,Hr,Bt,Nt,sn);return function dr(D){const S=(0,le.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(No),No},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Fr,"0.3.6"),(0,ue.registerVersion)(Fr,"0.3.6","esm2017")}();const cs="/firebase-messaging-sw.js",Jo="/firebase-cloud-messaging-push-scope",_i="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wo="google.c.a.c_id",Xo="google.c.a.c_l",vc="google.c.a.ts",bo="google.c.a.e";var Pi=(()=>{return(D=Pi||(Pi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Pi;var D})();function ds(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hs(D){const k=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Z=atob(k),re=new Uint8Array(Z.length);for(let de=0;de<Z.length;++de)re[de]=Z.charCodeAt(de);return re}const ea="fcm_token_details_db",Co="fcm_token_object_Store";function kd(D){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,L.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(ea))return null;let S=null;return(yield(0,le.X3)(ea,5,function(){var Z=(0,L.Z)(function*(re,de,je,Ze){var Nt;if(de<2||!re.objectStoreNames.contains(Co))return;const Bt=Ze.objectStore(Co),sn=yield Bt.index("fcmSenderId").get(D);if(yield Bt.clear(),sn)if(2===de){const Ot=sn;if(!Ot.auth||!Ot.p256dh||!Ot.endpoint)return;S={token:Ot.fcmToken,createTime:null!==(Nt=Ot.createTime)&&void 0!==Nt?Nt:Date.now(),subscriptionOptions:{auth:Ot.auth,p256dh:Ot.p256dh,endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:"string"==typeof Ot.vapidKey?Ot.vapidKey:ds(Ot.vapidKey)}}}else if(3===de){const Ot=sn;S={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:ds(Ot.auth),p256dh:ds(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:ds(Ot.vapidKey)}}}else if(4===de){const Ot=sn;S={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:ds(Ot.auth),p256dh:ds(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:ds(Ot.vapidKey)}}}});return function(re,de,je,Ze){return Z.apply(this,arguments)}}())).close(),yield(0,le.Lj)(ea),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),wl(S)?S:null}),Eo.apply(this,arguments)}function wl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ss="firebase-messaging-store";let fs=null;function Oa(){return fs||(fs=(0,le.X3)("firebase-messaging-database",1,(D,S)=>{0===S&&D.createObjectStore(Ss)})),fs}function Sn(D){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,L.Z)(function*(D){const S=xs(D),Z=yield(yield Oa()).transaction(Ss).objectStore(Ss).get(S);if(Z)return Z;{const re=yield kd(D.appConfig.senderId);if(re)return yield $s(D,re),re}})).apply(this,arguments)}function $s(D,S){return yn.apply(this,arguments)}function yn(){return(yn=(0,L.Z)(function*(D,S){const k=xs(D),re=(yield Oa()).transaction(Ss,"readwrite");return yield re.objectStore(Ss).put(S,k),yield re.complete,S})).apply(this,arguments)}function bl(D){return zs.apply(this,arguments)}function zs(){return(zs=(0,L.Z)(function*(D){const S=xs(D),Z=(yield Oa()).transaction(Ss,"readwrite");yield Z.objectStore(Ss).delete(S),yield Z.complete})).apply(this,arguments)}function xs({appConfig:D}){return D.appId}const tr=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ra(D,S){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,L.Z)(function*(D,S){const k=yield Gi(D),Z=At(S),re={method:"POST",headers:k,body:JSON.stringify(Z)};let de;try{de=yield(yield fetch(Oi(D.appConfig),re)).json()}catch(je){throw tr.create("token-subscribe-failed",{errorInfo:je})}if(de.error)throw tr.create("token-subscribe-failed",{errorInfo:de.error.message});if(!de.token)throw tr.create("token-subscribe-no-token");return de.token})).apply(this,arguments)}function Ur(D,S){return ps.apply(this,arguments)}function ps(){return(ps=(0,L.Z)(function*(D,S){const k=yield Gi(D),Z=At(S.subscriptionOptions),re={method:"PATCH",headers:k,body:JSON.stringify(Z)};let de;try{de=yield(yield fetch(`${Oi(D.appConfig)}/${S.token}`,re)).json()}catch(je){throw tr.create("token-update-failed",{errorInfo:je})}if(de.error)throw tr.create("token-update-failed",{errorInfo:de.error.message});if(!de.token)throw tr.create("token-update-no-token");return de.token})).apply(this,arguments)}function Gs(D,S){return Io.apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*(D,S){const Z={method:"DELETE",headers:yield Gi(D)};try{const de=yield(yield fetch(`${Oi(D.appConfig)}/${S}`,Z)).json();if(de.error)throw tr.create("token-unsubscribe-failed",{errorInfo:de.error.message})}catch(re){throw tr.create("token-unsubscribe-failed",{errorInfo:re})}})).apply(this,arguments)}function Oi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Gi(D){return gs.apply(this,arguments)}function gs(){return(gs=(0,L.Z)(function*({appConfig:D,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function At({p256dh:D,auth:S,endpoint:k,vapidKey:Z}){const re={web:{endpoint:k,auth:S,p256dh:D}};return Z!==_i&&(re.web.applicationPubKey=Z),re}const ta=6048e5;function na(D){return To.apply(this,arguments)}function To(){return(To=(0,L.Z)(function*(D){const S=yield uu(D.swRegistration,D.vapidKey),k={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:ds(S.getKey("auth")),p256dh:ds(S.getKey("p256dh"))},Z=yield Sn(D.firebaseDependencies);if(Z){if(sa(Z.subscriptionOptions,k))return Date.now()>=Z.createTime+ta?ra(D,{token:Z.token,createTime:Date.now(),subscriptionOptions:k}):Z.token;try{yield Gs(D.firebaseDependencies,Z.token)}catch(re){console.warn(re)}return Oe(D.firebaseDependencies,k)}return Oe(D.firebaseDependencies,k)})).apply(this,arguments)}function lu(D){return Do.apply(this,arguments)}function Do(){return(Do=(0,L.Z)(function*(D){const S=yield Sn(D.firebaseDependencies);S&&(yield Gs(D.firebaseDependencies,S.token),yield bl(D.firebaseDependencies));const k=yield D.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function ra(D,S){return ia.apply(this,arguments)}function ia(){return(ia=(0,L.Z)(function*(D,S){try{const k=yield Ur(D.firebaseDependencies,S),Z=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield $s(D.firebaseDependencies,Z),k}catch(k){throw yield lu(D),k}})).apply(this,arguments)}function Oe(D,S){return zt.apply(this,arguments)}function zt(){return(zt=(0,L.Z)(function*(D,S){const Z={token:yield Ra(D,S),createTime:Date.now(),subscriptionOptions:S};return yield $s(D,Z),Z.token})).apply(this,arguments)}function uu(D,S){return kn.apply(this,arguments)}function kn(){return(kn=(0,L.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hs(S)})})).apply(this,arguments)}function sa(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function Ms(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ri(D,S){if(!S.notification)return;D.notification={};const k=S.notification.title;k&&(D.notification.title=k);const Z=S.notification.body;Z&&(D.notification.body=Z);const re=S.notification.image;re&&(D.notification.image=re)}(S,D),function Cl(D,S){!S.data||(D.data=S.data)}(S,D),function oa(D,S){if(!S.fcmOptions)return;D.fcmOptions={};const k=S.fcmOptions.link;k&&(D.fcmOptions.link=k);const Z=S.fcmOptions.analytics_label;Z&&(D.fcmOptions.analyticsLabel=Z)}(S,D),S}function Nd(D){return"object"==typeof D&&!!D&&wo in D}function El(D,S){const k=[];for(let Z=0;Z<D.length;Z++)k.push(D.charAt(Z)),Z<S.length&&k.push(S.charAt(Z));return k.join("")}function So(D){return tr.create("missing-app-config-values",{valueName:D})}El("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),El("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hr{constructor(S,k,Z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function Ao(D){if(!D||!D.options)throw So("App Configuration Object");if(!D.name)throw So("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=D;for(const Z of S)if(!k[Z])throw So(Z);return{appName:D.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:re,installations:k,analyticsProvider:Z}}_delete(){return Promise.resolve()}}function Wi(D){return xo.apply(this,arguments)}function xo(){return(xo=(0,L.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(cs,{scope:Jo}),D.swRegistration.update().catch(()=>{})}catch(S){throw tr.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Ws(D,S){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,L.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield Wi(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw tr.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function cu(D,S){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,L.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=_i)})).apply(this,arguments)}function aa(){return(aa=(0,L.Z)(function*(D,S){if(!navigator)throw tr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw tr.create("permission-blocked");return yield cu(D,null==S?void 0:S.vapidKey),yield Ws(D,null==S?void 0:S.serviceWorkerRegistration),na(D)})).apply(this,arguments)}function ka(D,S,k){return qs.apply(this,arguments)}function qs(){return(qs=(0,L.Z)(function*(D,S,k){const Z=Il(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(Z,{message_id:k[wo],message_name:k[Xo],message_time:k[vc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Il(D){switch(D){case Pi.NOTIFICATION_CLICKED:return"notification_open";case Pi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function La(){return(La=(0,L.Z)(function*(D,S){const k=S.data;if(!k.isFirebaseMessaging)return;D.onMessageHandler&&k.messageType===Pi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Ms(k)):D.onMessageHandler.next(Ms(k)));const Z=k.data;Nd(Z)&&"1"===Z[bo]&&(yield ka(D,k.messageType,Z))})).apply(this,arguments)}const Po="@firebase/messaging",Zs=D=>{const S=new hr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Na(D,S){return La.apply(this,arguments)}(S,k)),S},Tl=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:Z=>function du(D,S){return aa.apply(this,arguments)}(S,Z)}};function hu(){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,L.Z)(function*(){try{yield(0,le.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fa(){(0,ue._registerComponent)(new Ee.wA("messaging",Zs,"PUBLIC")),(0,ue._registerComponent)(new Ee.wA("messaging-internal",Tl,"PRIVATE")),(0,ue.registerVersion)(Po,"0.9.11"),(0,ue.registerVersion)(Po,"0.9.11","esm2017")}();const Ua="analytics",fu="firebase_id",Va="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oo="https://www.googletagmanager.com/gtag/js",ir=new ge.Yd("@firebase/analytics");function pu(D){return Promise.all(D.map(S=>S.catch(k=>k)))}function gu(D,S){const k=document.createElement("script");k.src=`${Oo}?l=${D}&id=${S}`,k.async=!0,document.head.appendChild(k)}function ms(D,S,k,Z,re,de){return ca.apply(this,arguments)}function ca(){return(ca=(0,L.Z)(function*(D,S,k,Z,re,de){const je=Z[re];try{if(je)yield S[je];else{const Nt=(yield pu(k)).find(Bt=>Bt.measurementId===re);Nt&&(yield S[Nt.appId])}}catch(Ze){ir.error(Ze)}D("config",re,de)})).apply(this,arguments)}function bc(D,S,k,Z,re){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,L.Z)(function*(D,S,k,Z,re){try{let de=[];if(re&&re.send_to){let je=re.send_to;Array.isArray(je)||(je=[je]);const Ze=yield pu(k);for(const Nt of je){const Bt=Ze.find(Ot=>Ot.measurementId===Nt),sn=Bt&&S[Bt.appId];if(!sn){de=[];break}de.push(sn)}}0===de.length&&(de=Object.values(S)),yield Promise.all(de),D("event",Z,re||{})}catch(de){ir.error(de)}})).apply(this,arguments)}function _f(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Oo))return S;return null}const Un=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),K=new class P{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Pe(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ke(D){return pn.apply(this,arguments)}function pn(){return(pn=(0,L.Z)(function*(D){var S;const{appId:k,apiKey:Z}=D,re={method:"GET",headers:Pe(Z)},de=Va.replace("{app-id}",k),je=yield fetch(de,re);if(200!==je.status&&304!==je.status){let Ze="";try{const Nt=yield je.json();(null===(S=Nt.error)||void 0===S?void 0:S.message)&&(Ze=Nt.error.message)}catch(Nt){}throw Un.create("config-fetch-failed",{httpStatus:je.status,responseMessage:Ze})}return je.json()})).apply(this,arguments)}function Xn(D){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,L.Z)(function*(D,S=K,k){const{appId:Z,apiKey:re,measurementId:de}=D.options;if(!Z)throw Un.create("no-app-id");if(!re){if(de)return{measurementId:de,appId:Z};throw Un.create("no-api-key")}const je=S.getThrottleMetadata(Z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new Ec;return setTimeout((0,L.Z)(function*(){Ze.abort()}),void 0!==k?k:6e4),yt({appId:Z,apiKey:re,measurementId:de},je,Ze,S)})).apply(this,arguments)}function yt(D,S,k){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:k},Z,re=K){const{appId:de,measurementId:je}=D;try{yield bg(Z,S)}catch(Ze){if(je)return ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${je} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:de,measurementId:je};throw Ze}try{const Ze=yield Ke(D);return re.deleteThrottleMetadata(de),Ze}catch(Ze){if(!_u(Ze)){if(re.deleteThrottleMetadata(de),je)return ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${je} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:de,measurementId:je};throw Ze}const Nt=503===Number(Ze.customData.httpStatus)?(0,le.$s)(k,re.intervalMillis,30):(0,le.$s)(k,re.intervalMillis),Bt={throttleEndTimeMillis:Date.now()+Nt,backoffCount:k+1};return re.setThrottleMetadata(de,Bt),ir.debug(`Calling attemptFetch again in ${Nt} millis`),yt(D,Bt,Z,re)}})).apply(this,arguments)}function bg(D,S){return new Promise((k,Z)=>{const re=Math.max(S-Date.now(),0),de=setTimeout(k,re);D.addEventListener(()=>{clearTimeout(de),Z(Un.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function _u(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Ec{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function yu(){return Al.apply(this,arguments)}function Al(){return(Al=(0,L.Z)(function*(){if(!(0,le.hl)())return ir.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(D){return ir.warn(Un.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function jr(){return(jr=(0,L.Z)(function*(D,S,k,Z,re,de,je){var Ze;const Nt=Xn(D);Nt.then(Hr=>{k[Hr.measurementId]=Hr.appId,D.options.measurementId&&Hr.measurementId!==D.options.measurementId&&ir.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Hr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hr=>ir.error(Hr)),S.push(Nt);const Bt=yu().then(Hr=>{if(Hr)return Z.getId()}),[sn,Ot]=yield Promise.all([Nt,Bt]);_f()||gu(de,sn.measurementId),re("js",new Date);const Yr=null!==(Ze=null==je?void 0:je.config)&&void 0!==Ze?Ze:{};return Yr.origin="firebase",Yr.update=!0,null!=Ot&&(Yr[fu]=Ot),re("config",sn.measurementId,Yr),sn.measurementId})).apply(this,arguments)}class Ic{constructor(S){this.app=S}_delete(){return delete si[this.app.options.appId],Promise.resolve()}}let si={},Ba=[];const vu={};let _s,da,Sl="dataLayer",xr=!1;function qi(D,S,k){!function xl(){const D=[];if((0,le.ru)()&&D.push("This is a browser extension environment."),(0,le.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((Z,re)=>`(${re+1}) ${Z}`).join(" "),k=Un.create("invalid-analytics-context",{errorInfo:S});ir.warn(k.message)}}();const Z=D.options.appId;if(!Z)throw Un.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Un.create("no-api-key");ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=si[Z])throw Un.create("already-exists",{id:Z});if(!xr){!function ki(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(Sl);const{wrappedGtag:de,gtagCore:je}=function Cc(D,S,k,Z,re){let de=function(...je){window[Z].push(arguments)};return window[re]&&"function"==typeof window[re]&&(de=window[re]),window[re]=function mu(D,S,k,Z){function de(){return(de=(0,L.Z)(function*(je,Ze,Nt){try{"event"===je?yield bc(D,S,k,Ze,Nt):"config"===je?yield ms(D,S,k,Z,Ze,Nt):D("set",Ze)}catch(Bt){ir.error(Bt)}})).apply(this,arguments)}return function re(je,Ze,Nt){return de.apply(this,arguments)}}(de,D,S,k),{gtagCore:de,wrappedGtag:window[re]}}(si,Ba,vu,Sl,"gtag");da=de,_s=je,xr=!0}return si[Z]=function ii(D,S,k,Z,re,de,je){return jr.apply(this,arguments)}(D,Ba,vu,S,_s,Sl,k),new Ic(D)}function Ml(){return(Ml=(0,L.Z)(function*(D,S,k,Z,re){if(re&&re.global)D("event",k,Z);else{const de=yield S;D("event",k,Object.assign(Object.assign({},Z),{send_to:de}))}})).apply(this,arguments)}function to(){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,L.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}const Bd="@firebase/analytics";!function vf(){(0,ue._registerComponent)(new Ee.wA(Ua,(S,{options:k})=>qi(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ue._registerComponent)(new Ee.wA("analytics-internal",function D(S){try{const k=S.getProvider(Ua).getImmediate();return{logEvent:(Z,re,de)=>function Tc(D,S,k,Z){D=(0,le.m9)(D),function Ld(D,S,k,Z,re){return Ml.apply(this,arguments)}(da,si[D.app.options.appId],S,k,Z).catch(re=>ir.error(re))}(k,Z,re,de)}}catch(k){throw Un.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ue.registerVersion)(Bd,"0.7.7"),(0,ue.registerVersion)(Bd,"0.7.7","esm2017")}();var Eu=U(4408),Dc=U(7565);const Ha=new class fr extends Dc.v{}(class ko extends Eu.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(S,k,Z):S.flush(this)}});var Kr=U(4986),$a=U(8306),Ni=U(8505),vs=U(5363),fa=U(9468);const za=new d.GfV("7.3.0"),oi="__angularfire_symbol__analyticsIsSupportedValue",no="__angularfire_symbol__analyticsIsSupported",Ac="__angularfire_symbol__remoteConfigIsSupportedValue",Ol="__angularfire_symbol__remoteConfigIsSupported",Hd="__angularfire_symbol__messagingIsSupportedValue",Sc="__angularfire_symbol__messagingIsSupported";function wy(D,S,k){if(S){if(1===S.length)return S[0];const de=S.filter(je=>je.app===k);if(1===de.length)return de[0]}return k.container.getProvider(D).getImmediate({optional:!0})}globalThis[no]||(globalThis[no]=to().then(D=>globalThis[oi]=D).catch(()=>globalThis[oi]=!1)),globalThis[Sc]||(globalThis[Sc]=hu().then(D=>globalThis[Hd]=D).catch(()=>globalThis[Hd]=!1)),globalThis[Ol]||(globalThis[Ol]=su().then(D=>globalThis[Ac]=D).catch(()=>globalThis[Ac]=!1));const Tu=(D,S)=>{const k=S?[S]:(0,G.C6)(),Z=[];return k.forEach(re=>{re.container.getProvider(D).instances.forEach(je=>{Z.includes(je)||Z.push(je)})}),Z};function pa(){}class Du{constructor(S,k=Ha){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,Z){const re=this.zone;return this.delegate.schedule(function(je){re.runGuarded(()=>{S.apply(this,[je])})},k,Z)}}class xc{constructor(S){this.zone=S,this.task=null}call(S,k){const Z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pa,{},pa,pa)),k.pipe((0,Ni.b)({next:Z,complete:Z,error:Z})).subscribe(S).add(Z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bf=(()=>{class D{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Du(Zone.current)),this.insideAngular=k.run(()=>new Du(Zone.current,Kr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(k){return new(k||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Li(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Wa(D){return Li().ngZone.runOutsideAngular(()=>D())}function Ki(D){return Li().ngZone.run(()=>D())}function ro(D){return D.pipe((0,vs.Q)(Li().outsideAngular))}function ks(D){return Li(),function qa(D){return function(k){return(k=k.lift(new xc(D.ngZone))).pipe((0,fa.R)(D.outsideAngular),(0,vs.Q)(D.insideAngular))}}(Li())(D)}const Rl=(D,S)=>function(){const Z=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),Ki(()=>D.apply(void 0,Z))},$d=(D,S)=>function(){let k;const Z=arguments;for(let de=0;de<arguments.length;de++)"function"==typeof Z[de]&&(S&&(k||(k=Ki(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pa,{},pa,pa)))),Z[de]=Rl(Z[de],k));const re=Wa(()=>D.apply(this,Z));if(!S){if(re instanceof $a.y){const de=Li();return re.pipe((0,fa.R)(de.outsideAngular),(0,vs.Q)(de.insideAngular))}return Ki(()=>re)}return re instanceof $a.y?re.pipe(ks):re instanceof Promise?Ki(()=>new Promise((de,je)=>re.then(Ze=>Ki(()=>de(Ze)),Ze=>Ki(()=>je(Ze))))):"function"==typeof re&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),re.apply(this,arguments)}:Ki(()=>re)}},424:(bt,Me,U)=>{"use strict";U.d(Me,{$:()=>na,A:()=>Q,E:()=>qt,G:()=>Dr,I:()=>us,K:()=>W,L:()=>Ma,M:()=>yc,N:()=>wo,P:()=>za,Q:()=>Xo,R:()=>jd,T:()=>_i,U:()=>Pi,V:()=>ds,W:()=>kd,X:()=>Sr,Y:()=>Ra,Z:()=>Ur,_:()=>Oi,a:()=>C,a0:()=>lu,a1:()=>ra,a2:()=>Oe,a3:()=>uu,a4:()=>sa,a5:()=>Ri,a6:()=>Cl,a7:()=>Nd,a8:()=>El,a9:()=>Wi,aA:()=>Ot,aB:()=>qa,aC:()=>Dn,aG:()=>K,aJ:()=>bo,aa:()=>Ws,ab:()=>cu,ae:()=>ka,af:()=>Il,ag:()=>Na,aj:()=>Ss,ak:()=>Dl,am:()=>Va,an:()=>ms,ao:()=>On,ap:()=>ne,aq:()=>Lt,ar:()=>et,as:()=>qe,at:()=>qd,au:()=>Mc,av:()=>Le,aw:()=>B,ax:()=>ce,ay:()=>te,az:()=>Fi,b:()=>Nn,c:()=>wf,d:()=>pa,e:()=>wy,f:()=>D,g:()=>je,h:()=>Z,i:()=>xl,j:()=>Bt,k:()=>Mu,l:()=>fr,m:()=>Dy,o:()=>he,r:()=>ys,s:()=>ko,u:()=>vs,z:()=>Fe});var d=U(5861),G=U(2090),L=U(9681),ue=U(655),le=U(1877),Ee=U(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},He=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new le.Yd("@firebase/auth");function st(w,...g){Ae.logLevel<=le.in.ERROR&&Ae.error(`Auth (${L.SDK_VERSION}): ${w}`,...g)}function qe(w,...g){throw Je(w,...g)}function Le(w,...g){return Je(w,...g)}function Re(w,g,_){const E=Object.assign(Object.assign({},He()),{[g]:_});return new G.LL("auth","Firebase",E).create(g,{appName:w.name})}function Te(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&qe(w,"argument-error"),Re(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(w,...g){if("string"!=typeof w){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return ze.create(w,...g)}function B(w,g,..._){if(!w)throw Je(g,..._)}function Xe(w){const g="INTERNAL ASSERTION FAILED: "+w;throw st(g),new Error(g)}function ne(w,g){w||Xe(g)}const me=new Map;function ce(w){ne(w instanceof Function,"Expected a class definition");let g=me.get(w);return g?(ne(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,me.set(w,g),g)}function fe(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function St(){return"http:"===cn()||"https:"===cn()}function cn(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class lt{constructor(g,_){this.shortDelay=g,this.longDelay=_,ne(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function jn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(St()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function an(w,g){ne(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Tn{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new lt(3e4,6e4);function Qt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function dn(w,g,_,E){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(w,g,_,E,O={}){return rr(w,O,(0,d.Z)(function*(){let j={},se={};E&&("GET"===g?se=E:j={body:JSON.stringify(E)});const ke=(0,G.xO)(Object.assign({key:w.config.apiKey},se)).slice(1),vt=yield w._getAdditionalHeaders();return vt["Content-Type"]="application/json",w.languageCode&&(vt["X-Firebase-Locale"]=w.languageCode),Tn.fetch()(kr(w,w.config.apiHost,_,ke),Object.assign({method:g,headers:vt,referrerPolicy:"no-referrer"},j))}))})).apply(this,arguments)}function rr(w,g,_){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(w,g,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},vr),g);try{const O=new wr(w),j=yield Promise.race([_(),O.promise]);O.clearNetworkTimeout();const se=yield j.json();if("needConfirmation"in se)throw Kn(w,"account-exists-with-different-credential",se);if(j.ok&&!("errorMessage"in se))return se;{const ke=j.ok?se.errorMessage:se.error.message,[vt,xt]=ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===vt)throw Kn(w,"credential-already-in-use",se);if("EMAIL_EXISTS"===vt)throw Kn(w,"email-already-in-use",se);const tn=E[vt]||vt.toLowerCase().replace(/[_\s]+/g,"-");if(xt)throw Re(w,tn,xt);qe(w,tn)}}catch(O){if(O instanceof G.ZR)throw O;qe(w,"network-request-failed")}})).apply(this,arguments)}function ur(w,g,_,E){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(w,g,_,E,O={}){const j=yield dn(w,g,_,E,O);return"mfaPendingCredential"in j&&qe(w,"multi-factor-auth-required",{_serverResponse:j}),j})).apply(this,arguments)}function kr(w,g,_,E){const O=`${g}${_}?${E}`;return w.config.emulator?an(w.config,O):`${w.config.apiScheme}://${O}`}class wr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Le(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(w,g,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const O=Le(w,g,E);return O.customData._tokenResponse=_,O}function ct(){return(ct=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Nr(w,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function fn(w,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function qr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Hn(){return(Hn=(0,d.Z)(function*(w,g=!1){const _=(0,G.m9)(w),E=yield _.getIdToken(g),O=Tt(E);B(O&&O.exp&&O.auth_time&&O.iat,_.auth,"internal-error");const j="object"==typeof O.firebase?O.firebase:void 0,se=null==j?void 0:j.sign_in_provider;return{claims:O,token:E,authTime:qr(gi(O.auth_time)),issuedAtTime:qr(gi(O.iat)),expirationTime:qr(gi(O.exp)),signInProvider:se||null,signInSecondFactor:(null==j?void 0:j.sign_in_second_factor)||null}})).apply(this,arguments)}function gi(w){return 1e3*Number(w)}function Tt(w){const[g,_,E]=w.split(".");if(void 0===g||void 0===_||void 0===E)return st("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,G.tV)(_);return O?JSON.parse(O):(st("Failed to decode base64 JWT payload"),null)}catch(O){return st("Caught error parsing JWT payload as JSON",O),null}}function dt(w,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof G.ZR&&$n(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function $n({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Jt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const O=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,O)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Si{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zn(w){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(w){var g;const _=w.auth,E=yield w.getIdToken(),O=yield dt(w,fn(_,{idToken:E}));B(null==O?void 0:O.users.length,_,"internal-error");const j=O.users[0];w._notifyReloadListener(j);const se=(null===(g=j.providerUserInfo)||void 0===g?void 0:g.length)?Se(j.providerUserInfo):[],ke=Xt(w.providerData,se),tn=!!w.isAnonymous&&!(w.email&&j.passwordHash||(null==ke?void 0:ke.length)),or={uid:j.localId,displayName:j.displayName||null,photoURL:j.photoUrl||null,email:j.email||null,emailVerified:j.emailVerified||!1,phoneNumber:j.phoneNumber||null,tenantId:j.tenantId||null,providerData:ke,metadata:new Si(j.createdAt,j.lastLoginAt),isAnonymous:tn};Object.assign(w,or)})).apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(w){const g=(0,G.m9)(w);yield zn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Xt(w,g){return[...w.filter(E=>!g.some(O=>O.providerId===E.providerId)),...g]}function Se(w){return w.map(g=>{var{providerId:_}=g,E=(0,ue._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ot(){return(ot=(0,d.Z)(function*(w,g){const _=yield rr(w,{},(0,d.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:O,apiKey:j}=w.config,se=kr(w,O,"/v1/token",`key=${j}`),ke=yield w._getAdditionalHeaders();return ke["Content-Type"]="application/x-www-form-urlencoded",Tn.fetch()(se,{method:"POST",headers:ke,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){B(g.idToken,"internal-error"),B(void 0!==g.idToken,"internal-error"),B(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function rt(w){const g=Tt(w);return B(g,"internal-error"),B(void 0!==g.exp,"internal-error"),B(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,d.Z)(function*(){return B(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,d.Z)(function*(){const{accessToken:O,refreshToken:j,expiresIn:se}=yield function xe(w,g){return ot.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(O,j,Number(se))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:O,expirationTime:j}=_,se=new Ct;return E&&(B("string"==typeof E,"internal-error",{appName:g}),se.refreshToken=E),O&&(B("string"==typeof O,"internal-error",{appName:g}),se.accessToken=O),j&&(B("number"==typeof j,"internal-error",{appName:g}),se.expirationTime=j),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function Ht(w,g){B("string"==typeof w||void 0===w,"internal-error",{appName:g})}class kt{constructor(g){var{uid:_,auth:E,stsTokenManager:O}=g,j=(0,ue._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.tenantId=j.tenantId||null,this.providerData=j.providerData?[...j.providerData]:[],this.metadata=new Si(j.createdAt||void 0,j.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const E=yield dt(_,_.stsTokenManager.getToken(_.auth,g));return B(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function mn(w){return Hn.apply(this,arguments)}(this,g)}reload(){return function Dt(w){return Gn.apply(this,arguments)}(this)}_assign(g){this!==g&&(B(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new kt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,d.Z)(function*(){let O=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),O=!0),_&&(yield zn(E)),yield E.auth._persistUserIfCurrent(E),O&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield dt(g,function Fn(w,g){return ct.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,O,j,se,ke,vt,xt,tn;const or=null!==(E=_.displayName)&&void 0!==E?E:void 0,Lo=null!==(O=_.email)&&void 0!==O?O:void 0,Nl=null!==(j=_.phoneNumber)&&void 0!==j?j:void 0,Lc=null!==(se=_.photoURL)&&void 0!==se?se:void 0,Pu=null!==(ke=_.tenantId)&&void 0!==ke?ke:void 0,Fc=null!==(vt=_._redirectEventId)&&void 0!==vt?vt:void 0,Sg=null!==(xt=_.createdAt)&&void 0!==xt?xt:void 0,xy=null!==(tn=_.lastLoginAt)&&void 0!==tn?tn:void 0,{uid:Uc,emailVerified:Ya,isAnonymous:xg,providerData:Zd,stsTokenManager:Mg}=_;B(Uc&&Mg,g,"internal-error");const kf=Ct.fromJSON(this.name,Mg);B("string"==typeof Uc,g,"internal-error"),Ht(or,g.name),Ht(Lo,g.name),B("boolean"==typeof Ya,g,"internal-error"),B("boolean"==typeof xg,g,"internal-error"),Ht(Nl,g.name),Ht(Lc,g.name),Ht(Pu,g.name),Ht(Fc,g.name),Ht(Sg,g.name),Ht(xy,g.name);const Ou=new kt({uid:Uc,auth:g,email:Lo,emailVerified:Ya,displayName:or,isAnonymous:xg,photoURL:Lc,phoneNumber:Nl,tenantId:Pu,stsTokenManager:kf,createdAt:Sg,lastLoginAt:xy});return Zd&&Array.isArray(Zd)&&(Ou.providerData=Zd.map(My=>Object.assign({},My))),Fc&&(Ou._redirectEventId=Fc),Ou}static _fromIdTokenResponse(g,_,E=!1){return(0,d.Z)(function*(){const O=new Ct;O.updateFromServerResponse(_);const j=new kt({uid:_.localId,auth:g,stsTokenManager:O,isAnonymous:E});return yield zn(j),j})()}}const W=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var O=this;return(0,d.Z)(function*(){O.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const O=E.storage[_];return void 0===O?null:O})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function te(w,g,_){return`firebase:${w}:${g}:${_}`}class _e{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:O,name:j}=this.auth;this.fullUserKey=te(this.userKey,O.apiKey,j),this.fullPersistenceKey=te("persistence",O.apiKey,j),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?kt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new _e(ce(W),g,E);const O=(yield Promise.all(_.map(function(){var xt=(0,d.Z)(function*(tn){if(yield tn._isAvailable())return tn});return function(tn){return xt.apply(this,arguments)}}()))).filter(xt=>xt);let j=O[0]||ce(W);const se=te(E,g.config.apiKey,g.name);let ke=null;for(const xt of _)try{const tn=yield xt._get(se);if(tn){const or=kt._fromJSON(g,tn);xt!==j&&(ke=or),j=xt;break}}catch(tn){}const vt=O.filter(xt=>xt._shouldAllowMigration);return j._shouldAllowMigration&&vt.length?(j=vt[0],ke&&(yield j._set(se,ke.toJSON())),yield Promise.all(_.map(function(){var xt=(0,d.Z)(function*(tn){if(tn!==j)try{yield tn._remove(se)}catch(or){}});return function(tn){return xt.apply(this,arguments)}}())),new _e(j,g,E)):new _e(j,g,E)})()}}function V(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if($e(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Mt(g))return"Blackberry";if(ut(g))return"Webos";if(q(g))return"Safari";if((g.includes("chrome/")||pe(g))&&!g.includes("edge/"))return"Chrome";if(et(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function z(w=(0,G.z$)()){return/firefox\//i.test(w)}function q(w=(0,G.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function pe(w=(0,G.z$)()){return/crios\//i.test(w)}function $e(w=(0,G.z$)()){return/iemobile/i.test(w)}function et(w=(0,G.z$)()){return/android/i.test(w)}function Mt(w=(0,G.z$)()){return/blackberry/i.test(w)}function ut(w=(0,G.z$)()){return/webos/i.test(w)}function Lt(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)}function On(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Lr(w=(0,G.z$)()){return Lt(w)||et(w)||ut(w)||Mt(w)||/windows phone/i.test(w)||$e(w)}function Et(w,g=[]){let _;switch(w){case"Browser":_=V((0,G.z$)());break;case"Worker":_=`${V((0,G.z$)())}-${w}`;break;default:_=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${L.SDK_VERSION}/${E}`}class Sa{constructor(g,_,E){this.app=g,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tt(this),this.idTokenSubscription=new tt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=ce(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var O,j;if(!E._deleted&&(E.persistenceManager=yield _e.create(E,g),!E._deleted)){if(null===(O=E._popupRedirectResolver)||void 0===O?void 0:O._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(se){}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(j=E.currentUser)||void 0===j?void 0:j.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var E;let O=yield _.assertedPersistence.getCurrentUser();if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const j=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,se=null==O?void 0:O._redirectEventId,ke=yield _.tryRedirectSignIn(g);(!j||j===se)&&(null==ke?void 0:ke.user)&&(O=ke.user)}return O?O._redirectEventId?(B(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)):_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(O){yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){try{yield zn(g)}catch(E){if("auth/network-request-failed"!==E.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function pt(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const E=g?(0,G.m9)(g):null;return E&&B(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){if(!_._deleted)return g&&B(_.tenantId===g.tenantId,_,"tenant-id-mismatch"),_.queue((0,d.Z)(function*(){yield _.directlySetCurrentUser(g),_.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(ce(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,d.Z)(function*(){const O=yield E.getOrInitRedirectPersistenceManager(_);return null===g?O.removeCurrentUser():O.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&ce(g)||_._popupRedirectResolver;B(E,_,"argument-error"),_.redirectPersistenceManager=yield _e.create(_,[ce(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var E,O;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(O=_.redirectUser)||void 0===O?void 0:O._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,O){if(this._deleted)return()=>{};const j="function"==typeof _?_:_.next.bind(_),se=this._isInitialized?Promise.resolve():this._initializationPromise;return B(se,this,"internal-error"),se.then(()=>j(this.currentUser)),"function"==typeof _?g.addObserver(_,E,O):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Et(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const O=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return O&&(E["X-Firebase-Client"]=O),E})()}}function Dn(w){return(0,G.m9)(w)}class tt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(_=>this.observer=_)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qt(w,g,_){const E=Dn(w);B(E._canInitEmulator,E,"emulator-config-failed"),B(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const O=!!(null==_?void 0:_.disableWarnings),j=An(g),{host:se,port:ke}=function Fr(w){const g=An(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(E);if(O){const j=O[1];return{host:j,port:Mi(E.substr(j.length+1))}}{const[j,se]=E.split(":");return{host:j,port:Mi(se)}}}(g);E.config.emulator={url:`${j}//${se}${null===ke?"":`:${ke}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:se,port:ke,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:O})}),O||function Wn(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function An(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Mi(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Dr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Xe("not implemented")}_getIdTokenResponse(g){return Xe("not implemented")}_linkToIdToken(g,_){return Xe("not implemented")}_getReauthenticationResolver(g){return Xe("not implemented")}}function en(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:resetPassword",Qt(w,g))})).apply(this,arguments)}function Vs(w,g){return jt.apply(this,arguments)}function jt(){return(jt=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ko(w,g){return mi.apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",Qt(w,g))})).apply(this,arguments)}function $i(){return($i=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signInWithPassword",Qt(w,g))})).apply(this,arguments)}function br(w,g){return as.apply(this,arguments)}function as(){return(as=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:sendOobCode",Qt(w,g))})).apply(this,arguments)}function Bs(w,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(w,g){return br(w,g)})).apply(this,arguments)}function Rn(w,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,d.Z)(function*(w,g){return br(w,g)})).apply(this,arguments)}function nu(w,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(w,g){return br(w,g)})).apply(this,arguments)}function zi(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(w,g){return br(w,g)})).apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signInWithEmailLink",Qt(w,g))})).apply(this,arguments)}function vl(){return(vl=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signInWithEmailLink",Qt(w,g))})).apply(this,arguments)}class Yo extends Dr{constructor(g,_,E,O=null){super("password",E),this._email=g,this._password=_,this._tenantId=O}static _fromEmailAndPassword(g,_){return new Yo(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new Yo(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function yl(w,g){return $i.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function _o(w,g){return js.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:qe(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Vs(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ar(w,g){return vl.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:qe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ls(w,g){return ri.apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signInWithIdp",Qt(w,g))})).apply(this,arguments)}class us extends Dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new us(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):qe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:O}=_,j=(0,ue._T)(_,["providerId","signInMethod"]);if(!E||!O)return null;const se=new us(E,O);return se.idToken=j.idToken||void 0,se.accessToken=j.accessToken||void 0,se.secret=j.secret,se.nonce=j.nonce,se.pendingToken=j.pendingToken||null,se}_getIdTokenResponse(g){return ls(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,ls(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ls(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,G.xO)(_)}return g}}function Md(w,g){return ru.apply(this,arguments)}function ru(){return(ru=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:sendVerificationCode",Qt(w,g))})).apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signInWithPhoneNumber",Qt(w,g))})).apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(w,g){const _=yield ur(w,"POST","/v1/accounts:signInWithPhoneNumber",Qt(w,g));if(_.temporaryProof)throw Kn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const _c={USER_NOT_FOUND:"user-not-found"};function iu(){return(iu=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signInWithPhoneNumber",Qt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),_c)})).apply(this,arguments)}class vo extends Dr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new vo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new vo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Pd(w,g){return Qo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function yo(w,g){return Ds.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Od(w,g){return iu.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:O}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:O}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:O,temporaryProof:j}=g;return E||_||O||j?new vo({verificationId:_,verificationCode:E,phoneNumber:O,temporaryProof:j}):null}}class As{constructor(g){var _,E,O,j,se,ke;const vt=(0,G.zd)((0,G.pd)(g)),xt=null!==(_=vt.apiKey)&&void 0!==_?_:null,tn=null!==(E=vt.oobCode)&&void 0!==E?E:null,or=function Rd(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=vt.mode)&&void 0!==O?O:null);B(xt&&tn&&or,"argument-error"),this.apiKey=xt,this.operation=or,this.code=tn,this.continueUrl=null!==(j=vt.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==(se=vt.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(ke=vt.tenantId)&&void 0!==ke?ke:null}static parseLink(g){const _=function gf(w){const g=(0,G.zd)((0,G.pd)(w)).link,_=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||_||g||w}(g);try{return new As(_)}catch(E){return null}}}let Ma=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return Yo._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const O=As.parseLink(E);return B(O,"argument-error"),Yo._fromEmailAndCode(_,O.code,O.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class cs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Jo extends cs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class _i extends Jo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return B("providerId"in _&&"signInMethod"in _,"argument-error"),us._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return B(g.idToken||g.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return _i.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return _i.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:O,pendingToken:j,nonce:se,providerId:ke}=g;if(!E&&!O&&!_&&!j||!ke)return null;try{return new _i(ke)._credential({idToken:_,accessToken:E,nonce:se,pendingToken:j})}catch(vt){return null}}}let yc=(()=>{class w extends Jo{constructor(){super("facebook.com")}static credential(_){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),wo=(()=>{class w extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:O}=_;if(!E&&!O)return null;try{return w.credential(E,O)}catch(j){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Xo=(()=>{class w extends Jo{constructor(){super("github.com")}static credential(_){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class bo extends Dr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return ls(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,ls(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ls(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:O,pendingToken:j}=_;return E&&O&&j&&E===O?new bo(E,j):null}static _create(g,_){return new bo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pi extends cs{constructor(g){B(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Pi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Pi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=bo.fromJSON(g);return B(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return bo._create(E,_)}catch(O){return null}}}let ds=(()=>{class w extends Jo{constructor(){super("twitter.com")}static credential(_,E){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:O}=_;if(!E||!O)return null;try{return w.credential(E,O)}catch(j){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function hs(w,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signUp",Qt(w,g))})).apply(this,arguments)}class qn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,O=!1){return(0,d.Z)(function*(){const j=yield kt._fromIdTokenResponse(g,E,O),se=Co(E);return new qn({user:j,providerId:se,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const O=Co(E);return new qn({user:g,providerId:O,_tokenResponse:E,operationType:_})})()}}function Co(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function kd(w){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(w){var g;const _=Dn(w);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new qn({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield hs(_,{returnSecureToken:!0}),O=yield qn._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(O.user),O})).apply(this,arguments)}class wl extends G.ZR{constructor(g,_,E,O){var j;super(_.code,_.message),this.operationType=E,this.user=O,Object.setPrototypeOf(this,wl.prototype),this.customData={appName:g.name,tenantId:null!==(j=g.tenantId)&&void 0!==j?j:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,O){return new wl(g,_,E,O)}}function au(w,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(j=>{throw"auth/multi-factor-auth-required"===j.code?wl._fromErrorAndOperation(w,j,g,E):j})}function Pa(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Ss(w,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w);yield Hs(!0,_,g);const{providerUserInfo:E}=yield Nr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),O=Pa(E||[]);return _.providerData=_.providerData.filter(j=>O.has(j.providerId)),O.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Oa(w,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(w,g,_=!1){const E=yield dt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return qn._forOperation(w,"link",E)})).apply(this,arguments)}function Hs(w,g,_){return $s.apply(this,arguments)}function $s(){return($s=(0,d.Z)(function*(w,g,_){yield zn(g);const O=!1===w?"provider-already-linked":"no-such-provider";B(Pa(g.providerData).has(_)===w,g.auth,O)})).apply(this,arguments)}function yn(w,g){return bl.apply(this,arguments)}function bl(){return(bl=(0,d.Z)(function*(w,g,_=!1){const{auth:E}=w,O="reauthenticate";try{const j=yield dt(w,au(E,O,g,w),_);B(j.idToken,E,"internal-error");const se=Tt(j.idToken);B(se,E,"internal-error");const{sub:ke}=se;return B(w.uid===ke,E,"user-mismatch"),qn._forOperation(w,O,j)}catch(j){throw"auth/user-not-found"===(null==j?void 0:j.code)&&qe(E,"user-mismatch"),j}})).apply(this,arguments)}function zs(w,g){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(w,g,_=!1){const E="signIn",O=yield au(w,E,g),j=yield qn._fromIdTokenResponse(w,E,O);return _||(yield w._updateCurrentUser(j.user)),j})).apply(this,arguments)}function Sr(w,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(w,g){return zs(Dn(w),g)})).apply(this,arguments)}function Ra(w,g){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w);return yield Hs(!1,_,g.providerId),Oa(_,g)})).apply(this,arguments)}function Ur(w,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(w,g){return yn((0,G.m9)(w),g)})).apply(this,arguments)}function Gs(w,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,d.Z)(function*(w,g){return ur(w,"POST","/v1/accounts:signInWithCustomToken",Qt(w,g))})).apply(this,arguments)}function Oi(w,g){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(w,g){const _=Dn(w),E=yield Gs(_,{token:g,returnSecureToken:!0}),O=yield qn._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(O.user),O})).apply(this,arguments)}class gs{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?At._fromServerResponse(g,_):qe(g,"internal-error")}}class At extends gs{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new At(_)}}function ta(w,g,_){var E;B((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),B(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(B(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(B(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function na(w,g,_){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w),O={requestType:"PASSWORD_RESET",email:g};_&&ta(E,O,_),yield Rn(E,O)})).apply(this,arguments)}function lu(w,g,_){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(w,g,_){yield en((0,G.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function ra(w,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,d.Z)(function*(w,g){yield Ko((0,G.m9)(w),{oobCode:g})})).apply(this,arguments)}function Oe(w,g){return zt.apply(this,arguments)}function zt(){return(zt=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w),E=yield en(_,{oobCode:g}),O=E.requestType;switch(B(O,_,"internal-error"),O){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(E.mfaInfo,_,"internal-error");default:B(E.email,_,"internal-error")}let j=null;return E.mfaInfo&&(j=gs._fromServerResponse(Dn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:j},operation:O}})).apply(this,arguments)}function uu(w,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(w,g){const{data:_}=yield Oe((0,G.m9)(w),g);return _.email})).apply(this,arguments)}function sa(w,g,_){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(w,g,_){const E=Dn(w),O=yield hs(E,{returnSecureToken:!0,email:g,password:_}),j=yield qn._fromIdTokenResponse(E,"signIn",O);return yield E._updateCurrentUser(j.user),j})).apply(this,arguments)}function Ri(w,g,_){return Sr((0,G.m9)(w),Ma.credential(g,_))}function Cl(w,g,_){return oa.apply(this,arguments)}function oa(){return(oa=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w),O={requestType:"EMAIL_SIGNIN",email:g};B(_.handleCodeInApp,E,"argument-error"),_&&ta(E,O,_),yield nu(E,O)})).apply(this,arguments)}function Nd(w,g){const _=As.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function El(w,g,_){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w),O=Ma.credentialWithLink(g,_||fe());return B(O._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Sr(E,O)})).apply(this,arguments)}function So(w,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:createAuthUri",Qt(w,g))})).apply(this,arguments)}function Wi(w,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,d.Z)(function*(w,g){const E={identifier:g,continueUri:St()?fe():"http://localhost"},{signinMethods:O}=yield So((0,G.m9)(w),E);return O||[]})).apply(this,arguments)}function Ws(w,g){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w),O={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&ta(_.auth,O,g);const{email:j}=yield Bs(_.auth,O);j!==w.email&&(yield w.reload())})).apply(this,arguments)}function cu(w,g,_){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w),j={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&ta(E.auth,j,_);const{email:se}=yield zi(E.auth,j);se!==w.email&&(yield w.reload())})).apply(this,arguments)}function du(w,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,d.Z)(function*(w,g){return dn(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ka(w,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,G.m9)(w),j={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},se=yield dt(E,du(E.auth,j));E.displayName=se.displayName||null,E.photoURL=se.photoUrl||null;const ke=E.providerData.find(({providerId:vt})=>"password"===vt);ke&&(ke.displayName=E.displayName,ke.photoURL=E.photoURL),yield E._updateTokensIfNecessary(se)})).apply(this,arguments)}function Il(w,g){return La((0,G.m9)(w),g,null)}function Na(w,g){return La((0,G.m9)(w),null,g)}function La(w,g,_){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(w,g,_){const{auth:E}=w,j={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(j.email=g),_&&(j.password=_);const se=yield dt(w,Vs(E,j));yield w._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class Zs{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class Tl extends Zs{constructor(g,_,E,O){super(g,_,E),this.username=O}}class Fa extends Zs{constructor(g,_){super(g,"facebook.com",_)}}class hu extends Tl{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Ks extends Zs{constructor(g,_){super(g,"google.com",_)}}class Ps extends Tl{constructor(g,_,E){super(g,"twitter.com",_,E)}}function Dl(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function la(w){var g,_;if(!w)return null;const{providerId:E}=w,O=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},j=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const se=null===(_=null===(g=Tt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(se)return new Zs(j,"anonymous"!==se&&"custom"!==se?se:null)}if(!E)return null;switch(E){case"facebook.com":return new Fa(j,O);case"github.com":return new hu(j,O);case"google.com":return new Ks(j,O);case"twitter.com":return new Ps(j,O,w.screenName||null);case"custom":case"anonymous":return new Zs(j,null);default:return new Zs(j,E,O)}}(_)}class Ys{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ys("enroll",g)}static _fromMfaPendingCredential(g){return new Ys("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ys._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return Ys._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ua{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=Dn(g),O=_.customData._serverResponse,j=(O.mfaInfo||[]).map(ke=>gs._fromServerResponse(E,ke));B(O.mfaPendingCredential,E,"internal-error");const se=Ys._fromMfaPendingCredential(O.mfaPendingCredential);return new ua(se,j,function(){var ke=(0,d.Z)(function*(vt){const xt=yield vt._process(E,se);delete O.mfaInfo,delete O.mfaPendingCredential;const tn=Object.assign(Object.assign({},O),{idToken:xt.idToken,refreshToken:xt.refreshToken});switch(_.operationType){case"signIn":const or=yield qn._fromIdTokenResponse(E,_.operationType,tn);return yield E._updateCurrentUser(or.user),or;case"reauthenticate":return B(_.user,E,"internal-error"),qn._forOperation(_.user,_.operationType,tn);default:qe(E,"internal-error")}});return function(vt){return ke.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function Va(w,g){var _;const E=(0,G.m9)(w),O=g;return B(g.customData.operationType,E,"argument-error"),B(null===(_=O.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),ua._fromError(E,O)}function Oo(w,g){return dn(w,"POST","/v2/accounts/mfaEnrollment:start",Qt(w,g))}class gu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>gs._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new gu(g)}getSession(){var g=this;return(0,d.Z)(function*(){return Ys._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var E=this;return(0,d.Z)(function*(){const O=g,j=yield E.getSession(),se=yield dt(E.user,O._process(E.user.auth,j,_));return yield E.user._updateTokensIfNecessary(se),E.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){const E="string"==typeof g?g:g.uid,O=yield _.user.getIdToken(),j=yield dt(_.user,function pu(w,g){return dn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(w,g))}(_.user.auth,{idToken:O,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:se})=>se!==E),yield _.user._updateTokensIfNecessary(j);try{yield _.user.reload()}catch(se){if("auth/user-token-expired"!==se.code)throw se}})()}}const ki=new WeakMap;function ms(w){const g=(0,G.m9)(w);return ki.has(g)||ki.set(g,gu._fromUser(g)),ki.get(g)}const ca="__sak";class bc{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nn=(()=>{class w extends bc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ro(){const w=(0,G.z$)();return q(w)||Lt(w)}()&&function xi(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Lr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const O=this.storage.getItem(E),j=this.localCache[E];O!==j&&_(E,j,O)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((ke,vt,xt)=>{this.notifyListeners(ke,xt)});const O=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ke=this.storage.getItem(O);if(_.newValue!==ke)null!==_.newValue?this.storage.setItem(O,_.newValue):this.storage.removeItem(O);else if(this.localCache[O]===_.newValue&&!E)return}const j=()=>{const ke=this.storage.getItem(O);!E&&this.localCache[O]===ke||this.notifyListeners(O,ke)},se=this.storage.getItem(O);!function rn(){return(0,G.w1)()&&10===document.documentMode}()||se===_.newValue||_.newValue===_.oldValue?j():setTimeout(j,10)}notifyListeners(_,E){this.localCache[_]=E;const O=this.listeners[_];if(O)for(const j of Array.from(O))j(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,O)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:O}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var O=()=>super._set,j=this;return(0,d.Z)(function*(){yield O().call(j,_,E),j.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,O=this;return(0,d.Z)(function*(){const j=yield E().call(O,_);return O.localCache[_]=JSON.stringify(j),j})()}_remove(_){var E=()=>super._remove,O=this;return(0,d.Z)(function*(){yield E().call(O,_),delete O.localCache[_]})()}}return w.type="LOCAL",w})(),C=(()=>{class w extends bc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let P=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(j=>j.isListeningto(_));if(E)return E;const O=new w(_);return this.receivers.push(O),O}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const O=_,{eventId:j,eventType:se,data:ke}=O.data,vt=E.handlersMap[se];if(!(null==vt?void 0:vt.size))return;O.ports[0].postMessage({status:"ack",eventId:j,eventType:se});const xt=Array.from(vt).map(function(){var or=(0,d.Z)(function*(Lo){return Lo(O.origin,ke)});return function(Lo){return or.apply(this,arguments)}}()),tn=yield function I(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(xt);O.ports[0].postMessage({status:"done",eventId:j,eventType:se,response:tn})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function K(w="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return w+_}class Pe{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var O=this;return(0,d.Z)(function*(){const j="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!j)throw new Error("connection_unavailable");let se,ke;return new Promise((vt,xt)=>{const tn=K("",20);j.port1.start();const or=setTimeout(()=>{xt(new Error("unsupported_event"))},E);ke={messageChannel:j,onMessage(Lo){const Nl=Lo;if(Nl.data.eventId===tn)switch(Nl.data.status){case"ack":clearTimeout(or),se=setTimeout(()=>{xt(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),vt(Nl.data.response);break;default:clearTimeout(or),clearTimeout(se),xt(new Error("invalid_response"))}}},O.handlers.add(ke),j.port1.addEventListener("message",ke.onMessage),O.target.postMessage({eventType:g,eventId:tn,data:_},[j.port2])}).finally(()=>{ke&&O.removeMessageHandler(ke)})})()}}function Ke(){return window}function Xn(){return void 0!==Ke().WorkerGlobalScope&&"function"==typeof Ke().importScripts}function yt(){return(yt=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const _u="firebaseLocalStorageDb",yu="firebaseLocalStorage",Al="fbase_key";class ii{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function jr(w,g){return w.transaction([yu],g?"readwrite":"readonly").objectStore(yu)}function si(){const w=indexedDB.open(_u,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(yu,{keyPath:Al})}catch(O){_(O)}}),w.addEventListener("success",(0,d.Z)(function*(){const E=w.result;E.objectStoreNames.contains(yu)?g(E):(E.close(),yield function Ic(){const w=indexedDB.deleteDatabase(_u);return new ii(w).toPromise()}(),g(yield si()))}))})}function Ba(w,g,_){return vu.apply(this,arguments)}function vu(){return(vu=(0,d.Z)(function*(w,g,_){const E=jr(w,!0).put({[Al]:g,value:_});return new ii(E).toPromise()})).apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(w,g){const _=jr(w,!1).get(g),E=yield new ii(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function _s(w,g){const _=jr(w,!0).delete(g);return new ii(_).toPromise()}const xl=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield si()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let O=0;for(;;)try{const j=yield E._openDb();return yield _(j)}catch(j){if(O++>3)throw j;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Xn()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=P._getInstance(function bg(){return Xn()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(O,j){return{keyProcessed:(yield _._poll()).includes(j.key)}});return function(O,j){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(O,j){return["keyChanged"]});return function(O,j){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,O;if(_.activeServiceWorker=yield function Gt(){return yt.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Pe(_.activeServiceWorker);const j=yield _.sender._send("ping",{},800);!j||(null===(E=j[0])||void 0===E?void 0:E.fulfilled)&&(null===(O=j[0])||void 0===O?void 0:O.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Rs(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch(O){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield si();return yield Ba(_,ca,"1"),yield _s(_,ca),!0}catch(_){}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var O=this;return(0,d.Z)(function*(){return O._withPendingWrite((0,d.Z)(function*(){return yield O._withRetries(j=>Ba(j,_,E)),O.localCache[_]=E,O.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const O=yield E._withRetries(j=>function Sl(w,g){return Qs.apply(this,arguments)}(j,_));return E.localCache[_]=O,O})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(O=>_s(O,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(se=>{const ke=jr(se,!1).getAll();return new ii(ke).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const O=[],j=new Set;for(const{fbase_key:se,value:ke}of E)j.add(se),JSON.stringify(_.localCache[se])!==JSON.stringify(ke)&&(_.notifyListeners(se,ke),O.push(se));for(const se of Object.keys(_.localCache))_.localCache[se]&&!j.has(se)&&(_.notifyListeners(se,null),O.push(se));return O})()}notifyListeners(_,E){this.localCache[_]=E;const O=this.listeners[_];if(O)for(const j of Array.from(O))j(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function qi(w,g){return dn(w,"POST","/v2/accounts/mfaSignIn:start",Qt(w,g))}function Pl(){return(Pl=(0,d.Z)(function*(w){return(yield dn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wu(w){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=O=>{const j=Le("internal-error");j.customData=O,_(j)},E.type="text/javascript",E.charset="UTF-8",function Js(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function ha(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Zi=1e12;class eo{constructor(g){this.auth=g,this.counter=Zi,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new Fd(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||Zi;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Zi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(g||Zi))||void 0===E||E.execute(),""})()}}class Fd{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const O="string"==typeof g?document.getElementById(g):g;B(O,"argument-error",{appName:_}),this.container=O,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cu(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const to=ha("rcb"),Ud=new lt(3e4,6e4);class sr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ke().grecaptcha}load(g,_=""){return B(function Vd(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Ke().grecaptcha):new Promise((E,O)=>{const j=Ke().setTimeout(()=>{O(Le(g,"network-request-failed"))},Ud.get());Ke()[to]=()=>{Ke().clearTimeout(j),delete Ke()[to];const ke=Ke().grecaptcha;if(!ke)return void O(Le(g,"internal-error"));const vt=ke.render;ke.render=(xt,tn)=>{const or=vt(xt,tn);return this.counter++,or},this.hostLanguage=_,E(ke)},wu(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:to,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(j),O(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Ke().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cg{load(g){return(0,d.Z)(function*(){return new eo(g)})()}clearedOneInstance(){}}const Tc="recaptcha",Bd={theme:"light",type:"image"};class jd{constructor(g,_=Object.assign({},Bd),E){this.parameters=_,this.type=Tc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(E),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const O="string"==typeof g?document.getElementById(g):g;B(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cg:new sr,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(j=>{const se=ke=>{!ke||(g.tokenChangeListeners.delete(se),j(ke))};g.tokenChangeListeners.add(se),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=Ke()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){B(St()&&!Xn(),g.auth,"internal-error"),yield function vf(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Ml(w){return Pl.apply(this,arguments)}(g.auth);B(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Eu{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=vo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ko(w,g,_){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,d.Z)(function*(w,g,_){const E=Dn(w),O=yield $a(E,g,(0,G.m9)(_));return new Eu(O,j=>Sr(E,j))})).apply(this,arguments)}function fr(w,g,_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w);yield Hs(!1,E,"phone");const O=yield $a(E.auth,g,(0,G.m9)(_));return new Eu(O,j=>Ra(E,j))})).apply(this,arguments)}function ys(w,g,_){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w),O=yield $a(E.auth,g,(0,G.m9)(_));return new Eu(O,j=>Ur(E,j))})).apply(this,arguments)}function $a(w,g,_){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(w,g,_){var E;const O=yield _.verify();try{let j;if(B("string"==typeof O,w,"argument-error"),B(_.type===Tc,w,"argument-error"),j="string"==typeof g?{phoneNumber:g}:g,"session"in j){const se=j.session;if("phoneNumber"in j)return B("enroll"===se.type,w,"internal-error"),(yield Oo(w,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:j.phoneNumber,recaptchaToken:O}})).phoneSessionInfo.sessionInfo;{B("signin"===se.type,w,"internal-error");const ke=(null===(E=j.multiFactorHint)||void 0===E?void 0:E.uid)||j.multiFactorUid;return B(ke,w,"missing-multi-factor-info"),(yield qi(w,{mfaPendingCredential:se.credential,mfaEnrollmentId:ke,phoneSignInInfo:{recaptchaToken:O}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Md(w,{phoneNumber:j.phoneNumber,recaptchaToken:O});return se}}finally{_._reset()}})).apply(this,arguments)}function vs(w,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(w,g){yield Oa((0,G.m9)(w),g)})).apply(this,arguments)}let za=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Dn(_)}verifyPhoneNumber(_,E){return $a(this.auth,_,(0,G.m9)(E))}static credential(_,E){return vo._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:O}=_;return E&&O?vo._fromTokenResponse(E,O):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function oi(w,g){return g?ce(g):(B(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class no extends Dr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ls(g,this._buildIdpRequest())}_linkToIdToken(g,_){return ls(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return ls(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Ac(w){return zs(w.auth,new no(w),w.bypassAuthState)}function Ol(w){const{auth:g,user:_}=w;return B(_,g,"internal-error"),yn(_,new no(w),w.bypassAuthState)}function Hd(w){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,d.Z)(function*(w){const{auth:g,user:_}=w;return B(_,g,"internal-error"),Oa(_,new no(w),w.bypassAuthState)})).apply(this,arguments)}class Iu{constructor(g,_,E,O,j=!1){this.auth=g,this.resolver=E,this.user=O,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(E,O){g.pendingPromise={resolve:E,reject:O};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(j){g.reject(j)}});return function(E,O){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:O,postBody:j,tenantId:se,error:ke,type:vt}=g;if(ke)return void _.reject(ke);const xt={auth:_.auth,requestUri:E,sessionId:O,tenantId:se||void 0,postBody:j||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(vt)(xt))}catch(tn){_.reject(tn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ac;case"linkViaPopup":case"linkViaRedirect":return Hd;case"reauthViaPopup":case"reauthViaRedirect":return Ol;default:qe(this.auth,"internal-error")}}resolve(g){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ws=new lt(2e3,1e4);function wf(w,g,_){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(w,g,_){const E=Dn(w);Te(w,g,cs);const O=oi(E,_);return new xc(E,"signInViaPopup",g,O).executeNotNull()})).apply(this,arguments)}function wy(w,g,_){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w);Te(E.auth,g,cs);const O=oi(E.auth,_);return new xc(E.auth,"reauthViaPopup",g,O,E).executeNotNull()})).apply(this,arguments)}function pa(w,g,_){return Du.apply(this,arguments)}function Du(){return(Du=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w);Te(E.auth,g,cs);const O=oi(E.auth,_);return new xc(E.auth,"linkViaPopup",g,O,E).executeNotNull()})).apply(this,arguments)}let xc=(()=>{class w extends Iu{constructor(_,E,O,j,se){super(_,E,j,se),this.provider=O,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return B(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){ne(1===_.filter.length,"Popup operations only handle one event");const E=K();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(O=>{_.reject(O)}),_.resolver._isIframeWebStorageSupported(_.auth,O=>{O||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,O;this.pollId=(null===(O=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===O?void 0:O.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ws.get())};_()}}return w.currentPopupAction=null,w})();const Li=new Map;class Wa extends Iu{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=Li.get(_.auth._key());if(!E){try{const j=(yield function Ki(w,g){return ro.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(j)}catch(O){E=()=>Promise.reject(O)}Li.set(_.auth._key(),E)}return _.bypassAuthState||Li.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const O=yield E.auth._redirectUserForId(g.eventId);if(O)return E.user=O,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ro(){return(ro=(0,d.Z)(function*(w,g){const _=$d(g),E=Rl(w);if(!(yield E._isAvailable()))return!1;const O="true"===(yield E._get(_));return yield E._remove(_),O})).apply(this,arguments)}function Cf(w,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(w,g){return Rl(w)._set($d(g),"true")})).apply(this,arguments)}function qa(){Li.clear()}function Rl(w){return ce(w._redirectPersistence)}function $d(w){return te("pendingRedirect",w.config.apiKey,w.name)}function D(w,g,_){return function S(w,g,_){return k.apply(this,arguments)}(w,g,_)}function k(){return(k=(0,d.Z)(function*(w,g,_){const E=Dn(w);Te(w,g,cs);const O=oi(E,_);return yield Cf(O,E),O._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function Z(w,g,_){return function re(w,g,_){return de.apply(this,arguments)}(w,g,_)}function de(){return(de=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w);Te(E.auth,g,cs);const O=oi(E.auth,_);yield Cf(O,E.auth);const j=yield Hr(E);return O._openRedirect(E.auth,g,"reauthViaRedirect",j)})).apply(this,arguments)}function je(w,g,_){return function Ze(w,g,_){return Nt.apply(this,arguments)}(w,g,_)}function Nt(){return(Nt=(0,d.Z)(function*(w,g,_){const E=(0,G.m9)(w);Te(E.auth,g,cs);const O=oi(E.auth,_);yield Hs(!1,E,g.providerId),yield Cf(O,E.auth);const j=yield Hr(E);return O._openRedirect(E.auth,g,"linkViaRedirect",j)})).apply(this,arguments)}function Bt(w,g){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(w,g){return yield Dn(w)._initializationPromise,Ot(w,g,!1)})).apply(this,arguments)}function Ot(w,g){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,d.Z)(function*(w,g,_=!1){const E=Dn(w),O=oi(E,g),se=yield new Wa(E,O,_).execute();return se&&!_&&(delete se.user._redirectEventId,yield E._persistUserIfCurrent(se.user),yield E._setRedirectUser(null,g)),se})).apply(this,arguments)}function Hr(w){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(w){const g=K(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Fi{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function zd(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ai(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!ai(g)){const O=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,O))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yi(g))}saveEventToCache(g){this.cachedEventUids.add(yi(g)),this.lastProcessedEventTime=Date.now()}}function yi(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function ai({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Mc(w){return Au.apply(this,arguments)}function Au(){return(Au=(0,d.Z)(function*(w,g={}){return dn(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Su=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ef=/^https?/;function Wd(){return(Wd=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Mc(w);for(const _ of g)try{if(Za(_))return}catch(E){}qe(w,"unauthorized-domain")})).apply(this,arguments)}function Za(w){const g=fe(),{protocol:_,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const se=new URL(w);return""===se.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&se.hostname===E}if(!Ef.test(_))return!1;if(Su.test(w))return E===w;const O=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+O+"|"+O+")$","i").test(E)}const Pc=new lt(3e4,6e4);function If(){const w=Ke().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let xu=null;function Tf(w){return xu=xu||function by(w){return new Promise((g,_)=>{var E,O,j;function se(){If(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{If(),_(Le(w,"network-request-failed"))},timeout:Pc.get()})}if(null===(O=null===(E=Ke().gapi)||void 0===E?void 0:E.iframes)||void 0===O?void 0:O.Iframe)g(gapi.iframes.getContext());else{if(!(null===(j=Ke().gapi)||void 0===j?void 0:j.load)){const ke=ha("iframefcb");return Ke()[ke]=()=>{gapi.load?se():_(Le(w,"network-request-failed"))},wu(`https://apis.google.com/js/api.js?onload=${ke}`).catch(vt=>_(vt))}se()}}).catch(g=>{throw xu=null,g})}(w),xu}const Oc=new lt(5e3,15e3),Ey={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ka=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kc(w){const g=w.config;B(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?an(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:L.SDK_VERSION},O=Ka.get(w.config.apiHost);O&&(E.eid=O);const j=w._getFrameworks();return j.length&&(E.fw=j.join(",")),`${_}?${(0,G.xO)(E).slice(1)}`}function Eg(){return Eg=(0,d.Z)(function*(w){const g=yield Tf(w),_=Ke().gapi;return B(_,w,"internal-error"),g.open({where:document.body,url:kc(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ey,dontclear:!0},E=>new Promise(function(){var O=(0,d.Z)(function*(j,se){yield E.restyle({setHideOnLeave:!1});const ke=Le(w,"network-request-failed"),vt=Ke().setTimeout(()=>{se(ke)},Oc.get());function xt(){Ke().clearTimeout(vt),j(E)}E.ping(xt).then(xt,()=>{se(ke)})});return function(j,se){return O.apply(this,arguments)}}()))}),Eg.apply(this,arguments)}const tb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xf{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function qd(w,g,_,E,O,j){B(w.config.authDomain,w,"auth-domain-config-required"),B(w.config.apiKey,w,"invalid-api-key");const se={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:L.SDK_VERSION,eventId:O};if(g instanceof cs){g.setDefaultLanguage(w.languageCode),se.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(se.customParameters=JSON.stringify(g.getCustomParameters()));for(const[vt,xt]of Object.entries(j||{}))se[vt]=xt}if(g instanceof Jo){const vt=g.getScopes().filter(xt=>""!==xt);vt.length>0&&(se.scopes=vt.join(","))}w.tenantId&&(se.tid=w.tenantId);const ke=se;for(const vt of Object.keys(ke))void 0===ke[vt]&&delete ke[vt];return`${function Ty({config:w}){return w.emulator?an(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(ke).slice(1)}`}const Ig="webStorageSupport",Mu=class ga{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=C,this._completeRedirectFn=Ot}_openPopup(g,_,E,O){var j=this;return(0,d.Z)(function*(){var se;ne(null===(se=j.eventManagers[g._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const ke=qd(g,_,E,fe(),O);return function Mf(w,g,_,E=500,O=600){const j=Math.max((window.screen.availHeight-O)/2,0).toString(),se=Math.max((window.screen.availWidth-E)/2,0).toString();let ke="";const vt=Object.assign(Object.assign({},tb),{width:E.toString(),height:O.toString(),top:j,left:se}),xt=(0,G.z$)().toLowerCase();_&&(ke=pe(xt)?"_blank":_),z(xt)&&(g=g||"http://localhost",vt.scrollbars="yes");const tn=Object.entries(vt).reduce((Lo,[Nl,Lc])=>`${Lo}${Nl}=${Lc},`,"");if(function cr(w=(0,G.z$)()){var g;return Lt(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(xt)&&"_self"!==ke)return function Pf(w,g){const _=document.createElement("a");_.href=w,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",ke),new xf(null);const or=window.open(g||"",ke,tn);B(or,w,"popup-blocked");try{or.focus()}catch(Lo){}return new xf(or)}(g,ke,K())})()}_openRedirect(g,_,E,O){var j=this;return(0,d.Z)(function*(){return yield j._originValidation(g),function pn(w){Ke().location.href=w}(qd(g,_,E,fe(),O)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:O,promise:j}=this.eventManagers[_];return O?Promise.resolve(O):(ne(j,"If manager is not set, promise should be"),j)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const E=yield function kl(w){return Eg.apply(this,arguments)}(g),O=new Fi(g);return E.register("authEvent",j=>(B(null==j?void 0:j.authEvent,g,"invalid-auth-event"),{status:O.onEvent(j.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:O},_.iframes[g._key()]=E,O})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Ig,{type:Ig},O=>{var j;const se=null===(j=null==O?void 0:O[0])||void 0===j?void 0:j[Ig];void 0!==se&&_(!!se),qe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Gd(w){return Wd.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Lr()||q()||Lt()}};class Dg extends class Tg{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return Xe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Dg(g)}_finalizeEnroll(g,_,E){return function ir(w,g){return dn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(w,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ld(w,g){return dn(w,"POST","/v2/accounts/mfaSignIn:finalize",Qt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dy=(()=>{class w{constructor(){}static assertion(_){return Dg._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Rf="@firebase/auth",Ay="0.19.11";class Sy{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{var O;g((null===(O=E)||void 0===O?void 0:O.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Nc(w){(0,L._registerComponent)(new Ee.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),O=g.getProvider("heartbeat"),{apiKey:j,authDomain:se}=E.options;return((ke,vt)=>{B(j&&!j.includes(":"),"invalid-api-key",{appName:ke.name}),B(!(null==se?void 0:se.includes(":")),"argument-error",{appName:ke.name});const xt={apiKey:j,authDomain:se,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Et(w)},tn=new Sa(ke,vt,xt);return function Be(w,g){const _=(null==g?void 0:g.persistence)||[],E=(Array.isArray(_)?_:[_]).map(ce);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(tn,_),tn})(E,O)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new Ee.wA("auth-internal",g=>{const _=Dn(g.getProvider("auth").getImmediate());return new Sy(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Rf,Ay,function Ag(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,L.registerVersion)(Rf,Ay,"esm2017")}("Browser")},2090:(bt,Me,U)=>{"use strict";U.d(Me,{$s:()=>Si,BH:()=>Fe,DV:()=>Pn,Dv:()=>qr,G6:()=>Xe,GJ:()=>Qt,L:()=>ye,LL:()=>St,Lj:()=>Ht,Mn:()=>Je,Pz:()=>lt,Sg:()=>He,UG:()=>Ae,UI:()=>Ir,US:()=>ge,Wj:()=>Hn,X3:()=>Ct,Yr:()=>B,ZB:()=>oe,ZR:()=>fe,b$:()=>Le,cI:()=>pt,d:()=>Re,dS:()=>Tt,eu:()=>me,g5:()=>ue,gK:()=>It,gQ:()=>Fn,h$:()=>he,hl:()=>ne,hu:()=>L,jU:()=>st,lb:()=>gi,m9:()=>Dt,ne:()=>ct,p$:()=>Q,pd:()=>Kn,r3:()=>dn,ru:()=>qe,tV:()=>X,uI:()=>we,ug:()=>rt,vZ:()=>ur,w1:()=>Te,w9:()=>Yt,xO:()=>kr,xb:()=>rr,z$:()=>ze,zI:()=>ce,zd:()=>wr});var d=U(5861);const L=function(ee,W){if(!ee)throw ue(W)},ue=function(ee){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ee)},le=function(ee){const W=[];let te=0;for(let _e=0;_e<ee.length;_e++){let V=ee.charCodeAt(_e);V<128?W[te++]=V:V<2048?(W[te++]=V>>6|192,W[te++]=63&V|128):55296==(64512&V)&&_e+1<ee.length&&56320==(64512&ee.charCodeAt(_e+1))?(V=65536+((1023&V)<<10)+(1023&ee.charCodeAt(++_e)),W[te++]=V>>18|240,W[te++]=V>>12&63|128,W[te++]=V>>6&63|128,W[te++]=63&V|128):(W[te++]=V>>12|224,W[te++]=V>>6&63|128,W[te++]=63&V|128)}return W},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,W){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let V=0;V<ee.length;V+=3){const z=ee[V],q=V+1<ee.length,pe=q?ee[V+1]:0,$e=V+2<ee.length,et=$e?ee[V+2]:0;let Lt=(15&pe)<<2|et>>6,On=63&et;$e||(On=64,q||(Lt=64)),_e.push(te[z>>2],te[(3&z)<<4|pe>>4],te[Lt],te[On])}return _e.join("")},encodeString(ee,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(ee):this.encodeByteArray(le(ee),W)},decodeString(ee,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(ee):function(ee){const W=[];let te=0,_e=0;for(;te<ee.length;){const V=ee[te++];if(V<128)W[_e++]=String.fromCharCode(V);else if(V>191&&V<224){const z=ee[te++];W[_e++]=String.fromCharCode((31&V)<<6|63&z)}else if(V>239&&V<365){const $e=((7&V)<<18|(63&ee[te++])<<12|(63&ee[te++])<<6|63&ee[te++])-65536;W[_e++]=String.fromCharCode(55296+($e>>10)),W[_e++]=String.fromCharCode(56320+(1023&$e))}else{const z=ee[te++],q=ee[te++];W[_e++]=String.fromCharCode((15&V)<<12|(63&z)<<6|63&q)}}return W.join("")}(this.decodeStringToByteArray(ee,W))},decodeStringToByteArray(ee,W){this.init_();const te=W?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let V=0;V<ee.length;){const z=te[ee.charAt(V++)],pe=V<ee.length?te[ee.charAt(V)]:0;++V;const et=V<ee.length?te[ee.charAt(V)]:64;++V;const ut=V<ee.length?te[ee.charAt(V)]:64;if(++V,null==z||null==pe||null==et||null==ut)throw Error();_e.push(z<<2|pe>>4),64!==et&&(_e.push(pe<<4&240|et>>2),64!==ut&&_e.push(et<<6&192|ut))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}},he=function(ee){const W=le(ee);return ge.encodeByteArray(W,!0)},ye=function(ee){return he(ee).replace(/\./g,"")},X=function(ee){try{return ge.decodeString(ee,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function Q(ee){return oe(void 0,ee)}function oe(ee,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return W}for(const te in W)!W.hasOwnProperty(te)||!Ye(te)||(ee[te]=oe(ee[te],W[te]));return ee}function Ye(ee){return"__proto__"!==ee}class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,te)=>{this.resolve=W,this.reject=te})}wrapCallback(W){return(te,_e)=>{te?this.reject(te):this.resolve(_e),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(te):W(te,_e))}}}function He(ee,W){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=W||"demo-project",V=ee.iat||0,z=ee.sub||ee.user_id;if(!z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const q=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:V,exp:V+3600,auth_time:V,sub:z,user_id:z,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(q)),""].join(".")}function ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ee){return!1}}function st(){return"object"==typeof self&&self.self===self}function qe(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function Le(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return ze().indexOf("Electron/")>=0}function Te(){const ee=ze();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Je(){return ze().indexOf("MSAppHost/")>=0}function B(){return!1}function Xe(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ne(){return"object"==typeof indexedDB}function me(){return new Promise((ee,W)=>{try{let te=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",V=self.indexedDB.open(_e);V.onsuccess=()=>{V.result.close(),te||self.indexedDB.deleteDatabase(_e),ee(!0)},V.onupgradeneeded=()=>{te=!1},V.onerror=()=>{var z;W((null===(z=V.error)||void 0===z?void 0:z.message)||"")}}catch(te){W(te)}})}function ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class fe extends Error{constructor(W,te,_e){super(te),this.code=W,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(W,te,_e){this.service=W,this.serviceName=te,this.errors=_e}create(W,...te){const _e=te[0]||{},V=`${this.service}/${W}`,z=this.errors[W],q=z?function cn(ee,W){return ee.replace(jn,(te,_e)=>{const V=W[_e];return null!=V?String(V):`<${_e}?>`})}(z,_e):"Error";return new fe(V,`${this.serviceName}: ${q} (${V}).`,_e)}}const jn=/\{\$([^}]+)}/g;function pt(ee){return JSON.parse(ee)}function lt(ee){return JSON.stringify(ee)}const an=function(ee){let W={},te={},_e={},V="";try{const z=ee.split(".");W=pt(X(z[0])||""),te=pt(X(z[1])||""),V=z[2],_e=te.d||{},delete te.d}catch(z){}return{header:W,claims:te,data:_e,signature:V}},Yt=function(ee){const te=an(ee).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},Qt=function(ee){const W=an(ee).claims;return"object"==typeof W&&!0===W.admin};function dn(ee,W){return Object.prototype.hasOwnProperty.call(ee,W)}function Pn(ee,W){if(Object.prototype.hasOwnProperty.call(ee,W))return ee[W]}function rr(ee){for(const W in ee)if(Object.prototype.hasOwnProperty.call(ee,W))return!1;return!0}function Ir(ee,W,te){const _e={};for(const V in ee)Object.prototype.hasOwnProperty.call(ee,V)&&(_e[V]=W.call(te,ee[V],V,ee));return _e}function ur(ee,W){if(ee===W)return!0;const te=Object.keys(ee),_e=Object.keys(W);for(const V of te){if(!_e.includes(V))return!1;const z=ee[V],q=W[V];if(pi(z)&&pi(q)){if(!ur(z,q))return!1}else if(z!==q)return!1}for(const V of _e)if(!te.includes(V))return!1;return!0}function pi(ee){return null!==ee&&"object"==typeof ee}function kr(ee){const W=[];for(const[te,_e]of Object.entries(ee))Array.isArray(_e)?_e.forEach(V=>{W.push(encodeURIComponent(te)+"="+encodeURIComponent(V))}):W.push(encodeURIComponent(te)+"="+encodeURIComponent(_e));return W.length?"&"+W.join("&"):""}function wr(ee){const W={};return ee.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[V,z]=_e.split("=");W[decodeURIComponent(V)]=decodeURIComponent(z)}}),W}function Kn(ee){const W=ee.indexOf("?");if(!W)return"";const te=ee.indexOf("#",W);return ee.substring(W,te>0?te:void 0)}class Fn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,te){te||(te=0);const _e=this.W_;if("string"==typeof W)for(let ut=0;ut<16;ut++)_e[ut]=W.charCodeAt(te)<<24|W.charCodeAt(te+1)<<16|W.charCodeAt(te+2)<<8|W.charCodeAt(te+3),te+=4;else for(let ut=0;ut<16;ut++)_e[ut]=W[te]<<24|W[te+1]<<16|W[te+2]<<8|W[te+3],te+=4;for(let ut=16;ut<80;ut++){const Lt=_e[ut-3]^_e[ut-8]^_e[ut-14]^_e[ut-16];_e[ut]=4294967295&(Lt<<1|Lt>>>31)}let et,Mt,V=this.chain_[0],z=this.chain_[1],q=this.chain_[2],pe=this.chain_[3],$e=this.chain_[4];for(let ut=0;ut<80;ut++){ut<40?ut<20?(et=pe^z&(q^pe),Mt=1518500249):(et=z^q^pe,Mt=1859775393):ut<60?(et=z&q|pe&(z|q),Mt=2400959708):(et=z^q^pe,Mt=3395469782);const Lt=(V<<5|V>>>27)+et+$e+Mt+_e[ut]&4294967295;$e=pe,pe=q,q=4294967295&(z<<30|z>>>2),z=V,V=Lt}this.chain_[0]=this.chain_[0]+V&4294967295,this.chain_[1]=this.chain_[1]+z&4294967295,this.chain_[2]=this.chain_[2]+q&4294967295,this.chain_[3]=this.chain_[3]+pe&4294967295,this.chain_[4]=this.chain_[4]+$e&4294967295}update(W,te){if(null==W)return;void 0===te&&(te=W.length);const _e=te-this.blockSize;let V=0;const z=this.buf_;let q=this.inbuf_;for(;V<te;){if(0===q)for(;V<=_e;)this.compress_(W,V),V+=this.blockSize;if("string"==typeof W){for(;V<te;)if(z[q]=W.charCodeAt(V),++q,++V,q===this.blockSize){this.compress_(z),q=0;break}}else for(;V<te;)if(z[q]=W[V],++q,++V,q===this.blockSize){this.compress_(z),q=0;break}}this.inbuf_=q,this.total_+=te}digest(){const W=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let V=this.blockSize-1;V>=56;V--)this.buf_[V]=255&te,te/=256;this.compress_(this.buf_);let _e=0;for(let V=0;V<5;V++)for(let z=24;z>=0;z-=8)W[_e]=this.chain_[V]>>z&255,++_e;return W}}function ct(ee,W){const te=new Nr(ee,W);return te.subscribe.bind(te)}class Nr{constructor(W,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{W(this)}).catch(_e=>{this.error(_e)})}next(W){this.forEachObserver(te=>{te.next(W)})}error(W){this.forEachObserver(te=>{te.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,te,_e){let V;if(void 0===W&&void 0===te&&void 0===_e)throw new Error("Missing Observer.");V=function fn(ee,W){if("object"!=typeof ee||null===ee)return!1;for(const te of W)if(te in ee&&"function"==typeof ee[te])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:te,complete:_e},void 0===V.next&&(V.next=Yn),void 0===V.error&&(V.error=Yn),void 0===V.complete&&(V.complete=Yn);const z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?V.error(this.finalError):V.complete()}catch(q){}}),this.observers.push(V),z}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,W)}sendOne(W,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{te(this.observers[W])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yn(){}const qr=function(ee,W,te,_e){let V;if(_e<W?V="at least "+W:_e>te&&(V=0===te?"none":"no more than "+te),V)throw new Error(ee+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+V+".")};function It(ee,W){return`${ee} failed: ${W} argument `}function Hn(ee,W,te,_e){if((!_e||te)&&"function"!=typeof te)throw new Error(It(ee,W)+"must be a valid function.")}function gi(ee,W,te,_e){if((!_e||te)&&("object"!=typeof te||null===te))throw new Error(It(ee,W)+"must be a valid context object.")}const Tt=function(ee){const W=[];let te=0;for(let _e=0;_e<ee.length;_e++){let V=ee.charCodeAt(_e);if(V>=55296&&V<=56319){const z=V-55296;_e++,L(_e<ee.length,"Surrogate pair missing trail surrogate."),V=65536+(z<<10)+(ee.charCodeAt(_e)-56320)}V<128?W[te++]=V:V<2048?(W[te++]=V>>6|192,W[te++]=63&V|128):V<65536?(W[te++]=V>>12|224,W[te++]=V>>6&63|128,W[te++]=63&V|128):(W[te++]=V>>18|240,W[te++]=V>>12&63|128,W[te++]=V>>6&63|128,W[te++]=63&V|128)}return W},rt=function(ee){let W=0;for(let te=0;te<ee.length;te++){const _e=ee.charCodeAt(te);_e<128?W++:_e<2048?W+=2:_e>=55296&&_e<=56319?(W+=4,te++):W+=3}return W};function Si(ee,W=1e3,te=2){const _e=W*Math.pow(te,ee),V=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+V)}function Dt(ee){return ee&&ee._delegate?ee._delegate:ee}function Gn(ee,W){return new Promise((te,_e)=>{ee.onsuccess=V=>{te(V.target.result)},ee.onerror=V=>{var z;_e(`${W}: ${null===(z=V.target.error)||void 0===z?void 0:z.message}`)}})}class Xt{constructor(W){this._db=W,this.objectStoreNames=this._db.objectStoreNames}transaction(W,te){return new Se(this._db.transaction.call(this._db,W,te))}createObjectStore(W,te){return new xe(this._db.createObjectStore(W,te))}close(){this._db.close()}}class Se{constructor(W){this._transaction=W,this.complete=new Promise((te,_e)=>{this._transaction.oncomplete=function(){te()},this._transaction.onerror=()=>{_e(this._transaction.error)},this._transaction.onabort=()=>{_e(this._transaction.error)}})}objectStore(W){return new xe(this._transaction.objectStore(W))}}class xe{constructor(W){this._store=W}index(W){return new ot(this._store.index(W))}createIndex(W,te,_e){return new ot(this._store.createIndex(W,te,_e))}get(W){return Gn(this._store.get(W),"Error reading from IndexedDB")}put(W,te){return Gn(this._store.put(W,te),"Error writing to IndexedDB")}delete(W){return Gn(this._store.delete(W),"Error deleting from IndexedDB")}clear(){return Gn(this._store.clear(),"Error clearing IndexedDB object store")}}class ot{constructor(W){this._index=W}get(W){return Gn(this._index.get(W),"Error reading from IndexedDB")}}function Ct(ee,W,te){return new Promise((_e,V)=>{try{const z=indexedDB.open(ee,W);z.onsuccess=q=>{_e(new Xt(q.target.result))},z.onerror=q=>{var pe;V(`Error opening indexedDB: ${null===(pe=q.target.error)||void 0===pe?void 0:pe.message}`)},z.onupgradeneeded=q=>{te(new Xt(z.result),q.oldVersion,q.newVersion,new Se(z.transaction))}}catch(z){V(`Error opening indexedDB: ${z.message}`)}})}function Ht(ee){return kt.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(ee){return new Promise((W,te)=>{try{const _e=indexedDB.deleteDatabase(ee);_e.onsuccess=()=>{W()},_e.onerror=V=>{var z;te(`Error deleting indexedDB database "${ee}": ${null===(z=V.target.error)||void 0===z?void 0:z.message}`)}}catch(_e){te(`Error deleting indexedDB database "${ee}": ${_e.message}`)}})})).apply(this,arguments)}},1832:(bt,Me,U)=>{"use strict";var d=U(5e3);let G=null;function L(){return G}const ge=new d.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ye(){return(0,d.LFG)(Q)}()},providedIn:"platform"}),n})();const X=new d.OlP("Location Initialized");let Q=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){oe()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){oe()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ye(){return new Q((0,d.LFG)(ge))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function Fe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function He(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ae(n){const e=(0,d.LFG)(ge).location;return new qe((0,d.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const st=new d.OlP("appBaseHref");let qe=(()=>{class n extends we{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+ze(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+ze(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(st,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Fe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+ze(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+ze(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(st,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=He(B(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function Je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,B(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ze,n.joinWithSlash=Fe,n.stripTrailingSlash=He,n.\u0275fac=function(t){return new(t||n)(d.LFG(we),d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new Re((0,d.LFG)(we),(0,d.LFG)(he))}()},providedIn:"root"}),n})();function B(n){return n.replace(/\/index.html$/,"")}function Ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let mi=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class $i{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let br=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new $i(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,u),as(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{as(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function as(n,e){n.context.$implicit=e.item}let dr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Rn{constructor(){this.$implicit=null,this.ngIf=null}}function mo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let ou=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Co(n){return"server"===n}let au=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Pa((0,d.LFG)(ge),window)}),n})();class Pa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function fs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ss(this.window.history)||Ss(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ss(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Sn{}class $s extends class Hs extends class Ee{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){G||(G=n)}(new $s)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bl(){return yn=yn||document.querySelector("base"),yn?yn.getAttribute("href"):null}();return null==t?null:function xs(n){zs=zs||document.createElement("a"),zs.setAttribute("href",n);const e=zs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){yn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ko(document.cookie,e)}}let zs,yn=null;const Sr=new d.OlP("TRANSITION_ID"),Ra=[{provide:d.ip1,useFactory:function tr(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Sr,ge,d.zs3],multi:!0}];class Zr{static init(){(0,d.VLi)(new Zr)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const f=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ur=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ps=new d.OlP("EventManagerPlugins");let Gs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ps),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Io{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Oi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Gi=(()=>{class n extends Oi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(gs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(gs))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function gs(n){L().remove(n)}const At={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ta=/%COMP%/g;function Oe(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Oe(n,i,t):(i=i.replace(ta,n),t.push(i))}return t}function zt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let kn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new sa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Cl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new oa(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Oe(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gs),d.LFG(Gi),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class sa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(At[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=At[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=At[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zt(r)):this.eventManager.addEventListener(e,t,zt(r))}}class Cl extends sa{constructor(e,t,r,i){super(e),this.component=r;const a=Oe(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function ra(n){return"_ngcontent-%COMP%".replace(ta,n)}(i+"-"+r.id),this.hostAttr=function ia(n){return"_nghost-%COMP%".replace(ta,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class oa extends sa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Oe(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const f=document.createElement("style");f.textContent=a[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Nd=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const El=["alt","control","meta","shift"],So={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let xo=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(El.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),u+=m+".")}),u+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=u,f}static getEventFullKey(t){let r="",i=function Ws(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&hr.hasOwnProperty(e)&&(e=hr[e]))}return So[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),El.forEach(a=>{a!=i&&Wi[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const aa=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Vr(){$s.makeCurrent(),Zr.init()},multi:!0},{provide:ge,useFactory:function Mo(){return(0,d.RDi)(document),document},deps:[]}]),ka=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function cu(){return new d.qLn},deps:[]},{provide:ps,useClass:Nd,multi:!0,deps:[ge,d.R0b,d.Lbi]},{provide:ps,useClass:xo,multi:!0,deps:[ge]},{provide:kn,useClass:kn,deps:[Gs,Gi,d.AFp]},{provide:d.FYo,useExisting:kn},{provide:Oi,useExisting:Gi},{provide:Gi,useClass:Gi,deps:[ge]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:Gs,useClass:Gs,deps:[ps,d.R0b]},{provide:Sn,useClass:Ur,deps:[]}];let qs=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Sr,useExisting:d.AFp},Ra]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:ka,imports:[ou,d.hGG]}),n})();"undefined"!=typeof window&&window;var Nn=U(8996),Un=U(8306);const{isArray:C}=Array,{getPrototypeOf:I,prototype:P,keys:K}=Object;function Pe(n){if(1===n.length){const e=n[0];if(C(e))return{args:e,keys:null};if(function Ke(n){return n&&"object"==typeof n&&I(n)===P}(e)){const t=K(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var pn=U(8421),Xn=U(7669),Gt=U(5403),yt=U(4004);const{isArray:Rs}=Array;function _u(n){return(0,yt.U)(e=>function bg(n,e){return Rs(e)?n(...e):n(e)}(n,e))}function Ec(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Al=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),ii=(()=>{class n extends Al{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const jr=new d.OlP("NgValueAccessor"),Ba={provide:jr,useExisting:(0,d.Gpc)(()=>Qs),multi:!0},Sl=new d.OlP("CompositionEventMode");let Qs=(()=>{class n extends Al{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vu(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Sl,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([Ba]),d.qOj]}),n})();function _s(n){return null==n||0===n.length}function da(n){return null!=n&&"number"==typeof n.length}const xr=new d.OlP("NgValidators"),ja=new d.OlP("NgAsyncValidators"),xl=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qi{static min(e){return function Ld(n){return e=>{if(_s(e.value)||_s(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ml(n){return e=>{if(_s(e.value)||_s(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Pl(n){return _s(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Js(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function wu(n){return _s(n.value)||xl.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ha(n){return e=>_s(e.value)||!da(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function bu(n){return e=>da(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Xs(n){if(!n)return Zi;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(_s(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return sr(e)}static composeAsync(e){return Cg(e)}}function Zi(n){return null}function eo(n){return null!=n}function Fd(n){const e=(0,d.QGY)(n)?(0,Nn.D)(n):n;return(0,d.CqO)(e),e}function Cu(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function to(n,e){return e.map(t=>t(n))}function yf(n){return n.map(e=>function Ud(n){return!n.validate}(e)?e:t=>e.validate(t))}function sr(n){if(!n)return null;const e=n.filter(eo);return 0==e.length?null:function(t){return Cu(to(t,e))}}function Vd(n){return null!=n?sr(yf(n)):null}function Cg(n){if(!n)return null;const e=n.filter(eo);return 0==e.length?null:function(t){return function yu(...n){const e=(0,Xn.jO)(n),{args:t,keys:r}=Pe(n),i=new Un.y(a=>{const{length:u}=t;if(!u)return void a.complete();const f=new Array(u);let m=u,v=u;for(let A=0;A<u;A++){let x=!1;(0,pn.Xf)(t[A]).subscribe((0,Gt.x)(a,N=>{x||(x=!0,v--),f[A]=N},()=>m--,void 0,()=>{(!m||!x)&&(v||a.next(r?Ec(r,f):f),a.complete())}))}});return e?i.pipe(_u(e)):i}(to(t,e).map(Fd)).pipe((0,yt.U)(Cu))}}function Tc(n){return null!=n?Cg(yf(n)):null}function Bd(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function jd(n){return n._rawValidators}function vf(n){return n._rawAsyncValidators}function Eu(n){return n?Array.isArray(n)?n:[n]:[]}function ko(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dc(n,e){const t=Eu(e);return Eu(n).forEach(i=>{ko(t,i)||t.push(i)}),t}function fr(n,e){return Eu(e).filter(t=>!ko(n,t))}class Ha{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ys extends Ha{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kr extends Ha{get formDirective(){return null}get path(){return null}}class $a{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let fa=(()=>{class n extends $a{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ys,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),za=(()=>{class n extends $a{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kr,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Wa(n,e){ks(n,e),e.valueAccessor.writeValue(n.value),function Rl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&D(n,e)})}(n,e),function S(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $d(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&D(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Cf(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ki(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),qa(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ro(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ks(n,e){const t=jd(n);null!==e.validator?n.setValidators(Bd(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=vf(n);null!==e.asyncValidator?n.setAsyncValidators(Bd(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ro(e._rawValidators,i),ro(e._rawAsyncValidators,i)}function qa(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=jd(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=vf(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return ro(e._rawValidators,r),ro(e._rawAsyncValidators,r),t}function D(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Yr(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ns="VALID",Fi="INVALID",yi="PENDING",ai="DISABLED";function Mc(n){return(Gd(n)?n.validators:n)||null}function Au(n){return Array.isArray(n)?Vd(n):n||null}function Su(n,e){return(Gd(e)?e.asyncValidators:n)||null}function Ef(n){return Array.isArray(n)?Tc(n):n||null}function Gd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Wd=n=>n instanceof Oc,Za=n=>n instanceof Rc;function If(n){return Wd(n)?n.value:n.getRawValue()}function by(n,e){const t=Za(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function xu(n,e){Za(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new d.vHH(1002,"")})}class Tf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Au(this._rawValidators),this._composedAsyncValidatorFn=Ef(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ns}get invalid(){return this.status===Fi}get pending(){return this.status==yi}get disabled(){return this.status===ai}get enabled(){return this.status!==ai}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Au(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ef(e)}addValidators(e){this.setValidators(Dc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fr(e,this._rawAsyncValidators))}hasValidator(e){return ko(this._rawValidators,e)}hasAsyncValidator(e){return ko(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ai,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ns,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ns||this.status===yi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ai:Ns}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yi,this._hasOwnPendingAsyncValidator=!0;const t=Fd(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function zd(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Za(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof Cy)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?ai:this.errors?Fi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yi)?yi:this._anyControlsHaveStatus(Fi)?Fi:Ns}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gd(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Oc extends Tf{constructor(e=null,t,r){super(Mc(t),Su(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gd(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Yr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Yr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Rc extends Tf{constructor(e,t,r){super(Mc(t),Su(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){xu(this,e),Object.keys(e).forEach(r=>{by(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=If(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Cy extends Tf{constructor(e,t,r){super(Mc(t),Su(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){xu(this,e),e.forEach((r,i)=>{by(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>If(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Of=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ga=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Rf=new d.OlP("NgModelWithFormControlWarning"),Ag={provide:Kr,useExisting:(0,d.Gpc)(()=>Nc)};let Nc=(()=>{class n extends Kr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qa(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Wa(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ki(t.control||null,t,!1),Yr(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function sn(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ki(r||null,t),Wd(i)&&(Wa(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function k(n,e){ks(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Z(n,e){return qa(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ks(this.form,this),this._oldForm&&qa(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xr,10),d.Y36(ja,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Ag]),d.qOj,d.TTD]}),n})();const O={provide:ys,useExisting:(0,d.Gpc)(()=>j)};let j=(()=>{class n extends ys{constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ot(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Qs?t=a:function Bt(n){return Object.getPrototypeOf(n.constructor)===ii}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Nt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Li(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Kr,13),d.Y36(xr,10),d.Y36(ja,10),d.Y36(jr,10),d.Y36(Rf,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([O]),d.qOj,d.TTD]}),n})(),eD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ga]]}),n})(),Lf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[eD]}),n})(),bs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[eD]}),n})();function mt(...n){const e=(0,Xn.yG)(n);return(0,Nn.D)(n,e)}var Fo=U(7579);class io extends Fo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Kd=U(4671),rD=U(9672);function Py(n,e,t){n?(0,rD.f)(t,n,e):e()}var Oy=U(576);function Ff(n,e){const t=(0,Oy.m)(n)?n:()=>n,r=i=>i.error(t());return new Un.y(e?i=>e.schedule(r,0,i):r)}const Og=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yd=U(8189);function Ry(...n){return function oD(){return(0,Yd.J)(1)}()((0,Nn.D)(n,(0,Xn.yG)(n)))}function Rg(n){return new Un.y(e=>{(0,pn.Xf)(n()).subscribe(e)})}var Qd=U(515),cb=U(727),li=U(4482);function db(){return(0,li.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class aD extends Un.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,li.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new cb.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=cb.w0.EMPTY)}return e}refCount(){return db()(this)}}function vi(n,e){return(0,li.e)((t,r)=>{let i=null,a=0,u=!1;const f=()=>u&&!i&&r.complete();t.subscribe((0,Gt.x)(r,m=>{null==i||i.unsubscribe();let v=0;const A=a++;(0,pn.Xf)(n(m,A)).subscribe(i=(0,Gt.x)(r,x=>r.next(e?e(m,x,A,v++):x),()=>{i=null,f()}))},()=>{u=!0,f()}))})}var ky=U(5698);function kg(...n){const e=(0,Xn.yG)(n);return(0,li.e)((t,r)=>{(e?Ry(n,t,e):Ry(n,t)).subscribe(r)})}function hb(n,e,t,r,i){return(a,u)=>{let f=t,m=e,v=0;a.subscribe((0,Gt.x)(u,A=>{const x=v++;m=f?n(m,A,x):(f=!0,A),r&&u.next(m)},i&&(()=>{f&&u.next(m),u.complete()})))}}function Vc(n,e){return(0,li.e)(hb(n,e,arguments.length>=2,!0))}function Qa(n,e){return(0,li.e)((t,r)=>{let i=0;t.subscribe((0,Gt.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Ru(n){return(0,li.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Gt.x)(t,void 0,void 0,u=>{a=(0,pn.Xf)(n(u,Ru(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Yi=U(5577);function Jd(n,e){return(0,Oy.m)(e)?(0,Yi.z)(n,e,1):(0,Yi.z)(n,1)}function Ny(n){return n<=0?()=>Qd.E:(0,li.e)((e,t)=>{let r=[];e.subscribe((0,Gt.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fb(n=lD){return(0,li.e)((e,t)=>{let r=!1;e.subscribe((0,Gt.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lD(){return new Og}function Bc(n){return(0,li.e)((e,t)=>{let r=!1;e.subscribe((0,Gt.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function jc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qa((i,a)=>n(i,a,r)):Kd.y,(0,ky.q)(1),t?Bc(e):fb(()=>new Og))}var Uo=U(8505);class ku{constructor(e,t){this.id=e,this.url=t}}class Vo extends ku{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hc extends ku{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ng extends ku{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uD extends ku{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gb extends ku{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uf extends ku{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mb extends ku{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _b extends ku{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ly extends ku{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lg{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fy{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pO{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xd{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uy{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yb{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vb{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ln="primary";class cD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function eh(n){return new cD(n)}const wb="ngNavigationCancelingError";function Vy(n){const e=Error("NavigationCancelingError: "+n);return e[wb]=!0,e}function hD(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],f=n[a];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Bo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!By(n[i],e[i]))return!1;return!0}function By(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Fg(n){return Array.prototype.concat.apply([],n)}function Cb(n){return n.length>0?n[n.length-1]:null}function wi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ma(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Nn.D)(Promise.resolve(n)):mt(n)}const Eb={exact:function Tb(n,e,t){if(!Ll(n.segments,e.segments)||!th(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Tb(n.children[r],e.children[r],t))return!1;return!0},subset:Hy},jy={exact:function Ug(n,e){return Bo(n,e)},subset:function Db(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>By(n[t],e[t]))},ignored:()=>!0};function Ib(n,e,t){return Eb[t.paths](n.root,e.root,t.matrixParams)&&jy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Hy(n,e,t){return $y(n,e,e.segments,t)}function $y(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ll(i,t)||e.hasChildren()||!th(i,t,r))}if(n.segments.length===t.length){if(!Ll(n.segments,t)||!th(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Hy(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ll(n.segments,i)&&th(n.segments,i,r)&&n.children[ln])&&$y(n.children[ln],e,a,r)}}function th(n,e,t){return e.every((r,i)=>jy[t](n[i].parameters,r.parameters))}class Nu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eh(this.queryParams)),this._queryParamMap}toString(){return fD.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vf(this)}}class Lu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=eh(this.parameters)),this._parameterMap}toString(){return Mb(this)}}function Ll(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Vg{}class nh{parse(e){const t=new vD(e);return new Nu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Bf(e.root,!0)}`,r=function pD(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${jf(t)}=${jf(i)}`).join("&"):`${jf(t)}=${jf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function zy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const fD=new nh;function Vf(n){return n.segments.map(e=>Mb(e)).join("/")}function Bf(n,e){if(!n.hasChildren())return Vf(n);if(e){const t=n.children[ln]?Bf(n.children[ln],!1):"",r=[];return wi(n.children,(i,a)=>{a!==ln&&r.push(`${a}:${Bf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Sb(n,e){let t=[];return wi(n.children,(r,i)=>{i===ln&&(t=t.concat(e(r,i)))}),wi(n.children,(r,i)=>{i!==ln&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ln?[Bf(n.children[ln],!1)]:[`${i}:${Bf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ln]?`${Vf(n)}/${t[0]}`:`${Vf(n)}/(${t.join("//")})`}}function xb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jf(n){return xb(n).replace(/%3B/gi,";")}function Bg(n){return xb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gy(n){return decodeURIComponent(n)}function Wy(n){return Gy(n.replace(/\+/g,"%20"))}function Mb(n){return`${Bg(n.path)}${function Pb(n){return Object.keys(n).map(e=>`;${Bg(e)}=${Bg(n[e])}`).join("")}(n.parameters)}`}const gD=/^[^\/()?;=#]+/;function Ls(n){const e=n.match(gD);return e?e[0]:""}const mD=/^[^=?&#]+/,_D=/^[^&#]+/;class vD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ln]=new un(e,t)),r}parseSegment(){const e=Ls(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Lu(Gy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ls(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ls(this.remaining);i&&(r=i,this.capture(r))}e[Gy(t)]=Gy(r)}parseQueryParam(e){const t=function Ob(n){const e=n.match(mD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function yD(n){const e=n.match(_D);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Wy(t),a=Wy(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ls(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=ln);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[ln]:new un([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Rb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qy(e,this._root).map(t=>t.value)}}function jg(n,e){if(n===e.value)return e;for(const t of e.children){const r=jg(n,t);if(r)return r}return null}function qy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qy(n,t);if(r.length)return r.unshift(e),r}return[]}class Fl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Wt extends Rb{constructor(e,t){super(e),this.snapshot=t,zf(this,e)}toString(){return this.snapshot.toString()}}function Zy(n,e){const t=function kb(n,e){const u=new $f([],{},{},"",{},ln,e,null,n.root,-1,{});return new Nb("",new Fl(u,[]))}(n,e),r=new io([new Lu("",{})]),i=new io({}),a=new io({}),u=new io({}),f=new io(""),m=new zc(r,i,u,f,a,ln,e,t.root);return m.snapshot=t.root,new Wt(new Fl(m,[]),t)}class zc{constructor(e,t,r,i,a,u,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>eh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>eh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function _a(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class $f{constructor(e,t,r,i,a,u,f,m,v,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=eh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nb extends Rb{constructor(e,t){super(t),this.url=e,zf(this,t)}toString(){return Xa(this._root)}}function zf(n,e){e.value._routerState=n,e.children.forEach(t=>zf(n,t))}function Xa(n){const e=n.children.length>0?` { ${n.children.map(Xa).join(", ")} } `:"";return`${n.value}${e}`}function Gf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Bo(e.params,t.params)||n.params.next(t.params),function bb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Bo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hg(n,e){const t=Bo(n.params,e.params)&&function Ab(n,e){return Ll(n,e)&&n.every((t,r)=>Bo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hg(n.parent,e.parent))}function $g(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Lb(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $g(n,r,i);return $g(n,r)})}(n,e,t);return new Fl(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>$g(n,f)),u}}const r=function mO(n){return new zc(new io(n.url),new io(n.params),new io(n.queryParams),new io(n.fragment),new io(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>$g(n,a));return new Fl(r,i)}}function Gc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wc(n){return"object"==typeof n&&null!=n&&n.outlets}function Wf(n,e,t,r,i){let a={};if(r&&wi(r,(f,m)=>{a[m]=Array.isArray(f)?f.map(v=>`${v}`):`${f}`}),n===e)return new Nu(t,a,i);const u=Gg(n,e,t);return new Nu(u,a,i)}function Gg(n,e,t){const r={};return wi(n.children,(i,a)=>{r[a]=i===e?t:Gg(i,e,t)}),new un(n.segments,r)}class wD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Wc);if(i&&i!==Cb(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ID(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return Wg(n,e,t);const r=function _O(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],f=t[r];if(Wc(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Zg(m,v,u))return a;r+=2}else{if(!Zg(m,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new un(n.segments.slice(0,r.pathIndex),{});return a.children[ln]=new un(n.segments.slice(r.pathIndex),n.children),Wg(a,0,i)}return r.match&&0===i.length?new un(n.segments,{}):r.match&&!n.hasChildren()?qg(n,e,t):r.match?Wg(n,0,i):qg(n,e,t)}function Wg(n,e,t){if(0===t.length)return new un(n.segments,{});{const r=function Fb(n){return Wc(n[0])?n[0].outlets:{[ln]:n}}(t),i={};return wi(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=ID(n.children[u],e,a))}),wi(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new un(n.segments,i)}}function qg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Wc(a)){const m=Ub(a.outlets);return new un(r,m)}if(0===i&&Gc(t[0])){r.push(new Lu(n.segments[e].path,Vb(t[0]))),i++;continue}const u=Wc(a)?a.outlets[ln]:`${a}`,f=i<t.length-1?t[i+1]:null;u&&f&&Gc(f)?(r.push(new Lu(u,Vb(f))),i+=2):(r.push(new Lu(u,{})),i++)}return new un(r,{})}function Ub(n){const e={};return wi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=qg(new un([],{}),0,t))}),e}function Vb(n){const e={};return wi(n,(t,r)=>e[r]=`${t}`),e}function Zg(n,e,t){return n==t.path&&Bo(e,t.parameters)}class vO{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rh(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),wi(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=rh(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=rh(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=rh(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new yb(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Xd(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Gf(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),Gf(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=function wO(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=m,u.outlet&&u.outlet.activateWith(i,m),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Bb{constructor(e,t){this.routes=e,this.module=t}}function qc(n){return"function"==typeof n}function ih(n){return n instanceof Nu}const Zc=Symbol("INITIAL_VALUE");function qf(){return vi(n=>function ub(...n){const e=(0,Xn.yG)(n),t=(0,Xn.jO)(n),{args:r,keys:i}=Pe(n);if(0===r.length)return(0,Nn.D)([],e);const a=new Un.y(function iD(n,e,t=Kd.y){return r=>{Py(e,()=>{const{length:i}=n,a=new Array(i);let u=i,f=i;for(let m=0;m<i;m++)Py(e,()=>{const v=(0,Nn.D)(n[m],e);let A=!1;v.subscribe((0,Gt.x)(r,x=>{a[m]=x,A||(A=!0,f--),f||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Ec(i,u):Kd.y));return t?a.pipe(_u(t)):a}(n.map(e=>e.pipe((0,ky.q)(1),kg(Zc)))).pipe(Vc((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==Zc?i:(a===Zc&&(r=!0),r||!1!==a&&u!==t.length-1&&!ih(a)?i:a),e)},Zc),Qa(e=>e!==Zc),(0,yt.U)(e=>ih(e)?e:!0===e),(0,ky.q)(1)))}class jb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Kc,this.attachRef=null}}class Kc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new jb,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Uu=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=a||ln,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new Qy(t,f,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kc),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Qy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zc?this.route:e===Kc?this.childContexts:this.parent.get(e,t)}}let Hb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Uu],encapsulation:2}),n})();function Ul(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];$b(r,TD(e,r))}}function $b(n,e){n.children&&Ul(n.children,e)}function TD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Zf(n){const e=n.children&&n.children.map(Zf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ln&&(t.component=Hb),t}function jo(n){return n.outlet||ln}function Jy(n,e){const t=n.filter(r=>jo(r)===e);return t.push(...n.filter(r=>jo(r)!==e)),t}const zb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},zb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||hD)(t,n,e);if(!a)return Object.assign({},zb);const u={};wi(a.posParams,(m,v)=>{u[v]=m.path});const f=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Vu(n,e,t,r,i="corrected"){if(t.length>0&&function oh(n,e,t){return t.some(r=>Vl(n,e,r)&&jo(r)!==ln)}(n,t,r)){const u=new un(e,function Xy(n,e,t,r){const i={};i[ln]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&jo(a)!==ln){const u=new un([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[jo(a)]=u}return i}(n,e,r,new un(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Kf(n,e,t){return t.some(r=>Vl(n,e,r))}(n,t,r)){const u=new un(n.segments,function sh(n,e,t,r,i,a){const u={};for(const f of r)if(Vl(n,t,f)&&!i[jo(f)]){const m=new un([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[jo(f)]=m}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new un(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Vl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Gb(n,e,t,r){return!!(jo(n)===r||r!==ln&&Vl(e,t,n))&&("**"===n.path||Kg(e,n,t).matched)}function ev(n,e,t){return 0===e.length&&!n.children[t]}class Yf{constructor(e){this.segmentGroup=e||null}}class Yg{constructor(e){this.urlTree=e}}function Yc(n){return Ff(new Yf(n))}function tv(n){return Ff(new Yg(n))}class TO{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Vu(this.urlTree.root,[],[],this.config).segmentGroup,t=new un(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ln).pipe((0,yt.U)(a=>this.createUrlTree(Jg(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ru(a=>{if(a instanceof Yg)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Yf?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ln).pipe((0,yt.U)(i=>this.createUrlTree(Jg(i),e.queryParams,e.fragment))).pipe(Ru(i=>{throw i instanceof Yf?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new un([],{[ln]:e}):e;return new Nu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(a=>new un([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Nn.D)(i).pipe(Jd(a=>{const u=r.children[a],f=Jy(t,a);return this.expandSegmentGroup(e,f,u,a).pipe((0,yt.U)(m=>({segment:m,outlet:a})))}),Vc((a,u)=>(a[u.outlet]=u.segment,a),{}),function Ja(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qa((i,a)=>n(i,a,r)):Kd.y,Ny(1),t?Bc(e):fb(()=>new Og))}())}expandSegment(e,t,r,i,a,u){return(0,Nn.D)(r).pipe(Jd(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,u).pipe(Ru(v=>{if(v instanceof Yf)return mt(null);throw v}))),jc(f=>!!f),Ru((f,m)=>{if(f instanceof Og||"EmptyError"===f.name)return ev(t,i,a)?mt(new un([],{})):Yc(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,u,f){return Gb(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):Yc(t):Yc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?tv(a):this.lineralizeSegments(r,a).pipe((0,Yi.z)(u=>{const f=new un(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:A}=Kg(t,i,a);if(!f)return Yc(t);const x=this.applyRedirectCommands(m,i.redirectTo,A);return i.redirectTo.startsWith("/")?tv(x):this.lineralizeSegments(i,x).pipe((0,Yi.z)(N=>this.expandSegment(e,t,r,N.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,yt.U)(x=>(r._loadedConfig=x,new un(i,{})))):mt(new un(i,{}));const{matched:u,consumedSegments:f,remainingSegments:m}=Kg(t,r,i);return u?this.getChildConfig(e,r,i).pipe((0,Yi.z)(A=>{const x=A.module,N=A.routes,{segmentGroup:$,slicedSegments:Y}=Vu(t,f,m,N),Ce=new un($.segments,$.children);if(0===Y.length&&Ce.hasChildren())return this.expandChildren(x,N,Ce).pipe((0,yt.U)(Ft=>new un(f,Ft)));if(0===N.length&&0===Y.length)return mt(new un(f,{}));const Ve=jo(r)===a;return this.expandSegment(x,Ce,N,Y,Ve?ln:a,!0).pipe((0,yt.U)(it=>new un(f.concat(it.segments),it.children)))})):Yc(t)}getChildConfig(e,t,r){return t.children?mt(new Bb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Yi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,yt.U)(a=>(t._loadedConfig=a,a))):function DD(n){return Ff(Vy(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):mt(new Bb([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?mt(i.map(u=>{const f=e.get(u);let m;if(function CO(n){return n&&qc(n.canLoad)}(f))m=f.canLoad(t,r);else{if(!qc(f))throw new Error("Invalid CanLoad guard");m=f(t,r)}return ma(m)})).pipe(qf(),(0,Uo.b)(u=>{if(!ih(u))return;const f=Vy(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw f.url=u,f}),(0,yt.U)(u=>!0===u)):mt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[ln])return Ff(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[ln]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Nu(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return wi(t.children,(f,m)=>{u[m]=this.createSegmentGroup(e,f,r,i)}),new un(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Jg(n){const e={};for(const r of Object.keys(n.children)){const a=Jg(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function qb(n){if(1===n.numberOfChildren&&n.children[ln]){const e=n.children[ln];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}class nv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xg{constructor(e,t){this.component=e,this.route=t}}function SD(n,e,t){const r=n._root;return tm(r,e?e._root:null,t,[r.value])}function em(n,e,t){const r=function xD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function tm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=rh(e);return n.children.forEach(u=>{(function DO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function Zb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ll(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ll(n.url,e.url)||!Bo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hg(n,e)||!Bo(n.queryParams,e.queryParams);default:return!Hg(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new nv(r)):(a.data=u.data,a._resolvedData=u._resolvedData),tm(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Xg(f.outlet.component,u))}else u&&nm(e,f,i),i.canActivateChecks.push(new nv(r)),tm(n,null,a.component?f?f.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),wi(a,(u,f)=>nm(u,t.getContext(f),i)),i}function nm(n,e,t){const r=rh(n),i=n.value;wi(r,(a,u)=>{nm(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Xg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Qb{}function Jb(n){return new Un.y(e=>e.error(n))}class Xb{constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=Vu(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ln);if(null===t)return null;const r=new $f([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Fl(r,t),a=new Nb(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=Hf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],f=Jy(e,a),m=this.processSegmentGroup(f,u,a);if(null===m)return null;r.push(...m)}const i=rm(r);return function eC(n){n.sort((e,t)=>e.value.outlet===ln?-1:t.value.outlet===ln?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return ev(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Gb(e,t,r,i))return null;let a,u=[],f=[];if("**"===e.path){const $=r.length>0?Cb(r).parameters:{};a=new $f(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iv(e),jo(e),e.component,e,tC(t),FD(t)+r.length,nC(e))}else{const $=Kg(t,e,r);if(!$.matched)return null;u=$.consumedSegments,f=$.remainingSegments,a=new $f(u,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iv(e),jo(e),e.component,e,tC(t),FD(t)+u.length,nC(e))}const m=function LD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:A}=Vu(t,u,f,m.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);if(0===A.length&&v.hasChildren()){const $=this.processChildren(m,v);return null===$?null:[new Fl(a,$)]}if(0===m.length&&0===A.length)return[new Fl(a,[])];const x=jo(e)===i,N=this.processSegment(m,v,A,x?ln:i);return null===N?null:[new Fl(a,N)]}}function el(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rm(n){const e=[],t=new Set;for(const r of n){if(!el(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=rm(r.children);e.push(new Fl(r.value,i))}return e.filter(r=>!t.has(r))}function tC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function FD(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function iv(n){return n.data||{}}function nC(n){return n.resolve||{}}function rC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Qf(n){return vi(e=>{const t=n(e);return t?(0,Nn.D)(t).pipe((0,yt.U)(()=>e)):mt(e)})}class av extends class ov{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const sm=new d.OlP("ROUTES");class iC{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,yt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new Bb(Fg(u.injector.get(sm,void 0,d.XFs.Self|d.XFs.Optional)).map(Zf),u)}),Ru(a=>{throw t._loader$=void 0,a}));return t._loader$=new aD(i,()=>new Fo.x).pipe(db()),t._loader$}loadModuleFactory(e){return ma(e()).pipe((0,Yi.z)(t=>t instanceof d.YKP?mt(t):(0,Nn.D)(this.compiler.compileModuleAsync(t))))}}class lv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function SO(n){throw n}function $D(n,e,t){return e.parse("/")}function uv(n,e){return mt(null)}const sC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ui=(()=>{class n{constructor(t,r,i,a,u,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fo.x,this.errorHandler=SO,this.malformedUriErrorHandler=$D,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:uv,afterPreactivation:uv},this.urlHandlingStrategy=new lv,this.routeReuseStrategy=new av,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(d.h0i),this.console=u.get(d.c2e);const x=u.get(d.R0b);this.isNgZoneEnabled=x instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function $c(){return new Nu(new un([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new iC(u,f,N=>this.triggerEvent(new Lg(N)),N=>this.triggerEvent(new Fy(N))),this.routerState=Zy(this.currentUrlTree,this.rootComponentType),this.transitions=new io({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qa(i=>0!==i.id),(0,yt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),vi(i=>{let a=!1,u=!1;return mt(i).pipe((0,Uo.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vi(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return tl(f.source)&&(this.browserUrlTree=f.extractedUrl),mt(f).pipe(vi(x=>{const N=this.transitions.getValue();return r.next(new Vo(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),N!==this.transitions.getValue()?Qd.E:Promise.resolve(x)}),function AD(n,e,t,r){return vi(i=>function Wb(n,e,t,r,i){return new TO(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,yt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Uo.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function UD(n,e,t,r,i){return(0,Yi.z)(a=>function ND(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new Xb(n,e,t,r,i,a).recognize();return null===u?Jb(new Qb):mt(u)}catch(u){return Jb(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,yt.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Uo.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl($,x)}this.browserUrlTree=x.urlAfterRedirects}const N=new gb(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:$,source:Y,restoredState:Ce,extras:Ve}=f,ht=new Vo(N,this.serializeUrl($),Y,Ce);r.next(ht);const it=Zy($,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},f),{targetSnapshot:it,urlAfterRedirects:$,extras:Object.assign(Object.assign({},Ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Qd.E}),Qf(f=>{const{targetSnapshot:m,id:v,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:N,replaceUrl:$}}=f;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!N,replaceUrl:!!$})}),(0,Uo.b)(f=>{const m=new Uf(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,yt.U)(f=>Object.assign(Object.assign({},f),{guards:SD(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function MD(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function rv(n,e,t,r){return(0,Nn.D)(n).pipe((0,Yi.z)(i=>function kD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?mt(a.map(f=>{const m=em(f,e,i);let v;if(function Fu(n){return n&&qc(n.canDeactivate)}(m))v=ma(m.canDeactivate(n,e,t,r));else{if(!qc(m))throw new Error("Invalid CanDeactivate guard");v=ma(m(n,e,t,r))}return v.pipe(jc())})).pipe(qf()):mt(!0)}(i.component,i.route,t,e,r)),jc(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Yi.z)(f=>f&&function bO(n){return"boolean"==typeof n}(f)?function Kb(n,e,t,r){return(0,Nn.D)(e).pipe(Jd(i=>Ry(function OD(n,e){return null!==n&&e&&e(new pO(n)),mt(!0)}(i.route.parent,r),function PD(n,e){return null!==n&&e&&e(new Uy(n)),mt(!0)}(i.route,r),function Yb(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function so(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Rg(()=>mt(u.guards.map(m=>{const v=em(m,u.node,t);let A;if(function IO(n){return n&&qc(n.canActivateChild)}(v))A=ma(v.canActivateChild(r,n));else{if(!qc(v))throw new Error("Invalid CanActivateChild guard");A=ma(v(r,n))}return A.pipe(jc())})).pipe(qf())));return mt(a).pipe(qf())}(n,i.path,t),function RD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(a=>Rg(()=>{const u=em(a,e,t);let f;if(function EO(n){return n&&qc(n.canActivate)}(u))f=ma(u.canActivate(e,n));else{if(!qc(u))throw new Error("Invalid CanActivate guard");f=ma(u(e,n))}return f.pipe(jc())}));return mt(i).pipe(qf())}(n,i.route,t))),jc(i=>!0!==i,!0))}(r,a,n,e):mt(f)),(0,yt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Uo.b)(f=>{if(ih(f.guardsResult)){const v=Vy(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw v.url=f.guardsResult,v}const m=new mb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),Qa(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Qf(f=>{if(f.guards.canActivateChecks.length)return mt(f).pipe((0,Uo.b)(m=>{const v=new _b(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),vi(m=>{let v=!1;return mt(m).pipe(function VD(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let a=0;return(0,Nn.D)(i).pipe(Jd(u=>function sv(n,e,t,r){return function BD(n,e,t,r){const i=rC(n);if(0===i.length)return mt({});const a={};return(0,Nn.D)(i).pipe((0,Yi.z)(u=>function im(n,e,t,r){const i=em(n,e,r);return ma(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,Uo.b)(f=>{a[u]=f}))),Ny(1),(0,Yi.z)(()=>rC(a).length===i.length?mt(a):Qd.E))}(n._resolve,n,e,r).pipe((0,yt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Hf(n,t).resolve),null)))}(u.route,r,n,e)),(0,Uo.b)(()=>a++),Ny(1),(0,Yi.z)(u=>a===i.length?mt(t):Qd.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Uo.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Uo.b)(m=>{const v=new Ly(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),Qf(f=>{const{targetSnapshot:m,id:v,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:N,replaceUrl:$}}=f;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!N,replaceUrl:!!$})}),(0,yt.U)(f=>{const m=function Ky(n,e,t){const r=$g(n,e._root,t?t._root:void 0);return new Wt(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,Uo.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new vO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Uo.b)({next(){a=!0},complete(){a=!0}}),function pb(n){return(0,li.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Ru(f=>{if(u=!0,function dD(n){return n&&n[wb]}(f)){const m=ih(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new Ng(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(v),m?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tl(i.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new uD(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return Qd.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const m=Object.assign({},u);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,u,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ul(t),this.config=t.map(Zf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,A=m?this.currentUrlTree.fragment:u;let x=null;switch(f){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),function zg(n,e,t,r,i){if(0===t.length)return Wf(e.root,e.root,e.root,r,i);const a=function bD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new wD(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return wi(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new wD(t,e,r)}(t);if(a.toRoot())return Wf(e.root,e.root,new un([],{}),r,i);const u=function CD(n,e,t){if(n.isAbsolute)return new Yy(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Yy(a,a===e.root,0)}const r=Gc(n.commands[0])?0:1;return function ED(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Yy(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=u.processChildren?Wg(u.segmentGroup,u.index,a.commands):ID(u.segmentGroup,u.index,a.commands);return Wf(e.root,u.segmentGroup,f,r,i)}(v,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ih(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function aC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},sC):!1===r?Object.assign({},oC):r,ih(t))return Ib(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Ib(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var f,m;if(this.disposed)return Promise.resolve(!1);let v,A,x;u?(v=u.resolve,A=u.reject,x=u.promise):x=new Promise((Y,Ce)=>{v=Y,A=Ce});const N=++this.navigationId;let $;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),$=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):$=0,this.setTransition({id:N,targetPageId:$,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:v,reject:A,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(Y=>Promise.reject(Y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Ng(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function tl(n){return"imperative"!==n}let Bl=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this.commands=null,this.onChanges=new Fo.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ah(this.skipLocationChange),replaceUrl:ah(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ah(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ui),d.Y36(zc),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),Jf=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Fo.x,this.subscription=t.events.subscribe(a=>{a instanceof Hc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:ah(this.skipLocationChange),replaceUrl:ah(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ah(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ui),d.Y36(zc),d.Y36(we))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function ah(n){return""===n||!!n}class dv{}class om{preload(e,t){return t().pipe(Ru(()=>mt(null)))}}class lh{preload(e,t){return mt(null)}}let lC=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new iC(i,r,m=>t.triggerEvent(new Lg(m)),m=>t.triggerEvent(new Fy(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qa(t=>t instanceof Hc),Jd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Nn.D)(i).pipe((0,Yd.J)(),(0,yt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Yi.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ui),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(dv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Xf=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Bu=new d.OlP("ROUTER_CONFIGURATION"),hv=new d.OlP("ROUTER_FORROOT_GUARD"),GD=[Re,{provide:Vg,useClass:nh},{provide:Ui,useFactory:function qD(n,e,t,r,i,a,u={},f,m){const v=new Ui(null,n,e,t,r,i,Fg(a));return f&&(v.urlHandlingStrategy=f),m&&(v.routeReuseStrategy=m),function ZD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,v),u.enableTracing&&v.events.subscribe(A=>{var x,N;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(N=console.groupEnd)||void 0===N||N.call(console)}),v},deps:[Vg,Kc,Re,d.zs3,d.Sil,sm,Bu,[class HD{},new d.FiY],[class jD{},new d.FiY]]},Kc,{provide:zc,useFactory:function ch(n){return n.routerState.root},deps:[Ui]},lC,lh,om,{provide:Bu,useValue:{enableTracing:!1}}];function fv(){return new d.PXZ("Router",Ui)}let uC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[GD,pv(t),{provide:hv,useFactory:uh,deps:[[Ui,new d.FiY,new d.tp0]]},{provide:Bu,useValue:r||{}},{provide:we,useFactory:cC,deps:[he,[new d.tBr(st),new d.FiY],Bu]},{provide:Xf,useFactory:WD,deps:[Ui,au,Bu]},{provide:dv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:lh},{provide:d.PXZ,multi:!0,useFactory:fv},[gv,{provide:d.ip1,multi:!0,useFactory:KD,deps:[gv]},{provide:dC,useFactory:YD,deps:[gv]},{provide:d.tb,multi:!0,useExisting:dC}]]}}static forChild(t){return{ngModule:n,providers:[pv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hv,8),d.LFG(Ui,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function WD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Xf(n,e,t)}function cC(n,e,t={}){return t.useHash?new Le(n,e):new qe(n,e)}function uh(n){return"guarded"}function pv(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:sm,multi:!0,useValue:n}]}let gv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fo.x}appInitializer(){return this.injector.get(X,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(Ui),u=this.injector.get(Bu);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Bu),i=this.injector.get(lC),a=this.injector.get(Xf),u=this.injector.get(Ui),f=this.injector.get(d.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function KD(n){return n.appInitializer.bind(n)}function YD(n){return n.bootstrapListener.bind(n)}const dC=new d.OlP("Router Initializer");var be=U(5861),fC=U(2454),nl=U.n(fC),am=U(6451),lm=U(5363),QD=U(6063);class JD extends Fo.x{constructor(e=1/0,t=1/0,r=QD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)f=m;f&&r.splice(0,f+1)}}}var pC=U(3099);function mv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pC.B)({connector:()=>new JD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function XD(n,e){return(0,Oy.m)(e)?vi(()=>n,e):vi(()=>n)}var um=U(9468),nn=U(5813),ui=U(2011),dh=U(5867);class ep{constructor(e){return e}}class cm{constructor(){return(0,dh.C6)()}}const dm=new d.OlP("angularfire2._apps"),PO={provide:ep,useFactory:function gC(n){return n&&1===n.length?n[0]:new ep((0,dh.Mq)())},deps:[[new d.FiY,dm]]},va={provide:cm,deps:[[new d.FiY,dm]]};function OO(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ep(r)}}let RO=(()=>{class n{constructor(t){(0,dh.KN)("angularfire",nn.q4.full,"core"),(0,dh.KN)("angularfire",nn.q4.full,"app"),(0,dh.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[PO,va]}),n})();function mC(n,...e){return{ngModule:RO,providers:[{provide:dm,useFactory:OO(n),multi:!0,deps:[d.R0b,d.zs3,nn.HU,...e]}]}}const NO=(0,nn.u3)(dh.ZF,!0);var ci=U(9681),wa=U(4859),F=U(2090),ba=U(1877);const yC=new Map,rA={activated:!1,tokenObservers:[]},iA={initialized:!1,enabled:!1};function $r(n){return yC.get(n)||rA}function Qi(n,e){yC.set(n,e)}function hm(){return iA}class Ji{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function Jc(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const nr=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Xc(n){if(!$r(n).activated)throw nr.create("use-before-activation",{appName:n.name})}function Hu(n,e){return $u.apply(this,arguments)}function $u(){return($u=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,a)}catch(x){throw nr.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==u.status)throw nr.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(x){throw nr.create("fetch-parse-error",{originalErrorMessage:x.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw nr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),A=Date.now();return{token:f.attestationToken,expireTimeMillis:A+v,issuedAtTimeMillis:A}})).apply(this,arguments)}function mh(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const _h="firebase-app-check-store";let np=null;function vv(){return np||(np=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(nr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_h,{keyPath:"compositeKey"})}}catch(t){e(nr.create("storage-open",{originalErrorMessage:t.message}))}}),np)}function bv(){return(bv=(0,be.Z)(function*(n,e){const r=(yield vv()).transaction(_h,"readwrite"),a=r.objectStore(_h).put({compositeKey:n,value:e});return new Promise((u,f)=>{a.onsuccess=m=>{u()},r.onerror=m=>{var v;f(nr.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const rp=new ba.Yd("@firebase/app-check");function Iv(n,e){return(0,F.hl)()?function CC(n,e){return function wv(n,e){return bv.apply(this,arguments)}(function IC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{rp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uA(){return hm().enabled}function DC(){return ip.apply(this,arguments)}function ip(){return(ip=(0,be.Z)(function*(){const n=hm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cA={error:"UNKNOWN_ERROR"};function FO(n){return F.US.encodeString(JSON.stringify(n),!1)}function Av(n){return AC.apply(this,arguments)}function AC(){return(AC=(0,be.Z)(function*(n,e=!1){const t=n.app;Xc(t);const r=$r(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&mm(m)&&(i=m)}if(!e&&i&&mm(i))return{token:i.token};let f,u=!1;if(uA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hu(mh(t,yield DC()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),u=!0);const m=yield r.exchangeTokenPromise;return yield Iv(t,m),Qi(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?rp.warn(m.message):rp.error(m),a=m}return i?(f={token:i.token},Qi(t,Object.assign(Object.assign({},r),{token:i})),yield Iv(t,i)):f=SC(a),u&&ed(t,f),f})).apply(this,arguments)}function gm(n,e){const t=$r(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Qi(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function dA(n){const{app:e}=n,t=$r(e);let r=t.tokenRefresher;r||(r=function hA(n){const{app:e}=n;return new Ji((0,be.Z)(function*(){let r;if(r=$r(e).token?yield Av(n,!0):yield Av(n),r.error)throw r.error}),()=>!0,()=>{const t=$r(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Qi(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ed(n,e){const t=$r(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function mm(n){return n.expireTimeMillis-Date.now()>0}function SC(n){return{token:FO(cA),error:n}}class fA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$r(this.app);for(const t of e)gm(this.app,t.next);return Promise.resolve()}}const LC="app-check-internal";!function bm(){(0,ci._registerComponent)(new wa.wA("app-check",n=>function xC(n,e){return new fA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LC).initialize()})),(0,ci._registerComponent)(new wa.wA(LC,n=>function _m(n){return{getToken:e=>Av(n,e),addTokenListener:e=>function Sv(n,e,t,r){const{app:i}=n,a=$r(i),u={next:t,error:r,type:e};if(Qi(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&mm(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),dA(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>dA(n))}(n,"INTERNAL",e),removeTokenListener:e=>gm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ci.registerVersion)("@firebase/app-check","0.5.5")}();class td{constructor(){return(0,nn.vb)("app-check")}}"undefined"!=typeof window&&window;var op=U(127);const Im=new d.OlP("angularfire2.auth.use-emulator"),Tm=new d.OlP("angularfire2.auth.settings"),Dm=new d.OlP("angularfire2.auth.tenant-id"),Am=new d.OlP("angularfire2.auth.langugage-code"),Sm=new d.OlP("angularfire2.auth.use-device-language"),xm=new d.OlP("angularfire.auth.persistence"),$C=(n,e,t,r,i,a,u,f)=>(0,ui.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),u)for(const[v,A]of Object.entries(u))m.settings[v]=A;return f&&m.setPersistence(f),m},[t,r,i,a,u,f]);let nd=(()=>{class n{constructor(t,r,i,a,u,f,m,v,A,x,N,$){const Y=new Fo.x,Ce=mt(void 0).pipe((0,lm.Q)(u.outsideAngular),vi(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,yt.U)(()=>(0,ui.on)(t,a,r)),(0,yt.U)(Ve=>$C(Ve,a,f,v,A,x,m,N)),mv({bufferSize:1,refCount:!1}));if(Co(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{Ce.pipe(jc()).subscribe();const ht=Ce.pipe(vi(ft=>ft.getRedirectResult().then(Zt=>Zt,()=>null)),nn.iC,mv({bufferSize:1,refCount:!1})),it=Ce.pipe(vi(ft=>new Un.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(Kt=>Zt.next(Kt),Kt=>Zt.error(Kt),()=>Zt.complete()))})))),Ft=Ce.pipe(vi(ft=>new Un.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(Kt=>Zt.next(Kt),Kt=>Zt.error(Kt),()=>Zt.complete()))}))));this.authState=ht.pipe(XD(it),(0,um.R)(u.outsideAngular),(0,lm.Q)(u.insideAngular)),this.user=ht.pipe(XD(Ft),(0,um.R)(u.outsideAngular),(0,lm.Q)(u.insideAngular)),this.idToken=this.user.pipe(vi(ft=>ft?(0,Nn.D)(ft.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(vi(ft=>ft?(0,Nn.D)(ft.getIdTokenResult()):mt(null))),this.credential=(0,am.T)(ht,Y,this.authState.pipe(Qa(ft=>!ft))).pipe((0,yt.U)(ft=>(null==ft?void 0:ft.user)?ft:null),(0,um.R)(u.outsideAngular),(0,lm.Q)(u.insideAngular))}return(0,ui.pX)(this,Ce,a,{spy:{apply:(Ve,ht,it)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&it.then(Ft=>Y.next(Ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nn.HU),d.LFG(Im,8),d.LFG(Tm,8),d.LFG(Dm,8),d.LFG(Am,8),d.LFG(Sm,8),d.LFG(xm,8),d.LFG(td,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IA=(()=>{class n{constructor(){op.Z.registerVersion("angularfire",nn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[nd]}),n})();const zC=function(){return["/registrar"]};let TA=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r,this.credentials=new Rc({email:new Oc("",[qi.required,qi.email]),password:new Oc("",[qi.required,qi.minLength(6)])})}ngOnInit(){}register(t,r){var i=this;return(0,be.Z)(function*(){try{yield i.afAuth.createUserWithEmailAndPassword(t,r),window.alert("You have been successfully registered!")}catch(a){}})()}login(t,r){var i=this;return(0,be.Z)(function*(){try{yield i.afAuth.signInWithEmailAndPassword(t,r),i.router.navigate(["/home"])}catch(a){(function GC(n){nl().fire({title:n,width:600,padding:"3em",color:"#dd6a6a",background:"#fff url(./../../assets/img-home/back-hearts.jpg)"}).then(function(){window.location.href="./../../login"})})(a),console.log(a)}})()}ingresoRapido(){var t,r;null===(t=this.credentials.get("email"))||void 0===t||t.setValue("cgscsilva@gmail.com"),null===(r=this.credentials.get("password"))||void 0===r||r.setValue("123456")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(nd),d.Y36(Ui))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:46,vars:3,consts:[[1,"bodyC"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3","crossorigin","anonymous"],[1,"container"],[1,"top"],[1,"screen"],[1,"outer"],[1,"inner"],[1,"title-name"],[3,"formGroup"],[1,"form-container"],[1,"form-group"],[1,"row"],[1,"col-lg-12","col-md-6"],["for","exampleInputEmail1"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Email","formControlName","email",1,"form-control"],["email",""],["for","exampleInputPassword1"],["type","password","id","exampleInputPassword1","placeholder","Contrase\xf1a","formControlName","password",1,"form-control"],["password",""],[1,"col-md-6"],[1,"start-btn",3,"click"],[1,"start-btn",3,"routerLink"],[1,"ingresoRapido-btn",3,"click"],[1,"power"],[1,"controls"],[1,"dpad"],[1,"plus"],[1,"middle"],[1,"buttons"],[1,"startselect"],[1,"corner"],[1,"speaker"],[1,"set"],[1,"mic"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0),d._UZ(1,"link",1),d.TgZ(2,"div",2),d._UZ(3,"div",3),d.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),d._uU(8,"Iniciar Sesi\xf3n"),d.qZA(),d.TgZ(9,"form",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13),d._uU(15,"Ingresar su email:"),d.qZA(),d._UZ(16,"input",14,15),d.TgZ(18,"label",16),d._uU(19,"Ingresar su contrase\xf1a"),d.qZA(),d._UZ(20,"input",17,18),d.qZA(),d._UZ(22,"div",19),d.qZA(),d.TgZ(23,"div",11)(24,"div",12)(25,"button",20),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(17),f=d.MAs(21);return r.login(u.value,f.value)}),d._uU(26," INGRESAR "),d.qZA(),d.TgZ(27,"button",21),d._uU(28," REGISTRARSE "),d.qZA()()(),d.TgZ(29,"div",11)(30,"div",12)(31,"button",22),d.NdJ("click",function(){return r.ingresoRapido()}),d._uU(32," INGRESO R\xc1PIDO "),d.qZA()()()()()()(),d._UZ(33,"div",23),d.qZA()(),d.TgZ(34,"div",24)(35,"div",25),d._UZ(36,"div",26)(37,"div",27),d.qZA(),d._UZ(38,"div",28)(39,"div",29),d.qZA(),d._UZ(40,"div",30),d.TgZ(41,"div",31),d._UZ(42,"div",32)(43,"div",32),d.qZA(),d._UZ(44,"div",33),d.qZA()(),d._UZ(45,"router-outlet")}2&t&&(d.xp6(9),d.Q6J("formGroup",r.credentials),d.xp6(18),d.Q6J("routerLink",d.DdM(2,zC)))},directives:[Of,za,Nc,Qs,fa,j,Bl,Uu],styles:['.toast-center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.toast-top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.toast-bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.toast-top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.toast-bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.toast-top-left[_ngcontent-%COMP%]{top:12px;left:12px}.toast-top-right[_ngcontent-%COMP%]{top:12px;right:12px}.toast-bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.toast-bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}.toast-title[_ngcontent-%COMP%]{font-weight:700}.toast-message[_ngcontent-%COMP%]{word-wrap:break-word}.toast-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .toast-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.toast-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toast-close-button[_ngcontent-%COMP%]{position:relative;right:-.3em;top:-.3em;float:right;font-size:20px;font-weight:700;color:#fff;text-shadow:0 1px 0 #ffffff}.toast-close-button[_ngcontent-%COMP%]:hover, .toast-close-button[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toast-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:transparent;border:0}.toast-container[_ngcontent-%COMP%]{pointer-events:none;position:fixed;z-index:999999}.toast-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.toast-container[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:0 0 6px;padding:15px 15px 15px 50px;width:300px;border-radius:3px;background-position:15px center;background-repeat:no-repeat;background-size:24px;box-shadow:0 0 12px #999;color:#fff}.toast-container[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}.toast-info[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTI1NiA4QzExOS4wNDMgOCA4IDExOS4wODMgOCAyNTZjMCAxMzYuOTk3IDExMS4wNDMgMjQ4IDI0OCAyNDhzMjQ4LTExMS4wMDMgMjQ4LTI0OEM1MDQgMTE5LjA4MyAzOTIuOTU3IDggMjU2IDh6bTAgMTEwYzIzLjE5NiAwIDQyIDE4LjgwNCA0MiA0MnMtMTguODA0IDQyLTQyIDQyLTQyLTE4LjgwNC00Mi00MiAxOC44MDQtNDIgNDItNDJ6bTU2IDI1NGMwIDYuNjI3LTUuMzczIDEyLTEyIDEyaC04OGMtNi42MjcgMC0xMi01LjM3My0xMi0xMnYtMjRjMC02LjYyNyA1LjM3My0xMiAxMi0xMmgxMnYtNjRoLTEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0yNGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDY0YzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MTAwaDEyYzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MjR6Jy8+PC9zdmc+)}.toast-error[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTI1NiA4QzExOSA4IDggMTE5IDggMjU2czExMSAyNDggMjQ4IDI0OCAyNDgtMTExIDI0OC0yNDhTMzkzIDggMjU2IDh6bTEyMS42IDMxMy4xYzQuNyA0LjcgNC43IDEyLjMgMCAxN0wzMzggMzc3LjZjLTQuNyA0LjctMTIuMyA0LjctMTcgMEwyNTYgMzEybC02NS4xIDY1LjZjLTQuNyA0LjctMTIuMyA0LjctMTcgMEwxMzQuNCAzMzhjLTQuNy00LjctNC43LTEyLjMgMC0xN2w2NS42LTY1LTY1LjYtNjUuMWMtNC43LTQuNy00LjctMTIuMyAwLTE3bDM5LjYtMzkuNmM0LjctNC43IDEyLjMtNC43IDE3IDBsNjUgNjUuNyA2NS4xLTY1LjZjNC43LTQuNyAxMi4zLTQuNyAxNyAwbDM5LjYgMzkuNmM0LjcgNC43IDQuNyAxMi4zIDAgMTdMMzEyIDI1Nmw2NS42IDY1LjF6Jy8+PC9zdmc+)}.toast-success[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTE3My44OTggNDM5LjQwNGwtMTY2LjQtMTY2LjRjLTkuOTk3LTkuOTk3LTkuOTk3LTI2LjIwNiAwLTM2LjIwNGwzNi4yMDMtMzYuMjA0YzkuOTk3LTkuOTk4IDI2LjIwNy05Ljk5OCAzNi4yMDQgMEwxOTIgMzEyLjY5IDQzMi4wOTUgNzIuNTk2YzkuOTk3LTkuOTk3IDI2LjIwNy05Ljk5NyAzNi4yMDQgMGwzNi4yMDMgMzYuMjA0YzkuOTk3IDkuOTk3IDkuOTk3IDI2LjIwNiAwIDM2LjIwNGwtMjk0LjQgMjk0LjQwMWMtOS45OTggOS45OTctMjYuMjA3IDkuOTk3LTM2LjIwNC0uMDAxeicvPjwvc3ZnPg==)}.toast-warning[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1NzYgNTEyJyB3aWR0aD0nNTc2JyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTU2OS41MTcgNDQwLjAxM0M1ODcuOTc1IDQ3Mi4wMDcgNTY0LjgwNiA1MTIgNTI3Ljk0IDUxMkg0OC4wNTRjLTM2LjkzNyAwLTU5Ljk5OS00MC4wNTUtNDEuNTc3LTcxLjk4N0wyNDYuNDIzIDIzLjk4NWMxOC40NjctMzIuMDA5IDY0LjcyLTMxLjk1MSA4My4xNTQgMGwyMzkuOTQgNDE2LjAyOHpNMjg4IDM1NGMtMjUuNDA1IDAtNDYgMjAuNTk1LTQ2IDQ2czIwLjU5NSA0NiA0NiA0NiA0Ni0yMC41OTUgNDYtNDYtMjAuNTk1LTQ2LTQ2LTQ2em0tNDMuNjczLTE2NS4zNDZsNy40MTggMTM2Yy4zNDcgNi4zNjQgNS42MDkgMTEuMzQ2IDExLjk4MiAxMS4zNDZoNDguNTQ2YzYuMzczIDAgMTEuNjM1LTQuOTgyIDExLjk4Mi0xMS4zNDZsNy40MTgtMTM2Yy4zNzUtNi44NzQtNS4wOTgtMTIuNjU0LTExLjk4Mi0xMi42NTRoLTYzLjM4M2MtNi44ODQgMC0xMi4zNTYgNS43OC0xMS45ODEgMTIuNjU0eicvPjwvc3ZnPg==)}.toast-container.toast-top-center[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%], .toast-container.toast-bottom-center[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{width:300px;margin-left:auto;margin-right:auto}.toast-container.toast-top-full-width[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%], .toast-container.toast-bottom-full-width[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{width:96%;margin-left:auto;margin-right:auto}.ngx-toastr[_ngcontent-%COMP%]{background-color:#030303;pointer-events:auto}.toast-success[_ngcontent-%COMP%]{background-color:#51a351}.toast-error[_ngcontent-%COMP%]{background-color:#bd362f}.toast-info[_ngcontent-%COMP%]{background-color:#2f96b4}.toast-warning[_ngcontent-%COMP%]{background-color:#f89406}.toast-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width: 240px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}.toast-container[_ngcontent-%COMP%]   .toast-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width: 241px) and (max-width: 480px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}.toast-container[_ngcontent-%COMP%]   .toast-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width: 481px) and (max-width: 768px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}#toast-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{opacity:1}.login-success[_ngcontent-%COMP%]{background:url(back-hearts.109130d0bd8f90a9.jpg) repeat center center fixed;height:100%;background-size:100%}.bodyC[_ngcontent-%COMP%]{background:url(back-hearts.109130d0bd8f90a9.jpg) repeat center center fixed;background-size:100%;height:100%;margin-top:100px}.start-btn[_ngcontent-%COMP%], .ingresoRapido-btn[_ngcontent-%COMP%]{text-align:center;display:inline-block;margin:8px;font-weight:700;padding:2px 10px;background-color:#d3d3d3;text-shadow:-1px -1px black,1px 1px white;color:gray;border-radius:7px;box-shadow:0 .2em gray;cursor:pointer}.ingresoRapido-btn[_ngcontent-%COMP%]{width:100%}.form-group[_ngcontent-%COMP%]{margin-top:10%}.form-container[_ngcontent-%COMP%]{padding-top:10%;padding-left:5%;padding-right:5%}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%}body[_ngcontent-%COMP%]{font-family:"Press Start 2P",cursive;background:repeating-linear-gradient(to bottom,#0f0a1e,#0f0a1e 2px,#140e29 2px,#140e29 4px)}.title-name[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0%;right:0;height:90px;color:#fff;width:100%;text-align:center;margin-top:0%;font-size:35px;letter-spacing:5px;text-shadow:-2px 0 0 #fdff2a,-4px 0 0 #df4a42,2px 0 0 #91fcfe,4px 0 0 #4405fc;animation:blink 1s steps(4,start) infinite}@keyframes blink{to{visibility:hidden}}.container[_ngcontent-%COMP%]{align-items:center;justify-content:center;position:absolute;top:20%;left:50%;transform:translate(-50%,50px);background-color:#2c2c2c22;width:450px;height:600px;border:3px solid #787a79;border-radius:10px 10px 50px}.top[_ngcontent-%COMP%]{width:100%;height:50px;background-color:#2c2c2c07;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:3px solid #787a79}.top[_ngcontent-%COMP%]:after{content:" ";display:block;position:relative;top:7px;left:0px;width:40px;border:5px solid #787a79;border-radius:5px}.screen[_ngcontent-%COMP%]{width:370px;height:360px;position:relative;top:12px;left:30px;background:#bdbdbd;border:3px solid #787a79;border-radius:5px}.screen[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{width:300px;height:310px;position:relative;top:15px;left:50%;transform:translate(-50%);background:#c7a2ff;border:3px solid #787a79;border-radius:5px}.screen[_ngcontent-%COMP%]   .power[_ngcontent-%COMP%]{width:20px;height:20px;position:absolute;top:calc(50% + 120px);left:4px;background:#f3886b;border:3px solid #787a79;border-radius:100%}.screen[_ngcontent-%COMP%]   .power[_ngcontent-%COMP%]:after{content:" ";display:block;width:20px;border-bottom:2px solid #787a79;position:relative;top:13px;left:-6px}.controls[_ngcontent-%COMP%]{position:relative}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]{width:110px;height:110px;background:#e0e2e1;border:2px solid #787a79;border-radius:100%;position:relative;left:10px;top:30px}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%], .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after{box-sizing:border-box}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#bdbdbd;border-radius:3px;box-shadow:0 0 0 3px #787a79;content:"";display:block;height:20px;width:60px}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:after{transform:translate(-50%,-50%) rotate(90deg)}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#bdbdbd;width:30px;height:15px}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#f5f5f5;border-radius:50%;border:2px solid #787a79;content:"";height:12px;width:12px}.controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{position:absolute;right:10px;top:55px;width:120px;height:50px;background-color:#e0e2e1;border:2px solid #787a79;border-radius:30px;display:flex;justify-content:space-between;transform:rotate(-35deg)}.controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#f3886b;width:40px;height:40px;border:2px solid #787a79;border-radius:100%;margin:3px}.controls[_ngcontent-%COMP%]   .startselect[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%,40px);display:flex}.controls[_ngcontent-%COMP%]   .startselect[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .startselect[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#e0e2e1;border:2px solid #787a79;border-radius:8px;margin:0 4px;width:45px;height:15px;transform:rotate(-35deg)}.corner[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;background-color:#f5f5f5;border-top-left-radius:100%;border-bottom-right-radius:48px;width:80px;height:50px}.speaker[_ngcontent-%COMP%]{position:absolute;bottom:15px;right:20px;transform:rotate(-35deg);display:flex}.speaker[_ngcontent-%COMP%]   .set[_ngcontent-%COMP%]{display:flex}.speaker[_ngcontent-%COMP%]   .set[_ngcontent-%COMP%]:before, .speaker[_ngcontent-%COMP%]   .set[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#f5f5f5;border:2px solid #bdbdbd;margin:3px;width:1px;height:35px}.mic[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:50%;transform:translate(-50%);width:20px;border:3px solid #787a79;border-radius:3px}.mic[_ngcontent-%COMP%]:before, .mic[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;top:0;background-color:#787a79;width:2px;height:11px}.mic[_ngcontent-%COMP%]:before{right:2px}.mic[_ngcontent-%COMP%]:after{left:2px}']}),n})();var DA=U(424),Lv=U(4986);function Mm(){return(0,li.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gt.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function WC(n,e=Kd.y){return n=null!=n?n:qC,(0,li.e)((t,r)=>{let i,a=!0;t.subscribe((0,Gt.x)(r,u=>{const f=e(u);(a||!n(i,f))&&(a=!1,i=f,r.next(u))}))})}function qC(n,e){return n===e}U(5881);var gt,zu=U(3942),SA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hl={},Fv=Fv||{},$t=SA||self;function Uv(){}function Pm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function rd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vv="closure_uid_"+(1e9*Math.random()>>>0),xA=0;function il(n,e,t){return n.call.apply(n.bind,arguments)}function Ea(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function er(n,e,t){return(er=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?il:Ea).apply(null,arguments)}function ap(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ci(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function Gu(){this.s=this.s,this.o=this.o}var PA={};Gu.prototype.s=!1,Gu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function rl(n){return Object.prototype.hasOwnProperty.call(n,Vv)&&n[Vv]||(n[Vv]=++xA)}(this);delete PA[n]}},Gu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Om=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function KC(n){return Array.prototype.concat.apply([],arguments)}function Rm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function km(n){return/^[\s\xa0]*$/.test(n)}var Cs,Bv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xi(n,e){return-1!=n.indexOf(e)}function wh(n,e){return n<e?-1:n>e?1:0}e:{var jv=$t.navigator;if(jv){var Hv=jv.userAgent;if(Hv){Cs=Hv;break e}}Cs=""}function up(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cp(n){const e={};for(const t in n)e[t]=n[t];return e}var $v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<$v.length;a++)t=$v[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nm(n){return Nm[" "](n),n}Nm[" "]=Uv;var Fm,n,QC=Xi(Cs,"Opera"),id=Xi(Cs,"Trident")||Xi(Cs,"MSIE"),Gv=Xi(Cs,"Edge"),Lm=Gv||id,JC=Xi(Cs,"Gecko")&&!(Xi(Cs.toLowerCase(),"webkit")&&!Xi(Cs,"Edge"))&&!(Xi(Cs,"Trident")||Xi(Cs,"MSIE"))&&!Xi(Cs,"Edge"),OA=Xi(Cs.toLowerCase(),"webkit")&&!Xi(Cs,"Edge");function XC(){var n=$t.document;return n?n.documentMode:void 0}e:{var Wv="",qv=(n=Cs,JC?/rv:([^\);]+)(\)|;)/.exec(n):Gv?/Edge\/([\d\.]+)/.exec(n):id?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):OA?/WebKit\/(\S+)/.exec(n):QC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(qv&&(Wv=qv?qv[1]:""),id){var Zv=XC();if(null!=Zv&&Zv>parseFloat(Wv)){Fm=String(Zv);break e}}Fm=Wv}var RA={};var NA=$t.document&&id&&(XC()||parseInt(Fm,10))||void 0,LA=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",Uv,e),$t.removeEventListener("test",Uv,e)}catch(t){}return n}();function es(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function dp(n,e){if(es.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(JC){e:{try{Nm(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:FA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&dp.Z.h.call(this)}}es.prototype.h=function(){this.defaultPrevented=!0},Ci(dp,es);var FA={2:"touch",3:"pen",4:"mouse"};dp.prototype.h=function(){dp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var hp="closure_listenable_"+(1e6*Math.random()|0),UA=0;function tE(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++UA,this.ca=this.fa=!1}function fp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function pp(n){this.src=n,this.g={},this.h=0}function Um(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ZC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(fp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}pp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=Vm(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new tE(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Bm="closure_lm_"+(1e6*Math.random()|0),jm={};function Yv(n,e,t,r,i){if(r&&r.once)return Jv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Yv(n,e[a],t,r,i);return null}return t=sE(t),n&&n[hp]?n.N(e,t,rd(r)?!!r.capture:!!r,i):Qv(n,e,t,!1,r,i)}function Qv(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=rd(i)?!!i.capture:!!i,f=iE(n);if(f||(n[Bm]=f=new pp(n)),(t=f.add(e,t,r,u,a)).proxy)return t;if(r=function nE(){var e=bh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)LA||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(rE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Jv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Jv(n,e[a],t,r,i);return null}return t=sE(t),n&&n[hp]?n.O(e,t,rd(r)?!!r.capture:!!r,i):Qv(n,e,t,!0,r,i)}function Wu(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Wu(n,e[a],t,r,i);else r=rd(r)?!!r.capture:!!r,t=sE(t),n&&n[hp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vm(a=n.g[e],t,r,i))&&(fp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=iE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vm(e,t,r,i)),(t=-1<n?e[n]:null)&&Xv(t))}function Xv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[hp])Um(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(rE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=iE(e))?(Um(t,n),0==t.h&&(t.src=null,e[Bm]=null)):fp(n)}}}function rE(n){return n in jm?jm[n]:jm[n]="on"+n}function bh(n,e){if(n.ca)n=!0;else{e=new dp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Xv(n),n=t.call(r,e)}return n}function iE(n){return(n=n[Bm])instanceof pp?n:null}var gp="__closure_events_fn_"+(1e9*Math.random()>>>0);function sE(n){return"function"==typeof n?n:(n[gp]||(n[gp]=function(e){return n.handleEvent(e)}),n[gp])}function di(){Gu.call(this),this.i=new pp(this),this.P=this,this.I=null}function Ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new es(e,n);else if(e instanceof es)e.target=e.target||n;else{var i=e;zv(e=new es(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=e0(u,r,!0,e)&&i}if(i=e0(u=e.g=n,r,!0,e)&&i,i=e0(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=e0(u=e.g=t[a],r,!1,e)&&i}function e0(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var f=u.listener,m=u.ia||u.src;u.fa&&Um(n.i,u),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Ci(di,Gu),di.prototype[hp]=!0,di.prototype.removeEventListener=function(n,e,t,r){Wu(this,n,e,t,r)},di.prototype.M=function(){if(di.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)fp(t[r]);delete n.g[e],n.h--}}this.I=null},di.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},di.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Rt=$t.JSON.stringify;function VA(){var n=t0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Eh,oE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Hm,n=>n.reset());class Hm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jA(n){$t.setTimeout(()=>{throw n},0)}function Ch(n,e){Eh||function Mr(){var n=$t.Promise.resolve(void 0);Eh=function(){n.then(HA)}}(),aE||(Eh(),aE=!0),t0.add(n,e)}var aE=!1,t0=new class BA{constructor(){this.h=this.g=null}add(e,t){const r=oE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function HA(){for(var n;n=VA();){try{n.h.call(n.g)}catch(t){jA(t)}var e=oE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}aE=!1}function $m(n,e){di.call(this),this.h=n||1,this.g=e||$t,this.j=er(this.kb,this),this.l=Date.now()}function zm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Gm(n,e,t){if("function"==typeof n)t&&(n=er(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=er(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function n0(n){n.g=Gm(()=>{n.g=null,n.i&&(n.i=!1,n0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ci($m,di),(gt=$m.prototype).da=!1,gt.S=null,gt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ei(this,"tick"),this.da&&(zm(this),this.start()))}},gt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.M=function(){$m.Z.M.call(this),zm(this),delete this.g};class lE extends Gu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:n0(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mp(n){Gu.call(this),this.h=n,this.g={}}Ci(mp,Gu);var uE=[];function cE(n,e,t,r){Array.isArray(t)||(t&&(uE[0]=t.toString()),t=uE);for(var i=0;i<t.length;i++){var a=Yv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Ih(n){up(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xv(e)},n),n.g={}}function Wm(){this.g=!0}function $l(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function hE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return Rt(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}mp.prototype.M=function(){mp.Z.M.call(this),Ih(this)},mp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wm.prototype.Aa=function(){this.g=!1},Wm.prototype.info=function(){};var qu={},fE=null;function Zu(){return fE=fE||new di}function Th(n){es.call(this,qu.Ma,n)}function _p(n){const e=Zu();Ei(e,new Th(e,n))}function pE(n,e){es.call(this,qu.STAT_EVENT,n),this.stat=e}function Es(n){const e=Zu();Ei(e,new pE(e,n))}function r0(n,e){es.call(this,qu.Na,n),this.size=e}function Dh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}qu.Ma="serverreachability",Ci(Th,es),qu.STAT_EVENT="statevent",Ci(pE,es),qu.Na="timingevent",Ci(r0,es);var yp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},gE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qm(){}function _E(){}qm.prototype.h=null;var wE,Zm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yE(){es.call(this,"d")}function vE(){es.call(this,"c")}function vp(){}function Ku(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new mp(this),this.P=GA,this.W=new $m(n=Lm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bE}function bE(){this.i=null,this.g="",this.h=!1}Ci(yE,es),Ci(vE,es),Ci(vp,qm),vp.prototype.g=function(){return new XMLHttpRequest},vp.prototype.i=function(){return{}},wE=new vp;var GA=45e3,Km={},Yu={};function s0(n,e,t){n.K=1,n.v=wp(ol(e)),n.s=t,n.U=!0,CE(n,null)}function CE(n,e){n.F=Date.now(),Ah(n),n.A=ol(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ME(t.h,"t",r),n.C=0,t=n.l.H,n.h=new bE,n.g=GE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new lE(er(n.Ia,n,n.g),n.O)),cE(n.V,n.g,"readystatechange",n.gb),e=n.H?cp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),_p(1),function $A(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var A=v[0];v=v[1];var x=A.split("_");u=2<=x.length&&"type"==x[1]?u+(A+"=")+v+"&":u+(A+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function EE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function IE(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=WA(n,t),i==Yu){4==e&&(n.o=4,Es(14),r=!1),$l(n.j,n.m,null,"[Incomplete Response]");break}if(i==Km){n.o=4,Es(15),$l(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$l(n.j,n.m,i,null),Qm(n,i)}EE(n)&&i!=Yu&&i!=Km&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Es(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),f_(e),e.L=!0,Es(11))):($l(n.j,n.m,t,"[Invalid Chunked Response]"),sd(n),sl(n))}function WA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Yu:(t=Number(e.substring(t,r)),isNaN(t)?Km:(r+=1)+t>e.length?Yu:(e=e.substr(r,t),n.C=r+t,e))}function Ah(n){n.Y=Date.now()+n.P,TE(n,n.P)}function TE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Dh(er(n.eb,n),e)}function Ym(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function sl(n){0==n.l.G||n.I||jE(n.l,n)}function sd(n){Ym(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,zm(n.W),Ih(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Qm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ip(t.i,n)))if(t.I=n.N,!n.J&&Ip(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Dh(er(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Mp(t),d_(t)}BE(t),Es(18)}if(1>=OE(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else ld(t,11)}else if((n.J||t.g==n)&&Mp(t),!km(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const A=v[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=v[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Y=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;!a.g&&(Xi(Y,"spdy")||Xi(Y,"quic")||Xi(Y,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(d0(a,a.h),a.h=null))}if(r.D){const Ce=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;Ce&&(r.sa=Ce,pr(r.F,r.D,Ce))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=zE(r,r.H?r.la:null,r.W),u.J){h0(r.i,u);var f=u,m=r.K;m&&f.setTimeout(m),f.B&&(Ym(f),Ah(f)),r.g=u}else m0(r);0<t.l.length&&zl(t)}else"stop"!=v[0]&&"close"!=v[0]||ld(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?ld(t,7):p0(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}_p(4)}catch(v){}}function Jm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Pm(n)||"string"==typeof n)Om(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Pm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function qA(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Pm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Sh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Sh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Xm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];od(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)od(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function od(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(gt=Ku.prototype).setTimeout=function(n){this.P=n},gt.gb=function(n){n=n.target;const e=this.L;e&&3==al(n)?e.l():this.Ia(n)},gt.Ia=function(n){try{if(n==this.g)e:{const A=al(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||Lm||this.g&&(this.h.h||this.g.ga()||VE(this.g)))){this.I||4!=A||7==e||_p(8==e||0>=x?3:2),Ym(this);var t=this.g.ba();this.N=t;t:if(EE(this)){var r=VE(this.g);n="";var i=r.length,a=4==al(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){sd(this),sl(this);var u="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function zA(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!km(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Es(12),sd(this),sl(this);break e}$l(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qm(this,t)}this.U?(IE(this,A,u),Lm&&this.i&&3==A&&(cE(this.V,this.W,"tick",this.fb),this.W.start())):($l(this.j,this.m,u,null),Qm(this,u)),4==A&&sd(this),this.i&&!this.I&&(4==A?jE(this.l,this):(this.i=!1,Ah(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Es(12)):(this.o=0,Es(13)),sd(this),sl(this)}}}catch(A){}},gt.fb=function(){if(this.g){var n=al(this.g),e=this.g.ga();this.C<e.length&&(Ym(this),IE(this,n,e),this.i&&4!=n&&Ah(this))}},gt.cancel=function(){this.I=!0,sd(this)},gt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function dE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_p(3),Es(17)),sd(this),this.o=2,sl(this)):TE(this,this.Y-n)},(gt=Sh.prototype).R=function(){Xm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},gt.T=function(){return Xm(this),this.g.concat()},gt.get=function(n,e){return od(this.h,n)?this.h[n]:e},gt.set=function(n,e){od(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},gt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var e_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qu){this.g=void 0!==e?e:n.g,t_(this,n.j),this.s=n.s,n_(this,n.i),r_(this,n.m),this.l=n.l,e=n.h;var t=new Ep;t.i=e.i,e.g&&(t.g=new Sh(e.g),t.h=e.h),i_(this,t),this.o=n.o}else n&&(t=String(n).match(e_))?(this.g=!!e,t_(this,t[1]||"",!0),this.s=bp(t[2]||""),n_(this,t[3]||"",!0),r_(this,t[4]),this.l=bp(t[5]||"",!0),i_(this,t[6]||"",!0),this.o=bp(t[7]||"")):(this.g=!!e,this.h=new Ep(null,this.g))}function ol(n){return new Qu(n)}function t_(n,e,t){n.j=t?bp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function n_(n,e,t){n.i=t?bp(e,!0):e}function r_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function i_(n,e,t){e instanceof Ep?(n.h=e,function a0(n,e){e&&!n.j&&(Ju(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(o0(this,r),ME(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Cp(e,AE)),n.h=new Ep(e,n.g))}function pr(n,e,t){n.h.set(e,t)}function wp(n){return pr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function bp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Cp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,QA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function QA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Cp(e,DE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Cp(e,DE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Cp(t,"/"==t.charAt(0)?XA:JA,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Cp(t,SE)),n.join("")};var DE=/[#\/\?@]/g,JA=/[#\?:]/g,XA=/[#\?]/g,AE=/[#\?@]/g,SE=/#/g;function Ep(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ju(n){n.g||(n.g=new Sh,n.h=0,n.i&&function ZA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function o0(n,e){Ju(n),e=xh(n,e),od(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,od((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Xm(n)))}function xE(n,e){return Ju(n),e=xh(n,e),od(n.g.h,e)}function ME(n,e,t){o0(n,e),0<t.length&&(n.i=null,n.g.set(xh(n,e),Rm(t)),n.h+=t.length)}function xh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function u0(n){this.l=n||c0,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ea&&$t.g.Ea()&&$t.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=Ep.prototype).add=function(n,e){Ju(this),this.i=null,n=xh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},gt.forEach=function(n,e){Ju(this),this.g.forEach(function(t,r){Om(t,function(i){n.call(e,i,r,this)},this)},this)},gt.T=function(){Ju(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},gt.R=function(n){Ju(this);var e=[];if("string"==typeof n)xE(this,n)&&(e=KC(e,this.g.get(xh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=KC(e,n[t])}return e},gt.set=function(n,e){return Ju(this),this.i=null,xE(this,n=xh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},gt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var c0=10;function PE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OE(n){return n.h?1:n.g?n.g.size:0}function Ip(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function d0(n,e){n.g?n.g.add(e):n.h=e}function h0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function RE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Rm(n.i)}function s_(){}function eS(){this.g=new s_}function kE(n,e,t){const r=t||"";try{Jm(n,function(i,a){let u=i;rd(i)&&(u=Rt(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function o_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Xu(n){this.l=n.$b||null,this.j=n.ib||!1}function a_(n,e){di.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ec,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}u0.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},s_.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},s_.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},Ci(Xu,qm),Xu.prototype.g=function(){return new a_(this.l,this.j)},Xu.prototype.i=function(n){return function(){return n}}({}),Ci(a_,di);var ec=0;function Mh(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Tp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,l_(n)}function l_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(gt=a_.prototype).open=function(n,e){if(this.readyState!=ec)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,l_(this)},gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tp(this)),this.readyState=ec},gt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,l_(this)),this.g&&(this.readyState=3,l_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==$t.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mh(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},gt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Tp(this):l_(this),3==this.readyState&&Mh(this)}},gt.Ua=function(n){this.g&&(this.response=this.responseText=n,Tp(this))},gt.Ta=function(n){this.g&&(this.response=n,Tp(this))},gt.ha=function(){this.g&&Tp(this)},gt.setRequestHeader=function(n,e){this.v.append(n,e)},gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(a_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var NE=$t.JSON.parse;function Jr(n){di.call(this),this.headers=new Sh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=LE,this.K=this.L=!1}Ci(Jr,di);var LE="",tS=/^https?$/i,nS=["POST","PUT"];function UE(n){return"content-type"==n.toLowerCase()}function u_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Dp(n),c_(n)}function Dp(n){n.D||(n.D=!0,Ei(n,"complete"),Ei(n,"error"))}function Ph(n){if(n.h&&void 0!==Fv&&(!n.C[1]||4!=al(n)||2!=n.ba()))if(n.v&&4==al(n))Gm(n.Fa,0,n);else if(Ei(n,"readystatechange"),4==al(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(e_)[1]||null;if(!i&&$t.self&&$t.self.location){var a=$t.self.location.protocol;i=a.substr(0,a.length-1)}r=!tS.test(i?i.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var u=2<al(n)?n.g.statusText:""}catch(m){u=""}n.j=u+" ["+n.ba()+"]",Dp(n)}}finally{c_(n)}}}function c_(n,e){if(n.g){f0(n);const t=n.g,r=n.C[0]?Uv:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function f0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function al(n){return n.g?n.g.readyState:0}function VE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case LE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ap(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function rS(n){let e="";return up(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pr(n,e,t))}function Sp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function iS(n){this.za=0,this.l=[],this.h=new Wm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Sp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Sp("baseRetryDelayMs",5e3,n),this.$a=Sp("retryDelaySeedMs",1e4,n),this.Ya=Sp("forwardChannelMaxRetries",2,n),this.ra=Sp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new u0(n&&n.concurrentRequestLimit),this.Ca=new eS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function p0(n){if(ad(n),3==n.G){var e=n.V++,t=ol(n.F);pr(t,"SID",n.J),pr(t,"RID",e),pr(t,"TYPE","terminate"),xp(n,t),(e=new Ku(n,n.h,e,void 0)).K=2,e.v=wp(ol(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=GE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ah(e)}$E(n)}function d_(n){n.g&&(f_(n),n.g.cancel(),n.g=null)}function ad(n){d_(n),n.u&&($t.clearTimeout(n.u),n.u=null),Mp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function h_(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&zl(n)}function zl(n){PE(n.i)||n.m||(n.m=!0,Ch(n.Ha,n),n.C=0)}function g0(n,e){var t;t=e?e.m:n.V++;const r=ol(n.F);pr(r,"SID",n.J),pr(r,"RID",t),pr(r,"AID",n.U),xp(n,r),n.o&&n.s&&Ap(r,n.o,n.s),t=new Ku(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=sS(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),d0(n.i,t),s0(t,r,e)}function xp(n,e){n.j&&Jm({},function(t,r){pr(e,r,t)})}function sS(n,e,t){t=Math.min(n.l.length,t);var r=n.j?er(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const A=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{kE(A,u,"req"+v+"_")}catch(x){r&&r(A)}}if(f){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function m0(n){n.g||n.u||(n.Y=1,Ch(n.Ga,n),n.A=0)}function BE(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Dh(er(n.Ga,n),HE(n,n.A)),n.A++,0))}function f_(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function p_(n){n.g=new Ku(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ol(n.oa);pr(e,"RID","rpc"),pr(e,"SID",n.J),pr(e,"CI",n.N?"0":"1"),pr(e,"AID",n.U),xp(n,e),pr(e,"TYPE","xmlhttp"),n.o&&n.s&&Ap(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=wp(ol(e)),t.s=null,t.U=!0,CE(t,n)}function Mp(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function jE(n,e){var t=null;if(n.g==e){Mp(n),f_(n),n.g=null;var r=2}else{if(!Ip(n.i,e))return;t=e.D,h0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ei(r=Zu(),new r0(r,t,e,i)),zl(n)}else m0(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function GO(n,e){return!(OE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Dh(er(n.Ha,n,e),HE(n,n.C)),n.C++,0)))}(n,e)||2==r&&BE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ld(n,5);break;case 4:ld(n,10);break;case 3:ld(n,6);break;default:ld(n,2)}}function HE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ld(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=er(n.jb,n);t||(t=new Qu("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||t_(t,"https"),wp(t)),function zO(n,e){const t=new Wm;if($t.Image){const r=new Image;r.onload=ap(o_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ap(o_,t,r,"TestLoadImage: error",!1,e),r.onabort=ap(o_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ap(o_,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Es(2);n.G=0,n.j&&n.j.va(e),$E(n),ad(n)}function $E(n){n.G=0,n.I=-1,n.j&&((0!=RE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Rm(n.l),n.l.length=0),n.j.ua())}function zE(n,e,t){let r=function KA(n){return n instanceof Qu?ol(n):new Qu(n,void 0)}(t);if(""!=r.i)e&&n_(r,e+"."+r.i),r_(r,r.m);else{const i=$t.location;r=function YA(n,e,t,r){var i=new Qu(null,void 0);return n&&t_(i,n),e&&n_(i,e),t&&r_(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&up(n.aa,function(i,a){pr(r,a,i)}),t=n.sa,(e=n.D)&&t&&pr(r,e,t),pr(r,"VER",n.ma),xp(n,r),r}function GE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jr(t&&n.Ba&&!n.qa?new Xu({ib:!0}):n.qa)).L=n.H,e}function WE(){}function g_(){if(id&&!(10<=Number(NA)))throw Error("Environmental error: no available transport.")}function oo(n,e){di.call(this),this.g=new iS(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!km(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!km(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ud(this)}function Oh(n){yE.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _0(){vE.call(this),this.status=1}function ud(n){this.g=n}(gt=Jr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wE.g(),this.C=function mE(n){return n.h||(n.h=n.i())}(this.u?this.u:wE),this.g.onreadystatechange=er(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void u_(this,a)}n=t||"";const i=new Sh(this.headers);r&&Jm(r,function(a,u){i.set(u,a)}),r=function lp(n){e:{var e=UE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=$t.FormData&&n instanceof $t.FormData,!(0<=ZC(nS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{f0(this),0<this.B&&((this.K=function FE(n){return id&&function kA(){return function YC(n){var e=RA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Bv(String(Fm)).split("."),t=Bv("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=wh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||wh(0==i[2].length,0==a[2].length)||wh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=er(this.pa,this)):this.A=Gm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){u_(this,a)}},gt.pa=function(){void 0!==Fv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),c_(this))},gt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),c_(this,!0)),Jr.Z.M.call(this)},gt.Fa=function(){this.s||(this.F||this.v||this.l?Ph(this):this.cb())},gt.cb=function(){Ph(this)},gt.ba=function(){try{return 2<al(this)?this.g.status:-1}catch(n){return-1}},gt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},gt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),NE(e)}},gt.Da=function(){return this.m},gt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=iS.prototype).ma=8,gt.G=1,gt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},gt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ku(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=cp(a),zv(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=sS(this,i,e),pr(t=ol(this.F),"RID",n),pr(t,"CVER",22),this.D&&pr(t,"X-HTTP-Session-Id",this.D),xp(this,t),this.o&&a&&Ap(t,this.o,a),d0(this.i,i),this.Ra&&pr(t,"TYPE","init"),this.ja?(pr(t,"$req",e),pr(t,"SID","null"),i.$=!0,s0(i,t,null)):s0(i,t,e),this.G=2}}else 3==this.G&&(n?g0(this,n):0==this.l.length||PE(this.i)||g0(this))},gt.Ga=function(){if(this.u=null,p_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Dh(er(this.bb,this),n)}},gt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Es(10),d_(this),p_(this))},gt.ab=function(){null!=this.v&&(this.v=null,d_(this),BE(this),Es(19))},gt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Es(2)):(this.h.info("Failed to ping google.com"),Es(1))},(gt=WE.prototype).xa=function(){},gt.wa=function(){},gt.va=function(){},gt.ua=function(){},gt.Oa=function(){},g_.prototype.g=function(n,e){return new oo(n,e)},Ci(oo,di),oo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ch(er(n.hb,n,e))),Es(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zE(n,null,n.W),zl(n)},oo.prototype.close=function(){p0(this.g)},oo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,h_(this.g,e)}else this.v?((e={}).__data__=Rt(n),h_(this.g,e)):h_(this.g,n)},oo.prototype.M=function(){this.g.j=null,delete this.j,p0(this.g),delete this.g,oo.Z.M.call(this)},Ci(Oh,yE),Ci(_0,vE),Ci(ud,WE),ud.prototype.xa=function(){Ei(this.g,"a")},ud.prototype.wa=function(n){Ei(this.g,new Oh(n))},ud.prototype.va=function(n){Ei(this.g,new _0(n))},ud.prototype.ua=function(){Ei(this.g,"b")},g_.prototype.createWebChannel=g_.prototype.g,oo.prototype.send=oo.prototype.u,oo.prototype.open=oo.prototype.m,oo.prototype.close=oo.prototype.close,yp.NO_ERROR=0,yp.TIMEOUT=8,yp.HTTP_ERROR=6,gE.COMPLETE="complete",_E.EventType=Zm,Zm.OPEN="a",Zm.CLOSE="b",Zm.ERROR="c",Zm.MESSAGE="d",di.prototype.listen=di.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var qE=Hl.createWebChannelTransport=function(){return new g_},ZE=Hl.getStatEventTarget=function(){return Zu()},m_=Hl.ErrorCode=yp,oS=Hl.EventType=gE,aS=Hl.Event=qu,KE=Hl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lS=Hl.FetchXmlHttpFactory=Xu,__=Hl.WebChannel=_E,uS=Hl.XhrIo=Jr;const YE="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let Rh="9.6.10";const ll=new ba.Yd("@firebase/firestore");function Ho(){return ll.logLevel}function Ge(n,...e){if(ll.logLevel<=ba.in.DEBUG){const t=e.map(y0);ll.debug(`Firestore (${Rh}): ${n}`,...t)}}function gr(n,...e){if(ll.logLevel<=ba.in.ERROR){const t=e.map(y0);ll.error(`Firestore (${Rh}): ${n}`,...t)}}function Pp(n,...e){if(ll.logLevel<=ba.in.WARN){const t=e.map(y0);ll.warn(`Firestore (${Rh}): ${n}`,...t)}}function y0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function wt(n="Unexpected state"){const e=`FIRESTORE (${Rh}) INTERNAL ASSERTION FAILED: `+n;throw gr(e),new Error(e)}function Vt(n,e){n||wt()}function at(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class v_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class dS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hS{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hi,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=u;e.enqueueRetryable((0,be.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt("string"==typeof r.accessToken),new v_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vt(null===e||"string"==typeof e),new zr(e)}}class WO{constructor(e,t,r){this.type="FirstParty",this.user=zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class v0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new WO(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,Ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Vt("string"==typeof t.token),this.p=t.token,new w_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function fS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Is.A=-1;class eI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function gn(n,e){return n<e?-1:n>e?1:0}function kh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function w0(n){return n+"\0"}class Cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cr.fromMillis(Date.now())}static fromDate(e){return Cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gn(this.nanoseconds,e.nanoseconds):gn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new Cr(0,0))}static max(){return new Ut(new Cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function b0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function C0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Op{constructor(e,t,r){void 0===t?t=0:t>e.length&&wt(),void 0===r?r=e.length-t:r>e.length-t&&wt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Op.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Op?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Op{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const tI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends Op{construct(e,t,r){return new Ii(e,t,r)}static isValidIdentifier(e){return tI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ii(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ue(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ue(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ue(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(a(),i++)}if(a(),u)throw new Ue(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(t)}static emptyPath(){return new Ii([])}}class cd{constructor(e){this.fields=e,e.sort(Ii.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new xn(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new xn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const Nh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(n){if(Vt(!!n),"string"==typeof n){let e=0;const t=Nh.exec(n);if(Vt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(n.seconds),nanos:Pr(n.nanos)}}function Pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Lh(n){return"string"==typeof n?xn.fromBase64String(n):xn.fromUint8Array(n)}function dd(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rI(n){const e=n.mapValue.fields.__previous_value__;return dd(e)?rI(e):e}function hd(n){const e=nc(n.mapValue.fields.__local_write_time__.timestampValue);return new Cr(e.seconds,e.nanos)}class pS{constructor(e,t,r,i,a,u,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class ul{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ul("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}function fd(n){return null==n}function Rp(n){return 0===n&&1/n==-1/0}function b_(n){return"number"==typeof n&&Number.isInteger(n)&&!Rp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(En.fromString(e))}static fromName(e){return new Qe(En.fromString(e).popFirst(5))}static empty(){return new Qe(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new En(e.slice()))}}const E0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kp={nullValue:"NULL_VALUE"};function Gl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dd(n)?4:T0(n)?9:10:wt()}function Wl(n,e){if(n===e)return!0;const t=Gl(n);if(t!==Gl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hd(n).isEqual(hd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=nc(r.timestampValue),u=nc(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Lh(n.bytesValue).isEqual(Lh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pr(r.geoPointValue.latitude)===Pr(i.geoPointValue.latitude)&&Pr(r.geoPointValue.longitude)===Pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pr(r.integerValue)===Pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Pr(r.doubleValue),u=Pr(i.doubleValue);return a===u?Rp(a)===Rp(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return kh(n.arrayValue.values||[],e.arrayValue.values||[],Wl);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(b0(a)!==b0(u))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===u[f]||!Wl(a[f],u[f])))return!1;return!0}(n,e);default:return wt()}var i}function Fh(n,e){return void 0!==(n.values||[]).find(t=>Wl(t,e))}function rc(n,e){if(n===e)return 0;const t=Gl(n),r=Gl(e);if(t!==r)return gn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return gn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Pr(i.integerValue||i.doubleValue),f=Pr(a.integerValue||a.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return I0(n.timestampValue,e.timestampValue);case 4:return I0(hd(n),hd(e));case 5:return gn(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Lh(i),f=Lh(a);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),f=a.split("/");for(let m=0;m<u.length&&m<f.length;m++){const v=gn(u[m],f[m]);if(0!==v)return v}return gn(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=gn(Pr(i.latitude),Pr(a.latitude));return 0!==u?u:gn(Pr(i.longitude),Pr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],f=a.values||[];for(let m=0;m<u.length&&m<f.length;++m){const v=rc(u[m],f[m]);if(v)return v}return gn(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const u=i.fields||{},f=Object.keys(u),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let A=0;A<f.length&&A<v.length;++A){const x=gn(f[A],v[A]);if(0!==x)return x;const N=rc(u[f[A]],m[v[A]]);if(0!==N)return N}return gn(f.length,v.length)}(n.mapValue,e.mapValue);default:throw wt()}}function I0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return gn(n,e);const t=nc(n),r=nc(e),i=gn(t.seconds,r.seconds);return 0!==i?i:gn(t.nanos,r.nanos)}function ql(n){return C_(n)}function C_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Lh(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=C_(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const f of i)u?u=!1:a+=",",a+=`${f}:${C_(r.fields[f])}`;return a+"}"}(n.mapValue):wt();var e}function Uh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Np(n){return!!n&&"integerValue"in n}function pd(n){return!!n&&"arrayValue"in n}function gS(n){return!!n&&"nullValue"in n}function iI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function E_(n){return!!n&&"mapValue"in n}function Vh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function T0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sI(n,e){return void 0===n?e:void 0===e||rc(n,e)>0?n:e}function D0(n,e){return void 0===n?e:void 0===e||rc(n,e)<0?n:e}class Vi{constructor(e){this.value=e}static empty(){return new Vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!E_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vh(t)}setAll(e){let t=Ii.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=Vh(u):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());E_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];E_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){tc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Vi(Vh(this.value))}}function oI(n){const e=[];return tc(n.fields,(t,r)=>{const i=new Ii([t]);if(E_(r)){const a=oI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new cd(e)}class ar{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new ar(e,0,Ut.min(),Ut.min(),Vi.empty(),0)}static newFoundDocument(e,t,r){return new ar(e,1,t,Ut.min(),r,0)}static newNoDocument(e,t){return new ar(e,2,t,Ut.min(),Vi.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,Ut.min(),Vi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function A0(n){return n.fields.find(e=>2===e.kind)}function gd(n){return n.fields.filter(e=>2!==e.kind)}Lp.UNKNOWN_ID=-1;class Fp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bh(0,Zl.min())}}function S0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ut.fromTimestamp(1e9===r?new Cr(t+1,0):new Cr(t,r));return new Zl(i,Qe.empty(),e)}function mS(n){return new Zl(n.readTime,n.key,-1)}class Zl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zl(Ut.min(),Qe.empty(),-1)}static max(){return new Zl(Ut.max(),Qe.empty(),-1)}}function qO(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:gn(n.largestBatchId,e.largestBatchId))}class aI{constructor(e,t=null,r=[],i=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=f,this.P=null}}function _S(n,e=null,t=[],r=[],i=null,a=null,u=null){return new aI(n,e,t,r,i,a,u)}function jh(n){const e=at(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ql(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),fd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ql(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ql(r)).join(",")),e.P=t}return e.P}function I_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!cI(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Wl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yS(n.startAt,e.startAt)&&yS(n.endAt,e.endAt)}function x0(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function M0(n,e){return n.filters.filter(t=>t instanceof ts&&t.field.isEqual(e))}class ts extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new KO(e,t,r):"array-contains"===t?new O0(e,r):"in"===t?new lI(e,r):"not-in"===t?new uI(e,r):"array-contains-any"===t?new QO(e,r):new ts(e,t,r)}static V(e,t,r){return"in"===t?new T_(e,r):new YO(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(rc(t,this.value)):null!==t&&Gl(this.value)===Gl(t)&&this.v(rc(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class KO extends ts{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.v(t)}}class T_ extends ts{constructor(e,t){super(e,"in",t),this.keys=P0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class YO extends ts{constructor(e,t){super(e,"not-in",t),this.keys=P0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function P0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class O0 extends ts{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pd(t)&&Fh(t.arrayValue,this.value)}}class lI extends ts{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fh(this.value.arrayValue,t)}}class uI extends ts{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fh(this.value.arrayValue,t)}}class QO extends ts{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fh(this.value.arrayValue,r))}}class cl{constructor(e,t){this.position=e,this.inclusive=t}}class md{constructor(e,t="asc"){this.field=e,this.dir=t}}function cI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function R0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?Qe.comparator(Qe.fromName(u.referenceValue),t.key):rc(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function yS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wl(n.position[t],e.position[t]))return!1;return!0}class dl{constructor(e,t=null,r=[],i=[],a=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=m,this.D=null,this.C=null}}function dI(n,e,t,r,i,a,u,f){return new dl(n,e,t,r,i,a,u,f)}function ic(n){return new dl(n)}function D_(n){return!fd(n.limit)&&"F"===n.limitType}function k0(n){return!fd(n.limit)&&"L"===n.limitType}function hI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function fI(n){for(const e of n.filters)if(e.S())return e.field;return null}function N0(n){return null!==n.collectionGroup}function Hh(n){const e=at(n);if(null===e.D){e.D=[];const t=fI(e),r=hI(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new md(t)),e.D.push(new md(Ii.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new md(Ii.keyField(),a))}}}return e.D}function $o(n){const e=at(n);if(!e.C)if("F"===e.limitType)e.C=_S(e.path,e.collectionGroup,Hh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Hh(e))t.push(new md(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new cl(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new cl(e.startAt.position,!e.startAt.inclusive):null;e.C=_S(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function vS(n,e,t){return new dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Up(n,e){return I_($o(n),$o(e))&&n.limitType===e.limitType}function A_(n){return`${jh($o(n))}|lt:${n.limitType}`}function L0(n){return`Query(target=${function ZO(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ql(r.value)}`;var r}).join(", ")}]`),fd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ql(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ql(t)).join(",")),`Target(${e})`}($o(n))}; limitType=${n.limitType})`}function ao(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const f=R0(i,a,u);return i.inclusive?f<=0:f<0}(t.startAt,Hh(t),r)||t.endAt&&!function(i,a,u){const f=R0(i,a,u);return i.inclusive?f>=0:f>0}(t.endAt,Hh(t),r)));var t,r}function pI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function S_(n){return(e,t)=>{let r=!1;for(const i of Hh(n)){const a=wS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function wS(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,a,u){const f=a.data.field(i),m=u.data.field(i);return null!==f&&null!==m?rc(f,m):wt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return wt()}}function gI(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rp(e)?"-0":e}}function x_(n){return{integerValue:""+n}}function F0(n,e){return b_(e)?x_(e):gI(n,e)}class Vp{constructor(){this._=void 0}}function bS(n,e,t){return n instanceof $h?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof _d?M_(n,e):n instanceof Bi?_I(n,e):function(r,i){const a=U0(r,i),u=yI(a)+yI(r.k);return Np(a)&&Np(r.k)?x_(u):gI(r.M,u)}(n,e)}function mI(n,e,t){return n instanceof _d?M_(n,e):n instanceof Bi?_I(n,e):t}function U0(n,e){return n instanceof Bp?Np(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $h extends Vp{}class _d extends Vp{constructor(e){super(),this.elements=e}}function M_(n,e){const t=V0(e);for(const r of n.elements)t.some(i=>Wl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bi extends Vp{constructor(e){super(),this.elements=e}}function _I(n,e){let t=V0(e);for(const r of n.elements)t=t.filter(i=>!Wl(i,r));return{arrayValue:{values:t}}}class Bp extends Vp{constructor(e,t){super(),this.M=e,this.k=t}}function yI(n){return Pr(n.integerValue||n.doubleValue)}function V0(n){return pd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jp{constructor(e,t){this.field=e,this.transform=t}}class vI{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function B0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Hp{}function wI(n,e,t){n instanceof yd?function(r,i,a){const u=r.value.clone(),f=$0(r.fieldTransforms,i,a.transformResults);u.setAll(f),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof sc?function(r,i,a){if(!B0(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=$0(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(bI(r)),f.setAll(u),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function j0(n,e,t){var i;n instanceof yd?function(r,i,a){if(!B0(r.precondition,i))return;const u=r.value.clone(),f=z0(r.fieldTransforms,a,i);u.setAll(f),i.convertToFoundDocument(P_(i),u).setHasLocalMutations()}(n,e,t):n instanceof sc?function(r,i,a){if(!B0(r.precondition,i))return;const u=z0(r.fieldTransforms,a,i),f=i.data;f.setAll(bI(r)),f.setAll(u),i.convertToFoundDocument(P_(i),f).setHasLocalMutations()}(n,e,t):B0(n.precondition,i=e)&&i.convertToNoDocument(Ut.min())}function ES(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=U0(r.transform,i||null);null!=a&&(null==t&&(t=Vi.empty()),t.set(r.field,a))}return t||null}function H0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kh(t,r,(i,a)=>function CS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _d&&r instanceof _d||t instanceof Bi&&r instanceof Bi?kh(t.elements,r.elements,Wl):t instanceof Bp&&r instanceof Bp?Wl(t.k,r.k):t instanceof $h&&r instanceof $h);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function P_(n){return n.isFoundDocument()?n.version:Ut.min()}class yd extends Hp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class sc extends Hp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function bI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $0(n,e,t){const r=new Map;Vt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,f=e.data.field(a.field);r.set(a.field,mI(u,f,t[i]))}return r}function z0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,bS(a,u,e))}return r}class $p extends Hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class G0 extends Hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class JO{constructor(e){this.count=e}}var fi,In;function CI(n){switch(n){default:return wt();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function EI(n){if(void 0===n)return gr("GRPC error has no .code"),ve.UNKNOWN;switch(n){case fi.OK:return ve.OK;case fi.CANCELLED:return ve.CANCELLED;case fi.UNKNOWN:return ve.UNKNOWN;case fi.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case fi.INTERNAL:return ve.INTERNAL;case fi.UNAVAILABLE:return ve.UNAVAILABLE;case fi.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case fi.NOT_FOUND:return ve.NOT_FOUND;case fi.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case fi.ABORTED:return ve.ABORTED;case fi.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case fi.DATA_LOSS:return ve.DATA_LOSS;default:return wt()}}(In=fi||(fi={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";class oc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return C0(this.inner)}size(){return this.innerSize}}class ei{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new ei(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new ei(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new W0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new W0(this.root,e,this.comparator,!1)}getReverseIterator(){return new W0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new W0(this.root,e,this.comparator,!0)}}class W0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:ns.RED,this.left=null!=i?i:ns.EMPTY,this.right=null!=a?a:ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ns(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ns.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mr{constructor(e){this.comparator=e,this.data=new ei(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IS(this.data.getIterator())}getIteratorFrom(e){return new IS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mr(this.comparator);return t.data=e,t}}class IS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zh(n){return n.hasNext()?n.getNext():void 0}const O_=new ei(Qe.comparator);function zo(){return O_}const TS=new ei(Qe.comparator);function R_(){return TS}function Ia(){return new oc(n=>n.toString(),(n,e)=>n.isEqual(e))}const II=new ei(Qe.comparator),q0=new mr(Qe.comparator);function Ln(...n){let e=q0;for(const t of n)e=e.add(t);return e}const DS=new mr(gn);function Gh(){return DS}class vd{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,t)),new vd(Ut.min(),r,Gh(),zo(),Ln())}}class ac{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ac(xn.EMPTY_BYTE_STRING,t,Ln(),Ln(),Ln())}}class Z0{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class AS{constructor(e,t){this.targetId=e,this.$=t}}class SS{constructor(e,t,r=xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class xS{constructor(){this.B=0,this.L=AI(),this.U=xn.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Ln(),t=Ln(),r=Ln();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:wt()}}),new ac(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=AI()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class TI{constructor(e){this.nt=e,this.st=new Map,this.it=zo(),this.rt=DI(),this.ot=new mr(gn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:wt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(x0(a))if(0===r){const u=new Qe(a.path);this.ct(t,u,ar.newNoDocument(u,Ut.min()))}else Vt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,u)=>{const f=this.wt(u);if(f){if(a.current&&x0(f.target)){const m=new Qe(f.target.path);null!==this.it.get(m)||this.It(u,m)||this.ct(u,m,ar.newNoDocument(m,e))}a.j&&(t.set(u,a.H()),a.J())}});let r=Ln();this.rt.forEach((a,u)=>{let f=!0;u.forEachWhile(m=>{const v=this.wt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.it.forEach((a,u)=>u.setReadTime(e));const i=new vd(e,t,this.ot,this.it,r);return this.it=zo(),this.rt=DI(),this.ot=new mr(gn),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new xS,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new mr(gn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new xS),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function DI(){return new ei(Qe.comparator)}function AI(){return new ei(Qe.comparator)}const MS={asc:"ASCENDING",desc:"DESCENDING"},PS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class SI{constructor(e,t){this.databaseId=e,this.N=t}}function Wh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K0(n,e){return n.N?e.toBase64():e.toUint8Array()}function OS(n,e){return Wh(n,e.toTimestamp())}function Ti(n){return Vt(!!n),Ut.fromTimestamp(function(e){const t=nc(e);return new Cr(t.seconds,t.nanos)}(n))}function k_(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function N_(n){const e=En.fromString(n);return Vt(p(e)),e}function L_(n,e){return k_(n.databaseId,e.path)}function Ta(n,e){const t=N_(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(RS(t))}function zp(n,e){return k_(n.databaseId,e)}function xI(n){const e=N_(n);return 4===e.length?En.emptyPath():RS(e)}function Gp(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RS(n){return Vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kS(n,e,t){return{name:L_(n,e),fields:t.value.mapValue.fields}}function NS(n,e,t){const r=Ta(n,e.name),i=Ti(e.updateTime),a=new Vi({mapValue:{fields:e.fields}}),u=ar.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function F_(n,e){let t;if(e instanceof yd)t={update:kS(n,e.key,e.value)};else if(e instanceof $p)t={delete:L_(n,e.key)};else if(e instanceof sc)t={update:kS(n,e.key,e.data),updateMask:h(e.fieldMask)};else{if(!(e instanceof G0))return wt();t={verify:L_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof $h)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _d)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Bi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bp)return{fieldPath:a.field.canonicalString(),increment:u.k};throw wt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:OS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:wt()),t;var i}function MI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Xr.updateTime(Ti(i.updateTime)):void 0!==i.exists?Xr.exists(i.exists):Xr.none():Xr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let f=null;"setToServerValue"in u?(Vt("REQUEST_TIME"===u.setToServerValue),f=new $h):"appendMissingElements"in u?f=new _d(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Bi(u.removeAllFromArray.values||[]):"increment"in u?f=new Bp(a,u.increment):wt();const m=Ii.fromServerFormat(u.fieldPath);return new jp(m,f)}(n,i)):[];var i;if(e.update){const i=Ta(n,e.update.name),a=new Vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new cd((e.updateMask.fieldPaths||[]).map(v=>Ii.fromServerFormat(v)));return new sc(i,a,u,t,r)}return new yd(i,a,t,r)}if(e.delete){const i=Ta(n,e.delete);return new $p(i,t)}if(e.verify){const i=Ta(n,e.verify);return new G0(i,t)}return wt()}function US(n,e){return{documents:[zp(n,e.path)]}}function VS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(A=>function(x){if("=="===x.op){if(iI(x.value))return{unaryFilter:{field:s(x.field),op:"IS_NAN"}};if(gS(x.value))return{unaryFilter:{field:s(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(iI(x.value))return{unaryFilter:{field:s(x.field),op:"IS_NOT_NAN"}};if(gS(x.value))return{unaryFilter:{field:s(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:s(x.field),op:n1(x.op),value:x.value}}}(A));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:s((A=v).field),direction:t1(A.dir)};var A})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(v=e.limit,n.N||fd(v)?v:{value:v});var v,f,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function PI(n){let e=xI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Vt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let a=[];t.where&&(a=BS(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(A=>{return new md(o((x=A).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(A){let x;return x="object"==typeof A?A.value:A,fd(x)?null:x}(t.limit));let m=null;var A;t.startAt&&(m=new cl((A=t.startAt).values||[],!!A.before));let v=null;return t.endAt&&(v=function(A){return new cl(A.values||[],!A.before)}(t.endAt)),dI(e,i,u,a,f,"F",m,v)}function BS(n){return n?void 0!==n.unaryFilter?[c(n)]:void 0!==n.fieldFilter?[l(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>BS(e)).reduce((e,t)=>e.concat(t)):wt():[]}function t1(n){return MS[n]}function n1(n){return PS[n]}function s(n){return{fieldPath:n.canonicalString()}}function o(n){return Ii.fromServerFormat(n.fieldPath)}function l(n){return ts.create(o(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(n.fieldFilter.op),n.fieldFilter.value)}function c(n){switch(n.unaryFilter.op){case"IS_NAN":const e=o(n.unaryFilter.field);return ts.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=o(n.unaryFilter.field);return ts.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=o(n.unaryFilter.field);return ts.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=o(n.unaryFilter.field);return ts.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}function h(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function p(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function y(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=T(e)),e=b(n.get(t),e);return T(e)}function b(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function T(n){return n+"\x01\x01"}function M(n){const e=n.length;if(Vt(e>=2),2===e)return Vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&wt(),n.charAt(u+1)){case"\x01":const f=n.substring(a,u);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:wt()}a=u+2}return new En(r)}const R=["userId","batchId"];function H(n,e){return[n,y(e)]}function J(n,e,t){return[n,y(e),t]}const ie={},De=["prefixPath","collectionGroup","readTime","documentId"],We=["prefixPath","collectionGroup","documentId"],nt=["collectionGroup","readTime","prefixPath","documentId"],_t=["canonicalId","targetId"],Ne=["targetId","path"],Pt=["path","targetId"],vn=["collectionId","parent"],Vn=["indexId","uid"],lo=["uid","sequenceNumber"],wd=["indexId","uid","arrayValue","directionalValue","documentKey"],Y0=["indexId","uid","documentKey"],Q0=["userId","collectionPath","documentId"],J0=["userId","collectionPath","largestBatchId"],X0=["userId","collectionGroup","largestBatchId"],U_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ew=[...U_,"documentOverlays"],V_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tw=[...V_,"indexConfiguration","indexState","indexEntries"],B_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ie((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ie?t:Ie.resolve(t)}catch(t){return Ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.reject(t)}static resolve(e){return new Ie((t,r)=>{t(e)})}static reject(e){return new Ie((t,r)=>{r(e)})}static waitFor(e){return new Ie((t,r)=>{let i=0,a=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++a,u&&a===i&&t()},m=>r(m))}),u=!0,a===i&&t()})}static or(e){let t=Ie.resolve(!1);for(const r of e)t=t.next(i=>i?Ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class OI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new hi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new nw(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=jS(r.target.error);this.At.reject(new nw(e,i))}}static open(e,t,r,i){try{return new OI(t,e.transaction(i,r))}catch(a){throw new nw(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new MF(t)}}class Kl{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Kl.Vt((0,F.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),qp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(Kl.St())return!0;const e=(0,F.z$)(),t=Kl.Vt(e),r=0<t&&t<10,i=Kl.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new nw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new Ue(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ue(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new nw(e,f))},a.onupgradeneeded=u=>{Ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,be.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.Nt(e);const m=OI.open(a.db,e,u?"readonly":"readwrite",r),v=i(m).next(A=>(m.bt(),A)).catch(A=>(m.abort(A),Ie.reject(A))).toPromise();return v.catch(()=>{}),yield m.Rt,v}catch(m){const v="FirebaseError"!==m.name&&f<3;if(Ge("SimpleDb","Transaction failed with error:",m.message,"Retrying:",v),a.close(),!v)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class xF{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return qp(this.Ft.delete())}}class nw extends Ue{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wp(n){return"IndexedDbTransactionError"===n.name}class MF{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ge("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qp(r)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),qp(this.store.add(e))}get(e){return qp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),qp(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),qp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(u,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new Ie((a,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ie((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,u,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new Ie((r,i)=>{t.onerror=a=>{const u=jS(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}Gt(e,t){const r=[];return new Ie((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const m=new xF(f),v=t(f.primaryKey,f.value,m);if(v instanceof Ie){const A=v.catch(x=>(m.done(),Ie.reject(x)));r.push(A)}m.isDone?i():null===m.Lt?f.continue():f.continue(m.Lt)}}).next(()=>Ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qp(n){return new Ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=jS(r.target.error);t(i)}})}let s1=!1;function jS(n){const e=Kl.Vt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return s1||(s1=!0,setTimeout(()=>{throw r},0)),r}}return n}class o1 extends r1{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function rs(n,e){const t=at(n);return Kl.xt(t.Ht,e)}class HS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&wI(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&j0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&j0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ut.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ln())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(t,r)=>H0(t,r))&&kh(this.baseMutations,e.baseMutations,(t,r)=>H0(t,r))}}class $S{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Vt(e.mutations.length===r.length);let i=II;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new $S(e,t,r,i)}}class zS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qh{constructor(e,t,r,i,a=Ut.min(),u=Ut.min(),f=xn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new qh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new qh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class a1{constructor(e){this.Jt=e}}function l1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:RI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:L_(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Wh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zp(e.version)};else{if(!e.isUnknownDocument())return wt();r.unknownDocument={path:t.path.toArray(),version:Zp(e.version)}}var i,a;return r}function RI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kp(n){const e=new Cr(n.seconds,n.nanoseconds);return Ut.fromTimestamp(e)}function j_(n,e){const t=(e.baseMutations||[]).map(a=>MI(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>MI(n.Jt,a)),i=Cr.fromMillis(e.localWriteTimeMs);return new HS(e.batchId,i,t,r)}function rw(n){const e=Kp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Kp(n.lastLimboFreeSnapshotVersion):Ut.min();let r;var i;return void 0!==n.query.documents?(Vt(1===(i=n.query).documents.length),r=$o(ic(xI(i.documents[0])))):r=$o(PI(n.query)),new qh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,xn.fromBase64String(n.resumeToken))}function u1(n,e){const t=Zp(e.snapshotVersion),r=Zp(e.lastLimboFreeSnapshotVersion);let i;i=x0(e.target)?US(n.Jt,e.target):VS(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jh(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function GS(n){const e=PI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?vS(e,e.limit,"L"):e}function WS(n,e){return new zS(e.largestBatchId,MI(n.Jt,e.overlayMutation))}function c1(n,e){const t=e.path.lastSegment();return[n,y(e.path.popLast()),t]}class OF{getBundleMetadata(e,t){return d1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Kp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return d1(e).put({bundleId:(r=t).id,createTime:Zp(Ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return h1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:GS(i.bundledQuery),readTime:Kp(i.readTime)};var i})}saveNamedQuery(e,t){return h1(e).put({name:(r=t).name,readTime:Zp(Ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function d1(n){return rs(n,"bundles")}function h1(n){return rs(n,"namedQueries")}class qS{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new qS(e,t.uid||"")}getOverlay(e,t){return iw(e).get(c1(this.userId,t)).next(r=>r?WS(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const f=new zS(t,u);i.push(this.Xt(e,f))}),Ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(y(u.getCollectionPath())));const a=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(iw(e).Qt("collectionPathOverlayIndex",f))}),Ie.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ia(),a=y(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return iw(e).qt("collectionPathOverlayIndex",u).next(f=>{for(const m of f){const v=WS(this.M,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ia();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return iw(e).Wt({index:"collectionGroupOverlayIndex",range:f},(m,v,A)=>{const x=WS(this.M,v);a.size()<i||x.largestBatchId===u?(a.set(x.getKey(),x),u=x.largestBatchId):A.done()}).next(()=>a)}Xt(e,t){return iw(e).put(function(r,i,a){const[u,f,m]=c1(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:F_(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function iw(n){return rs(n,"documentOverlays")}class H_{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Pr(e.integerValue));else if("doubleValue"in e){const r=Pr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Rp(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Lh(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?T0(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):wt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Qe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function RF(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function f1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=RF(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}H_.fe=new H_;class kF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=f1(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=f1(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class NF{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class LF{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class kI{constructor(){this.De=new kF,this.Ce=new NF(this.De),this.xe=new LF(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Zh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zh(this.indexId,this.documentKey,this.arrayValue,r)}}function Yp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=p1(n.arrayValue,e.arrayValue),0!==t?t:(t=p1(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function p1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class FF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=A0(e);if(void 0!==t&&!this.Be(t))return!1;const r=gd(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class UF{constructor(){this.qe=new ZS}addToCollectionParentIndex(e,t){return this.qe.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getFieldIndex(e,t){return Ie.resolve(null)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}updateCollectionGroup(e,t,r){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}}class ZS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mr(En.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mr(En.comparator)).toArray()}}const NI=new Uint8Array(0);class VF{constructor(e){this.user=e,this.Ge=new ZS,this.Ke=new oc(t=>jh(t),(t,r)=>I_(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:y(i)};return g1(e).put(a)}return Ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[w0(t),""],!1,!0);return g1(e).qt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(M(u.parent))}return r})}addFieldIndex(e,t){const r=LI(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=LI(e),i=FI(e),a=sw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=sw(e);let i=!0;const a=new Map;return Ie.forEach(this.Qe(t),u=>this.getFieldIndex(e,u).next(f=>{i&&(i=!!f),a.set(u,f)})).next(()=>{if(i){let u=Ln();return Ie.forEach(a,(f,m)=>{var v;Ge("IndexedDbIndexManager",`Using index ${v=f,`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${jh(t)}`);const A=function(it,Ft){const ft=A0(Ft);if(void 0===ft)return null;for(const Zt of M0(it,ft.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(m,f),x=function(it,Ft){const ft=new Map;for(const Zt of gd(Ft))for(const Kt of M0(it,Zt.fieldPath))switch(Kt.op){case"==":case"in":ft.set(Zt.fieldPath.canonicalString(),Kt.value);break;case"not-in":case"!=":return ft.set(Zt.fieldPath.canonicalString(),Kt.value),Array.from(ft.values())}return null}(m,f),N=function(it,Ft){const ft=[];let Zt=!0;for(const Zo of gd(Ft)){let ji,tu=!0;for(const Hi of M0(it,Zo.fieldPath)){let Wr,vy=!0;switch(Hi.op){case"<":case"<=":Wr="nullValue"in(Kt=Hi.value)?kp:"booleanValue"in Kt?{booleanValue:!1}:"integerValue"in Kt||"doubleValue"in Kt?{doubleValue:NaN}:"timestampValue"in Kt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Kt?{stringValue:""}:"bytesValue"in Kt?{bytesValue:""}:"referenceValue"in Kt?Uh(ul.empty(),Qe.empty()):"geoPointValue"in Kt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Kt?{arrayValue:{}}:"mapValue"in Kt?{mapValue:{}}:wt();break;case"==":case"in":case">=":Wr=Hi.value;break;case">":Wr=Hi.value,vy=!1;break;case"!=":case"not-in":Wr=kp}sI(ji,Wr)===Wr&&(ji=Wr,tu=vy)}if(null!==it.startAt)for(let Hi=0;Hi<it.orderBy.length;++Hi)if(it.orderBy[Hi].field.isEqual(Zo.fieldPath)){const Wr=it.startAt.position[Hi];sI(ji,Wr)===Wr&&(ji=Wr,tu=it.startAt.inclusive);break}if(void 0===ji)return null;ft.push(ji),Zt&&(Zt=tu)}var Kt;return new cl(ft,Zt)}(m,f),$=function(it,Ft){const ft=[];let Zt=!0;for(const Zo of gd(Ft)){let ji,tu=!0;for(const Hi of M0(it,Zo.fieldPath)){let Wr,vy=!0;switch(Hi.op){case">=":case">":Wr="nullValue"in(Kt=Hi.value)?{booleanValue:!1}:"booleanValue"in Kt?{doubleValue:NaN}:"integerValue"in Kt||"doubleValue"in Kt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Kt?{stringValue:""}:"stringValue"in Kt?{bytesValue:""}:"bytesValue"in Kt?Uh(ul.empty(),Qe.empty()):"referenceValue"in Kt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Kt?{arrayValue:{}}:"arrayValue"in Kt?{mapValue:{}}:"mapValue"in Kt?E0:wt(),vy=!1;break;case"==":case"in":case"<=":Wr=Hi.value;break;case"<":Wr=Hi.value,vy=!1;break;case"!=":case"not-in":Wr=E0}D0(ji,Wr)===Wr&&(ji=Wr,tu=vy)}if(null!==it.endAt)for(let Hi=0;Hi<it.orderBy.length;++Hi)if(it.orderBy[Hi].field.isEqual(Zo.fieldPath)){const Wr=it.endAt.position[Hi];D0(ji,Wr)===Wr&&(ji=Wr,tu=it.endAt.inclusive);break}if(void 0===ji)return null;ft.push(ji),Zt&&(Zt=tu)}var Kt;return new cl(ft,Zt)}(m,f),Y=this.je(f,m,N),Ce=this.je(f,m,$),Ve=this.We(f,m,x),ht=this.ze(f.indexId,A,Y,!!N&&N.inclusive,Ce,!!$&&$.inclusive,Ve);return Ie.forEach(ht,it=>r.Kt(it,t.limit).next(Ft=>{Ft.forEach(ft=>{u=u.add(new Qe(M(ft.documentKey)))})}))}).next(()=>u)}return Ie.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,u,f){const m=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),v=m/(null!=t?t.length:1),A=[];for(let x=0;x<m;++x){const N=t?this.He(t[x/v]):NI,$=r?this.Je(e,N,r[x%v],i):this.Ye(e),Y=a?this.Xe(e,N,a[x%v],u):this.Ye(e+1);A.push(...this.createRange($,Y,f.map(Ce=>this.Je(e,N,Ce,!0))))}return A}Je(e,t,r,i){const a=new Zh(e,Qe.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Zh(e,Qe.empty(),t,r);return i?a.ke():a}Ye(e){return new Zh(e,Qe.empty(),NI,NI)}getFieldIndex(e,t){const r=new FF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const u=a.filter(f=>r.$e(f));return u.sort((f,m)=>m.fields.length-f.fields.length),u.length>0?u[0]:null})}Ze(e,t){const r=new kI;for(const i of gd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Ne(i.kind);H_.fe.Zt(a,u)}return r.Se()}He(e){const t=new kI;return H_.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new kI);let a=0;for(const u of gd(e)){const f=r[a++];for(const m of i)if(this.tn(t,u.fieldPath)&&pd(f))i=this.en(i,u,f);else{const v=m.Ne(u.kind);H_.fe.Zt(f,v)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const f of i){const m=new kI;m.seed(f.Se()),H_.fe.Zt(u,m.Ne(t.kind)),a.push(m)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof ts&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=LI(e),i=FI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const u=[];return Ie.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{u.push(function(v,A){const x=A?new Bh(A.sequenceNumber,new Zl(Kp(A.readTime),new Qe(M(A.documentKey)),A.largestBatchId)):Bh.empty(),N=v.fields.map(([$,Y])=>new Fp(Ii.fromServerFormat($),Y));return new Lp(v.indexId,v.collectionGroup,N,x)}(f,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:gn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=LI(e),a=FI(e);return this.sn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>Ie.forEach(f,m=>{return a.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Zp((N=r).readTime),documentKey:y(N.documentKey.path),largestBatchId:N.largestBatchId});var N})))}updateIndexEntries(e,t){const r=new Map;return Ie.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?Ie.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Ie.forEach(f,m=>this.rn(e,i,m).next(v=>{const A=this.on(a,m);return v.isEqual(A)?Ie.resolve():this.un(e,a,v,A)}))))})}an(e,t,r){return sw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:y(t.key.path)})}cn(e,t,r){return sw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,y(t.key.path)])}rn(e,t,r){const i=sw(e);let a=new mr(Yp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,y(t.path)])},(u,f)=>{a=a.add(new Zh(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}on(e,t){let r=new mr(Yp);const i=this.Ze(t,e);if(null==i)return r;const a=A0(t);if(null!=a){const u=e.data.field(a.fieldPath);if(pd(u))for(const f of u.arrayValue.values||[])r=r.add(new Zh(t.indexId,e.key,this.He(f),i))}else r=r.add(new Zh(t.indexId,e.key,NI,i));return r}un(e,t,r,i){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(u,f,m,v,A){const x=u.getIterator(),N=f.getIterator();let $=zh(x),Y=zh(N);for(;$||Y;){let Ce=!1,Ve=!1;if($&&Y){const ht=m($,Y);ht<0?Ve=!0:ht>0&&(Ce=!0)}else null!=$?Ve=!0:Ce=!0;Ce?(v(Y),Y=zh(N)):Ve?(A($),$=zh(x)):($=zh(x),Y=zh(N))}}(r,i,Yp,u=>{a.push(this.an(e,t,u))},u=>{a.push(this.cn(e,t,u))}),Ie.waitFor(a)}sn(e){let t=1;return FI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>Yp(u,f)).filter((u,f,m)=>!f||0!==Yp(u,m[f-1]));const i=[];i.push(e);for(const u of r){const f=Yp(u,e),m=Yp(u,t);if(0===f)i[0]=e.ke();else if(f>0&&m<0)i.push(u),i.push(u.ke());else if(m>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,""],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,""]));return a}}function g1(n){return rs(n,"collectionParents")}function sw(n){return rs(n,"indexEntries")}function LI(n){return rs(n,"indexConfiguration")}function FI(n){return rs(n,"indexState")}const m1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Go{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Go(e,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let f=0;const m=r.Wt({range:u},(A,x,N)=>(f++,N.delete()));a.push(m.next(()=>{Vt(1===f)}));const v=[];for(const A of t.mutations){const x=J(e,A.key.path,t.batchId);a.push(i.delete(x)),v.push(A.key)}return Ie.waitFor(a).next(()=>v)}function UI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw wt();e=n.noDocument}return JSON.stringify(e).length}Go.DEFAULT_COLLECTION_PERCENTILE=10,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Go.DEFAULT=new Go(41943040,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Go.DISABLED=new Go(-1,0,0);class KS{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Vt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new KS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kh(e).Wt({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=$_(e),u=Kh(e);return u.add({}).next(f=>{Vt("number"==typeof f);const m=new HS(f,t,r,i),v=function(N,$,Y){const Ce=Y.baseMutations.map(ht=>F_(N.Jt,ht)),Ve=Y.mutations.map(ht=>F_(N.Jt,ht));return{userId:$,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:Ce,mutations:Ve}}(this.M,this.userId,m),A=[];let x=new mr((N,$)=>gn(N.canonicalString(),$.canonicalString()));for(const N of i){const $=J(this.userId,N.key.path,f);x=x.add(N.key.path.popLast()),A.push(u.put(v)),A.push(a.put($,ie))}return x.forEach(N=>{A.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.hn[f]=m.keys()}),Ie.waitFor(A).next(()=>m)})}lookupMutationBatch(e,t){return Kh(e).get(t).next(r=>r?(Vt(r.userId===this.userId),j_(this.M,r)):null)}ln(e,t){return this.hn[t]?Ie.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Kh(e).Wt({index:"userMutationsIndex",range:i},(u,f,m)=>{f.userId===this.userId&&(Vt(f.batchId>=r),a=j_(this.M,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Kh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>j_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=H(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return $_(e).Wt({range:i},(u,f,m)=>{const[v,A,x]=u,N=M(A);if(v===this.userId&&t.path.isEqual(N))return Kh(e).get(x).next($=>{if(!$)throw wt();Vt($.userId===this.userId),a.push(j_(this.M,$))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mr(gn);const i=[];return t.forEach(a=>{const u=H(this.userId,a.path),f=IDBKeyRange.lowerBound(u),m=$_(e).Wt({range:f},(v,A,x)=>{const[N,$,Y]=v,Ce=M($);N===this.userId&&a.path.isEqual(Ce)?r=r.add(Y):x.done()});i.push(m)}),Ie.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=H(this.userId,r),u=IDBKeyRange.lowerBound(a);let f=new mr(gn);return $_(e).Wt({range:u},(m,v,A)=>{const[x,N,$]=m,Y=M(N);x===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(f=f.add($)):A.done()}).next(()=>this.fn(e,f))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Kh(e).get(a).next(u=>{if(null===u)throw wt();Vt(u.userId===this.userId),r.push(j_(this.M,u))}))}),Ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return _1(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),Ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $_(e).Wt({range:r},(a,u,f)=>{if(a[0]===this.userId){const m=M(a[1]);i.push(m)}else f.done()}).next(()=>{Vt(0===i.length)})})}containsKey(e,t){return y1(e,this.userId,t)}_n(e){return v1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function y1(n,e,t){const r=H(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return $_(n).Wt({range:a,jt:!0},(f,m,v)=>{const[A,x,N]=f;A===e&&x===i&&(u=!0),v.done()}).next(()=>u)}function Kh(n){return rs(n,"mutations")}function $_(n){return rs(n,"documentMutations")}function v1(n){return rs(n,"mutationQueues")}class Qp{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Qp(0)}static gn(){return new Qp(-1)}}class BF{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Qp(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Ut.fromTimestamp(new Cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>z_(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Vt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return z_(e).Wt((u,f)=>{const m=rw(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>Ie.waitFor(a)).next(()=>i)}forEachTarget(e,t){return z_(e).Wt((r,i)=>{const a=rw(i);t(a)})}yn(e){return w1(e).get("targetGlobalKey").next(t=>(Vt(null!==t),t))}pn(e,t){return w1(e).put("targetGlobalKey",t)}In(e,t){return z_(e).put(u1(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=jh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return z_(e).Wt({range:i,index:"queryTargetsIndex"},(u,f,m)=>{const v=rw(f);I_(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Yh(e);return t.forEach(u=>{const f=y(u.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),Ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=Yh(e);return Ie.forEach(t,a=>{const u=y(a.path);return Ie.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Yh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Yh(e);let a=Ln();return i.Wt({range:r,jt:!0},(u,f,m)=>{const v=M(u[1]),A=new Qe(v);a=a.add(A)}).next(()=>a)}containsKey(e,t){const r=y(t.path),i=IDBKeyRange.bound([r],[w0(r)],!1,!0);let a=0;return Yh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,f],m,v)=>{0!==u&&(a++,v.done())}).next(()=>a>0)}Et(e,t){return z_(e).get(t).next(r=>r?rw(r):null)}}function z_(n){return rs(n,"targets")}function w1(n){return rs(n,"targetGlobal")}function Yh(n){return rs(n,"targetDocuments")}function Jp(n){return YS.apply(this,arguments)}function YS(){return YS=(0,be.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==B_)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),YS.apply(this,arguments)}function b1([n,e],[t,r]){const i=gn(n,t);return 0===i?gn(e,r):i}class jF{constructor(e){this.En=e,this.buffer=new mr(b1),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();b1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HF{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Ge("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Wp(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Jp(i)}yield t.vn(e)}))}}class $F{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ie.resolve(Is.A);const r=new jF(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(m1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m1):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,u,f,m,v;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,u=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(v=Date.now(),Ho()<=ba.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-A}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${x} documents in `+(v-m)+`ms\nTotal Duration: ${v-A}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class zF{constructor(e,t){this.db=e,this.garbageCollector=new $F(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return VI(e,r)}removeReference(e,t,r){return VI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return VI(e,t)}Mn(e,t){return function(r,i){let a=!1;return v1(r).zt(u=>y1(r,u,i).next(f=>(f&&(a=!0),Ie.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(u,f)=>{if(f<=t){const m=this.Mn(e,u).next(v=>{if(!v)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ut.min()),Yh(e).delete([0,y(u.path)])))});i.push(m)}}).next(()=>Ie.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return VI(e,t)}kn(e,t){const r=Yh(e);let i,a=Is.A;return r.Wt({index:"documentTargetsIndex"},([u,f],{path:m,sequenceNumber:v})=>{0===u?(a!==Is.A&&t(new Qe(M(i)),a),a=v,i=m):a=Is.A}).next(()=>{a!==Is.A&&t(new Qe(M(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function VI(n,e){return Yh(n).put((r=n.currentSequenceNumber,{targetId:0,path:y(e.path),sequenceNumber:r}));var r}class C1{constructor(){this.changes=new oc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GF{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xp(e).put(r)}removeEntry(e,t,r){return Xp(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],RI(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=ar.newInvalidDocument(t);return Xp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ow(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:ar.newInvalidDocument(t)};return Xp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ow(t))},(i,a)=>{r={document:this.Fn(t,a),size:UI(a)}}).next(()=>r)}getEntries(e,t){let r=zo();return this.Bn(e,t,(i,a)=>{const u=this.Fn(i,a);r=r.insert(i,u)}).next(()=>r)}Ln(e,t){let r=zo(),i=new ei(Qe.comparator);return this.Bn(e,t,(a,u)=>{const f=this.Fn(a,u);r=r.insert(a,f),i=i.insert(a,UI(u))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return Ie.resolve();let i=new mr(T1);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(ow(i.first()),ow(i.last())),u=i.getIterator();let f=u.getNext();return Xp(e).Wt({index:"documentKeyIndex",range:a},(m,v,A)=>{const x=Qe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&T1(f,x)<0;)r(f,null),f=u.getNext();f&&f.isEqual(x)&&(r(f,v),f=u.hasNext()?u.getNext():null),f?A.Ut(ow(f)):A.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),RI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xp(e).qt(IDBKeyRange.bound(i,a,!0)).next(u=>{let f=zo();for(const m of u){const v=this.Fn(Qe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(v.key,v)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=zo();const u=I1(t,r),f=I1(t,Zl.max());return Xp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(m,v,A)=>{const x=this.Fn(Qe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(x.key,x),a.size===i&&A.done()}).next(()=>a)}newChangeBuffer(e){return new WF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return E1(e).get("remoteDocumentGlobalKey").next(t=>(Vt(!!t),t))}On(e,t){return E1(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function PF(n,e){let t;if(e.document)t=NS(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=Kp(e.noDocument.readTime);t=ar.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return wt();{const r=Qe.fromSegments(e.unknownDocument.path),i=Kp(e.unknownDocument.version);t=ar.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Cr(r[0],r[1]);return Ut.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Ut.min()))return r}return ar.newInvalidDocument(e)}}class WF extends C1{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new oc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mr((a,u)=>gn(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const f=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,f.readTime)),u.isValidDocument()){const m=l1(this.qn.M,u);i=i.add(a.path.popLast()),r+=UI(m)-f.size,t.push(this.qn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=l1(this.qn.M,u.convertToNoDocument(Ut.min()));t.push(this.qn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),Ie.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,u)=>{this.Gn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function E1(n){return rs(n,"remoteDocumentGlobal")}function Xp(n){return rs(n,"remoteDocumentsV14")}function ow(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function I1(n,e){const t=e.documentKey.path.toArray();return[n,RI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function T1(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Qe.comparator(n,e)}class qF{constructor(e){this.M=e}kt(e,t,r,i){const a=new OI("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R,{unique:!0}),f.createObjectStore("documentMutations"),D1(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=Ie.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),D1(e)),u=u.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,m){return m.store("mutations").qt().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R,{unique:!0});const A=m.store("mutations"),x=v.map(N=>A.put(N));return Ie.waitFor(x)})}(e,a))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Kn(a))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(u=u.next(()=>this.jn(a))),r<8&&i>=8&&(u=u.next(()=>this.Wn(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.zn(a))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:Q0});m.createIndex("collectionPathOverlayIndex",J0,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",X0,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:De});m.createIndex("documentKeyIndex",We),m.createIndex("collectionGroupIndex",nt)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Vn}).createIndex("sequenceNumberIndex",lo,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:wd}).createIndex("documentKeyIndex",Y0,{unique:!1})}(e)})),u}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=UI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>Ie.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(f=>Ie.forEach(f,m=>{Vt(m.userId===a.userId);const v=j_(this.M,m);return _1(e,a.userId,v).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((u,f)=>{const m=new En(u),v=[0,y(m)];a.push(t.get(v).next(A=>A?Ie.resolve():t.put({targetId:0,path:y(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ie.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:vn});const r=t.store("collectionParents"),i=new ZS,a=u=>{if(i.add(u)){const f=u.lastSegment(),m=u.popLast();return r.put({collectionId:f,parent:y(m)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,f)=>{const m=new En(u);return a(m.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,f,m],v)=>{const A=M(f);return a(A.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=rw(i),u=u1(this.M,a);return t.put(u)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,u)=>{const f=t.store("remoteDocumentsV14"),m=(v=u,v.document?new Qe(En.fromString(v.document.name).popFirst(5)):v.noDocument?Qe.fromSegments(v.noDocument.path):v.unknownDocument?Qe.fromSegments(v.unknownDocument.path):wt()).path.toArray();var v;const A={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(A))}).next(()=>Ie.waitFor(i))}}function D1(n){n.createObjectStore("targetDocuments",{keyPath:Ne}).createIndex("documentTargetsIndex",Pt,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_t,{unique:!0}),n.createObjectStore("targetGlobal")}const QS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class JS{constructor(e,t,r,i,a,u,f,m,v,A,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=u,this.document=f,this.Yn=v,this.Xn=A,this.Zn=x,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=N=>Promise.resolve(),!JS.vt())throw new Ue(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zF(this,i),this.cs=t+"main",this.M=new a1(m),this.hs=new Kl(this.cs,this.Zn,new qF(this.M)),this.ls=new BF(this.referenceDelegate,this.M),this.fs=new GF(this.M),this.ds=new OF,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===A&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ve.FAILED_PRECONDITION,QS);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Is(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>BI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Wp(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return aw(e).get("owner").next(t=>Ie.resolve(this.bs(t)))}Ps(e){return BI(e).delete(this.clientId)}Vs(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rs(r,"clientMetadata");return i.qt().next(a=>{const u=e.Ss(a,18e5),f=a.filter(m=>-1===u.indexOf(m));return Ie.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?Ie.resolve(!0):aw(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ue(ve.FAILED_PRECONDITION,QS);return!1}}return!(!this.networkEnabled||!this.inForeground)||BI(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new o1(t,Is.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>BI(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return KS.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new VF(e)}getDocumentOverlayCache(e){return qS.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(u=this.Zn)?tw:13===u?V_:12===u?ew:11===u?U_:void wt();var u;let f;return this.hs.runTransaction(e,i,a,m=>(f=new o1(m,this.ts?this.ts.next():Is.A),"readwrite-primary"===t?this.Ts(f).next(v=>!!v||this.Es(f)).next(v=>{if(!v)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ue(ve.FAILED_PRECONDITION,B_);return r(f)}).next(v=>this.Rs(f).next(()=>v)):this.Fs(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Fs(e){return aw(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(ve.FAILED_PRECONDITION,QS)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return aw(e).put("owner",t)}static vt(){return Kl.vt()}As(e){const t=aw(e);return t.get("owner").next(r=>this.bs(r)?(Ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ie.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function aw(n){return rs(n,"owner")}function BI(n){return rs(n,"clientMetadata")}function XS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZF{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):N0(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Qe(t)).next(r=>{let i=R_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=R_();return this.indexManager.getCollectionParents(e,i).next(u=>Ie.forEach(u,f=>{const m=(v=t,A=f.child(i),new dl(A,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,A;return this.Ws(e,m,r).next(v=>{v.forEach((A,x)=>{a=a.insert(A,x)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const u of a)for(const f of u.mutations){const m=f.key;let v=i.get(m);null==v&&(v=ar.newInvalidDocument(m),i=i.insert(m,v)),j0(f,v,u.localWriteTime),v.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((a,u)=>{ao(t,u)||(i=i.remove(a))}),i))}}class ex{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=Ln(),i=Ln();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ex(e,t.fromCache,r,i)}}class A1{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ut.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const u=this.ti(t,a);return(D_(t)||k0(t))&&this.ei(t.limitType,u,i,r)?this.Zs(e,t):(Ho()<=ba.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),L0(t)),this.Xs.Ks(e,t,S0(r,-1)).next(f=>(u.forEach(m=>{f=f.insert(m.key,m)}),f)))});var a}ti(e,t){let r=new mr(S_(e));return t.forEach((i,a)=>{ao(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return Ho()<=ba.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",L0(t)),this.Xs.Ks(e,t,Zl.min())}}class KF{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new ei(gn),this.ii=new oc(a=>jh(a),I_),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new ZF(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function S1(n,e,t,r){return new KF(n,e,t,r)}function x1(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,be.Z)(function*(n,e){const t=at(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const u=[],f=[];let m=Ln();for(const v of i){u.push(v.batchId);for(const A of v.mutations)m=m.add(A.key)}for(const v of a){f.push(v.batchId);for(const A of v.mutations)m=m.add(A.key)}return t.ai.qs(r,m).next(v=>({ci:v,removedBatchIds:u,addedBatchIds:f}))})})}),tx.apply(this,arguments)}function YF(n,e){const t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(u,f,m,v){const A=m.batch,x=A.keys();let N=Ie.resolve();return x.forEach($=>{N=N.next(()=>v.getEntry(f,$)).next(Y=>{const Ce=m.docVersions.get($);Vt(null!==Ce),Y.version.compareTo(Ce)<0&&(A.applyToRemoteDocument(Y,m),Y.isValidDocument()&&(Y.setReadTime(m.commitVersion),v.addEntry(Y)))})}),N.next(()=>u.$s.removeMutationBatch(f,A))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function M1(n){const e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function QF(n,e){const t=at(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const f=[];e.targetChanges.forEach((v,A)=>{const x=i.get(A);if(!x)return;f.push(t.ls.removeMatchingKeys(a,v.removedDocuments,A).next(()=>t.ls.addMatchingKeys(a,v.addedDocuments,A)));let N=x.withSequenceNumber(a.currentSequenceNumber);var $,Y,Ce;e.targetMismatches.has(A)?N=N.withResumeToken(xn.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),i=i.insert(A,N),Y=N,Ce=v,(0===($=x).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&f.push(t.ls.updateTargetData(a,N))});let m=zo();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),f.push(P1(a,u,e.documentUpdates).next(v=>{m=v})),!r.isEqual(Ut.min())){const v=t.ls.getLastRemoteSnapshotVersion(a).next(A=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(v)}return Ie.waitFor(f).next(()=>u.apply(a)).next(()=>t.ai.Gs(a,m)).next(()=>m)}).then(a=>(t.si=i,a))}function P1(n,e,t){let r=Ln();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=zo();return t.forEach((u,f)=>{const m=i.get(u);f.isNoDocument()&&f.version.isEqual(Ut.min())?(e.removeEntry(u,f.readTime),a=a.insert(u,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(f),a=a.insert(u,f)):Ge("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",f.version)}),a})}function JF(n,e){const t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function G_(n,e){const t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,Ie.resolve(i)):t.ls.allocateTargetId(r).next(u=>(i=new qh(e,u,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function W_(n,e,t){return nx.apply(this,arguments)}function nx(){return nx=(0,be.Z)(function*(n,e,t){const r=at(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Wp(u))throw u;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),nx.apply(this,arguments)}function jI(n,e,t){const r=at(n);let i=Ut.min(),a=Ln();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,m,v){const A=at(f),x=A.ii.get(v);return void 0!==x?Ie.resolve(A.si.get(x)):A.ls.getTargetData(m,v)}(r,u,$o(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(u,f.targetId).next(m=>{a=m})}).next(()=>r.ni.Ks(u,e,t?i:Ut.min(),t?a:Ln())).next(f=>(k1(r,pI(e),f),{documents:f,hi:a})))}function O1(n,e){const t=at(n),r=at(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function R1(n,e){const t=at(n),r=t.ri.get(e)||Ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,S0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(k1(t,e,i),i))}function k1(n,e,t){let r=Ut.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function rx(){return rx=(0,be.Z)(function*(n,e,t,r){const i=at(n);let a=Ln(),u=zo();for(const v of t){const A=e.li(v.metadata.name);v.document&&(a=a.add(A));const x=e.fi(v);x.setReadTime(e.di(v.metadata.readTime)),u=u.insert(A,x)}const f=i.oi.newChangeBuffer({trackRemovals:!0}),m=yield G_(i,(v=r,$o(ic(En.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>P1(v,f,u).next(A=>(f.apply(v),A)).next(A=>i.ls.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.ls.addMatchingKeys(v,a,m.targetId)).next(()=>i.ai.Gs(v,A)).next(()=>A)))}),rx.apply(this,arguments)}function e2(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,be.Z)(function*(n,e,t=Ln()){const r=yield G_(n,$o(GS(e.bundledQuery))),i=at(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Ti(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.ds.saveNamedQuery(a,e);const f=r.withResumeToken(xn.EMPTY_BYTE_STRING,u);return i.si=i.si.insert(f.targetId,f),i.ls.updateTargetData(a,f).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),ix.apply(this,arguments)}class t2{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return Ie.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Ti(r.createTime)}),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:GS(r.bundledQuery),readTime:Ti(r.readTime)}),Ie.resolve();var r}}class n2{constructor(){this.overlays=new ei(Qe.comparator),this.mi=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),Ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),Ie.resolve()}getOverlaysForCollection(e,t,r){const i=Ia(),a=t.length+1,u=new Qe(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ei((v,A)=>v-A);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let A=a.get(v.largestBatchId);null===A&&(A=Ia(),a=a.insert(v.largestBatchId,A)),A.set(v.getKey(),v)}}const f=Ia(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,A)=>f.set(v,A)),!(f.size()>=i)););return Ie.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new zS(t,r));let a=this.mi.get(t);void 0===a&&(a=Ln(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class sx{constructor(){this.gi=new mr(is.yi),this.pi=new mr(is.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new is(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new is(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Qe(new En([])),r=new is(t,e),i=new is(t,e+1),a=[];return this.pi.forEachInRange([r,i],u=>{this.Ei(u),a.push(u.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Qe(new En([])),r=new is(t,e),i=new is(t,e+1);let a=Ln();return this.pi.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new is(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class is{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Qe.comparator(e.key,t.key)||gn(e.Vi,t.Vi)}static Ii(e,t){return gn(e.Vi,t.Vi)||Qe.comparator(e.key,t.key)}}class r2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new mr(is.yi)}checkEmpty(e){return Ie.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const u=new HS(a,t,r,i);this.$s.push(u);for(const f of i)this.Si=this.Si.add(new is(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ie.resolve(u)}lookupMutationBatch(e,t){return Ie.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return Ie.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return Ie.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new is(t,0),i=new is(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],u=>{const f=this.Di(u.Vi);a.push(f)}),Ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mr(gn);return t.forEach(i=>{const a=new is(i,0),u=new is(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,u],f=>{r=r.add(f.Vi)})}),Ie.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Qe.isDocumentKey(a)||(a=a.child(""));const u=new is(new Qe(a),0);let f=new mr(gn);return this.Si.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.Vi)),!0)},u),Ie.resolve(this.xi(f))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Vt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return Ie.forEach(t.mutations,i=>{const a=new is(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new is(t,0),i=this.Si.firstAfterOrEqual(r);return Ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ie.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class i2{constructor(e){this.ki=e,this.docs=new ei(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ie.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let r=zo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ar.newInvalidDocument(i))}),Ie.resolve(r)}getAllFromCollection(e,t,r){let i=zo();const a=new Qe(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:f,value:{document:m}}=u.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||qO(mS(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,t,r,i){wt()}Mi(e,t){return Ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s2(this)}getSize(e){return Ie.resolve(this.size)}}class s2 extends C1{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),Ie.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class o2{constructor(e){this.persistence=e,this.Oi=new oc(t=>jh(t),I_),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.Fi=0,this.$i=new sx,this.targetCount=0,this.Bi=Qp.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),Ie.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Qp(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.In(t),Ie.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Oi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Ie.waitFor(a).next(()=>i)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return Ie.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),Ie.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),Ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return Ie.resolve(r)}containsKey(e,t){return Ie.resolve(this.$i.containsKey(t))}}class a2{constructor(e,t){this.Li={},this.overlays={},this.ts=new Is(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new o2(this),this.indexManager=new UF,this.fs=new i2(r=>this.referenceDelegate.Ui(r)),this.M=new a1(t),this.ds=new t2(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new n2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new r2(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new l2(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return Ie.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class l2 extends r1{constructor(e){super(),this.currentSequenceNumber=e}}class ox{constructor(e){this.persistence=e,this.Qi=new sx,this.ji=null}static Wi(e){return new ox(e)}get zi(){if(this.ji)return this.ji;throw wt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),Ie.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.zi,r=>{const i=Qe.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,Ut.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return Ie.or([()=>Ie.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function N1(n,e){return`firestore_clients_${n}_${e}`}function L1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ax(n,e){return`firestore_targets_${n}_${e}`}class HI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Ue(i.error.code,i.error.message))),u?new HI(e,t,i.state,a):(gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ue(r.error.code,r.error.message))),a?new lw(e,r.state,i):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $I{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Gh();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=b_(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new $I(e,a):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lx(t.clientId,t.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ux{constructor(){this.activeTargetIds=Gh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cx{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ei(gn),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=N1(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new ux),this.ar=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(N1(e.persistenceKey,i));if(a){const u=$I.Ji(i,a);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ax(this.persistenceKey,e));if(r){const i=lw.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ax(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ge("SharedClientState","READ",e,t),t}setItem(e,t){Ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let u=Is.A;if(null!=a)try{const f=JSON.parse(a);Vt("number"==typeof f),u=f}catch(f){gr("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==Is.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new HI(this.currentUser,e,t,r),a=L1(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=L1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=ax(this.persistenceKey,e),a=new lw(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return $I.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return HI.Ji(new zr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return lw.Ji(i,t)}wr(e){return lx.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),u=[],f=[];return a.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Or(u,f).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Gh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class F1{constructor(){this.Fr=new ux,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new ux,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class u2{Br(e){}shutdown(){}}class U1{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const c2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class d2{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class h2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const u=this.oo(e,t);Ge("RestConnection","Sending: ",u,r);const f={};return this.uo(f,i,a),this.ao(e,u,f,r).then(m=>(Ge("RestConnection","Received: ",m),m),m=>{throw Pp("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${c2[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,u)=>{const f=new uS;f.listenOnce(oS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case m_.NO_ERROR:const v=f.getResponseJson();Ge("Connection","XHR received:",JSON.stringify(v)),a(v);break;case m_.TIMEOUT:Ge("Connection",'RPC "'+e+'" timed out'),u(new Ue(ve.DEADLINE_EXCEEDED,"Request time out"));break;case m_.HTTP_ERROR:const A=f.getStatus();if(Ge("Connection",'RPC "'+e+'" failed with status:',A,"response text:",f.getResponseText()),A>0){const x=f.getResponseJson().error;if(x&&x.status&&x.message){const N=function($){const Y=$.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Y)>=0?Y:ve.UNKNOWN}(x.status);u(new Ue(N,x.message))}else u(new Ue(ve.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Ue(ve.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{Ge("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qE(),u=ZE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new lS({})),this.uo(f.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Ge("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let A=!1,x=!1;const N=new d2({jr:Y=>{x?Ge("Connection","Not sending because WebChannel is closed:",Y):(A||(Ge("Connection","Opening WebChannel transport."),v.open(),A=!0),Ge("Connection","WebChannel sending:",Y),v.send(Y))},Wr:()=>v.close()}),$=(Y,Ce,Ve)=>{Y.listen(Ce,ht=>{try{Ve(ht)}catch(it){setTimeout(()=>{throw it},0)}})};return $(v,__.EventType.OPEN,()=>{x||Ge("Connection","WebChannel transport opened.")}),$(v,__.EventType.CLOSE,()=>{x||(x=!0,Ge("Connection","WebChannel transport closed"),N.eo())}),$(v,__.EventType.ERROR,Y=>{x||(x=!0,Pp("Connection","WebChannel transport errored:",Y),N.eo(new Ue(ve.UNAVAILABLE,"The operation could not be completed")))}),$(v,__.EventType.MESSAGE,Y=>{var Ce;if(!x){const Ve=Y.data[0];Vt(!!Ve);const ht=Ve,it=ht.error||(null===(Ce=ht[0])||void 0===Ce?void 0:Ce.error);if(it){Ge("Connection","WebChannel received error:",it);const Ft=it.status;let ft=function(Kt){const Zo=fi[Kt];if(void 0!==Zo)return EI(Zo)}(Ft),Zt=it.message;void 0===ft&&(ft=ve.INTERNAL,Zt="Unknown error status: "+Ft+" with message "+it.message),x=!0,N.eo(new Ue(ft,Zt)),v.close()}else Ge("Connection","WebChannel received:",Ve),N.no(Ve)}}),$(u,aS.STAT_EVENT,Y=>{Y.stat===KE.PROXY?Ge("Connection","Detected buffering proxy"):Y.stat===KE.NOPROXY&&Ge("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function V1(){return"undefined"!=typeof window?window:null}function zI(){return"undefined"!=typeof document?document:null}function uw(n){return new SI(n,!0)}class dx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class B1{constructor(e,t,r,i,a,u,f,m){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new dx(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,be.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,be.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ue(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,be.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f2 extends B1{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function FS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:wt(),i=e.targetChange.targetIds||[],a=function(m,v){return m.N?(Vt(void 0===v||"string"==typeof v),xn.fromBase64String(v||"")):(Vt(void 0===v||v instanceof Uint8Array),xn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(m){const v=void 0===m.code?ve.UNKNOWN:EI(m.code);return new Ue(v,m.message||"")}(u);t=new SS(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ta(n,r.document.name),a=Ti(r.document.updateTime),u=new Vi({mapValue:{fields:r.document.fields}}),f=ar.newFoundDocument(i,a,u);t=new Z0(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ta(n,r.document),a=r.readTime?Ti(r.readTime):Ut.min(),u=ar.newNoDocument(i,a);t=new Z0([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Ta(n,r.document);t=new Z0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return wt();{const r=e.filter,a=new JO(r.count||0);t=new AS(r.targetId,a)}}var m;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Ut.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ut.min():a.readTime?Ti(a.readTime):Ut.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Gp(this.M),t.addTarget=function(i,a){let u;const f=a.target;return u=x0(f)?{documents:US(i,f)}:{query:VS(i,f)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=K0(i,a.resumeToken):a.snapshotVersion.compareTo(Ut.min())>0&&(u.readTime=Wh(i,a.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function e1(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Gp(this.M),t.removeTarget=e,this.Oo(t)}}class p2 extends B1{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function XO(n,e){return n&&n.length>0?(Vt(void 0!==e),n.map(t=>function(r,i){let a=Ti(r.updateTime?r.updateTime:i);return a.isEqual(Ut.min())&&(a=Ti(i)),new vI(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.Jo(r,t)}return Vt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Gp(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>F_(this.M,r))};this.Oo(t)}}class g2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Ue(ve.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ve.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ve.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class m2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(gr(t),this.su=!1):Ge("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class _2{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(f=>{r.enqueueAndForget((0,be.Z)(function*(){var m;Qh(u)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,be.Z)(function*(v){const A=at(v);A.lu.add(4),yield q_(A),A._u.set("Unknown"),A.lu.delete(4),yield cw(A)}),function(v){return m.apply(this,arguments)})(u))}))}),this._u=new m2(r,i)}}function cw(n){return hx.apply(this,arguments)}function hx(){return hx=(0,be.Z)(function*(n){if(Qh(n))for(const e of n.fu)yield e(!0)}),hx.apply(this,arguments)}function q_(n){return fx.apply(this,arguments)}function fx(){return fx=(0,be.Z)(function*(n){for(const e of n.fu)yield e(!1)}),fx.apply(this,arguments)}function GI(n,e){const t=at(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),mx(t)?gx(t):K_(t).Co()&&px(t,e))}function dw(n,e){const t=at(n),r=K_(t);t.hu.delete(e),r.Co()&&j1(t,e),0===t.hu.size&&(r.Co()?r.ko():Qh(t)&&t._u.set("Unknown"))}function px(n,e){n.wu.Z(e.targetId),K_(n).Qo(e)}function j1(n,e){n.wu.Z(e),K_(n).jo(e)}function gx(n){n.wu=new TI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),K_(n).start(),n._u.iu()}function mx(n){return Qh(n)&&!K_(n).Do()&&n.hu.size>0}function Qh(n){return 0===at(n).lu.size}function H1(n){n.wu=void 0}function y2(n){return _x.apply(this,arguments)}function _x(){return _x=(0,be.Z)(function*(n){n.hu.forEach((e,t)=>{px(n,e)})}),_x.apply(this,arguments)}function v2(n,e){return yx.apply(this,arguments)}function yx(){return yx=(0,be.Z)(function*(n,e){H1(n),mx(n)?(n._u.uu(e),gx(n)):n._u.set("Unknown")}),yx.apply(this,arguments)}function w2(n,e,t){return vx.apply(this,arguments)}function vx(){return vx=(0,be.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof SS&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,a){const u=a.cause;for(const f of a.targetIds)i.hu.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.hu.delete(f),i.wu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WI(n,r)}else if(e instanceof Z0?n.wu.ut(e):e instanceof AS?n.wu._t(e):n.wu.ht(e),!t.isEqual(Ut.min()))try{const r=yield M1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.wu.yt(a);return u.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.hu.get(m);v&&i.hu.set(m,v.withResumeToken(f.resumeToken,a))}}),u.targetMismatches.forEach(f=>{const m=i.hu.get(f);if(!m)return;i.hu.set(f,m.withResumeToken(xn.EMPTY_BYTE_STRING,m.snapshotVersion)),j1(i,f);const v=new qh(m.target,f,1,m.sequenceNumber);px(i,v)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),yield WI(n,r)}var r}),vx.apply(this,arguments)}function WI(n,e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,be.Z)(function*(n,e,t){if(!Wp(e))throw e;n.lu.add(1),yield q_(n),n._u.set("Offline"),t||(t=()=>M1(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield cw(n)}))}),wx.apply(this,arguments)}function $1(n,e){return e().catch(t=>WI(n,t,e))}function Z_(n){return bx.apply(this,arguments)}function bx(){return bx=(0,be.Z)(function*(n){const e=at(n),t=Jh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;b2(e);)try{const i=yield JF(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,C2(e,i)}catch(i){yield WI(e,i)}z1(e)&&G1(e)}),bx.apply(this,arguments)}function b2(n){return Qh(n)&&n.cu.length<10}function C2(n,e){n.cu.push(e);const t=Jh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function z1(n){return Qh(n)&&!Jh(n).Do()&&n.cu.length>0}function G1(n){Jh(n).start()}function E2(n){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,be.Z)(function*(n){Jh(n).Xo()}),Cx.apply(this,arguments)}function I2(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,be.Z)(function*(n){const e=Jh(n);for(const t of n.cu)e.Ho(t.mutations)}),Ex.apply(this,arguments)}function T2(n,e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,be.Z)(function*(n,e,t){const r=n.cu.shift(),i=$S.from(r,e,t);yield $1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Z_(n)}),Ix.apply(this,arguments)}function D2(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,be.Z)(function*(n,e){var t;e&&Jh(n).zo&&(yield(t=(0,be.Z)(function*(r,i){if(CI(a=i.code)&&a!==ve.ABORTED){const u=r.cu.shift();Jh(r).No(),yield $1(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Z_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),z1(n)&&G1(n)}),Tx.apply(this,arguments)}function W1(n,e){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,be.Z)(function*(n,e){const t=at(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=Qh(t);t.lu.add(3),yield q_(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield cw(t)}),Dx.apply(this,arguments)}function Ax(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,be.Z)(function*(n,e){const t=at(n);e?(t.lu.delete(2),yield cw(t)):e||(t.lu.add(2),yield q_(t),t._u.set("Unknown"))}),Sx.apply(this,arguments)}function K_(n){return n.mu||(n.mu=function(e,t,r){const i=at(e);return i.tu(),new f2(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:y2.bind(null,n),Jr:v2.bind(null,n),Ko:w2.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.mu.No(),mx(n)?gx(n):n._u.set("Unknown")):(yield n.mu.stop(),H1(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Jh(n){return n.gu||(n.gu=function(e,t,r){const i=at(e);return i.tu(),new p2(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:E2.bind(null,n),Jr:D2.bind(null,n),Yo:I2.bind(null,n),Jo:T2.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.gu.No(),yield Z_(n)):(yield n.gu.stop(),n.cu.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class xx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,f=new xx(e,t,u,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y_(n,e){if(gr("AsyncQueue",`${e}: ${n}`),Wp(n))return new Ue(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Q_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=R_(),this.sortedSet=new ei(this.comparator)}static emptySet(e){return new Q_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Q_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Q_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class q1{constructor(){this.yu=new ei(Qe.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):wt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class J_{constructor(e,t,r,i,a,u,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new J_(e,t,Q_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class A2{constructor(){this.Iu=void 0,this.listeners=[]}}class S2{constructor(){this.queries=new oc(e=>A_(e),Up),this.onlineState="Unknown",this.Tu=new Set}}function Mx(n,e){return Px.apply(this,arguments)}function Px(){return Px=(0,be.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new A2),i)try{a.Iu=yield t.onListen(r)}catch(u){const f=Y_(u,`Initialization of query '${L0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&kx(t)}),Px.apply(this,arguments)}function Ox(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,be.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Rx.apply(this,arguments)}function x2(n,e){const t=at(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.Au(i)&&(r=!0);u.Iu=i}}r&&kx(t)}function M2(n,e,t){const r=at(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function kx(n){n.Tu.forEach(e=>{e.next()})}class Nx{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new J_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=J_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class P2{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Z1{constructor(e){this.M=e}li(e){return Ta(this.M,e)}fi(e){return e.metadata.exists?NS(this.M,e.document,!1):ar.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Ti(e)}}class O2{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=K1(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=En.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new Z1(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||Ln()).add(a);t.set(u,f)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function XF(n,e,t,r){return rx.apply(this,arguments)}(e.localStore,new Z1(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield e2(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function K1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Y1{constructor(e){this.key=e}}class Q1{constructor(e){this.key=e}}class J1{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Ln(),this.mutatedKeys=Ln(),this.Lu=S_(e),this.Uu=new Q_(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new q1,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const m=D_(this.query)&&i.size===this.query.limit?i.last():null,v=k0(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const N=i.get(A),$=ao(this.query,x)?x:null,Y=!!N&&this.mutatedKeys.has(N.key),Ce=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Ve=!1;N&&$?N.data.isEqual($.data)?Y!==Ce&&(r.track({type:3,doc:$}),Ve=!0):this.Qu(N,$)||(r.track({type:2,doc:$}),Ve=!0,(m&&this.Lu($,m)>0||v&&this.Lu($,v)<0)&&(f=!0)):!N&&$?(r.track({type:0,doc:$}),Ve=!0):N&&!$&&(r.track({type:1,doc:N}),Ve=!0,(m||v)&&(f=!0)),Ve&&($?(u=u.add($),a=Ce?a.add(A):a.delete(A)):(u=u.delete(A),a=a.delete(A)))}),D_(this.query)||k0(this.query))for(;u.size>this.query.limit;){const A=D_(this.query)?u.last():u.first();u=u.delete(A.key),a=a.delete(A.key),r.track({type:1,doc:A})}return{Uu:u,Ku:r,ei:f,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((v,A)=>function(x,N){const $=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return $(x)-$(N)}(v.type,A.type)||this.Lu(v.doc,A.doc)),this.ju(r);const u=t?this.Wu():[],f=0===this.Bu.size&&this.current?1:0,m=f!==this.$u;return this.$u=f,0!==a.length||m?{snapshot:new J_(this.query,e.Uu,i,a,e.mutatedKeys,0===f,m,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new q1,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ln(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new Q1(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Y1(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=Ln();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return J_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class R2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class k2{constructor(e){this.key=e,this.Xu=!1}}class N2{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Zu={},this.ta=new oc(f=>A_(f),Up),this.ea=new Map,this.na=new Set,this.sa=new ei(Qe.comparator),this.ia=new Map,this.ra=new sx,this.oa={},this.ua=new Map,this.aa=Qp.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function L2(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,be.Z)(function*(n,e){const t=sM(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const u=yield G_(t.localStore,$o(e));t.isPrimaryClient&&GI(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield Fx(t,e,r,"current"===f)}return i}),Lx.apply(this,arguments)}function Fx(n,e,t,r){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,be.Z)(function*(n,e,t,r){n.ha=(A,x,N)=>{return($=(0,be.Z)(function*(Y,Ce,Ve,ht){let it=Ce.view.Gu(Ve);it.ei&&(it=yield jI(Y.localStore,Ce.query,!1).then(({documents:Zt})=>Ce.view.Gu(Zt,it)));const Ft=ht&&ht.targetChanges.get(Ce.targetId),ft=Ce.view.applyChanges(it,Y.isPrimaryClient,Ft);return Zx(Y,Ce.targetId,ft.zu),ft.snapshot}),function(Y,Ce,Ve,ht){return $.apply(this,arguments)})(n,A,x,N);var $};const i=yield jI(n.localStore,e,!0),a=new J1(e,i.hi),u=a.Gu(i.documents),f=ac.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(u,n.isPrimaryClient,f);Zx(n,t,m.zu);const v=new R2(e,t,a);return n.ta.set(e,v),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),m.snapshot}),Ux.apply(this,arguments)}function F2(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,be.Z)(function*(n,e){const t=at(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!Up(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield W_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),dw(t.remoteStore,r.targetId),X_(t,r.targetId)}).catch(Jp))):(X_(t,r.targetId),yield W_(t.localStore,r.targetId,!0))}),Vx.apply(this,arguments)}function Bx(){return Bx=(0,be.Z)(function*(n,e,t){const r=oM(n);try{const i=yield function(a,u){const f=at(a),m=Cr.now(),v=u.reduce((x,N)=>x.add(N.key),Ln());let A;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>f.ai.qs(x,v).next(N=>{A=N;const $=[];for(const Y of u){const Ce=ES(Y,A.get(Y.key));null!=Ce&&$.push(new sc(Y.key,Ce,oI(Ce.value.mapValue),Xr.exists(!0)))}return f.$s.addMutationBatch(x,m,$,u)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,f){let m=a.oa[a.currentUser.toKey()];m||(m=new ei(gn)),m=m.insert(u,f),a.oa[a.currentUser.toKey()]=m}(r,i.batchId,t),yield bd(r,i.changes),yield Z_(r.remoteStore)}catch(i){const a=Y_(i,"Failed to persist write");t.reject(a)}}),Bx.apply(this,arguments)}function X1(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,be.Z)(function*(n,e){const t=at(n);try{const r=yield QF(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.ia.get(a);u&&(Vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?Vt(u.Xu):i.removedDocuments.size>0&&(Vt(u.Xu),u.Xu=!1))}),yield bd(t,r,e)}catch(r){yield Jp(r)}}),jx.apply(this,arguments)}function eR(n,e,t){const r=at(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,u)=>{const f=u.view.Eu(e);f.snapshot&&i.push(f.snapshot)}),function(a,u){const f=at(a);f.onlineState=u;let m=!1;f.queries.forEach((v,A)=>{for(const x of A.listeners)x.Eu(u)&&(m=!0)}),m&&kx(f)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function V2(n,e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,be.Z)(function*(n,e,t){const r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let u=new ei(Qe.comparator);u=u.insert(a,ar.newNoDocument(a,Ut.min()));const f=Ln().add(a),m=new vd(Ut.min(),new Map,new mr(gn),u,f);yield X1(r,m),r.sa=r.sa.remove(a),r.ia.delete(e),Kx(r)}else yield W_(r.localStore,e,!1).then(()=>X_(r,e,t)).catch(Jp)}),Hx.apply(this,arguments)}function B2(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,be.Z)(function*(n,e){const t=at(n),r=e.batch.batchId;try{const i=yield YF(t.localStore,e);qx(t,r,null),Wx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield bd(t,i)}catch(i){yield Jp(i)}}),$x.apply(this,arguments)}function j2(n,e,t){return zx.apply(this,arguments)}function zx(){return zx=(0,be.Z)(function*(n,e,t){const r=at(n);try{const i=yield function(a,u){const f=at(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.$s.lookupMutationBatch(m,u).next(A=>(Vt(null!==A),v=A.keys(),f.$s.removeMutationBatch(m,A))).next(()=>f.$s.performConsistencyCheck(m)).next(()=>f.ai.qs(m,v))})}(r.localStore,e);qx(r,e,t),Wx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield bd(r,i)}catch(i){yield Jp(i)}}),zx.apply(this,arguments)}function Gx(){return Gx=(0,be.Z)(function*(n,e){const t=at(n);Qh(t.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=at(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.$s.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Y_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Gx.apply(this,arguments)}function Wx(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function qx(n,e,t){const r=at(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function X_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||tR(n,r)})}function tR(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(dw(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),Kx(n))}function Zx(n,e,t){for(const r of t)r instanceof Y1?(n.ra.addReference(r.key,e),$2(n,r)):r instanceof Q1?(Ge("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||tR(n,r.key)):wt()}function $2(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Ge("SyncEngine","New document in limbo: "+t),n.na.add(r),Kx(n))}function Kx(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Qe(En.fromString(e)),r=n.aa.next();n.ia.set(r,new k2(t)),n.sa=n.sa.insert(t,r),GI(n.remoteStore,new qh($o(ic(t.path)),r,2,Is.A))}}function bd(n,e,t){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,be.Z)(function*(n,e,t){const r=at(n),i=[],a=[],u=[];var f;r.ta.isEmpty()||(r.ta.forEach((f,m)=>{u.push(r.ha(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const A=ex.Js(m.targetId,v);a.push(A)}}))}),yield Promise.all(u),r.Zu.Ko(i),yield(f=(0,be.Z)(function*(m,v){const A=at(m);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Ie.forEach(v,N=>Ie.forEach(N.zs,$=>A.persistence.referenceDelegate.addReference(x,N.targetId,$)).next(()=>Ie.forEach(N.Hs,$=>A.persistence.referenceDelegate.removeReference(x,N.targetId,$)))))}catch(x){if(!Wp(x))throw x;Ge("LocalStore","Failed to update sequence numbers: "+x)}for(const x of v){const N=x.targetId;if(!x.fromCache){const $=A.si.get(N),Ce=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);A.si=A.si.insert(N,Ce)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),Yx.apply(this,arguments)}function z2(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,be.Z)(function*(n,e){const t=at(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=yield x1(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(u=>{u.forEach(f=>{f.reject(new Ue(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bd(t,r.ci)}var i}),Qx.apply(this,arguments)}function G2(n,e){const t=at(n),r=t.ia.get(e);if(r&&r.Xu)return Ln().add(r.key);{let i=Ln();const a=t.ea.get(e);if(!a)return i;for(const u of a){const f=t.ta.get(u);i=i.unionWith(f.view.qu)}return i}}function W2(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,be.Z)(function*(n,e){const t=at(n),r=yield jI(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Zx(t,e.targetId,i.zu),i}),Jx.apply(this,arguments)}function q2(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,be.Z)(function*(n,e){const t=at(n);return R1(t.localStore,e).then(r=>bd(t,r))}),Xx.apply(this,arguments)}function Z2(n,e,t,r){return eM.apply(this,arguments)}function eM(){return eM=(0,be.Z)(function*(n,e,t,r){const i=at(n),a=yield function(u,f){const m=at(u),v=at(m.$s);return m.persistence.runTransaction("Lookup mutation documents","readonly",A=>v.ln(A,f).next(x=>x?m.ai.qs(A,x):Ie.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Z_(i.remoteStore):"acknowledged"===t||"rejected"===t?(qx(i,e,r||null),Wx(i,e),f=e,at(at(i.localStore).$s).dn(f)):wt(),yield bd(i,a)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),eM.apply(this,arguments)}function tM(){return tM=(0,be.Z)(function*(n,e){const t=at(n);if(sM(t),oM(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield nR(t,r.toArray());t.ca=!0,yield Ax(t.remoteStore,!0);for(const a of i)GI(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(X_(t,u),W_(t.localStore,u,!0))),dw(t.remoteStore,u)}),yield i,yield nR(t,r),function(a){const u=at(a);u.ia.forEach((f,m)=>{dw(u.remoteStore,m)}),u.ra.bi(),u.ia=new Map,u.sa=new ei(Qe.comparator)}(t),t.ca=!1,yield Ax(t.remoteStore,!1)}}),tM.apply(this,arguments)}function nR(n,e,t){return nM.apply(this,arguments)}function nM(){return nM=(0,be.Z)(function*(n,e,t){const r=at(n),i=[],a=[];for(const u of e){let f;const m=r.ea.get(u);if(m&&0!==m.length){f=yield G_(r.localStore,$o(m[0]));for(const v of m){const A=r.ta.get(v),x=yield W2(r,A);x.snapshot&&a.push(x.snapshot)}}else{const v=yield O1(r.localStore,u);f=yield G_(r.localStore,v),yield Fx(r,rR(v),u,!1)}i.push(f)}return r.Zu.Ko(a),i}),nM.apply(this,arguments)}function rR(n){return dI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Y2(n){const e=at(n);return at(at(e.localStore).persistence).Os()}function Q2(n,e,t,r){return rM.apply(this,arguments)}function rM(){return rM=(0,be.Z)(function*(n,e,t,r){const i=at(n);if(i.ca)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield R1(i.localStore,pI(a[0])),f=vd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield bd(i,u,f);break}case"rejected":yield W_(i.localStore,e,!0),X_(i,e,r);break;default:wt()}}),rM.apply(this,arguments)}function J2(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,be.Z)(function*(n,e,t){const r=sM(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Ge("SyncEngine","Adding an already active target "+i);continue}const a=yield O1(r.localStore,i),u=yield G_(r.localStore,a);yield Fx(r,rR(a),u.targetId,!1),GI(r.remoteStore,u)}for(const i of t)r.ea.has(i)&&(yield W_(r.localStore,i,!1).then(()=>{dw(r.remoteStore,i),X_(r,i)}).catch(Jp))}}),iM.apply(this,arguments)}function sM(n){const e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=X1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V2.bind(null,e),e.Zu.Ko=x2.bind(null,e.eventManager),e.Zu.la=M2.bind(null,e.eventManager),e}function oM(n){const e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j2.bind(null,e),e}class iR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.M=uw(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return S1(this.persistence,new A1,e.initialUser,this.M)}_a(e){return new a2(ox.Wi,this.M)}da(e){return new F1}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sR extends iR{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield oM(r.ga.syncEngine),yield Z_(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return S1(this.persistence,new A1,e.initialUser,this.M)}wa(e){return new HF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=XS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Go.withCacheSize(this.cacheSizeBytes):Go.DEFAULT;return new JS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,V1(),zI(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new F1}}class eU extends sR{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof cx&&(r.sharedClientState.syncEngine={kr:Z2.bind(null,i),Mr:Q2.bind(null,i),Or:J2.bind(null,i),Os:Y2.bind(null,i),Nr:q2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,be.Z)(function*(u){yield function K2(n,e){return tM.apply(this,arguments)}(r.ga.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}da(e){const t=V1();if(!cx.vt(t))throw new Ue(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class aM{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>eR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=z2.bind(null,r.syncEngine),yield Ax(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new S2}createDatastore(e){const t=uw(e.databaseInfo.databaseId),r=new h2(e.databaseInfo);return new g2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>eR(this.syncEngine,f,0),u=U1.vt()?new U1:new u2,new _2(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,f,m,v){const A=new N2(r,i,a,u,f,m);return v&&(A.ca=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=at(t);Ge("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield q_(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function oR(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tU{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new hi,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,be.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new P2(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,be.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(a,u){const f=at(a),m=Gp(f.M)+"/documents",v={documents:u.map($=>L_(f.M,$))},A=yield f.co("BatchGetDocuments",m,v),x=new Map;A.forEach($=>{const Y=function LS(n,e){return"found"in e?function(t,r){Vt(!!r.found);const i=Ta(t,r.found.name),a=Ti(r.found.updateTime),u=new Vi({mapValue:{fields:r.found.fields}});return ar.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Vt(!!r.missing),Vt(!!r.readTime);const i=Ta(t,r.missing),a=Ti(r.readTime);return ar.newNoDocument(i,a)}(n,e):wt()}(f.M,$);x.set(Y.key.toString(),Y)});const N=[];return u.forEach($=>{const Y=x.get($.toString());Vt(!!Y),N.push(Y)}),N}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $p(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Qe.fromPath(i);e.mutations.push(new G0(a,e.precondition(a)))}),yield(r=(0,be.Z)(function*(i,a){const u=at(i),f=Gp(u.M)+"/documents",m={writes:a.map(v=>F_(u.M,v))};yield u.ro("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wt();t=Ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xr.updateTime(t):Xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ut.min()))throw new Ue(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xr.updateTime(t)}return Xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rU{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new dx(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,be.Z)(function*(){const t=new nU(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!fd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!CI(t)}return!1}}class iU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=eI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,be.Z)(function*(f){Ge("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Y_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function aR(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(a){r.isEqual(a)||(yield x1(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),lM.apply(this,arguments)}function lR(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield cM(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>W1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>W1(e.remoteStore,a)),n.onlineComponents=e}),uM.apply(this,arguments)}function cM(n){return dM.apply(this,arguments)}function dM(){return dM=(0,be.Z)(function*(n){return n.offlineComponents||(Ge("FirestoreClient","Using default OfflineComponentProvider"),yield aR(n,new iR)),n.offlineComponents}),dM.apply(this,arguments)}function ZI(n){return hM.apply(this,arguments)}function hM(){return hM=(0,be.Z)(function*(n){return n.onlineComponents||(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield lR(n,new aM)),n.onlineComponents}),hM.apply(this,arguments)}function uR(n){return cM(n).then(e=>e.persistence)}function fM(n){return cM(n).then(e=>e.localStore)}function cR(n){return ZI(n).then(e=>e.remoteStore)}function pM(n){return ZI(n).then(e=>e.syncEngine)}function ey(n){return gM.apply(this,arguments)}function gM(){return gM=(0,be.Z)(function*(n){const e=yield ZI(n),t=e.eventManager;return t.onListen=L2.bind(null,e.syncEngine),t.onUnlisten=F2.bind(null,e.syncEngine),t}),gM.apply(this,arguments)}function dR(n,e,t={}){const r=new hi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,u,f,m){const v=new qI({next:x=>{a.enqueueAndForget(()=>Ox(i,A));const N=x.docs.has(u);!N&&x.fromCache?m.reject(new Ue(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&x.fromCache&&f&&"server"===f.source?m.reject(new Ue(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),A=new Nx(ic(u.path),v,{includeMetadataChanges:!0,Du:!0});return Mx(i,A)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}function hR(n,e,t={}){const r=new hi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,u,f,m){const v=new qI({next:x=>{a.enqueueAndForget(()=>Ox(i,A)),x.fromCache&&"server"===f.source?m.reject(new Ue(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),A=new Nx(u,v,{includeMetadataChanges:!0,Du:!0});return Mx(i,A)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}const fR=new Map;function mM(n,e,t){if(!t)throw new Ue(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pR(n,e,t,r){if(!0===e&&!0===r)throw new Ue(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gR(n){if(!Qe.isDocumentKey(n))throw new Ue(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mR(n){if(Qe.isDocumentKey(n))throw new Ue(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":wt()}function Mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=KI(n);throw new Ue(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _R(n,e){if(e<=0)throw new Ue(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yR({}),this._settingsFrozen=!1,e instanceof ul?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ue(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ue(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new QE;switch(t.type){case"gapi":const r=t.client;return Vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new v0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ue(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fR.get(e);t&&(Ge("ComponentProvider","Removing Datastore"),fR.delete(e),t.terminate())}(this),Promise.resolve()}}class Er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Er(this.firestore,e,this._key)}}class Fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class lc extends Fs{constructor(e,t,r){super(e,t,ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new Qe(e))}withConverter(e){return new lc(this.firestore,e,this._path)}}function vR(n,e,...t){if(n=(0,F.m9)(n),mM("collection","path",e),n instanceof hw){const r=En.fromString(e,...t);return mR(r),new lc(n,null,r)}{if(!(n instanceof Er||n instanceof lc))throw new Ue(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return mR(r),new lc(n.firestore,null,r)}}function YI(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=eI.R()),mM("doc","path",e),n instanceof hw){const r=En.fromString(e,...t);return gR(r),new Er(n,null,new Qe(r))}{if(!(n instanceof Er||n instanceof lc))throw new Ue(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return gR(r),new Er(n.firestore,n instanceof lc?n.converter:null,new Qe(r))}}function wR(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof Er||n instanceof lc)&&(e instanceof Er||e instanceof lc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bR(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof Fs&&e instanceof Fs&&n.firestore===e.firestore&&Up(n._query,e._query)&&n.converter===e.converter}class gU{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new dx(this,"async_queue_retry"),this.Ua=()=>{const t=zI();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=zI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=zI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new hi;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,be.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Wp(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,gr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=xx.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&wt()}verifyOperationInProgress(){}ja(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function _M(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class mU{constructor(){this._progressObserver={},this._taskCompletionResolver=new hi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Or extends hw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new gU,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||CR(this),this._firestoreClient.terminate()}}function yU(n=(0,ci.getApp)()){return(0,ci._getProvider)(n,"firestore").getImmediate()}function Di(n){return n._firestoreClient||CR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CR(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pS(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new iU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ER(n,e,t){const r=new hi;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield aR(n,t),yield lR(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ve.FAILED_PRECONDITION||a.code===ve.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function IR(n){if(n._initialized||n._terminated)throw new Ue(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(xn.fromBase64String(e))}catch(t){throw new Ue(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uc(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eg{constructor(e){this._methodName=e}}class QI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gn(this._lat,e._lat)||gn(this._long,e._long)}}const AU=/^__.*__$/;class SU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sc(e,this.data,this.fieldMask,t,this.fieldTransforms):new yd(e,this.data,t,this.fieldTransforms)}}class TR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class JI{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new JI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return tT(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(DR(this.Ya)&&AU.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class xU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||uw(e)}uc(e,t,r,i=!1){return new JI({Ya:e,methodName:t,oc:r,path:Ii.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function tg(n){const e=n._freezeSettings(),t=uw(n._databaseId);return new xU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XI(n,e,t,r,i,a={}){const u=n.uc(a.merge||a.mergeFields?2:0,e,t,i);bM("Data must be an object, but it was:",u,r);const f=xR(r,u);let m,v;if(a.merge)m=new cd(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){const A=[];for(const x of a.mergeFields){const N=CM(e,x,t);if(!u.contains(N))throw new Ue(ve.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);PR(A,N)||A.push(N)}m=new cd(A),v=u.fieldTransforms.filter(x=>m.covers(x.field))}else m=null,v=u.fieldTransforms;return new SU(new Vi(f),m,v)}class fw extends eg{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}function AR(n,e,t){return new JI({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class yM extends eg{_toFieldTransform(e){return new jp(e.path,new $h)}isEqual(e){return e instanceof yM}}class MU extends eg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=AR(this,e,!0),r=this.ac.map(a=>ng(a,t)),i=new _d(r);return new jp(e.path,i)}isEqual(e){return this===e}}class PU extends eg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=AR(this,e,!0),r=this.ac.map(a=>ng(a,t)),i=new Bi(r);return new jp(e.path,i)}isEqual(e){return this===e}}class OU extends eg{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Bp(e.M,F0(e.M,this.cc));return new jp(e.path,t)}isEqual(e){return this===e}}function vM(n,e,t,r){const i=n.uc(1,e,t);bM("Data must be an object, but it was:",i,r);const a=[],u=Vi.empty();tc(r,(m,v)=>{const A=eT(e,m,t);v=(0,F.m9)(v);const x=i.nc(A);if(v instanceof fw)a.push(A);else{const N=ng(v,x);null!=N&&(a.push(A),u.set(A,N))}});const f=new cd(a);return new TR(u,f,i.fieldTransforms)}function wM(n,e,t,r,i,a){const u=n.uc(1,e,t),f=[CM(e,r,t)],m=[i];if(a.length%2!=0)throw new Ue(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)f.push(CM(e,a[N])),m.push(a[N+1]);const v=[],A=Vi.empty();for(let N=f.length-1;N>=0;--N)if(!PR(v,f[N])){const $=f[N];let Y=m[N];Y=(0,F.m9)(Y);const Ce=u.nc($);if(Y instanceof fw)v.push($);else{const Ve=ng(Y,Ce);null!=Ve&&(v.push($),A.set($,Ve))}}const x=new cd(v);return new TR(A,x,u.fieldTransforms)}function SR(n,e,t,r=!1){return ng(t,n.uc(r?4:3,e))}function ng(n,e){if(MR(n=(0,F.m9)(n)))return bM("Unsupported field value:",e,n),xR(n,e);if(n instanceof eg)return function(t,r){if(!DR(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let f=ng(u,r.sc(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return F0(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Cr.fromDate(t);return{timestampValue:Wh(r.M,i)}}if(t instanceof Cr){const i=new Cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wh(r.M,i)}}if(t instanceof QI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uc)return{bytesValue:K0(r.M,t._byteString)};if(t instanceof Er){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:k_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${KI(t)}`)}(n,e)}function xR(n,e){const t={};return C0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(n,(r,i)=>{const a=ng(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function MR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Cr||n instanceof QI||n instanceof uc||n instanceof Er||n instanceof eg)}function bM(n,e,t){if(!MR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=KI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function CM(n,e,t){if((e=(0,F.m9)(e))instanceof Cd)return e._internalPath;if("string"==typeof e)return eT(n,e);throw tT("Field path arguments must be of type string or ",n,!1,void 0,t)}const RU=new RegExp("[~\\*/\\[\\]]");function eT(n,e,t){if(e.search(RU)>=0)throw tT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cd(...e.split("."))._internalPath}catch(r){throw tT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tT(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Ue(ve.INVALID_ARGUMENT,f+n+m)}function PR(n,e){return n.some(t=>t.isEqual(e))}class pw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kU extends pw{data(){return super.data()}}function nT(n,e){return"string"==typeof e?eT(n,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}class rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ed extends pw{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gw extends Ed{data(e={}){return super.data(e)}}class Xh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gw(this._firestore,this._userDataWriter,r.key,r,new rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new gw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new rg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new gw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new rg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),v=a.indexOf(u.doc.key)),{type:NU(u.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}function OR(n,e){return n instanceof Ed&&e instanceof Ed?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xh&&e instanceof Xh&&n._firestore===e._firestore&&bR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function RR(n){if(k0(n)&&0===n.explicitOrderBy.length)throw new Ue(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mw{}function ef(n,...e){for(const t of e)n=t._apply(n);return n}class LU extends mw{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=tg(e.firestore),r=function(i,a,u,f,m,v,A){let x;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ue(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){VR(A,v);const $=[];for(const Y of A)$.push(UR(f,i,Y));x={arrayValue:{values:$}}}else x=UR(f,i,A)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||VR(A,v),x=SR(u,"where",A,"in"===v||"not-in"===v);const N=ts.create(m,v,x);return function($,Y){if(Y.S()){const Ve=fI($);if(null!==Ve&&!Ve.isEqual(Y.field))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${Y.field.toString()}'`);const ht=hI($);null!==ht&&BR(0,Y.field,ht)}const Ce=function(Ve,ht){for(const it of Ve.filters)if(ht.indexOf(it.op)>=0)return it.op;return null}($,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==Ce)throw new Ue(ve.INVALID_ARGUMENT,Ce===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${Ce.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Fs(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new dl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class UU extends mw{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ue(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new md(i,a);return function(f,m){if(null===hI(f)){const v=fI(f);null!==v&&BR(0,v,m.field)}}(r,u),u}(e._query,this.hc,this.dc);return new Fs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new dl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class kR extends mw{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Fs(e.firestore,e.converter,vS(e._query,this._c,this.wc))}}class NR extends mw{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=FR(e,this.type,this.mc,this.gc);return new Fs(e.firestore,e.converter,(i=t,new dl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class LR extends mw{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=FR(e,this.type,this.mc,this.gc);return new Fs(e.firestore,e.converter,(i=t,new dl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function FR(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof pw)return function(i,a,u,f,m){if(!f)throw new Ue(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const A of Hh(i))if(A.field.isKeyField())v.push(Uh(a,f.key));else{const x=f.data.field(A.field);if(dd(x))throw new Ue(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const N=A.field.canonicalString();throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(x)}return new cl(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=tg(n.firestore);return function(a,u,f,m,v,A){const x=a.explicitOrderBy;if(v.length>x.length)throw new Ue(ve.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let $=0;$<v.length;$++){const Y=v[$];if(x[$].field.isKeyField()){if("string"!=typeof Y)throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Y}`);if(!N0(a)&&-1!==Y.indexOf("/"))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Y}' contains a slash.`);const Ce=a.path.child(En.fromString(Y));if(!Qe.isDocumentKey(Ce))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Ce}' is not because it contains an odd number of segments.`);const Ve=new Qe(Ce);N.push(Uh(u,Ve))}else{const Ce=SR(f,m,Y);N.push(Ce)}}return new cl(N,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function UR(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Ue(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N0(e)&&-1!==t.indexOf("/"))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!Qe.isDocumentKey(r))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uh(n,new Qe(r))}if(t instanceof Er)return Uh(n,t._key);throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KI(t)}.`)}function VR(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(ve.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function BR(n,e,t){if(!t.isEqual(e))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class EM{convertValue(e,t="none"){switch(Gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wt()}}convertObject(e,t){const r={};return tc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new QI(Pr(e.latitude),Pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hd(e));default:return null}}convertTimestamp(e){const t=nc(e);return new Cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);Vt(p(r));const i=new ul(r.get(1),r.get(3)),a=new Qe(r.popFirst(5));return i.isEqual(t)||gr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function rT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class WU extends EM{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}class jR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tg(e)}set(e,t,r){this._verifyNotCommitted();const i=tf(e,this._firestore),a=rT(i.converter,t,r),u=XI(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Xr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=tf(e,this._firestore);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof Cd?wM(this._dataReader,"WriteBatch.update",a._key,t,r,i):vM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tf(e,this._firestore);return this._mutations=this._mutations.concat(new $p(t._key,Xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tf(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Ue(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ig extends EM{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}function HR(n,e,t){n=Mn(n,Er);const r=Mn(n.firestore,Or),i=rT(n.converter,e,t);return ty(r,[XI(tg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Xr.none())])}function $R(n,e,t,...r){n=Mn(n,Er);const i=Mn(n.firestore,Or),a=tg(i);let u;return u="string"==typeof(e=(0,F.m9)(e))||e instanceof Cd?wM(a,"updateDoc",n._key,e,t,r):vM(a,"updateDoc",n._key,e),ty(i,[u.toMutation(n._key,Xr.exists(!0))])}function zR(n,...e){var t,r,i;n=(0,F.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||_M(e[u])||(a=e[u],u++);const f={includeMetadataChanges:a.includeMetadataChanges};if(_M(e[u])){const x=e[u];e[u]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[u+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[u+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let m,v,A;if(n instanceof Er)v=Mn(n.firestore,Or),A=ic(n._key.path),m={next:x=>{e[u]&&e[u](IM(v,n,x))},error:e[u+1],complete:e[u+2]};else{const x=Mn(n,Fs);v=Mn(x.firestore,Or),A=x._query;const N=new ig(v);m={next:$=>{e[u]&&e[u](new Xh(v,N,x,$))},error:e[u+1],complete:e[u+2]},RR(n._query)}return function(x,N,$,Y){const Ce=new qI(Y),Ve=new Nx(N,Ce,$);return x.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Mx(yield ey(x),Ve)})),()=>{Ce.pa(),x.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Ox(yield ey(x),Ve)}))}}(Di(v),A,f,m)}function ty(n,e){return function(t,r){const i=new hi;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function U2(n,e,t){return Bx.apply(this,arguments)}(yield pM(t),r,i)})),i.promise}(Di(n),e)}function IM(n,e,t){const r=t.docs.get(e._key),i=new ig(n);return new Ed(n,i,e._key,r,new rg(t.hasPendingWrites,t.fromCache),e.converter)}class nV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tg(e)}get(e){const t=tf(e,this._firestore),r=new WU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return wt();const a=i[0];if(a.isFoundDocument())return new pw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new pw(this._firestore,r,t._key,null,t.converter);throw wt()})}set(e,t,r){const i=tf(e,this._firestore),a=rT(i.converter,t,r),u=XI(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=tf(e,this._firestore);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof Cd?wM(this._dataReader,"Transaction.update",a._key,t,r,i):vM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=tf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tf(e,this._firestore),r=new ig(this._firestore);return super.get(e).then(i=>new Ed(this._firestore,r,t._key,i._document,new rg(!1,!1),t.converter))}}function TM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WR(){if("undefined"==typeof Uint8Array)throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function qR(){if(!function nI(){return"undefined"!=typeof atob}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Rh=ci.SDK_VERSION,(0,ci._registerComponent)(new wa.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Or(i,new hS(t.getProvider("auth-internal")),new JE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ci.registerVersion)(YE,"3.4.7",n),(0,ci.registerVersion)(YE,"3.4.7","esm2017")}();class _w{constructor(e){this._delegate=e}static fromBase64String(e){return qR(),new _w(uc.fromBase64String(e))}static fromUint8Array(e){return WR(),new _w(uc.fromUint8Array(e))}toBase64(){return qR(),this._delegate.toBase64()}toUint8Array(){return WR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DM(n){return function dV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hV{enableIndexedDbPersistence(e,t){return function vU(n,e){IR(n=Mn(n,Or));const t=Di(n),r=n._freezeSettings(),i=new aM;return ER(t,i,new sR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wU(n){IR(n=Mn(n,Or));const e=Di(n),t=n._freezeSettings(),r=new aM;return ER(e,r,new eU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function bU(n){if(n._initialized&&!n._terminated)throw new Ue(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Kl.vt())return Promise.resolve();const i=r+"main";yield Kl.delete(i)}),function(r){return t.apply(this,arguments)})(XS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ul||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Pp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fU(n,e,t,r={}){var i;const a=(n=Mn(n,hw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Pp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,f;if("string"==typeof r.mockUserToken)u=r.mockUserToken,f=zr.MOCK_USER;else{u=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ue(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new zr(m)}n._authCredentials=new dS(new v_(u,f))}}(this._delegate,e,t,r)}enableNetwork(){return function EU(n){return function sU(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield uR(n),t=yield cR(n);return e.setNetworkEnabled(!0),function(r){const i=at(r);return i.lu.delete(0),cw(i)}(t)}))}(Di(n=Mn(n,Or)))}(this._delegate)}disableNetwork(){return function IU(n){return function oU(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield uR(n),t=yield cR(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const a=at(i);a.lu.add(0),yield q_(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Di(n=Mn(n,Or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function CU(n){return function(e){const t=new hi;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function H2(n,e){return Gx.apply(this,arguments)}(yield pM(e),t)})),t.promise}(Di(n=Mn(n,Or)))}(this._delegate)}onSnapshotsInSync(e){return function tV(n,e){return function uU(n,e){const t=new qI(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield ey(n),i=t,at(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield ey(n),i=t,void at(r).Tu.delete(i);var r,i}))}}(Di(n=Mn(n,Or)),_M(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ny(this,vR(this._delegate,e))}catch(t){throw uo(t,"collection()","Firestore.collection()")}}doc(e){try{return new hl(this,YI(this._delegate,e))}catch(t){throw uo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new co(this,function pU(n,e){if(n=Mn(n,hw),mM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fs(n,null,(t=e,new dl(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw uo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rV(n,e){return function cU(n,e){const t=new hi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const r=yield(i=n,ZI(i).then(a=>a.datastore));var i;new rU(n.asyncQueue,r,e,t).run()})),t.promise}(Di(n=Mn(n,Or)),t=>e(new nV(n,t)))}(this._delegate,t=>e(new KR(this,t)))}batch(){return Di(this._delegate),new YR(new jR(this._delegate,e=>ty(this._delegate,e)))}loadBundle(e){return function TU(n,e){const t=Di(n=Mn(n,Or)),r=new mU;return function dU(n,e,t,r){const i=function(a,u){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return oR(m,v);if(m instanceof ArrayBuffer)return oR(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new tU(m,u);var m}(t,uw(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function X2(n,e,t){const r=at(n);var i;(i=(0,be.Z)(function*(a,u,f){try{const m=yield u.getMetadata();if(yield function(N,$){const Y=at(N),Ce=Ti($.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Ve=>Y.ds.getBundleMetadata(Ve,$.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Ce)>=0)}(a.localStore,m))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(N=m).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);f._updateProgress(K1(m));const v=new O2(m,a.localStore,u.M);let A=yield u.fa();for(;A;){const N=yield v.Nu(A);N&&f._updateProgress(N),A=yield u.fa()}const x=yield v.complete();return yield bd(a,x.Ou,void 0),yield function(N,$){const Y=at(N);return Y.persistence.runTransaction("Save bundle","readwrite",Ce=>Y.ds.saveBundleMetadata(Ce,$))}(a.localStore,m),f._completeWith(x.progress),Promise.resolve(x.Mu)}catch(m){return Pp("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var N}),function(a,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield pM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function DU(n,e){return function hU(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=at(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield fM(n),e)}))}(Di(n=Mn(n,Or)),e).then(t=>t?new Fs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new co(this,t):null)}}class iT extends EM{constructor(e){super(),this.firestore=e}convertBytes(e){return new _w(new uc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return hl.forKey(t,this.firestore,null)}}class KR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new iT(e)}get(e){const t=og(e);return this._delegate.get(t).then(r=>new yw(this._firestore,new Ed(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=og(e);return r?(TM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=og(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=og(e);return this._delegate.delete(t),this}}class YR{constructor(e){this._delegate=e}set(e,t,r){const i=og(e);return r?(TM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=og(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=og(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new gw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new sg(e,new iT(e),t),i.set(t,a)),a}}sg.INSTANCES=new WeakMap;class hl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new hl(t,new Er(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new hl(t,new Er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ny(this.firestore,vR(this._delegate,e))}catch(t){throw uo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof Er&&wR(this._delegate,e)}set(e,t){t=TM("DocumentReference.set",t);try{return t?HR(this._delegate,e,t):HR(this._delegate,e)}catch(r){throw uo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$R(this._delegate,e):$R(this._delegate,e,t,...r)}catch(i){throw uo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function XU(n){return ty(Mn(n.firestore,Or),[new $p(n._key,Xr.none())])}(this._delegate)}onSnapshot(...e){const t=QR(e),r=JR(e,i=>new yw(this.firestore,new Ed(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zR(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ZU(n){n=Mn(n,Er);const e=Mn(n.firestore,Or),t=Di(e),r=new ig(e);return function aU(n,e){const t=new hi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,u){try{const f=yield function(m,v){const A=at(m);return A.persistence.runTransaction("read document","readonly",x=>A.ai.Bs(x,v))}(i,a);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Ue(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Y_(f,`Failed to get document '${a} from cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield fM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ed(e,r,n._key,i,new rg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function KU(n){n=Mn(n,Er);const e=Mn(n.firestore,Or);return dR(Di(e),n._key,{source:"server"}).then(t=>IM(e,n,t))}(this._delegate):function qU(n){n=Mn(n,Er);const e=Mn(n.firestore,Or);return dR(Di(e),n._key).then(t=>IM(e,n,t))}(this._delegate),t.then(r=>new yw(this.firestore,new Ed(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new hl(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}function uo(n,e,t){return n.message=n.message.replace(e,t),n}function QR(n){for(const e of n)if("object"==typeof e&&!DM(e))return e;return{}}function JR(n,e){var t,r;let i;return i=DM(n[0])?n[0]:DM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return OR(this._delegate,e._delegate)}}class vw extends yw{data(e){const t=this._delegate.data(e);return function y_(n,e){n||wt()}(void 0!==t),t}}class co{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iT(e)}where(e,t,r){try{return new co(this.firestore,ef(this._delegate,function FU(n,e,t){const r=e,i=nT("where",n);return new LU(i,r,t)}(e,t,r)))}catch(i){throw uo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new co(this.firestore,ef(this._delegate,function VU(n,e="asc"){const t=e,r=nT("orderBy",n);return new UU(r,t)}(e,t)))}catch(r){throw uo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new co(this.firestore,ef(this._delegate,function BU(n){return _R("limit",n),new kR("limit",n,"F")}(e)))}catch(t){throw uo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new co(this.firestore,ef(this._delegate,function jU(n){return _R("limitToLast",n),new kR("limitToLast",n,"L")}(e)))}catch(t){throw uo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new co(this.firestore,ef(this._delegate,function HU(...n){return new NR("startAt",n,!0)}(...e)))}catch(t){throw uo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new co(this.firestore,ef(this._delegate,function $U(...n){return new NR("startAfter",n,!1)}(...e)))}catch(t){throw uo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new co(this.firestore,ef(this._delegate,function zU(...n){return new LR("endBefore",n,!1)}(...e)))}catch(t){throw uo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new co(this.firestore,ef(this._delegate,function GU(...n){return new LR("endAt",n,!0)}(...e)))}catch(t){throw uo(t,"endAt()","Query.endAt()")}}isEqual(e){return bR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function QU(n){n=Mn(n,Fs);const e=Mn(n.firestore,Or),t=Di(e),r=new ig(e);return function lU(n,e){const t=new hi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,u){try{const f=yield jI(i,a,!0),m=new J1(a,f.hi),v=m.Gu(f.documents),A=m.applyChanges(v,!1);u.resolve(A.snapshot)}catch(f){const m=Y_(f,`Failed to execute query '${a} against cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield fM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Xh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function JU(n){n=Mn(n,Fs);const e=Mn(n.firestore,Or),t=Di(e),r=new ig(e);return hR(t,n._query,{source:"server"}).then(i=>new Xh(e,r,n,i))}(this._delegate):function YU(n){n=Mn(n,Fs);const e=Mn(n.firestore,Or),t=Di(e),r=new ig(e);return RR(n._query),hR(t,n._query).then(i=>new Xh(e,r,n,i))}(this._delegate),t.then(r=>new AM(this.firestore,new Xh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=QR(e),r=JR(e,i=>new AM(this.firestore,new Xh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zR(this._delegate,t,r)}withConverter(e){return new co(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}class pV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new co(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vw(this._firestore,r))})}isEqual(e){return OR(this._delegate,e._delegate)}}class ny extends co{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hl(this.firestore,e):null}doc(e){try{return new hl(this.firestore,void 0===e?YI(this._delegate):YI(this._delegate,e))}catch(t){throw uo(t,"doc()","CollectionReference.doc()")}}add(e){return function eV(n,e){const t=Mn(n.firestore,Or),r=YI(n),i=rT(n.converter,e);return ty(t,[XI(tg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new hl(this.firestore,t))}isEqual(e){return wR(this._delegate,e._delegate)}withConverter(e){return new ny(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}function og(n){return Mn(n,Er)}class SM{constructor(...e){this._delegate=new Cd(...e)}static documentId(){return new SM(Ii.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Cd&&this._delegate._internalPath.isEqual(e._internalPath)}}class ag{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sV(){return new yM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ag(e)}static delete(){const e=function iV(){return new fw("deleteField")}();return e._methodName="FieldValue.delete",new ag(e)}static arrayUnion(...e){const t=function oV(...n){return new MU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ag(t)}static arrayRemove(...e){const t=function aV(...n){return new PU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ag(t)}static increment(e){const t=function lV(n){return new OU("increment",n)}(e);return t._methodName="FieldValue.increment",new ag(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gV={Firestore:ZR,GeoPoint:QI,Timestamp:Cr,Blob:_w,Transaction:KR,WriteBatch:YR,DocumentReference:hl,DocumentSnapshot:yw,Query:co,QueryDocumentSnapshot:vw,QuerySnapshot:AM,CollectionReference:ny,FieldPath:SM,FieldValue:ag,setLogLevel:function fV(n){!function cS(n){ll.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function XR(n,e){return function yV(n,e=Lv.z){return new Un.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function xM(n,e){return XR(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function sT(n,e){return xM(n,e).pipe(kg(void 0),Mm(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const m=i.find(A=>A.doc.ref.isEqual(u.ref)),v=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),a}))}function ek(n,e,t){return sT(n,t).pipe(Vc((r,i)=>function wV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return MM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return MM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return MM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),WC(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function MM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function tk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function _V(n){(function mV(n,e){n.INTERNAL.registerComponent(new wa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},gV)))})(n,(e,t)=>new ZR(e,t,new hV)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(zu.Z);class nk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=sT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(kg(void 0),Mm(),Qa(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tk(e);return ek(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return xM(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),nn.iC)}get(e){return(0,Nn.D)(this.query.get(e)).pipe(nn.iC)}add(e){return this.ref.add(e)}doc(e){return new rk(this.ref.doc(e),this.afs)}}class rk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=ok(r,t);return new nk(i,a,this.afs)}snapshotChanges(){return function vV(n,e){return XR(n,e).pipe(kg(void 0),Mm(),(0,yt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Nn.D)(this.ref.get(e)).pipe(nn.iC)}}class CV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sT(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qa(t=>t.length>0),nn.iC):sT(this.query,this.afs.schedulers.outsideAngular).pipe(nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tk(e);return ek(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return xM(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),nn.iC)}get(e){return(0,Nn.D)(this.query.get(e)).pipe(nn.iC)}}const ik=new d.OlP("angularfire2.enableFirestorePersistence"),sk=new d.OlP("angularfire2.firestore.persistenceSettings"),EV=new d.OlP("angularfire2.firestore.settings"),IV=new d.OlP("angularfire2.firestore.use-emulator");function ok(n,e=(t=>t)){return{query:e(n),ref:n}}let ww=(()=>{class n{constructor(t,r,i,a,u,f,m,v,A,x,N,$,Y,Ce,Ve,ht,it){this.schedulers=m;const Ft=(0,ui.on)(t,f,r),ft=A;x&&$C(Ft,f,N,Y,Ce,Ve,$,ht),[this.firestore,this.persistenceEnabled$]=(0,ui.cc)(`${Ft.name}.firestore`,"AngularFirestore",Ft.name,()=>{const Zt=f.runOutsideAngular(()=>Ft.firestore());if(a&&Zt.settings(a),ft&&Zt.useEmulator(...ft),i&&!Co(u)){const Kt=()=>{try{return(0,Nn.D)(Zt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Zo){return"undefined"!=typeof console&&console.warn(Zo),mt(!1)}};return[Zt,f.runOutsideAngular(Kt)]}return[Zt,mt(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=ok(i,r),f=this.schedulers.ngZone.run(()=>a);return new nk(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new CV(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new rk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(ik,8),d.LFG(EV,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nn.HU),d.LFG(sk,8),d.LFG(IV,8),d.LFG(nd,8),d.LFG(Im,8),d.LFG(Tm,8),d.LFG(Dm,8),d.LFG(Am,8),d.LFG(Sm,8),d.LFG(xm,8),d.LFG(td,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TV=(()=>{class n{constructor(){op.Z.registerVersion("angularfire",nn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ik,useValue:!0},{provide:sk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[ww]}),n})(),oT=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new DA.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}getCurentUser(){return this.afAuth.authState.pipe(jc()).toPromise()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ww),d.LFG(nd),d.LFG(Ui),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DV=(()=>{class n{constructor(t){this.authSvc=t,this.user$=this.authSvc.afAuth.user}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(oT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:34,vars:0,consts:[[1,"container","row"],[1,"container-cards","col-lg-3","col-md-3"],[1,"header"],["src","../../assets/img-home/hangman.png","alt","",1,"game_image"],[1,"content"],["src","../../assets/img-home/mayormenor.png","alt","",1,"game_image"],["src","../../assets/img-home/preguntados.png","alt","",1,"game_image"],["src","../../assets/img-home/reaccion.png","alt","",1,"game_image"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d._UZ(3,"img",3),d.qZA(),d.TgZ(4,"div",4)(5,"h1"),d._uU(6,"Ahorcado"),d.qZA(),d.TgZ(7,"h3"),d._uU(8,"Tem\xe1tica: pelis! Adivina la peli para ganar el juego."),d.qZA()()(),d.TgZ(9,"div",1)(10,"div",2),d._UZ(11,"img",5),d.qZA(),d.TgZ(12,"div",4)(13,"h1"),d._uU(14,"Mayor Menor"),d.qZA(),d.TgZ(15,"h3"),d._uU(16," Adivina si la pr\xf3xima carta es mayor o menor que la actual y suma puntos! "),d.qZA()()(),d.TgZ(17,"div",1)(18,"div",2),d._UZ(19,"img",6),d.qZA(),d.TgZ(20,"div",4)(21,"h1"),d._uU(22,"Preguntados"),d.qZA(),d.TgZ(23,"h3"),d._uU(24," Contesta bien las preguntas de conocimiento popular para ganar puntos y ganar "),d.qZA()()(),d.TgZ(25,"div",1)(26,"div",2),d._UZ(27,"img",7),d.qZA(),d.TgZ(28,"div",4)(29,"h1"),d._uU(30,"Reacci\xf3n"),d.qZA(),d.TgZ(31,"h3"),d._uU(32,"Hace click en los c\xedrculos para ver que tan r\xe1pido reaccionas"),d.qZA()()()(),d._UZ(33,"router-outlet"))},directives:[Uu],styles:[".container[_ngcontent-%COMP%]{background:url(back-hearts.109130d0bd8f90a9.jpg) repeat;width:100%;height:100%;padding-top:15%;display:flex;flex-direction:row;justify-content:center;align-items:center}.container-cards[_ngcontent-%COMP%]{height:300px;width:300px;background:#fdcfe8;overflow:hidden;border-radius:20px;cursor:pointer;box-shadow:0 0 20px 8px #ad99e9;margin:10px}.content[_ngcontent-%COMP%]{text-align:justify;color:#000;padding:40px;font-family:Merriweather,serif;min-height:135px}h1[_ngcontent-%COMP%]{font-weight:20;text-align:center;margin-bottom:5px}h3[_ngcontent-%COMP%]{font-weight:20;margin-top:0}.container-cards[_ngcontent-%COMP%]:hover{background:url(back-hearts.109130d0bd8f90a9.jpg) repeat}.header[_ngcontent-%COMP%]{width:50px;padding-top:20px;align-items:center;margin-left:50px}.game_image[_ngcontent-%COMP%]{width:120%;height:100%;border-radius:50%;background-size:cover;object-fit:cover}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column;padding-top:50px}}"]}),n})(),AV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-quien-soy"]],decls:32,vars:0,consts:[["href","https://fonts.googleapis.com/css?family=Libre+Baskerville:700","rel","stylesheet","type","text/css"],["href","https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap","rel","stylesheet"],["href","https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic","rel","stylesheet","type","text/css"],[1,"background"],[1,"about-me-container"],[1,"image-card"],["src","../../assets/img-home/sideways2.png","alt","Placeholder Image"],[1,"menu-card"],[1,"about-me-card"],[1,"game-card"],["src","../../assets/img-home/ghostie.png","alt","Placeholder Image",1,"pixel"],["src","../../assets/img-home/vines.png","alt","Placeholder Image",1,"vines"],[1,"empty-card"],[1,"color-palette-card"],[1,"color-palette"],[1,"color",2,"background-color","#e3e4c1"],[1,"color",2,"background-color","#cec1e1"],[1,"color",2,"background-color","#b8d3c3"],[1,"color",2,"background-color","#f4c5e1"]],template:function(t,r){1&t&&(d._UZ(0,"link",0)(1,"link",1)(2,"link",2),d.TgZ(3,"div",3)(4,"div",4)(5,"div",5),d._UZ(6,"img",6),d.qZA(),d.TgZ(7,"div",7)(8,"h2"),d._uU(9,"////"),d.qZA(),d.TgZ(10,"p"),d._uU(11,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque nec ligula eget nisi aliquam laoreet eget nec dolor. "),d.qZA()(),d.TgZ(12,"div",8)(13,"h2"),d._uU(14,"Cecilia"),d.qZA(),d.TgZ(15,"p"),d._uU(16,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque nec ligula eget nisi aliquam laoreet eget nec dolor."),d.qZA()(),d.TgZ(17,"div",9)(18,"h2"),d._uU(19,"Mi juego"),d.qZA(),d.TgZ(20,"p"),d._uU(21,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque nec ligula eget nisi aliquam laoreet eget nec dolor. "),d.qZA()(),d._UZ(22,"img",10)(23,"img",11)(24,"div",12),d.TgZ(25,"div",13)(26,"div",14),d._UZ(27,"div",15)(28,"div",16)(29,"div",17)(30,"div",18),d.qZA()()()(),d._UZ(31,"router-outlet"))},directives:[Uu],styles:['.background[_ngcontent-%COMP%]{height:100%;width:100%;background:url(back-hearts.109130d0bd8f90a9.jpg) repeat center center fixed;background-size:cover;position:absolute;display:block}.profile-img[_ngcontent-%COMP%]{background:url(perfil.9057933d93e36d96.png) no-repeat center center;margin-top:150px;height:100%;max-height:750px;width:100%;background-size:contain;position:absolute;display:block}.about-me-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;height:100%;padding-top:150px}.menu-card[_ngcontent-%COMP%], .about-me-card[_ngcontent-%COMP%], .game-card[_ngcontent-%COMP%], .empty-card[_ngcontent-%COMP%], .image-card[_ngcontent-%COMP%], .color-palette-card[_ngcontent-%COMP%]{box-sizing:border-box;border:8px solid #f1d2d6;background-color:#d1a6d982;border-radius:10px;padding:20px;margin:10px;min-width:200px}.menu-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .about-me-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .game-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .color-palette-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px;text-align:center;font-family:"Press Start 2P",cursive}.color-palette-card[_ngcontent-%COMP%]{position:absolute;left:100}.color-palette[_ngcontent-%COMP%]{display:flex}.color[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin:5px}.image-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.empty-card[_ngcontent-%COMP%]{visibility:hidden}.menu-card[_ngcontent-%COMP%]{flex-basis:250px}.about-me-card[_ngcontent-%COMP%], .game-card[_ngcontent-%COMP%]{flex-basis:500px}.menu-card[_ngcontent-%COMP%]{order:3}.about-me-card[_ngcontent-%COMP%]{order:2}.game-card[_ngcontent-%COMP%]{order:3;z-index:2}.image-card[_ngcontent-%COMP%]{order:1;padding-top:-300px;max-width:300px;max-height:300px;z-index:2}.pixel[_ngcontent-%COMP%]{height:100px;width:100px;order:6;position:absolute;padding-top:-150px;z-index:3}.vines[_ngcontent-%COMP%]{width:250px;height:300px;position:absolute;top:140px;right:0;z-index:1}.menu-card[_ngcontent-%COMP%]:hover, .about-me-card[_ngcontent-%COMP%]:hover, .game-card[_ngcontent-%COMP%]:hover, .image-card[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:all .3s ease-in-out;z-index:1}.card-border[_ngcontent-%COMP%]{border:8px solid #d3c0b8;border-radius:10px;margin:10px;padding:20px;box-shadow:2px 2px 5px #00000040 inset}.menu-card[_ngcontent-%COMP%], .about-me-card[_ngcontent-%COMP%], .game-card[_ngcontent-%COMP%], .empty-card[_ngcontent-%COMP%], .image-card[_ngcontent-%COMP%], .color-palette-card[_ngcontent-%COMP%]{box-shadow:4px 4px #00000040 inset}.color-palette-card[_ngcontent-%COMP%]{box-shadow:none;order:5;left:40px}.color-palette-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.color[_ngcontent-%COMP%]{width:25px;height:25px;margin:4px;border:2px solid #f1e1d2}.color[_ngcontent-%COMP%]:hover{border:2px solid #ffffff}.color[_ngcontent-%COMP%]:active{border:2px solid #000000}']}),n})();const SV=function(){return["/login"]};let xV=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r,this.credentials=new Rc({email:new Oc("",[qi.required,qi.email]),password:new Oc("",[qi.required,qi.minLength(6)])})}ngOnInit(){}register(t,r,i){var a=this;return(0,be.Z)(function*(){var u;try{const f=yield a.afAuth.createUserWithEmailAndPassword(t,r);null===(u=f.user)||void 0===u||u.updateProfile({displayName:i}),console.log(f),function MV(n){nl().fire({title:n,width:600,padding:"3em",color:"#716add",background:"#fff url(./../../assets/img-home/back-hearts.jpg)"}).then(function(){window.location.href="./../../home"})}("Se ha registrado con \xe9xito")}catch(f){!function PV(n){nl().fire({title:n,width:600,padding:"3em",color:"#dd6a6a",background:"#fff url(./../../assets/img-home/back-hearts.jpg)"}).then(function(){window.location.href="./../../register"})}(f)}})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(nd),d.Y36(Ui))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-registrar"]],decls:50,vars:3,consts:[[1,"bodyC"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3","crossorigin","anonymous"],[1,"container"],[1,"top"],[1,"screen"],[1,"outer"],[1,"inner"],[1,"title-name"],[3,"formGroup","ngSubmit"],[1,"form-container"],[1,"form-group"],[1,"row"],[1,"col-lg-12","col-md-12"],["for","exampleInputPassword1"],["type","text","id","userName","placeholder","Nombre","formControlName","name",1,"form-control"],["name",""],["for","exampleInputEmail1"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Email","formControlName","email",1,"form-control"],["email",""],["type","password","id","exampleInputPassword1","placeholder","Contrase\xf1a","formControlName","password",1,"form-control"],["password",""],[1,"col-lg-6","col-md-6"],[1,"start-btn",3,"click"],[1,"start-btn",3,"routerLink"],[1,"power"],[1,"controls"],[1,"dpad"],[1,"plus"],[1,"middle"],[1,"buttons"],[1,"startselect"],[1,"corner"],[1,"speaker"],[1,"set"],[1,"mic"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0),d._UZ(1,"link",1),d.TgZ(2,"div",2),d._UZ(3,"div",3),d.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),d._uU(8,"Registrarse"),d.qZA(),d.TgZ(9,"form",8),d.NdJ("ngSubmit",function(){d.CHM(i);const u=d.MAs(23),f=d.MAs(29),m=d.MAs(17);return r.register(u.value,f.value,m.value)}),d.TgZ(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13),d._uU(15,"Ingresar su nombre"),d.qZA(),d._UZ(16,"input",14,15),d.qZA()(),d.TgZ(18,"div",11)(19,"div",12)(20,"label",16),d._uU(21,"Ingresar su email:"),d.qZA(),d._UZ(22,"input",17,18),d.qZA()(),d.TgZ(24,"div",11)(25,"div",12)(26,"label",13),d._uU(27,"Ingresar su contrase\xf1a"),d.qZA(),d._UZ(28,"input",19,20),d.qZA()()(),d.TgZ(30,"div",11)(31,"div",21)(32,"button",22),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(23),f=d.MAs(29),m=d.MAs(17);return r.register(u.value,f.value,m.value)}),d._uU(33," REGISTRARSE "),d.qZA()(),d.TgZ(34,"div",21)(35,"button",23),d._uU(36," VOLVER "),d.qZA()()()()()(),d._UZ(37,"div",24),d.qZA()(),d.TgZ(38,"div",25)(39,"div",26),d._UZ(40,"div",27)(41,"div",28),d.qZA(),d._UZ(42,"div",29)(43,"div",30),d.qZA(),d._UZ(44,"div",31),d.TgZ(45,"div",32),d._UZ(46,"div",33)(47,"div",33),d.qZA(),d._UZ(48,"div",34),d.qZA()(),d._UZ(49,"router-outlet")}2&t&&(d.xp6(9),d.Q6J("formGroup",r.credentials),d.xp6(26),d.Q6J("routerLink",d.DdM(2,SV)))},directives:[Of,za,Nc,Qs,fa,j,Bl,Uu],styles:['.toast-center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.toast-top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.toast-bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.toast-top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.toast-bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.toast-top-left[_ngcontent-%COMP%]{top:12px;left:12px}.toast-top-right[_ngcontent-%COMP%]{top:12px;right:12px}.toast-bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.toast-bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}.toast-title[_ngcontent-%COMP%]{font-weight:700}.toast-message[_ngcontent-%COMP%]{word-wrap:break-word}.toast-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .toast-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.toast-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toast-close-button[_ngcontent-%COMP%]{position:relative;right:-.3em;top:-.3em;float:right;font-size:20px;font-weight:700;color:#fff;text-shadow:0 1px 0 #ffffff}.toast-close-button[_ngcontent-%COMP%]:hover, .toast-close-button[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toast-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:transparent;border:0}.toast-container[_ngcontent-%COMP%]{pointer-events:none;position:fixed;z-index:999999}.toast-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.toast-container[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:0 0 6px;padding:15px 15px 15px 50px;width:300px;border-radius:3px;background-position:15px center;background-repeat:no-repeat;background-size:24px;box-shadow:0 0 12px #999;color:#fff}.toast-container[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}.toast-info[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTI1NiA4QzExOS4wNDMgOCA4IDExOS4wODMgOCAyNTZjMCAxMzYuOTk3IDExMS4wNDMgMjQ4IDI0OCAyNDhzMjQ4LTExMS4wMDMgMjQ4LTI0OEM1MDQgMTE5LjA4MyAzOTIuOTU3IDggMjU2IDh6bTAgMTEwYzIzLjE5NiAwIDQyIDE4LjgwNCA0MiA0MnMtMTguODA0IDQyLTQyIDQyLTQyLTE4LjgwNC00Mi00MiAxOC44MDQtNDIgNDItNDJ6bTU2IDI1NGMwIDYuNjI3LTUuMzczIDEyLTEyIDEyaC04OGMtNi42MjcgMC0xMi01LjM3My0xMi0xMnYtMjRjMC02LjYyNyA1LjM3My0xMiAxMi0xMmgxMnYtNjRoLTEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0yNGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDY0YzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MTAwaDEyYzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MjR6Jy8+PC9zdmc+)}.toast-error[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTI1NiA4QzExOSA4IDggMTE5IDggMjU2czExMSAyNDggMjQ4IDI0OCAyNDgtMTExIDI0OC0yNDhTMzkzIDggMjU2IDh6bTEyMS42IDMxMy4xYzQuNyA0LjcgNC43IDEyLjMgMCAxN0wzMzggMzc3LjZjLTQuNyA0LjctMTIuMyA0LjctMTcgMEwyNTYgMzEybC02NS4xIDY1LjZjLTQuNyA0LjctMTIuMyA0LjctMTcgMEwxMzQuNCAzMzhjLTQuNy00LjctNC43LTEyLjMgMC0xN2w2NS42LTY1LTY1LjYtNjUuMWMtNC43LTQuNy00LjctMTIuMyAwLTE3bDM5LjYtMzkuNmM0LjctNC43IDEyLjMtNC43IDE3IDBsNjUgNjUuNyA2NS4xLTY1LjZjNC43LTQuNyAxMi4zLTQuNyAxNyAwbDM5LjYgMzkuNmM0LjcgNC43IDQuNyAxMi4zIDAgMTdMMzEyIDI1Nmw2NS42IDY1LjF6Jy8+PC9zdmc+)}.toast-success[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTE3My44OTggNDM5LjQwNGwtMTY2LjQtMTY2LjRjLTkuOTk3LTkuOTk3LTkuOTk3LTI2LjIwNiAwLTM2LjIwNGwzNi4yMDMtMzYuMjA0YzkuOTk3LTkuOTk4IDI2LjIwNy05Ljk5OCAzNi4yMDQgMEwxOTIgMzEyLjY5IDQzMi4wOTUgNzIuNTk2YzkuOTk3LTkuOTk3IDI2LjIwNy05Ljk5NyAzNi4yMDQgMGwzNi4yMDMgMzYuMjA0YzkuOTk3IDkuOTk3IDkuOTk3IDI2LjIwNiAwIDM2LjIwNGwtMjk0LjQgMjk0LjQwMWMtOS45OTggOS45OTctMjYuMjA3IDkuOTk3LTM2LjIwNC0uMDAxeicvPjwvc3ZnPg==)}.toast-warning[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1NzYgNTEyJyB3aWR0aD0nNTc2JyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTU2OS41MTcgNDQwLjAxM0M1ODcuOTc1IDQ3Mi4wMDcgNTY0LjgwNiA1MTIgNTI3Ljk0IDUxMkg0OC4wNTRjLTM2LjkzNyAwLTU5Ljk5OS00MC4wNTUtNDEuNTc3LTcxLjk4N0wyNDYuNDIzIDIzLjk4NWMxOC40NjctMzIuMDA5IDY0LjcyLTMxLjk1MSA4My4xNTQgMGwyMzkuOTQgNDE2LjAyOHpNMjg4IDM1NGMtMjUuNDA1IDAtNDYgMjAuNTk1LTQ2IDQ2czIwLjU5NSA0NiA0NiA0NiA0Ni0yMC41OTUgNDYtNDYtMjAuNTk1LTQ2LTQ2LTQ2em0tNDMuNjczLTE2NS4zNDZsNy40MTggMTM2Yy4zNDcgNi4zNjQgNS42MDkgMTEuMzQ2IDExLjk4MiAxMS4zNDZoNDguNTQ2YzYuMzczIDAgMTEuNjM1LTQuOTgyIDExLjk4Mi0xMS4zNDZsNy40MTgtMTM2Yy4zNzUtNi44NzQtNS4wOTgtMTIuNjU0LTExLjk4Mi0xMi42NTRoLTYzLjM4M2MtNi44ODQgMC0xMi4zNTYgNS43OC0xMS45ODEgMTIuNjU0eicvPjwvc3ZnPg==)}.toast-container.toast-top-center[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%], .toast-container.toast-bottom-center[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{width:300px;margin-left:auto;margin-right:auto}.toast-container.toast-top-full-width[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%], .toast-container.toast-bottom-full-width[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{width:96%;margin-left:auto;margin-right:auto}.ngx-toastr[_ngcontent-%COMP%]{background-color:#030303;pointer-events:auto}.toast-success[_ngcontent-%COMP%]{background-color:#51a351}.toast-error[_ngcontent-%COMP%]{background-color:#bd362f}.toast-info[_ngcontent-%COMP%]{background-color:#2f96b4}.toast-warning[_ngcontent-%COMP%]{background-color:#f89406}.toast-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width: 240px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}.toast-container[_ngcontent-%COMP%]   .toast-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width: 241px) and (max-width: 480px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}.toast-container[_ngcontent-%COMP%]   .toast-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width: 481px) and (max-width: 768px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}#toast-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{opacity:1}.login-success[_ngcontent-%COMP%]{background:url(back-hearts.109130d0bd8f90a9.jpg) repeat center center fixed;height:100%;background-size:100%}.start-btn[_ngcontent-%COMP%]{text-align:center;display:inline-block;margin:8px;font-weight:700;padding:2px 10px;background-color:#d3d3d3;text-shadow:-1px -1px black,1px 1px white;color:gray;border-radius:7px;box-shadow:0 .2em gray;cursor:pointer}.form-group[_ngcontent-%COMP%]{margin-top:10%}.form-container[_ngcontent-%COMP%]{padding-top:10%;padding-left:5%;padding-right:5%}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%}body[_ngcontent-%COMP%]{font-family:"Press Start 2P",cursive;background:repeating-linear-gradient(to bottom,#0f0a1e,#0f0a1e 2px,#140e29 2px,#140e29 4px)}.title-name[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0%;right:0;height:90px;color:#fff;width:100%;text-align:center;margin-top:0%;font-size:35px;letter-spacing:5px;text-shadow:-2px 0 0 #fdff2a,-4px 0 0 #df4a42,2px 0 0 #91fcfe,4px 0 0 #4405fc;animation:blink 1s steps(4,start) infinite}@keyframes blink{to{visibility:hidden}}.bodyC[_ngcontent-%COMP%]{background:url(back-hearts.109130d0bd8f90a9.jpg) repeat center center fixed;background-size:100%;height:100%}.container[_ngcontent-%COMP%]{align-items:center;justify-content:center;position:absolute;top:20%;left:50%;transform:translate(-50%,50px);background-color:#2c2c2c22;width:450px;height:600px;border:3px solid #787a79;border-radius:10px 10px 50px}.top[_ngcontent-%COMP%]{width:100%;height:50px;background-color:#2c2c2c07;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:3px solid #787a79}.top[_ngcontent-%COMP%]:after{content:" ";display:block;position:relative;top:7px;left:0px;width:40px;border:5px solid #787a79;border-radius:5px}.screen[_ngcontent-%COMP%]{width:370px;height:360px;position:relative;top:12px;left:30px;background:#bdbdbd;border:3px solid #787a79;border-radius:5px}.screen[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{width:300px;height:310px;position:relative;top:15px;left:50%;transform:translate(-50%);background:#c7a2ff;border:3px solid #787a79;border-radius:5px}.screen[_ngcontent-%COMP%]   .power[_ngcontent-%COMP%]{width:20px;height:20px;position:absolute;top:calc(50% + 120px);left:4px;background:#f3886b;border:3px solid #787a79;border-radius:100%}.screen[_ngcontent-%COMP%]   .power[_ngcontent-%COMP%]:after{content:" ";display:block;width:20px;border-bottom:2px solid #787a79;position:relative;top:13px;left:-6px}.controls[_ngcontent-%COMP%]{position:relative}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]{width:110px;height:110px;background:#e0e2e1;border:2px solid #787a79;border-radius:100%;position:relative;left:10px;top:30px}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%], .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after{box-sizing:border-box}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#bdbdbd;border-radius:3px;box-shadow:0 0 0 3px #787a79;content:"";display:block;height:20px;width:60px}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:after{transform:translate(-50%,-50%) rotate(90deg)}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#bdbdbd;width:30px;height:15px}.controls[_ngcontent-%COMP%]   .dpad[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#f5f5f5;border-radius:50%;border:2px solid #787a79;content:"";height:12px;width:12px}.controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{position:absolute;right:10px;top:55px;width:120px;height:50px;background-color:#e0e2e1;border:2px solid #787a79;border-radius:30px;display:flex;justify-content:space-between;transform:rotate(-35deg)}.controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#f3886b;width:40px;height:40px;border:2px solid #787a79;border-radius:100%;margin:3px}.controls[_ngcontent-%COMP%]   .startselect[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%,40px);display:flex}.controls[_ngcontent-%COMP%]   .startselect[_ngcontent-%COMP%]:before, .controls[_ngcontent-%COMP%]   .startselect[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#e0e2e1;border:2px solid #787a79;border-radius:8px;margin:0 4px;width:45px;height:15px;transform:rotate(-35deg)}.corner[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;background-color:#f5f5f5;border-top-left-radius:100%;border-bottom-right-radius:48px;width:80px;height:50px}.speaker[_ngcontent-%COMP%]{position:absolute;bottom:15px;right:20px;transform:rotate(-35deg);display:flex}.speaker[_ngcontent-%COMP%]   .set[_ngcontent-%COMP%]{display:flex}.speaker[_ngcontent-%COMP%]   .set[_ngcontent-%COMP%]:before, .speaker[_ngcontent-%COMP%]   .set[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#f5f5f5;border:2px solid #bdbdbd;margin:3px;width:1px;height:35px}.mic[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:50%;transform:translate(-50%);width:20px;border:3px solid #787a79;border-radius:3px}.mic[_ngcontent-%COMP%]:before, .mic[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;top:0;background-color:#787a79;width:2px;height:11px}.mic[_ngcontent-%COMP%]:before{right:2px}.mic[_ngcontent-%COMP%]:after{left:2px}']}),n})(),ak=(()=>{class n{constructor(t){this.firestore=t,this.coleccionMensaje=t.collection("mensajes")}guardarMensajeFirestore(t){this.coleccionMensaje.add(t)}crear(t,r){return this.firestore.collection(t).add(r)}obtenerById(t,r){return this.firestore.collection(t).doc(r).snapshotChanges()}obtenerTodos(t){return this.firestore.collection(t).snapshotChanges()}actualizar(t,r,i){return this.firestore.collection(t).doc(r).set(i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ww))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OV=(()=>{class n{constructor(t,r){this.firestore=t,this.afs=r}createOne(t,r){var i=this;return(0,be.Z)(function*(){try{return yield i.firestore.crear(r,{fecha:t.fecha,hora:t.hora,usuario:t.usuario,mensaje:t.mensaje})}catch(a){}})()}getAll(t){return this.afs.collection("chat",i=>i.orderBy("fecha","asc").orderBy("hora","asc")).snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ak),d.LFG(ww))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RV=["scrollMe"];let kV=(()=>{class n{constructor(t,r,i){this.chatService=t,this.authSvc=r,this.firestore=i,this.mensaje={mensaje:"",usuario:"",fecha:"",hora:""},this.chat=[],this.gaurdarUsuario()}gaurdarUsuario(){var t=this;return(0,be.Z)(function*(){t.user=yield t.authSvc.getCurentUser()})()}ngOnInit(){this.chatService.getAll("chat").subscribe(t=>{this.chat=[],t.forEach(r=>{this.chat.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}ngAfterViewChecked(){this.scrollear()}scrollear(){this.listadoMensajes.nativeElement.scrollTop=this.listadoMensajes.nativeElement.scrollHeight}send(){var t=this;return(0,be.Z)(function*(){let r=new Date;t.mensaje.usuario=t.user.email,t.mensaje.fecha=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),t.mensaje.hora=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),t.firestore.crear("chat",{fecha:t.mensaje.fecha,hora:t.mensaje.hora,usuario:t.mensaje.usuario,mensaje:t.mensaje.mensaje}),t.mensaje.mensaje=""})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(OV),d.Y36(oT),d.Y36(ak))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(t,r){if(1&t&&d.Gf(RV,5),2&t){let i;d.iGM(i=d.CRH())&&(r.listadoMensajes=i.first)}},decls:0,vars:0,template:function(t,r){},styles:[".chat-box[_ngcontent-%COMP%]{display:flex;height:100%;max-height:100%;width:100%;background-image:url(/assets/img-home/back-hearts.jpg)}.chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;margin-inline:auto;max-height:100%;max-width:768px;padding-top:15%;width:100%}.inbox[_ngcontent-%COMP%]{flex-direction:column;overflow-y:auto;flex:0 0 auto;max-height:75%;padding-inline:.5rem}.message-container[_ngcontent-%COMP%]{display:flex;flex:0 0 100%;margin-bottom:.8rem}.message[_ngcontent-%COMP%]{flex:0 0 47%;max-width:47%;border:2px solid #3671eb;background-color:#fae0fd;padding-inline:1.5rem;padding-block:.7rem}.message-out[_ngcontent-%COMP%]{margin-left:auto;border-radius:20px 20px 0}.message-in[_ngcontent-%COMP%]{margin-right:auto;border-radius:20px 20px 20px 0}.message-out[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:end}.message-in[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:start}.message-user[_ngcontent-%COMP%], .message-time[_ngcontent-%COMP%]{font-size:12px;color:gray}.message-user[_ngcontent-%COMP%]{margin-bottom:1rem}.message-time[_ngcontent-%COMP%]{margin-top:.3rem}.message-text[_ngcontent-%COMP%]{word-break:break-all;color:#5319b1}.send-message[_ngcontent-%COMP%]{height:20%;display:flex;justify-content:space-between;width:100%}.send-message[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-block:auto}.send-message[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{height:40px;border:2px solid #3671eb;background-color:#fae0fd;border-radius:7px;flex:0 0 85%;gap:.5rem;padding:.5rem 1rem}.send-message[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:#fae0fd;border:2px solid #3671eb;color:#3671eb;font-weight:700;height:40px;border-radius:7px;padding:.5rem 1.2rem;width:-moz-fit-content;width:fit-content}[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px gray;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#436fc786;opacity:.8;border-radius:10px}"]}),n})();class lk{}class uk{}class Id{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Id?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Id;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Id?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===a.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class NV{encodeKey(e){return ck(e)}encodeValue(e){return ck(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const FV=/%(\d[a-f0-9])/gi,UV={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ck(n){return encodeURIComponent(n).replace(FV,(e,t)=>{var r;return null!==(r=UV[t])&&void 0!==r?r:e})}function dk(n){return`${n}`}class nf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new NV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function LV(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[u,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(u)||[];m.push(f),t.set(u,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new nf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(dk(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(dk(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class VV{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function hk(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function fk(n){return"undefined"!=typeof Blob&&n instanceof Blob}function pk(n){return"undefined"!=typeof FormData&&n instanceof FormData}class bw{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function BV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Id),this.context||(this.context=new VV),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new nf,this.urlWithParams=t}serializeBody(){return null===this.body?null:hk(this.body)||fk(this.body)||pk(this.body)||function jV(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof nf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pk(this.body)?null:fk(this.body)?this.body.type||null:hk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,A=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((N,$)=>N.set($,e.setHeaders[$]),v)),e.setParams&&(A=Object.keys(e.setParams).reduce((N,$)=>N.set($,e.setParams[$]),A)),new bw(r,i,u,{params:A,headers:v,context:x,reportProgress:m,responseType:a,withCredentials:f})}}var Ai=(()=>((Ai=Ai||{})[Ai.Sent=0]="Sent",Ai[Ai.UploadProgress=1]="UploadProgress",Ai[Ai.ResponseHeader=2]="ResponseHeader",Ai[Ai.DownloadProgress=3]="DownloadProgress",Ai[Ai.Response=4]="Response",Ai[Ai.User=5]="User",Ai))();class PM{constructor(e,t=200,r="OK"){this.headers=e.headers||new Id,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class OM extends PM{constructor(e={}){super(e),this.type=Ai.ResponseHeader}clone(e={}){return new OM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class aT extends PM{constructor(e={}){super(e),this.type=Ai.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new aT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gk extends PM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function RM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let kM=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof bw)a=t;else{let m,v;m=i.headers instanceof Id?i.headers:new Id(i.headers),i.params&&(v=i.params instanceof nf?i.params:new nf({fromObject:i.params})),a=new bw(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=mt(a).pipe(Jd(m=>this.handler.handle(m)));if(t instanceof bw||"events"===i.observe)return u;const f=u.pipe(Qa(m=>m instanceof aT));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,yt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,yt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,yt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return f.pipe((0,yt.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new nf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,RM(i,r))}post(t,r,i={}){return this.request("POST",t,RM(i,r))}put(t,r,i={}){return this.request("PUT",t,RM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(lk))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class mk{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const _k=new d.OlP("HTTP_INTERCEPTORS");let HV=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const $V=/^\)\]\}',?\n/;let yk=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Un.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach(($,Y)=>i.setRequestHeader($,Y.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const $=t.detectContentTypeHeader();null!==$&&i.setRequestHeader("Content-Type",$)}if(t.responseType){const $=t.responseType.toLowerCase();i.responseType="json"!==$?$:"text"}const a=t.serializeBody();let u=null;const f=()=>{if(null!==u)return u;const $=i.statusText||"OK",Y=new Id(i.getAllResponseHeaders()),Ce=function zV(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new OM({headers:Y,status:i.status,statusText:$,url:Ce}),u},m=()=>{let{headers:$,status:Y,statusText:Ce,url:Ve}=f(),ht=null;204!==Y&&(ht=void 0===i.response?i.responseText:i.response),0===Y&&(Y=ht?200:0);let it=Y>=200&&Y<300;if("json"===t.responseType&&"string"==typeof ht){const Ft=ht;ht=ht.replace($V,"");try{ht=""!==ht?JSON.parse(ht):null}catch(ft){ht=Ft,it&&(it=!1,ht={error:ft,text:ht})}}it?(r.next(new aT({body:ht,headers:$,status:Y,statusText:Ce,url:Ve||void 0})),r.complete()):r.error(new gk({error:ht,headers:$,status:Y,statusText:Ce,url:Ve||void 0}))},v=$=>{const{url:Y}=f(),Ce=new gk({error:$,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Y||void 0});r.error(Ce)};let A=!1;const x=$=>{A||(r.next(f()),A=!0);let Y={type:Ai.DownloadProgress,loaded:$.loaded};$.lengthComputable&&(Y.total=$.total),"text"===t.responseType&&!!i.responseText&&(Y.partialText=i.responseText),r.next(Y)},N=$=>{let Y={type:Ai.UploadProgress,loaded:$.loaded};$.lengthComputable&&(Y.total=$.total),r.next(Y)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",x),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:Ai.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",x),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Sn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const NM=new d.OlP("XSRF_COOKIE_NAME"),LM=new d.OlP("XSRF_HEADER_NAME");class vk{}let GV=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ko(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge),d.LFG(d.Lbi),d.LFG(NM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),FM=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vk),d.LFG(LM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),WV=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(_k,[]);this.chain=r.reduceRight((i,a)=>new mk(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(uk),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),qV=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:FM,useClass:HV}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:NM,useValue:t.cookieName}:[],t.headerName?{provide:LM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[FM,{provide:_k,useExisting:FM,multi:!0},{provide:vk,useClass:GV},{provide:NM,useValue:"XSRF-TOKEN"},{provide:LM,useValue:"X-XSRF-TOKEN"}]}),n})(),ZV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[kM,{provide:lk,useClass:WV},yk,{provide:uk,useExisting:yk}],imports:[[qV.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),KV=(()=>{class n{constructor(t){this.http=t}getResource(t){return this.http.get(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",5)(1,"h1",6),d._uU(2," Ahorcado"),d._UZ(3,"br"),d.TgZ(4,"span",7),d._uU(5,"Reglas del juego"),d.qZA()(),d.TgZ(6,"div",8),d._UZ(7,"div",9),d.TgZ(8,"div",9)(9,"p",10),d._uU(10," Usando una fila de guiones, se representa la palabra a adivinar, dando el n\xfamero de letras, n\xfameros y categor\xeda. Se va adivinando una letra por turno, si la letra no est\xe1 en la palabra, se resta una vida. Si la letra est\xe1 en la palabra, se muestra la letra en la palabra. "),d.qZA()()(),d._UZ(11,"hr"),d.TgZ(12,"button",11),d.NdJ("click",function(){return d.CHM(t),d.oxw().iniciarJuego()}),d._uU(13,"Empezar"),d.qZA()()}}function QV(n,e){if(1&n&&(d.TgZ(0,"div",12)(1,"div",8)(2,"div",13),d._UZ(3,"img",14),d.qZA()(),d._UZ(4,"hr"),d.qZA()),2&n){const t=d.oxw();d.xp6(3),d.MGl("src","./../../../assets/ahorcado/",t.vidas,".png",d.LSH)}}function JV(n,e){if(1&n&&(d.TgZ(0,"button",23),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngClass",t.estado),d.xp6(1),d.hij(" ",t.letra," ")}}function XV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",24),d.NdJ("click",function(){const a=d.CHM(t).$implicit;return d.oxw(2).verificarLetra(a)}),d._uU(1),d.qZA()}if(2&n){const t=e.$implicit;d.Q6J("disabled",t.presionado)("ngClass",t.estado),d.xp6(1),d.hij(" ",t.letra," ")}}function eB(n,e){if(1&n&&(d.TgZ(0,"div",15)(1,"h1",6),d._uU(2," Ahorcado"),d._UZ(3,"br"),d.TgZ(4,"span",7),d._uU(5,"Adivina la palabra!"),d.qZA()(),d.TgZ(6,"div",16)(7,"span",17),d._uU(8),d.qZA()(),d.TgZ(9,"div",18)(10,"div",19),d.ynx(11),d.YNc(12,JV,2,2,"button",20),d.BQk(),d.qZA()(),d.TgZ(13,"div",21),d.YNc(14,XV,2,3,"button",22),d.qZA()()),2&n){const t=d.oxw();d.xp6(8),d.hij("Puntaje: ",5,""),d.xp6(4),d.Q6J("ngForOf",t.botonesRespuesta),d.xp6(2),d.Q6J("ngForOf",t.botones)}}function tB(n,e){1&n&&(d.TgZ(0,"div",15)(1,"div",25),d._UZ(2,"img",26),d.qZA()())}let nB=(()=>{class n{constructor(t){this.jsonGetterService=t,this.botones=[],this.botonesRespuesta=[],this.jsonPath="assets/json/ahorcado.json",this.palabraActualArray=[],this.letras=[],this.palabras=[],this.vidas=6,this.palabraElegida=[],this.palabraElegidaE=[],this.juegoEnCurso=!1,this.len=0,this.gameOver=!1,this.win=!1,this.palabraActual=""}ngOnInit(){console.log("valor de juegoEnCurso: "+this.juegoEnCurso),this.jsonGetterService.getResource(this.jsonPath).subscribe(t=>{this.letras=t.constantes,this.palabras=t.variables})}crearBotones(){this.botones=[];for(let t=0;t<this.letras.length;t++)this.botones.push({letra:this.letras[t],presionado:!1,estado:"boton-no-seleccionado"})}crearBotonesRespuesta(){this.botonesRespuesta=[];for(let t=0;t<this.palabraElegida.length;t++)this.botonesRespuesta.push({letra:this.palabraElegida[t],presionado:!1,estado:"sin-mostrar"})}splitDescription(t){return t.split("\n")}iniciarJuego(){this.juegoEnCurso=!0,console.log("valor de juegoEnCurso: "+this.juegoEnCurso),this.elegirPalabra(),this.crearBotones(),this.crearBotonesRespuesta()}elegirPalabra(){const t=Math.floor(Math.random()*this.palabras.length);this.palabraElegida=this.palabras[t].toUpperCase(),this.palabraElegidaE=this.palabraElegida,console.log("palabra elegida: "+this.palabraElegida);for(let r=0;r<this.palabraElegida.length;r++)this.palabraActualArray[r]=this.palabraElegida[r];return console.log("palabra elegida: "+this.palabraElegida),console.log("palabra actual array: "+this.palabraActualArray),this.palabraActualArray}casosAdivina(t,r,i){t?(console.log("guess is correct"),i.estado="mostrar-letra",r.estado="boton-letra-acertada",r.presionado=!0):this.vidas>1?(this.vidas--,r.estado="boton-letra-no-acertada",r.presionado=!0,console.log("guess is wrong")):(this.gameOver=!0,console.log("game over"))}verificarLetra(t){console.log("-----------VERIFICAR LETRA--------------"),console.log("Letra presionada: "+t.letra);let r=0;for(let i=0;i<this.palabraElegidaE.length;i++)console.log("palabraElegidaE: "+this.palabraElegidaE),console.log("palabraElegidaE - loop: "+this.palabraElegidaE[i]),this.palabraElegidaE[i]==t.letra.toUpperCase()&&(this.botonesRespuesta.forEach(a=>{a.letra==t.letra.toUpperCase()&&(a.estado="mostrar-letra")}),this.botonesRespuesta[i].estado="mostrar-letra",this.casosAdivina(!0,t,this.botonesRespuesta[i]),r++,this.palabraElegidaE=this.palabraElegidaE.replaceAll(t.letra.toLocaleUpperCase(),""));0===r&&this.casosAdivina(!1,t,this.botonesRespuesta[1]),""==this.palabraElegidaE&&console.log("you won")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(KV))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-ahorcado"]],decls:6,vars:4,consts:[[1,"fondo"],[1,"game-box"],["class","side-container",4,"ngIf"],["class","ahorcado-container",4,"ngIf"],["class","game-container",4,"ngIf"],[1,"side-container"],[1,"h1"],[1,"colorDisplay"],[1,"row"],[1,"col"],[2,"margin-top","30px"],[3,"click"],[1,"ahorcado-container"],[1,"ahorcado-imagen"],["width","340px","height","340px",3,"src"],[1,"game-container"],[1,""],[1,"message"],[1,"palabra-box"],[1,"col","palabraContainer"],["class","respuesta",3,"ngClass",4,"ngFor","ngForOf"],[1,"letras-container"],["type","button","class","btn btn-primary botonera",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"respuesta",3,"ngClass"],["type","button",1,"btn","btn-primary","botonera",3,"disabled","ngClass","click"],[1,"ahorcado-gameOver"],["src","./../../../assets/ahorcado/gameOverAhorcado.png","width","340px","height","340px"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d.YNc(2,YV,14,0,"div",2),d.YNc(3,QV,5,1,"div",3),d.YNc(4,eB,15,3,"div",4),d.YNc(5,tB,3,0,"div",4),d.qZA()()),2&t&&(d.xp6(2),d.Q6J("ngIf",!r.juegoEnCurso),d.xp6(1),d.Q6J("ngIf",r.juegoEnCurso),d.xp6(1),d.Q6J("ngIf",r.juegoEnCurso&&!r.gameOver),d.xp6(1),d.Q6J("ngIf",r.juegoEnCurso&&r.gameOver))},directives:[dr,br,mi],styles:[".fondo[_ngcontent-%COMP%]{width:100%;display:flex;background-image:url(/assets/img-home/back-hearts.jpg);height:100%}.game-box[_ngcontent-%COMP%]{margin:5%;width:100%;max-width:1024px;margin-inline:auto}.ahorcado-imagen[_ngcontent-%COMP%]{padding-top:200px}.ahorcado-gameOver[_ngcontent-%COMP%]{padding-top:60px;width:150%}.ahorcado-container[_ngcontent-%COMP%]{margin-top:130px;display:flex;flex-direction:column;justify-content:left;align-items:center;text-align:center;width:20%;height:500px;float:left;background-color:pink}.side-container[_ngcontent-%COMP%]{margin-top:130px;display:flex;flex-direction:column;justify-content:left;align-items:center;text-align:center;width:20%;height:500px;float:left;border-right:1px solid gray;background-color:pink}.game-container[_ngcontent-%COMP%]{margin-top:130px;display:flex;flex-direction:column;justify-content:right;align-items:center;text-align:center;width:80%;height:500px;float:right;background-color:pink}.botonera[_ngcontent-%COMP%]{text-align:center;flex-direction:column;justify-content:center;display:table-column;size:20%;margin-bottom:20px;align-items:center;background-color:#fee6e3;border:2px solid #111;border-radius:8px;box-sizing:border-box;color:#111;cursor:pointer;font-family:Inter,sans-serif;font-size:16px;padding:0 25px;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation}.palabra-box[_ngcontent-%COMP%]{padding-block:2rem 1rem;background-color:#ddbfff;margin-block:1rem}.palabraContainer[_ngcontent-%COMP%]{font-size:400%;text-align:center;align-items:bottom;width:600px;height:-moz-fit-content;height:fit-content;line-height:10px;margin-block:auto 0}.letras-container[_ngcontent-%COMP%]{margin-block:auto 0}.respuesta[_ngcontent-%COMP%]{font-size:0;width:50px;height:40px;margin:6px;border-width:0px 0em 5px 0;border-style:solid dotted inset double;border-color:#f00 #0f0 rgb(0,0,0) #ff0}.boton-letra-acertada[_ngcontent-%COMP%]{background-color:#90ee90}.mostrar-letra[_ngcontent-%COMP%]{font-size:20px;padding-top:10px}.boton-letra-no-acertada[_ngcontent-%COMP%]{background-color:#f08080}"]}),n})();const rB=[{pregunta:"\xbfCuanto es 2+2?",opcion1:"2",opcion2:"4",opcion3:"6",opcion4:"8",opcionCorrecta:"4",tematica:"maths",opcionPiola:"2"},{pregunta:"\xbfA quien pertence este logo?",opcion1:"Batman",opcion2:"Linterna verde",opcion3:"Superman",opcion4:"Spiderman",opcionCorrecta:"Superman",tematica:"Superman",opcionPiola:"3"},{pregunta:"\xbfQue pokemon se muestra en la imagen?",opcion1:"Bulbasaur",opcion2:"Eevee",opcion3:"Charmander",opcion4:"Pikachu",opcionCorrecta:"Pikachu",tematica:"Pikachu",opcionPiola:"4"},{pregunta:"\xbfQue monumento se muestra en la imagen?",opcion1:"El monumento a la bandera",opcion2:"El obelisco",opcion3:"El teatro colon",opcion4:"Mi casa",opcionCorrecta:"El obelisco",tematica:"Obelisco",opcionPiola:"2"},{pregunta:"\xbfComo se llama el principal villano de la saga The legend of Zelda?",opcion1:"Ganon",opcion2:"Arthas",opcion3:"Link",opcion4:"Darius",opcionCorrecta:"Ganon",tematica:"zelda",opcionPiola:"1"}];let iB=(()=>{class n{constructor(t){this.http=t}traerFoto(t){return this.http.get("https://pixabay.com/api/?key=23526716-6552667da117c4ee18df94961&q= "+t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sB=function(){return["/home"]};function oB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"h1",3),d._uU(2," Preguntados"),d._UZ(3,"br"),d.TgZ(4,"span",4),d._uU(5,"Reglas del juego"),d.qZA()(),d.TgZ(6,"div",5)(7,"div",6)(8,"div",7),d._UZ(9,"img",8),d.qZA(),d.TgZ(10,"div",9)(11,"p",10),d._uU(12," Se le van a presentar al jugador una serie de preguntas con sus respectivas opciones. Cada pregunta que se acierte, sumar\xe1 un punto. Cada pregunta que se conteste mal, sumar\xe1 un error. "),d.qZA(),d.TgZ(13,"h1",11),d._uU(14,"Buena suerte!!"),d.qZA()()(),d._UZ(15,"hr"),d.TgZ(16,"div",12)(17,"button",13),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).comenzarJuego()}),d._uU(18," Comenzar Juego "),d.qZA(),d.TgZ(19,"a",14),d._uU(20,"Volver a home"),d.qZA()()()()}2&n&&(d.xp6(19),d.Q6J("routerLink",d.DdM(1,sB)))}function aB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"h1",3),d._uU(2," Preguntados"),d._UZ(3,"br"),d.TgZ(4,"span",4),d._uU(5,"Contest\xe1 las preguntas"),d.qZA()(),d.TgZ(6,"div",15)(7,"span",16),d._uU(8),d.qZA(),d.TgZ(9,"span",16),d._uU(10),d.qZA(),d.TgZ(11,"button",17),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).preguntar()}),d._uU(12," Siguiente pregunta \xbb "),d.qZA()(),d._UZ(13,"hr"),d.TgZ(14,"div",5)(15,"div",6)(16,"div",18)(17,"div",19),d._UZ(18,"img",20),d.TgZ(19,"p",21),d._uU(20),d.qZA()()(),d.TgZ(21,"div",22)(22,"div",23)(23,"button",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return i.elegirRespuesta(i.preguntaActual.opcion1,"1")}),d._uU(24),d.qZA(),d._UZ(25,"br"),d.TgZ(26,"button",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return i.elegirRespuesta(i.preguntaActual.opcion2,"2")}),d._uU(27),d.qZA(),d._UZ(28,"br"),d.TgZ(29,"button",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return i.elegirRespuesta(i.preguntaActual.opcion3,"3")}),d._uU(30),d.qZA(),d._UZ(31,"br"),d.TgZ(32,"button",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return i.elegirRespuesta(i.preguntaActual.opcion4,"4")}),d._uU(33),d.qZA(),d._UZ(34,"br"),d.qZA()()()()()}if(2&n){const t=d.oxw(2);d.xp6(8),d.hij("Puntaje: ",t.puntos,""),d.xp6(2),d.hij("Errores: ",t.errores,""),d.xp6(1),d.Q6J("disabled",t.siguiente),d.xp6(7),d.Q6J("src",t.foto.hits[0].previewURL,d.LSH),d.xp6(2),d.Oqu(t.preguntaActual.pregunta),d.xp6(3),d.Q6J("disabled",t.correcta1)("ngClass",t.correcta1Estilo),d.xp6(1),d.hij(" ",t.preguntaActual.opcion1,""),d.xp6(2),d.Q6J("disabled",t.correcta2)("ngClass",t.correcta2Estilo),d.xp6(1),d.hij(" ",t.preguntaActual.opcion2,""),d.xp6(2),d.Q6J("disabled",t.correcta3)("ngClass",t.correcta3Estilo),d.xp6(1),d.hij(" ",t.preguntaActual.opcion3,""),d.xp6(2),d.Q6J("disabled",t.correcta4)("ngClass",t.correcta4Estilo),d.xp6(1),d.hij(" ",t.preguntaActual.opcion4,"")}}function lB(n,e){if(1&n&&(d.TgZ(0,"div",1),d.YNc(1,oB,21,2,"div",2),d.YNc(2,aB,35,17,"div",2),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",0==t.empezo),d.xp6(1),d.Q6J("ngIf",0!=t.empezo)}}let uB=(()=>{class n{constructor(t){this.fotos=t,this.empezo=!1,this.terminado=!1,this.mensajeFinal="Mensaje final de prueba",this.resultado=!1,this.preguntasArray=[],this.puntos=0,this.errores=0,this.correcta1=!1,this.correcta2=!1,this.correcta3=!1,this.correcta4=!1,this.siguiente=!0,this.correcta1Estilo="",this.correcta2Estilo="",this.correcta3Estilo="",this.correcta4Estilo=""}ngOnInit(){}comenzarJuego(){this.empezo=!0,this.puntos=0,this.errores=0,this.preguntasArray=this.mezclar(rB.slice()),this.preguntar()}reiniciarJuego(){this.terminado=!1}terminarJuego(){this.terminado=!0,this.empezo=!1}mezclar(t){return t.sort(()=>Math.random()-.5),t}preguntar(){var t;this.correcta1=!1,this.correcta2=!1,this.correcta3=!1,this.correcta4=!1,this.siguiente=!0,this.correcta1Estilo="",this.correcta2Estilo="",this.correcta3Estilo="",this.correcta4Estilo="",0!=this.preguntasArray.length?(this.preguntaActual=null===(t=this.preguntasArray)||void 0===t?void 0:t.pop(),this.fotos.traerFoto(this.preguntaActual.tematica).subscribe(r=>{console.info("fotoRetornada",r),this.foto=r})):(this.mensajeFinal="Se terminaron las preguntas!",this.resultado=!0,this.terminarJuego())}elegirRespuesta(t,r){if(t==this.preguntaActual.opcionCorrecta)switch(this.puntos++,r){case"1":this.correcta1Estilo="bien";break;case"2":this.correcta2Estilo="bien";break;case"3":this.correcta3Estilo="bien";break;case"4":this.correcta4Estilo="bien"}else{switch(this.errores++,r){case"1":this.correcta1Estilo="mal";break;case"2":this.correcta2Estilo="mal";break;case"3":this.correcta3Estilo="mal";break;case"4":this.correcta4Estilo="mal"}switch(this.preguntaActual.opcionPiola){case"1":this.correcta1Estilo="bien";break;case"2":this.correcta2Estilo="bien";break;case"3":this.correcta3Estilo="bien";break;case"4":this.correcta4Estilo="bien"}}this.correcta1=!0,this.correcta2=!0,this.correcta3=!0,this.correcta4=!0,this.siguiente=!1}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(iB))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-preguntados"]],decls:1,vars:1,consts:[["class","game-container",4,"ngIf"],[1,"game-container"],[4,"ngIf"],[1,"h1"],[1,"colorDisplay"],[1,"container"],[1,"row"],[1,"col","image-div"],["src","../../assets/img-home/preguntados.png"],[1,"col"],[2,"margin-top","50px"],[1,"display-3"],[2,"text-align","center"],[1,"btn","btn-secondary",2,"text-align","center","margin-top","30px",3,"click"],[1,"btn","btn-secondary",2,"margin-left","10px","margin-top","30px",3,"routerLink"],[1,"stripe",2,"margin-top","20px"],[1,"message"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"col","preguntaContainer"],[2,"margin-top","70px","text-align","center","color","aliceblue"],["alt","",3,"src"],[1,"display-4"],[1,"col","palabraContainer"],[2,"margin-top","60px"],[1,"btn","btn-primary","btn-lg","btn-block",3,"disabled","ngClass","click"]],template:function(t,r){1&t&&d.YNc(0,lB,3,2,"div",0),2&t&&d.Q6J("ngIf",0==r.terminado)},directives:[dr,Jf,mi],styles:[".game-image[_ngcontent-%COMP%]{width:100%;height:100%}.image-div[_ngcontent-%COMP%]{padding-top:40px;text-align:center}.game-container[_ngcontent-%COMP%]{text-align:center;justify-content:center;align-items:center;width:500px;padding:300px 30px 30px;margin-inline:auto}.h1[_ngcontent-%COMP%]{color:#fff;text-align:center;line-height:1.1;background-color:#000;margin:0;font-weight:400;text-transform:uppercase;padding:20px 0}.colorDisplay[_ngcontent-%COMP%]{font-size:130%}.message[_ngcontent-%COMP%]{display:inline-block;width:20%}.stripe[_ngcontent-%COMP%]{background-color:#fff;height:30px;text-align:center;margin-bottom:30px}.bien[_ngcontent-%COMP%]{background-color:#88ec88}.mal[_ngcontent-%COMP%]{background-color:#c56666}.container[_ngcontent-%COMP%]{width:100%;display:inline-block}.preguntaContainer[_ngcontent-%COMP%]{width:60%;background:rgb(218,151,186);padding-bottom:50px;float:left;margin:1.66%;border-radius:15%}.palabraContainer[_ngcontent-%COMP%]{background:#343a40;padding-bottom:50px;float:left;margin:1.66%;border-radius:15%;width:40%}"]}),n})();const cB=function(){return["/home"]};function dB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"h1",2),d._uU(2," Mayor o Menor?"),d._UZ(3,"br"),d.TgZ(4,"span",3),d._uU(5,"Reglas del juego"),d.qZA()(),d.TgZ(6,"div",4)(7,"div",5)(8,"div",6),d._UZ(9,"img",7),d.qZA(),d.TgZ(10,"div",8)(11,"p",9),d._uU(12," El jugador tendr\xe1 una baraja de cartas boca abajo y se le mostrar\xe1 una carta volteada. El objetivo es adivinar si la siguiente carta del mazo va a resultar mayor, menor, o igual a la ultima que se volteo. Si la respuesta es correcta, se sumar\xe1 un punto, si no, se sumar\xe1 un error. El juego acabar\xe1 al acumular 10 errores, contando como derrota, o al voltear todas las cartas, contando como victoria. "),d.qZA(),d.TgZ(13,"h1",10),d._uU(14,"Buena suerte!!"),d.qZA()()(),d._UZ(15,"hr"),d.TgZ(16,"div",11)(17,"button",12),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).comenzarJuego()}),d._uU(18," Comenzar Juego "),d.qZA(),d.TgZ(19,"a",13),d._uU(20,"Volver a home"),d.qZA()()()()}2&n&&(d.xp6(19),d.Q6J("routerLink",d.DdM(1,cB)))}function hB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"h1",2),d._uU(1," Mayor o Menor?"),d._UZ(2,"br"),d.TgZ(3,"span",3),d._uU(4,"Adivina la siguiente carta"),d.qZA()(),d.TgZ(5,"div",14)(6,"span",15),d._uU(7),d.qZA()(),d.TgZ(8,"div",4)(9,"div",5)(10,"div",16),d._UZ(11,"img",7),d.qZA(),d.TgZ(12,"div",17)(13,"div",18)(14,"button",19),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).elegirBoton("menor")}),d._uU(15," Menor "),d.qZA(),d.TgZ(16,"button",20),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).elegirBoton("igual")}),d._uU(17," Igual "),d.qZA(),d.TgZ(18,"button",21),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).elegirBoton("mayor")}),d._uU(19," Mayor "),d.qZA()()(),d.TgZ(20,"div",22),d._UZ(21,"img",23),d.qZA()()()}if(2&n){const t=d.oxw(2);d.xp6(7),d.hij("Puntaje: ",t.puntos,""),d.xp6(14),d.s9C("src",t.imagenUrl,d.LSH)}}function fB(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,dB,21,2,"div",0),d.YNc(2,hB,22,2,"ng-template",null,1,d.W1O),d.qZA()),2&n){const t=d.MAs(3),r=d.oxw();d.xp6(1),d.Q6J("ngIf",0==r.empezo)("ngIfElse",t)}}const pB=[{path:"login",component:TA},{path:"registrar",component:xV},{path:"home",component:DV},{path:"quien-soy",component:AV},{path:"chat",component:kV},{path:"ahorcado",component:nB},{path:"preguntados",component:uB},{path:"mayormenor",component:(()=>{class n{constructor(){this.terminado=!1,this.final="",this.mensajeFinal="",this.resultado=!1,this.cartasUsar=[],this.imagenUrl="",this.listaCartas=[{palo:"oro",numero:1,imagenUrl:"../../../assets/cartas/1.png"},{palo:"oro",numero:2,imagenUrl:"../../../assets/cartas/2.png"},{palo:"oro",numero:3,imagenUrl:"../../../assets/cartas/3.png"},{palo:"oro",numero:4,imagenUrl:"../../../assets/cartas/4.png"},{palo:"oro",numero:5,imagenUrl:"../../../assets/cartas/5.png"},{palo:"oro",numero:6,imagenUrl:"../../../assets/cartas/6.png"},{palo:"oro",numero:7,imagenUrl:"../../../assets/cartas/7.png"},{palo:"oro",numero:8,imagenUrl:"../../../assets/cartas/8.png"}],this.empezo=!1,this.puntos=0,this.erroresCont=0,this.ultimaCarta={palo:"",numero:0,imagenUrl:""},this.proximaCarta={palo:"",numero:0,imagenUrl:""}}ngOnInit(){}comenzarJuego(){this.cartasUsar=this.mezclar(this.listaCartas.slice()),console.info(this.cartasUsar),console.info(this.listaCartas),this.robar(),this.empezo=!0,this.puntos=0,this.erroresCont=0}mezclar(t){return t.sort(()=>Math.random()-.5),t}robar(){var t,r;this.ultimaCarta=null===(t=this.cartasUsar)||void 0===t?void 0:t.pop(),0!=this.cartasUsar.length?(this.proximaCarta=this.cartasUsar[this.cartasUsar.length-1],this.imagenUrl=null===(r=this.ultimaCarta)||void 0===r?void 0:r.imagenUrl):(this.mensajeFinal="Se robaron todas las cartas!",this.resultado=!0,this.terminarJuego())}elegirBoton(t){"mayor"==t?this.proximaCarta.numero>this.ultimaCarta.numero?this.casoAcierto():this.casoError():"igual"==t?this.proximaCarta.numero==this.ultimaCarta.numero?this.casoAcierto():this.casoError():this.proximaCarta.numero<this.ultimaCarta.numero?this.casoAcierto():this.casoError()}casoError(){this.erroresCont++,this.erroresCont>=10?(this.mensajeFinal="Llegaste al maximo de errores permitidos!",this.resultado=!1,this.terminarJuego()):this.robar()}casoAcierto(){this.puntos++,this.robar()}terminarJuego(){this.empezo=!1,this.terminado=!0}reiniciarJuego(){this.terminado=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-mayor-menor"]],decls:1,vars:2,consts:[[4,"ngIf","ngIfElse"],["gameBlock",""],[1,"h1"],[1,"colorDisplay"],[1,"container"],[1,"row"],[1,"col",2,"text-align","center"],["src","../../../assets/cartas/Dorso.png"],[1,"col"],[2,"margin-top","50px"],[1,"display-3"],[2,"text-align","center"],[1,"btn","btn-secondary",2,"text-align","center","margin-top","30px",3,"click"],[1,"btn","btn-secondary",2,"margin-left","10px","margin-top","30px",3,"routerLink"],[1,"stripe"],[1,"message"],[1,"col",2,"text-align","left"],[1,"col",2,"text-align","center","margin-top","150px"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"col",2,"text-align","right"],[3,"src"]],template:function(t,r){1&t&&d.YNc(0,fB,4,2,"div",0),2&t&&d.Q6J("ngIf",0==r.terminado)("ngIfElse",r.final)},directives:[dr,Jf],styles:[".h1[_ngcontent-%COMP%]{color:#fff;text-align:center;line-height:1.1;background-color:#4682b4;margin:0;font-weight:400;text-transform:uppercase;padding:20px 0}.colorDisplay[_ngcontent-%COMP%]{font-size:130%}.palabraContainer[_ngcontent-%COMP%]{font-size:400%;margin-top:150px;text-align:center}.botonera[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.message[_ngcontent-%COMP%]{display:inline-block;width:20%}.boton-letra-acertada[_ngcontent-%COMP%]{background-color:#90ee90}.boton-letra-no-acertada[_ngcontent-%COMP%]{background-color:#f08080}.stripe[_ngcontent-%COMP%]{background-color:#fff;height:30px;text-align:center}"]}),n})()},{path:"reaccion",component:(()=>{class n{constructor(){}ngOnInit(){throw new Error("Method not implemented.")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-reaccion"]],decls:2,vars:0,consts:[[1,"back"],[1,"game-container"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"div",1),d.qZA())},styles:[".game-container[_ngcontent-%COMP%]{font-family:Verdana,Geneva,sans-serif;margin:5%;width:100%;max-width:1024px;margin-inline:auto;padding-top:150px;text-align:center}.back[_ngcontent-%COMP%]{width:100%;display:flex;background-image:url(/assets/img-home/back-hearts.jpg);height:100%}#box[_ngcontent-%COMP%]{width:200px;height:200px;background-color:#00f;display:none;position:relative}"]}),n})()},{path:"",redirectTo:"login",pathMatch:"full"}];let gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[uC.forRoot(pB,{preloadingStrategy:om})],uC]}),n})();function mB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",16)(1,"div",17),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).authSvc.SignOut()}),d._uU(2," CERRAR SESION "),d.qZA()()}}function _B(n,e){1&n&&(d.TgZ(0,"div",16)(1,"div",18),d._uU(2,"INICIAR SESION"),d.qZA()())}function yB(n,e){if(1&n&&(d.TgZ(0,"nav",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),d._uU(5,"SOBRE MI"),d.qZA()(),d.TgZ(6,"div",10)(7,"div",11),d._uU(8," >"),d.TgZ(9,"span"),d._uU(10," BIENVENIDO "),d.qZA()(),d.TgZ(11,"div",12),d._uU(12,"HOME"),d.qZA()(),d.YNc(13,mB,3,0,"div",13),d.YNc(14,_B,3,0,"div",13),d.TgZ(15,"div",14)(16,"div",15),d._uU(17,"CHAT"),d.qZA()()()()()),2&n){const t=d.oxw();d.xp6(13),d.Q6J("ngIf",t.authSvc.userData),d.xp6(1),d.Q6J("ngIf",!t.authSvc.userData)}}function vB(n,e){1&n&&(d.TgZ(0,"nav",5)(1,"div",6)(2,"div",7)(3,"div",10)(4,"div",11)(5,"span"),d._uU(6," BIENVENIDO "),d.qZA()(),d.TgZ(7,"div",19),d._uU(8," INICIAR SESION "),d.qZA()()()()())}const wk='@import url("http://fonts.cdnfonts.com/css/jumborings");';let wB=(()=>{class n{constructor(t,r){this.authSvc=t,this.title="TP-SalaDeJuegos",this.user$=this.authSvc.afAuth.user,this.items=r.collection("chat_msj").valueChanges()}simpleAlert(){nl().fire({title:"Custom width, padding, color, background.",width:600,padding:"3em",color:"#716add",background:"#fff url(./../assets/img-home/powerpuff.jpg)",backdrop:'\n        rgba(0,0,123,0.4)\n        url("/images/nyan-cat.gif")\n        left top\n        no-repeat\n      '})}alertLogin(){nl().fire({title:"Favor iniciar sesi\xf3n",width:400,padding:"3em",color:"#716add",background:"#fff url(./../../assets/img-home/back-hearts.jpg)"}).then(function(){window.location.href="./../../home"})}confirmBox(){nl().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(t=>{t.value?nl().fire("Deleted!","Your imaginary file has been deleted.","success"):t.dismiss===nl().DismissReason.cancel&&nl().fire("Cancelled","Your imaginary file is safe :)","error")})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(oT),d.Y36(ww))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:2,consts:[["href","http://fonts.cdnfonts.com/css/cheri","rel","stylesheet"],["href","http://fonts.cdnfonts.com/css/krishart","rel","stylesheet"],["href","http://fonts.cdnfonts.com/css/jumborings","rel","stylesheet"],["class","",4,"ngIf","ngIfElse"],["elseBlock",""],[1,""],[1,"header-back"],[1,"all"],[1,"lefter"],["routerLink","/quien-soy",1,"text"],[1,"center"],[1,"explainer"],["routerLink","/home",1,"text"],["class","right",4,"ngIf"],[1,"righter"],["routerLink","/chat",1,"text"],[1,"right"],["routerLink","/login",1,"text",3,"click"],["routerLink","/login",1,"text"],["routerLink","/login",1,"text",2,"left","40px"]],template:function(t,r){if(1&t&&(d._UZ(0,"link",0)(1,"link",1)(2,"link",2),d.YNc(3,yB,18,2,"nav",3),d.YNc(4,vB,9,0,"ng-template",null,4,d.W1O),d._UZ(6,"router-outlet")),2&t){const i=d.MAs(5);d.xp6(3),d.Q6J("ngIf",r.authSvc.userData)("ngIfElse",i)}},directives:[dr,Bl,Uu],styles:[".body[_ngcontent-%COMP%]{margin:0 0 -10px}.header-back[_ngcontent-%COMP%]{background:url(powerpuff.fce52c406319d992.jpg) repeat center center fixed;background-blend-mode:darken;height:15%;width:100%;position:fixed;top:0;left:0;z-index:1}.all[_ngcontent-%COMP%]{display:flex;perspective:10px;transform:perspective(300px) rotateX(20deg);will-change:perspective;perspective-origin:center center;transition:all 1.3s ease-out;justify-content:center!important;transform-style:preserve-3d}.all[_ngcontent-%COMP%]{margin-top:10px;perspective:1000px;transition:all 1.3s ease-in;transform:perspective(10000px) rotateX(0)}.all[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{opacity:1}.all[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{opacity:1;transition-delay:0s}.all[_ngcontent-%COMP%]   .explainer[_ngcontent-%COMP%]{opacity:0}.left[_ngcontent-%COMP%], .center[_ngcontent-%COMP%], .right[_ngcontent-%COMP%], .lefter[_ngcontent-%COMP%], .righter[_ngcontent-%COMP%]{width:200px;height:100px;transform-style:preserve-3d;border-radius:10px;border:1px solid rgba(254,89,144,0);box-shadow:0 0 20px 5px #cb76ff;opacity:0;transition:all .3s ease;transition-delay:1s;position:relative;background-position:center center;background-size:contain;background-repeat:no-repeat;background-color:#bc9efc;cursor:pointer;background-blend-mode:color-burn}.left[_ngcontent-%COMP%]:hover, .center[_ngcontent-%COMP%]:hover, .right[_ngcontent-%COMP%]:hover, .lefter[_ngcontent-%COMP%]:hover, .righter[_ngcontent-%COMP%]:hover{box-shadow:0 0 30px 10px #ff646499;background-color:#ccf}.text[_ngcontent-%COMP%]{transform:translateY(30px);opacity:0;transition:all .3s ease;bottom:0;position:absolute;will-change:transform;color:#000;text-shadow:0 0 15px rgba(100,100,255,.6);text-align:center;justify-content:center;align-items:center;left:20%}.lefter[_ngcontent-%COMP%]{transform:translate(-70px) translateZ(-50px) rotateY(-10deg);background-image:url(https://cdn4.iconfinder.com/data/icons/aami-web-internet/64/aami14-74-512.png)}.left[_ngcontent-%COMP%]{transform:translate(-40px) translateZ(-25px) rotateY(-5deg);background-image:url(https://cdn3.iconfinder.com/data/icons/other-icons/48/search-512.png)}.center[_ngcontent-%COMP%]{opacity:1;background-size:auto 100%;background-image:url(https://cdn2.iconfinder.com/data/icons/kitchen-appliances-computers-and-electronics/32/Appliances-09-512.png)}.right[_ngcontent-%COMP%]{transform:translate(40px) translateZ(-25px) rotateY(5deg);background-size:auto 80%;background-image:url(https://cdn4.iconfinder.com/data/icons/user-experience-1/60/ux-outline-029-secure-log-in-512.png)}.righter[_ngcontent-%COMP%]{transform:translate(70px) translateZ(-50px) rotateY(10deg);background-image:url(https://cdn2.iconfinder.com/data/icons/lined-social-networks/48/a-07-512.png)}.explainer[_ngcontent-%COMP%]{font-family:JumboRings,sans-serif;font-weight:300;font-size:4rem;color:#000;transition:all .6s ease;margin-left:-180px;width:600px;height:90%;margin-top:10px;background-color:#303050;background-image:radial-gradient(circle at center top,#f7dbf4,#b47cf7);border-radius:10px;text-shadow:0 0 10px rgba(62,17,107,.8);display:flex;justify-content:center;align-items:center}.ref[_ngcontent-%COMP%]{background-color:#000;background-image:linear-gradient(to bottom,#d80,#c00);border-radius:3px;padding:7px 10px;position:absolute;font-size:16px;bottom:10px;right:10px;color:#fff;text-decoration:none;text-shadow:0 0 3px rgba(0,0,0,.4)}.ref[_ngcontent-%COMP%]:first-letter{font-size:12px}",wk,wk]}),n})();const bk="firebasestorage.googleapis.com",Ck="storageBucket";class ti extends F.ZR{constructor(e,t){super(UM(e),`Firebase Storage: ${t} (${UM(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ti.prototype)}_codeEquals(e){return UM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function UM(n){return"storage/"+n}function VM(){return new ti("unknown","An unknown error occurred, please check the error payload for server response.")}function Ek(){return new ti("canceled","User canceled the upload/download.")}function Ik(){return new ti("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ry(n){return new ti("invalid-argument",n)}function Tk(){return new ti("app-deleted","The Firebase app was deleted.")}function Dk(n){return new ti("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cw(n,e){return new ti("invalid-format","String does not match format '"+n+"': "+e)}function Ew(n){throw new ti("internal-error","Internal error: "+n)}class Us{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Us.makeFromUrl(e,t)}catch(i){return new Us(e,"")}if(""===r.path)return r;throw function PB(n){return new ti("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ft){ft.path_=decodeURIComponent(ft.path)}const x=t.replace(/[.]/g,"\\."),Ft=[{regex:f,indices:{bucket:1,path:3},postModify:function a(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===bk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ft=0;ft<Ft.length;ft++){const Zt=Ft[ft],Kt=Zt.regex.exec(e);if(Kt){let ji=Kt[Zt.indices.path];ji||(ji=""),r=new Us(Kt[Zt.indices.bucket],ji),Zt.postModify(r);break}}if(null==r)throw function MB(n){return new ti("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class NB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function lT(n){return"string"==typeof n||n instanceof String}function Ak(n){return BM()&&n instanceof Blob}function BM(){return"undefined"!=typeof Blob}function jM(n,e,t,r){if(r<e)throw ry(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ry(`Invalid value for '${n}'. Expected ${t} or less.`)}function Td(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Sk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var rf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(rf||(rf={})),rf))();class jB{constructor(e,t,r,i,a,u,f,m,v,A,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=A,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,$)=>{this.resolve_=N,this.reject_=$,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function UB(n){return void 0!==n}(m)?a():a(m)}catch(m){u(m)}else if(null!==f){const m=VM();m.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,m):m)}else u(i.canceled?this.appDelete_?Tk():Ek():function xB(){return new ti("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new uT(!1,null,!0)):this.backoffId_=function LB(n,e,t){let r=1,i=null,a=null,u=!1,f=0;function m(){return 2===f}let v=!1;function A(...Ve){v||(v=!0,e.apply(null,Ve))}function x(Ve){i=setTimeout(()=>{i=null,n($,m())},Ve)}function N(){a&&clearTimeout(a)}function $(Ve,...ht){if(v)return void N();if(Ve)return N(),void A.call(null,Ve,...ht);if(m()||u)return N(),void A.call(null,Ve,...ht);let Ft;r<64&&(r*=2),1===f?(f=2,Ft=0):Ft=1e3*(r+Math.random()),x(Ft)}let Y=!1;function Ce(Ve){Y||(Y=!0,N(),!v&&(null!==i?(Ve||(f=2),clearTimeout(i),x(0)):Ve||(f=1)))}return x(0),a=setTimeout(()=>{u=!0,Ce(!0)},t),Ce}((r,i)=>{if(i)return void r(!1,new uT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const f=a.getErrorCode()===rf.NO_ERROR,m=a.getStatus();if(!f||this.isRetryStatusCode_(m)){const A=a.getErrorCode()===rf.ABORT;return void r(!1,new uT(!1,null,A))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new uT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function FB(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class uT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function ZB(...n){const e=function qB(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(BM())return new Blob(n);throw new ti("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Da={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HM{constructor(e,t){this.data=e,this.contentType=t||null}}function $M(n,e){switch(n){case Da.RAW:return new HM(xk(e));case Da.BASE64:case Da.BASE64URL:return new HM(Mk(n,e));case Da.DATA_URL:return new HM(function JB(n){const e=new Pk(n);return e.base64?Mk(Da.BASE64,e.rest):function QB(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Cw(Da.DATA_URL,"Malformed data URL.")}return xk(e)}(e.rest)}(e),function XB(n){return new Pk(n).contentType}(e))}throw VM()}function xk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Mk(n,e){switch(n){case Da.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Cw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Da.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Cw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function YB(n){return atob(n)}(e)}catch(i){throw Cw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Pk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Cw(Da.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function ej(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class cc{constructor(e,t){let r=0,i="";Ak(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ak(this.data_)){const i=function KB(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new cc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new cc(r,!0)}}static getBlob(...e){if(BM()){const t=e.map(r=>r instanceof cc?r.data_:r);return new cc(ZB.apply(null,t))}{const t=e.map(u=>lT(u)?$M(Da.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)i[a++]=u[f]}),new cc(i,!0)}}uploadData(){return this.data_}}function zM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function BB(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Ok(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function rj(n,e){return e}class ho{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||rj}}let cT=null;function Iw(){if(cT)return cT;const n=[];n.push(new ho("bucket")),n.push(new ho("generation")),n.push(new ho("metageneration")),n.push(new ho("name","fullPath",!0));const t=new ho("name");t.xform=function e(a,u){return function ij(n){return!lT(n)||n.length<2?n:Ok(n)}(u)},n.push(t);const i=new ho("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new ho("timeCreated")),n.push(new ho("updated")),n.push(new ho("md5Hash",null,!0)),n.push(new ho("cacheControl",null,!0)),n.push(new ho("contentDisposition",null,!0)),n.push(new ho("contentEncoding",null,!0)),n.push(new ho("contentLanguage",null,!0)),n.push(new ho("contentType",null,!0)),n.push(new ho("metadata","customMetadata",!0)),cT=n,cT}function Rk(n,e,t){const r=zM(e);return null===r?null:function oj(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function sj(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Us(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function GM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const kk="prefixes";class dc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hc(n){if(!n)throw VM()}function dT(n,e){return function t(r,i){const a=Rk(n,i,e);return hc(null!==a),a}}function iy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function AB(){return new ti("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function DB(){return new ti("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function TB(n){return new ti("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function SB(n){return new ti("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Tw(n){const e=iy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function IB(n){return new ti("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Lk(n,e,t){const i=Td(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new dc(i,"GET",dT(n,t),u);return f.errorHandler=Tw(e),f}function hj(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=Td(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,A=new dc(f,"GET",function cj(n,e){return function t(r,i){const a=function uj(n,e,t){const r=zM(t);return null===r?null:function lj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[kk])for(const i of t[kk]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new Us(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Us(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return hc(null!==a),a}}(n,e.bucket),v);return A.urlParams=a,A.errorHandler=iy(e),A}function Uk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function mj(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class hT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function WM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){hc(!1)}return hc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const wj={STATE_CHANGED:"state_changed"},fo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qM(n){switch(n){case"running":case"pausing":case"canceling":return fo.RUNNING;case"paused":return fo.PAUSED;case"success":return fo.SUCCESS;case"canceled":return fo.CANCELED;default:return fo.ERROR}}class bj{constructor(e,t,r){if(function VB(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function sy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Ej extends class Cj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ew("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ew("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ew("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Ew("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ew("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Yl(){return new Ej}class Hk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Iw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function _j(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=Uk(e,r,i),f={name:u.fullPath},m=Td(a,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=GM(u,t),Y=new dc(m,"POST",function $(Ce){let Ve;WM(Ce);try{Ve=Ce.getResponseHeader("X-Goog-Upload-URL")}catch(ht){hc(!1)}return hc(lT(Ve)),Ve},n.maxUploadRetryTime);return Y.urlParams=f,Y.headers=A,Y.body=x,Y.errorHandler=iy(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Yl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function yj(n,e,t,r){const m=new dc(t,"POST",function a(v){const A=WM(v,["active","final"]);let x=null;try{x=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){hc(!1)}x||hc(!1);const N=Number(x);return hc(!isNaN(N)),new hT(N,r.size(),"final"===A)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=iy(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Yl,t,r);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new hT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function vj(n,e,t,r,i,a,u,f){const m=new hT(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function RB(){return new ti("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let A=v;i>0&&(A=Math.min(A,i));const x=m.current,Y={"X-Goog-Upload-Command":A===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},Ce=r.slice(x,x+A);if(null===Ce)throw Ik();const Ft=new dc(t,"POST",function Ve(ft,Zt){const Kt=WM(ft,["active","final"]),Zo=m.current+A,ji=r.size();let tu;return tu="final"===Kt?dT(e,a)(ft,Zt):null,new hT(Zo,ji,"final"===Kt,tu)},e.maxUploadRetryTime);return Ft.headers=Y,Ft.body=Ce.uploadData(),Ft.progressCallback=f||null,Ft.errorHandler=iy(n),Ft}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(u,Yl,i,a);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Lk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Yl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Vk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let Ft="";for(let ft=0;ft<2;ft++)Ft+=Math.random().toString().slice(2);return Ft}();u["Content-Type"]="multipart/related; boundary="+m;const v=Uk(e,r,i),A=GM(v,t),$=cc.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===$)throw Ik();const Y={name:v.fullPath},Ce=Td(a,n.host,n._protocol),ht=n.maxUploadRetryTime,it=new dc(Ce,"POST",dT(n,t),ht);return it.urlParams=Y,it.headers=u,it.body=$.uploadData(),it.errorHandler=iy(e),it}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Yl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ek(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=qM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new bj(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(qM(this._state)){case fo.SUCCESS:sy(this._resolve.bind(null,this.snapshot))();break;case fo.CANCELED:case fo.ERROR:sy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qM(this._state)){case fo.RUNNING:case fo.PAUSED:e.next&&sy(e.next.bind(e,this.snapshot))();break;case fo.SUCCESS:e.complete&&sy(e.complete.bind(e))();break;default:e.error&&sy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class lg{constructor(e,t){this._service=e,this._location=t instanceof Us?t:Us.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new lg(e,t)}get root(){const e=new Us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ok(this._location.path)}get storage(){return this._service}get parent(){const e=function tj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Us(this._location.bucket,e);return new lg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Dk(e)}}function zk(n,e,t){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,be.Z)(function*(n,e,t){const i=yield Gk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield zk(n,e,i.nextPageToken))}),ZM.apply(this,arguments)}function Gk(n,e){null!=e&&"number"==typeof e.maxResults&&jM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=hj(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Yl)}function Nj(n){n._throwIfRoot("getDownloadURL");const e=function fj(n,e,t){const i=Td(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new dc(i,"GET",function dj(n,e){return function t(r,i){const a=Rk(n,i,e);return hc(null!==a),function aj(n,e,t,r){const i=zM(e);if(null===i||!lT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(v=>{const x=n.fullPath;return Td("/b/"+u(n.bucket)+"/o/"+u(x),t,r)+Sk({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return f.errorHandler=Tw(e),f}(n.storage,n._location,Iw());return n.storage.makeRequestWithTokens(e,Yl).then(t=>{if(null===t)throw function kB(){return new ti("no-download-url","The given file does not have any download URLs.")}();return t})}function Wk(n,e){const t=function nj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Us(n._location.bucket,t);return new lg(n.storage,r)}function qk(n,e){if(n instanceof KM){const t=n;if(null==t._bucket)throw function OB(){return new ti("no-default-bucket","No default bucket found. Did you set the '"+Ck+"' property when initializing the app?")}();const r=new lg(t,t._bucket);return null!=e?qk(r,e):r}return void 0!==e?Wk(n,e):n}function Vj(n,e){if(e&&function Fj(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof KM)return function Uj(n,e){return new lg(n,e)}(n,e);throw ry("To use ref(service, url), the first argument must be a Storage instance.")}return qk(n,e)}function Zk(n,e){const t=null==e?void 0:e[Ck];return null==t?null:Us.makeFromBucketSpec(t,n)}class KM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=bk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Us.makeFromBucketSpec(i,this._host):Zk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Us.makeFromBucketSpec(this._url,e):Zk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new NB(Tk());{const a=function WB(n,e,t,r,i,a){const u=Sk(n.urlParams),f=n.url+u,m=Object.assign({},n.headers);return function zB(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function HB(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function $B(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function GB(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new jB(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Kk="@firebase/storage";function Jk(n,e){return Vj(n=(0,F.m9)(n),e)}function Yj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new KM(t,r,i,e,ci.SDK_VERSION)}!function Qj(){(0,ci._registerComponent)(new wa.wA("storage",Yj,"PUBLIC").setMultipleInstances(!0)),(0,ci.registerVersion)(Kk,"0.9.4",""),(0,ci.registerVersion)(Kk,"0.9.4","esm2017")}();class fT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Xk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new fT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new fT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new fT(u,this,this._ref)):{next:t.next?u=>t.next(new fT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class eN{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Dd(e,this._service))}get items(){return this._delegate.items.map(e=>new Dd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Dd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Zj(n,e){return Wk(n,e)}(this._delegate,e);return new Dd(t,this.storage)}get root(){return new Dd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Dd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Xk(function jj(n,e,t){return function Mj(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Hk(n,new cc(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Da.RAW,r){this._throwIfRoot("putString");const i=$M(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Xk(new Hk(this._delegate,new cc(i.data,!0),a),this)}listAll(){return function Gj(n){return function Oj(n){const e={prefixes:[],items:[]};return zk(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new eN(e,this.storage))}list(e){return function zj(n,e){return Gk(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new eN(t,this.storage))}getMetadata(){return function Hj(n){return function Rj(n){n._throwIfRoot("getMetadata");const e=Lk(n.storage,n._location,Iw());return n.storage.makeRequestWithTokens(e,Yl)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function $j(n,e){return function kj(n,e){n._throwIfRoot("updateMetadata");const t=function pj(n,e,t,r){const a=Td(e.fullServerUrl(),n.host,n._protocol),f=GM(t,r),v=n.maxOperationRetryTime,A=new dc(a,"PATCH",dT(n,r),v);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=f,A.errorHandler=Tw(e),A}(n.storage,n._location,e,Iw());return n.storage.makeRequestWithTokens(t,Yl)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Wj(n){return Nj(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function qj(n){return function Lj(n){n._throwIfRoot("deleteObject");const e=function gj(n,e){const r=Td(e.fullServerUrl(),n.host,n._protocol),f=new dc(r,"DELETE",function u(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Tw(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Yl)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Dk(e)}}class tN{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(nN(e))throw ry("ref() expected a child path but got a URL, use refFromURL instead.");return new Dd(Jk(this._delegate,e),this)}refFromURL(e){if(!nN(e))throw ry("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Us.makeFromUrl(e,this._delegate.host)}catch(t){throw ry("refFromUrl() expected a valid full URL but got an invalid one.")}return new Dd(Jk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Kj(n,e,t,r={}){!function Bj(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function nN(n){return/^[A-Za-z]+:\/\//.test(n)}function tH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new tN(t,r)}function rN(n){const e=function rH(n){return new Un.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function bB(n,e=Lv.z){return(0,li.e)((t,r)=>{let i=null,a=null,u=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=u+n,A=e.now();if(A<v)return i=this.schedule(void 0,v-A),void r.add(i);f()}t.subscribe((0,Gt.x)(r,v=>{a=v,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function pT(n){return{getDownloadURL:()=>mt(void 0).pipe(nn.fc,vi(()=>n.getDownloadURL()),nn.iC),getMetadata:()=>mt(void 0).pipe(nn.fc,vi(()=>n.getMetadata()),nn.iC),delete:()=>(0,Nn.D)(n.delete()),child:e=>pT(n.child(e)),updateMetadata:e=>(0,Nn.D)(n.updateMetadata(e)),put:(e,t)=>rN(n.put(e,t)),putString:(e,t,r)=>rN(n.putString(e,t,r)),list:e=>(0,Nn.D)(n.list(e)),listAll:()=>(0,Nn.D)(n.listAll())}}!function nH(n){const e={TaskState:fo,TaskEvent:wj,StringFormat:Da,Storage:tN,Reference:Dd};n.INTERNAL.registerComponent(new wa.wA("storage-compat",tH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(zu.Z);const iH=new d.OlP("angularfire2.storageBucket"),sH=new d.OlP("angularfire2.storage.maxUploadRetryTime"),oH=new d.OlP("angularfire2.storage.maxOperationRetryTime"),aH=new d.OlP("angularfire2.storage.use-emulator");let lH=(()=>{class n{constructor(t,r,i,a,u,f,m,v,A,x){const N=(0,ui.on)(t,u,r);this.storage=(0,ui.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const $=u.runOutsideAngular(()=>N.storage(i||void 0)),Y=A;return Y&&$.useEmulator(...Y),m&&$.setMaxUploadRetryTime(m),v&&$.setMaxOperationRetryTime(v),$},[m,v])}ref(t){return pT(this.storage.ref(t))}refFromURL(t){return pT(this.storage.refFromURL(t))}upload(t,r,i){return pT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(iH,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nn.HU),d.LFG(sH,8),d.LFG(oH,8),d.LFG(aH,8),d.LFG(td,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),cH=(()=>{class n{constructor(){op.Z.registerVersion("angularfire",nn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[lH],imports:[uH]}),n})();var dH=U(5032);const iN="@firebase/database";let YM="";function oN(n){YM=n}class pH{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class gH{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const aN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pH(e)}}catch(e){}return new gH},ug=aN("localStorage"),QM=aN("sessionStorage"),oy=new ba.Yd("@firebase/database"),lN=function(){let n=1;return function(){return n++}}(),uN=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},Dw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Dw.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let cg=null,cN=!0;const dN=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(oy.logLevel=ba.in.VERBOSE,cg=oy.log.bind(oy),e&&QM.set("logging_enabled",!0)):"function"==typeof n?cg=n:(cg=null,QM.remove("logging_enabled"))},ss=function(...n){if(!0===cN&&(cN=!1,null===cg&&!0===QM.get("logging_enabled")&&dN(!0)),cg){const e=Dw.apply(null,n);cg(e)}},Aw=function(n){return function(...e){ss(n,...e)}},JM=function(...n){const e="FIREBASE INTERNAL ERROR: "+Dw(...n);oy.error(e)},fc=function(...n){const e=`FIREBASE FATAL ERROR: ${Dw(...n)}`;throw oy.error(e),new Error(e)},po=function(...n){const e="FIREBASE WARNING: "+Dw(...n);oy.warn(e)},gT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ad="[MIN_NAME]",pc="[MAX_NAME]",dg=function(n,e){if(n===e)return 0;if(n===Ad||e===pc)return-1;if(e===Ad||n===pc)return 1;{const t=mT(n),r=mT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},yH=function(n,e){return n===e?0:n<e?-1:1},Sw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},XM=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=XM(n[e[r]]);return t+="}",t},hN=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function os(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const fN=function(n){(0,F.hu)(!gT(n),"Invalid JSON number");const r=1023;let i,a,u,f,m;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const A=v.join("");let x="";for(m=0;m<64;m+=8){let N=parseInt(A.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),x+=N}return x.toLowerCase()},CH=new RegExp("^-?(0*)\\d{1,10}$"),pN=-2147483648,eP=2147483647,mT=function(n){if(CH.test(n)){const e=Number(n);if(e>=pN&&e<=eP)return e}return null},ay=function(n){try{n()}catch(e){setTimeout(()=>{throw po("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class IH{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){po(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class TH{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ss("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',po(e)}}let Mw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const vN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bN="websocket",CN="long_polling";class nP{constructor(e,t,r,i,a=!1,u="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ug.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ug.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function EN(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===bN)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==CN)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function AH(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return os(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class SH{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const rP={},iP={};function sP(n){const e=n.toString();return rP[e]||(rP[e]=new SH),rP[e]}class MH{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ay(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ly{constructor(e,t,r,i,a,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Aw(e),this.stats_=sP(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),EN(t,CN,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new MH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oP((...a)=>{const[u,f,m,v,A]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&vN.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ly.forceAllow_=!0}static forceDisallow(){ly.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!ly.forceAllow_&&(ly.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=hN(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=lN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oP.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){ss("frame writing exception"),f.stack&&ss(f.stack),ss(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ss("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ss("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Pw=null;"undefined"!=typeof MozWebSocket?Pw=MozWebSocket:"undefined"!=typeof WebSocket&&(Pw=WebSocket);let Ow=(()=>{class n{constructor(t,r,i,a,u,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Aw(this.connId),this.stats_=sP(r),this.connURL=n.connectionURL_(r,f,m,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const u={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&vN.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),a&&(u.ac=a),EN(t,bN,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ug.set("previous_websocket_failure",!0);try{if((0,F.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${YM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(a.proxy={origin:f}),this.mySock=new Pw(this.connURL,[],a)}else this.mySock=new Pw(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Pw&&!n.forceDisallow_}static previouslyFailed(){return ug.isInMemoryStorage||!0===ug.get("previous_websocket_failure")}markConnectionHealthy(){ug.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=hN(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class aP{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ly,Ow]}initTransports_(e){const t=Ow&&Ow.isAvailable();let r=t&&!Ow.previouslyFailed();if(e.webSocketOnly&&(t||po("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ow];else{const i=this.transports_=[];for(const a of aP.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class LN{constructor(e,t,r,i,a,u,f,m,v,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Aw("c:"+this.id+":"),this.transportManager_=new aP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Sw("t",e),r=Sw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Sw("t",e),r=Sw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Sw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?JM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):JM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&po("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ug.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class FN{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class UN{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class yT extends UN{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yT}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Zn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bn(){return new Zn("")}function wn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function sf(n){return n.pieces_.length-n.pieceNum_}function lr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Zn(n.pieces_,e)}function uP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Rw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function jN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Zn(e,0)}function Rr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Zn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Zn(t,0)}function bn(n){return n.pieceNum_>=n.pieces_.length}function go(n,e){const t=wn(n),r=wn(e);if(null===t)return e;if(t===r)return go(lr(n),lr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function JH(n,e){const t=Rw(n,0),r=Rw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=dg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function cP(n,e){if(sf(n)!==sf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function fl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(sf(n)>sf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class XH{constructor(e,t){this.errorPrefix_=t,this.parts_=Rw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);HN(this)}}function HN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+hg(n))}function hg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class dP extends UN{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new dP}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kw=1e3;let wT,fg=(()=>{class n extends FN{constructor(t,r,i,a,u,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Aw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&yT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,F.Pz)(u)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new F.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[u];void 0===f||a!==f||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const v=m.d,A=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==A&&this.removeListen_(i,a),t.onComplete&&t.onComplete(A,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();po(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,f=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):JM("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const A=function(){v?v.close():(m=!0,a())};t.realtime_={close:A,sendRequest:function($){(0,F.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest($)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,Y]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?ss("getToken() completed but was canceled"):(ss("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=Y&&Y.token,v=new LN(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ce=>{po(Ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch($){t.log_("Failed to get token: "+$),m||(t.repoInfo_.nodeAdmin&&po($),A())}}})()}interrupt(t){ss("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ss("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>XM(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Zn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ss("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ss("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+YM.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=yT.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Cn(e,t)}}class vT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Cn(Ad,e),i=new Cn(Ad,t);return 0!==this.compare(r,i)}minPost(){return Cn.MIN}}class GN extends vT{static get __EMPTY_NODE(){return wT}static set __EMPTY_NODE(e){wT=e}compare(e,t){return dg(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Cn.MIN}maxPost(){return new Cn(pc,wT)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Cn(e,wT)}toString(){return".key"}}const gc=new GN;class bT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let fP,Ql=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Wo.EMPTY_NODE,this.right=null!=u?u:Wo.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Wo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Wo{constructor(e,t=Wo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Wo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ql.BLACK,null,null))}remove(e){return new Wo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ql.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new bT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new bT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new bT(this.root_,null,this.comparator_,!0,e)}}function l3(n,e){return dg(n.name,e.name)}function hP(n,e){return dg(n,e)}Wo.EMPTY_NODE=new class a3{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ql(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const WN=function(n){return"number"==typeof n?"number:"+fN(n):"string:"+n},qN=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===fP||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===fP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ZN,KN,YN,uy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qN(this.priorityNode_)}static set __childrenNodeConstructor(t){ZN=t}static get __childrenNodeConstructor(){return ZN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return bn(t)?this:".priority"===wn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=wn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===sf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(lr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+WN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?fN(this.value_):this.value_,this.lazyHash_=uN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(a>=0,"Unknown leaf type: "+r),(0,F.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _r=new class h3 extends vT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?dg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Cn.MIN}maxPost(){return new Cn(pc,new uy("[PRIORITY-POST]",YN))}makePost(e,t){const r=KN(e);return new Cn(t,new uy("[PRIORITY-POST]",r))}toString(){return".priority"}},f3=Math.log(2);class p3{constructor(e){this.count=parseInt(Math.log(e+1)/f3,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const CT=function(n,e,t,r){n.sort(e);const i=function(m,v){const A=v-m;let x,N;if(0===A)return null;if(1===A)return x=n[m],N=t?t(x):x,new Ql(N,x.node,Ql.BLACK,null,null);{const $=parseInt(A/2,10)+m,Y=i(m,$),Ce=i($+1,v);return x=n[$],N=t?t(x):x,new Ql(N,x.node,Ql.BLACK,Y,Ce)}},f=function(m){let v=null,A=null,x=n.length;const N=function(Y,Ce){const Ve=x-Y,ht=x;x-=Y;const it=i(Ve+1,ht),Ft=n[Ve],ft=t?t(Ft):Ft;$(new Ql(ft,Ft.node,Ce,null,it))},$=function(Y){v?(v.left=Y,v=Y):(A=Y,v=Y)};for(let Y=0;Y<m.count;++Y){const Ce=m.nextBitIsOne(),Ve=Math.pow(2,m.count-(Y+1));Ce?N(Ve,Ql.BLACK):(N(Ve,Ql.BLACK),N(Ve,Ql.RED))}return A}(new p3(n.length));return new Wo(r||e,f)};let pP;const cy={};class Sd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(cy&&_r,"ChildrenNode.ts has not been loaded"),pP=pP||new Sd({".priority":cy},{".priority":_r}),pP}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wo?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==gc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Cn.Wrap);let f,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();f=i?CT(r,e.getCompare()):cy;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const A=Object.assign({},this.indexes_);return A[m]=f,new Sd(A,v)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,a)=>{const u=(0,F.DV)(this.indexSet_,a);if((0,F.hu)(u,"Missing index implementation for "+a),i===cy){if(u.isDefinedOn(e.node)){const f=[],m=t.getIterator(Cn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),CT(f,u.getCompare())}return cy}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new Cn(e.name,f))),m.insert(e,e.node)}});return new Sd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===cy)return i;{const a=t.get(e.name);return a?i.remove(new Cn(e.name,a)):i}});return new Sd(r,this.indexSet_)}}let Nw,on=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&qN(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Nw||(Nw=new n(new Wo(hP),null,Sd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Nw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Nw:r}}getChild(t){const r=wn(t);return null===r?this:this.getImmediateChild(r).getChild(lr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Cn(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Nw:this.priorityNode_;return new n(a,f,u)}}updateChild(t,r){const i=wn(t);if(null===i)return r;{(0,F.hu)(".priority"!==wn(t)||1===sf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(lr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(_r,(f,m)=>{r[f]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):u=!1}),!t&&u&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+WN(this.getPriority().val())+":"),this.forEachChild(_r,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":uN(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new Cn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Cn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Cn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Lw?-1:0}withIndex(t){if(t===gc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===gc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(_r),a=r.getIterator(_r);let u=i.getNext(),f=a.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=a.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===gc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Lw=new class g3 extends on{constructor(){super(new Wo(hP),on.EMPTY_NODE,Sd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return on.EMPTY_NODE}isEmpty(){return!1}};function Gr(n,e=null){if(null===n)return on.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new uy(n,Gr(e));if(n instanceof Array){let t=on.EMPTY_NODE;return os(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const a=Gr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Gr(e))}{const t=[];let r=!1;if(os(n,(u,f)=>{if("."!==u.substring(0,1)){const m=Gr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Cn(u,m)))}}),0===t.length)return on.EMPTY_NODE;const a=CT(t,l3,u=>u.name,hP);if(r){const u=CT(t,_r.getCompare());return new on(a,Gr(e),new Sd({".priority":u},{".priority":_r}))}return new on(a,Gr(e),Sd.Default)}}Object.defineProperties(Cn,{MIN:{value:new Cn(Ad,on.EMPTY_NODE)},MAX:{value:new Cn(pc,Lw)}}),GN.__EMPTY_NODE=on.EMPTY_NODE,uy.__childrenNodeConstructor=on,function u3(n){fP=n}(Lw),function d3(n){YN=n}(Lw),function c3(n){KN=n}(Gr);class gP extends vT{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!bn(e)&&".priority"!==wn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?dg(e.name,t.name):a}makePost(e,t){const r=Gr(e),i=on.EMPTY_NODE.updateChild(this.indexPath_,r);return new Cn(t,i)}maxPost(){const e=on.EMPTY_NODE.updateChild(this.indexPath_,Lw);return new Cn(pc,e)}toString(){return Rw(this.indexPath_,0).join("/")}}const mP=new class _3 extends vT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?dg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Cn.MIN}maxPost(){return Cn.MAX}makePost(e,t){const r=Gr(e);return new Cn(t,r)}toString(){return".value"}},dy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",y3=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=dy.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=dy.charAt(e[i]);return(0,F.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),XN=function(n){if(n===""+eP)return"-";const e=mT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return pc;const a=dy.charAt(dy.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},eL=function(n){if(n===""+pN)return Ad;const e=mT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+eP:(delete t[t.length-1],t.join("")):(t[t.length-1]=dy.charAt(dy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function tL(n){return{type:"value",snapshotNode:n}}function hy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Fw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Uw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class yP{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Fw(t,f)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(hy(t,r)):u.trackChildChange(Uw(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_r,(i,a)=>{t.hasChild(i)||r.trackChildChange(Fw(i,a))}),t.isLeafNode()||t.forEachChild(_r,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(Uw(i,a,u))}else r.trackChildChange(hy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?on.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Vw{constructor(e){this.indexedFilter_=new yP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vw.getStartPost_(e),this.endPost_=Vw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new Cn(t,r))||(r=on.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=on.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(on.EMPTY_NODE);const a=this;return t.forEachChild(_r,(u,f)=>{a.matches(new Cn(u,f))||(i=i.updateImmediateChild(u,on.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class w3{constructor(e){this.rangedFilter_=new Vw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new Cn(t,r))||(r=on.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=on.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=on.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const f=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),u++}}else{let a,u,f,m;if(i=t.withIndex(this.index_),i=i.updatePriority(on.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();f=(N,$)=>x($,N)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let v=0,A=!1;for(;m.hasNext();){const x=m.getNext();!A&&f(a,x)<=0&&(A=!0),A&&v<this.limit_&&f(x,u)<=0?v++:i=i.updateImmediateChild(x.name,on.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const x=this.index_.getCompare();u=(N,$)=>x($,N)}else u=this.index_.getCompare();const f=e;(0,F.hu)(f.numChildren()===this.limit_,"");const m=new Cn(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),A=this.rangedFilter_.matches(m);if(f.hasChild(t)){const x=f.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||f.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const $=null==N?1:u(N,m);if(A&&!r.isEmpty()&&$>=0)return null!=a&&a.trackChildChange(Uw(t,r,x)),f.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Fw(t,x));const Ce=f.updateImmediateChild(t,on.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(hy(N.name,N.node)),Ce.updateImmediateChild(N.name,N.node)):Ce}}return r.isEmpty()?e:A&&u(v,m)>=0?(null!=a&&(a.trackChildChange(Fw(v.name,v.node)),a.trackChildChange(hy(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,on.EMPTY_NODE)):e}}class ET{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_r}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ad}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_r}copy(){const e=new ET;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function wP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function IT(n,e){const t=n.copy();return t.index_=e,t}function nL(n){const e={};if(n.isDefault())return e;let t;return n.index_===_r?t="$priority":n.index_===mP?t="$value":n.index_===gc?t="$key":((0,F.hu)(n.index_ instanceof gP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function rL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_r&&(e.i=n.index_.toString()),e}class TT extends FN{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Aw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=TT.getListenId_(e,r),f={};this.listens_[u]=f;const m=nL(e._queryParams);this.restRequest_(a+".json",m,(v,A)=>{let x=A;if(404===v&&(x=null,v=null),null===v&&this.onDataUpdate_(a,x,!1,r),(0,F.DV)(this.listens_,u)===f){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=TT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=nL(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(a,u)=>{let f=u;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,F.cI)(f.responseText)}catch(v){po("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&po("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class D3{constructor(){this.rootNode_=on.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function DT(){return{value:null,children:new Map}}function fy(n,e,t){if(bn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=wn(e);n.children.has(r)||n.children.set(r,DT()),fy(n.children.get(r),e=lr(e),t)}}function bP(n,e){if(bn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(_r,(r,i)=>{fy(n,new Zn(r),i)}),bP(n,e)}}if(n.children.size>0){const t=wn(e);return e=lr(e),n.children.has(t)&&bP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function CP(n,e,t){null!==n.value?t(e,n.value):function A3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{CP(i,new Zn(e.toString()+"/"+r),t)})}class S3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&os(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class P3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new S3(e);const r=1e4+2e4*Math.random();xw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;os(e,(i,a)=>{a>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),xw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pl||(pl={})),pl))();function TP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class AT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=pl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(bn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Zn(e));return new AT(Bn(),t,this.revert)}}return(0,F.hu)(wn(this.path)===e,"operationForChild called for unrelated child."),new AT(lr(this.path),this.affectedTree,this.revert)}}class Bw{constructor(e,t){this.source=e,this.path=t,this.type=pl.LISTEN_COMPLETE}operationForChild(e){return bn(this.path)?new Bw(this.source,Bn()):new Bw(this.source,lr(this.path))}}class pg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=pl.OVERWRITE}operationForChild(e){return bn(this.path)?new pg(this.source,Bn(),this.snap.getImmediateChild(e)):new pg(this.source,lr(this.path),this.snap)}}class py{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=pl.MERGE}operationForChild(e){if(bn(this.path)){const t=this.children.subtree(new Zn(e));return t.isEmpty()?null:t.value?new pg(this.source,Bn(),t.value):new py(this.source,Bn(),t)}return(0,F.hu)(wn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new py(this.source,lr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class af{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(bn(e))return this.isFullyInitialized()&&!this.filtered_;const t=wn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class O3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jw(n,e,t,r,i,a){const u=r.filter(f=>f.type===t);u.sort((f,m)=>function N3(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new Cn(e.childName,e.snapshotNode),i=new Cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),u.forEach(f=>{const m=function k3(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function ST(n,e){return{eventCache:n,serverCache:e}}function Hw(n,e,t,r){return ST(new af(e,t,r),n.serverCache)}function sL(n,e,t,r){return ST(n.eventCache,new af(e,t,r))}function xT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function gg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let DP;class yr{constructor(e,t=(()=>(DP||(DP=new Wo(yH)),DP))()){this.value=e,this.children=t}static fromObject(e){let t=new yr(null);return os(e,(r,i)=>{t=t.set(new Zn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bn(),value:this.value};if(bn(e))return null;{const r=wn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(lr(e),t);return null!=a?{path:Rr(new Zn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(bn(e))return this;{const t=wn(e),r=this.children.get(t);return null!==r?r.subtree(lr(e)):new yr(null)}}set(e,t){if(bn(e))return new yr(t,this.children);{const r=wn(e),a=(this.children.get(r)||new yr(null)).set(lr(e),t),u=this.children.insert(r,a);return new yr(this.value,u)}}remove(e){if(bn(e))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const t=wn(e),r=this.children.get(t);if(r){const i=r.remove(lr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new yr(null):new yr(this.value,a)}return this}}get(e){if(bn(e))return this.value;{const t=wn(e),r=this.children.get(t);return r?r.get(lr(e)):null}}setTree(e,t){if(bn(e))return t;{const r=wn(e),a=(this.children.get(r)||new yr(null)).setTree(lr(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new yr(this.value,u)}}fold(e){return this.fold_(Bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Rr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(bn(e))return null;{const a=wn(e),u=this.children.get(a);return u?u.findOnPath_(lr(e),Rr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bn(),t)}foreachOnPath_(e,t,r){if(bn(e))return this;{this.value&&r(t,this.value);const i=wn(e),a=this.children.get(i);return a?a.foreachOnPath_(lr(e),Rr(t,i),r):new yr(null)}}foreach(e){this.foreach_(Bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Rr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Jl{constructor(e){this.writeTree_=e}static empty(){return new Jl(new yr(null))}}function $w(n,e,t){if(bn(e))return new Jl(new yr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=go(i,e);return a=a.updateChild(u,t),new Jl(n.writeTree_.set(i,a))}{const i=new yr(t),a=n.writeTree_.setTree(e,i);return new Jl(a)}}}function AP(n,e,t){let r=n;return os(t,(i,a)=>{r=$w(r,Rr(e,i),a)}),r}function oL(n,e){if(bn(e))return Jl.empty();{const t=n.writeTree_.setTree(e,new yr(null));return new Jl(t)}}function SP(n,e){return null!=mg(n,e)}function mg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(go(t.path,e)):null}function aL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_r,(r,i)=>{e.push(new Cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Cn(r,i.value))}),e}function lf(n,e){if(bn(e))return n;{const t=mg(n,e);return new Jl(null!=t?new yr(t):n.writeTree_.subtree(e))}}function xP(n){return n.writeTree_.isEmpty()}function gy(n,e){return lL(Bn(),n.writeTree_,e)}function lL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,F.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=lL(Rr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Rr(n,".priority"),r)),t}}function MT(n,e){return fL(e,n)}function j3(n,e){if(n.snap)return fl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&fl(Rr(n.path,t),e))return!0;return!1}function $3(n){return n.visible}function uL(n,e,t){let r=Jl.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let f;if(a.snap)fl(t,u)?(f=go(t,u),r=$w(r,f,a.snap)):fl(u,t)&&(f=go(u,t),r=$w(r,Bn(),a.snap.getChild(f)));else{if(!a.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(fl(t,u))f=go(t,u),r=AP(r,f,a.children);else if(fl(u,t))if(f=go(u,t),bn(f))r=AP(r,Bn(),a.children);else{const m=(0,F.DV)(a.children,wn(f));if(m){const v=m.getChild(lr(f));r=$w(r,Bn(),v)}}}}}return r}function cL(n,e,t,r,i){if(r||i){const a=lf(n.visibleWrites,e);return!i&&xP(a)?t:i||null!=t||SP(a,Bn())?gy(uL(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(fl(v.path,e)||fl(e,v.path))},e),t||on.EMPTY_NODE):null}{const a=mg(n.visibleWrites,e);if(null!=a)return a;{const u=lf(n.visibleWrites,e);return xP(u)?t:null!=t||SP(u,Bn())?gy(u,t||on.EMPTY_NODE):null}}}function PT(n,e,t,r){return cL(n.writeTree,n.treePath,e,t,r)}function MP(n,e){return function z3(n,e,t){let r=on.EMPTY_NODE;const i=mg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_r,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=lf(n.visibleWrites,e);return t.forEachChild(_r,(u,f)=>{const m=gy(lf(a,new Zn(u)),f);r=r.updateImmediateChild(u,m)}),aL(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return aL(lf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function dL(n,e,t,r){return function G3(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Rr(e,t);if(SP(n.visibleWrites,a))return null;{const u=lf(n.visibleWrites,a);return xP(u)?i.getChild(t):gy(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function OT(n,e){return function q3(n,e){return mg(n.visibleWrites,e)}(n.writeTree,Rr(n.treePath,e))}function PP(n,e,t){return function W3(n,e,t,r){const i=Rr(e,t),a=mg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?gy(lf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function hL(n,e){return fL(Rr(n.treePath,e),n.writeTree)}function fL(n,e){return{treePath:n,writeTree:e}}class Q3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Uw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Fw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,hy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Uw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const pL=new class J3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class OP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new af(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gg(this.viewCache_),a=function Y3(n,e,t,r,i,a){return function Z3(n,e,t,r,i,a,u){let f;const m=lf(n.visibleWrites,e),v=mg(m,Bn());if(null!=v)f=v;else{if(null==t)return[];f=gy(m,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const A=[],x=u.getCompare(),N=a?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let $=N.getNext();for(;$&&A.length<i;)0!==x($,r)&&A.push($),$=N.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function gL(n,e,t,r,i,a){const u=e.eventCache;if(null!=OT(r,t))return e;{let f,m;if(bn(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=gg(e),x=MP(r,v instanceof on?v:on.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const v=PT(r,gg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=wn(t);if(".priority"===v){(0,F.hu)(1===sf(t),"Can't have a priority with additional path components");const A=u.getNode();m=e.serverCache.getNode();const x=dL(r,t,A,m);f=null!=x?n.filter.updatePriority(A,x):u.getNode()}else{const A=lr(t);let x;if(u.isCompleteForChild(v)){m=e.serverCache.getNode();const N=dL(r,t,u.getNode(),m);x=null!=N?u.getNode().getImmediateChild(v).updateChild(A,N):u.getNode().getImmediateChild(v)}else x=PP(r,v,e.serverCache);f=null!=x?n.filter.updateChild(u.getNode(),v,x,A,i,a):u.getNode()}}return Hw(e,f,u.isFullyInitialized()||bn(t),n.filter.filtersNodes())}}function RT(n,e,t,r,i,a,u,f){const m=e.serverCache;let v;const A=u?n.filter:n.filter.getIndexedFilter();if(bn(t))v=A.updateFullNode(m.getNode(),r,null);else if(A.filtersNodes()&&!m.isFiltered()){const $=m.getNode().updateChild(t,r);v=A.updateFullNode(m.getNode(),$,null)}else{const $=wn(t);if(!m.isCompleteForPath(t)&&sf(t)>1)return e;const Y=lr(t),Ve=m.getNode().getImmediateChild($).updateChild(Y,r);v=".priority"===$?A.updatePriority(m.getNode(),Ve):A.updateChild(m.getNode(),$,Ve,Y,pL,null)}const x=sL(e,v,m.isFullyInitialized()||bn(t),A.filtersNodes());return gL(n,x,t,i,new OP(i,x,a),f)}function RP(n,e,t,r,i,a,u){const f=e.eventCache;let m,v;const A=new OP(i,e,a);if(bn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=Hw(e,v,!0,n.filter.filtersNodes());else{const x=wn(t);if(".priority"===x)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Hw(e,v,f.isFullyInitialized(),f.isFiltered());else{const N=lr(t),$=f.getNode().getImmediateChild(x);let Y;if(bn(N))Y=r;else{const Ce=A.getCompleteChild(x);Y=null!=Ce?".priority"===uP(N)&&Ce.getChild(jN(N)).isEmpty()?Ce:Ce.updateChild(N,r):on.EMPTY_NODE}m=$.equals(Y)?e:Hw(e,n.filter.updateChild(f.getNode(),x,Y,N,A,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function mL(n,e){return n.eventCache.isCompleteForChild(e)}function _L(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kP(n,e,t,r,i,a,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=bn(t)?r:new yr(null).setTree(t,r);const A=e.serverCache.getNode();return v.children.inorderTraversal((x,N)=>{if(A.hasChild(x)){const Y=_L(0,e.serverCache.getNode().getImmediateChild(x),N);m=RT(n,m,new Zn(x),Y,i,a,u,f)}}),v.children.inorderTraversal((x,N)=>{const $=!e.serverCache.isCompleteForChild(x)&&void 0===N.value;if(!A.hasChild(x)&&!$){const Ce=_L(0,e.serverCache.getNode().getImmediateChild(x),N);m=RT(n,m,new Zn(x),Ce,i,a,u,f)}}),m}class a${constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new yP(r.getIndex()),a=function b3(n){return n.loadsAllData()?new yP(n.getIndex()):n.hasLimit()?new w3(n):new Vw(n)}(r);this.processor_=function X3(n){return{filter:n}}(a);const u=t.serverCache,f=t.eventCache,m=i.updateFullNode(on.EMPTY_NODE,u.getNode(),null),v=a.updateFullNode(on.EMPTY_NODE,f.getNode(),null),A=new af(m,u.isFullyInitialized(),i.filtersNodes()),x=new af(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=ST(x,A),this.eventGenerator_=new O3(this.query_)}get query(){return this.query_}}function c$(n,e){const t=gg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!bn(e)&&!t.getImmediateChild(wn(e)).isEmpty())?t.getChild(e):null}function yL(n){return 0===n.eventRegistrations_.length}function vL(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function wL(n,e,t,r){e.type===pl.MERGE&&null!==e.source.queryId&&((0,F.hu)(gg(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(xT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function t$(n,e,t,r,i){const a=new Q3;let u,f;if(t.type===pl.OVERWRITE){const v=t;v.source.fromUser?u=RP(n,e,v.path,v.snap,r,i,a):((0,F.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!bn(v.path),u=RT(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===pl.MERGE){const v=t;v.source.fromUser?u=function r$(n,e,t,r,i,a,u){let f=e;return r.foreach((m,v)=>{const A=Rr(t,m);mL(e,wn(A))&&(f=RP(n,f,A,v,i,a,u))}),r.foreach((m,v)=>{const A=Rr(t,m);mL(e,wn(A))||(f=RP(n,f,A,v,i,a,u))}),f}(n,e,v.path,v.children,r,i,a):((0,F.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),u=kP(n,e,v.path,v.children,r,i,f,a))}else if(t.type===pl.ACK_USER_WRITE){const v=t;u=v.revert?function o$(n,e,t,r,i,a){let u;if(null!=OT(r,t))return e;{const f=new OP(r,e,i),m=e.eventCache.getNode();let v;if(bn(t)||".priority"===wn(t)){let A;if(e.serverCache.isFullyInitialized())A=PT(r,gg(e));else{const x=e.serverCache.getNode();(0,F.hu)(x instanceof on,"serverChildren would be complete if leaf node"),A=MP(r,x)}A=A,v=n.filter.updateFullNode(m,A,a)}else{const A=wn(t);let x=PP(r,A,e.serverCache);null==x&&e.serverCache.isCompleteForChild(A)&&(x=m.getImmediateChild(A)),v=null!=x?n.filter.updateChild(m,A,x,lr(t),f,a):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(m,A,on.EMPTY_NODE,lr(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=PT(r,gg(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=OT(r,Bn()),Hw(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function i$(n,e,t,r,i,a,u){if(null!=OT(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(bn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return RT(n,e,t,m.getNode().getChild(t),i,a,f,u);if(bn(t)){let v=new yr(null);return m.getNode().forEachChild(gc,(A,x)=>{v=v.set(new Zn(A),x)}),kP(n,e,t,v,i,a,f,u)}return e}{let v=new yr(null);return r.foreach((A,x)=>{const N=Rr(t,A);m.isCompleteForPath(N)&&(v=v.set(A,m.getNode().getChild(N)))}),kP(n,e,t,v,i,a,f,u)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==pl.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);u=function s$(n,e,t,r,i){const a=e.serverCache;return gL(n,sL(e,a.getNode(),a.isFullyInitialized()||bn(t),a.isFiltered()),t,r,pL,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function n$(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=xT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(tL(xT(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function e$(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,F.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,bL(n,a.changes,a.viewCache.eventCache.getNode(),null)}function bL(n,e,t,r){return function R3(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function v3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),jw(n,i,"child_removed",e,r,t),jw(n,i,"child_added",e,r,t),jw(n,i,"child_moved",a,r,t),jw(n,i,"child_changed",e,r,t),jw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let kT,LT;class CL{constructor(){this.views=new Map}}function NP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,F.hu)(null!=a,"SyncTree gave us an op for an invalid query."),wL(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(wL(u,e,t,r));return a}}function EL(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let f=PT(t,i?r:null),m=!1;f?m=!0:r instanceof on?(f=MP(t,r),m=!1):(f=on.EMPTY_NODE,m=!1);const v=ST(new af(f,m,!1),new af(r,i,!1));return new a$(e,v)}return u}function IL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function uf(n,e){let t=null;for(const r of n.views.values())t=t||c$(r,e);return t}function TL(n,e){return e._queryParams.loadsAllData()?NT(n):n.views.get(e._queryIdentifier)}function DL(n,e){return null!=TL(n,e)}function cf(n){return null!=NT(n)}function NT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let w$=1;class AL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yr(null),this.pendingWriteTree_=function K3(){return{visibleWrites:Jl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function LP(n,e,t,r,i){return function F3(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=$w(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?my(n,new pg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function df(n,e,t=!1){const r=function V3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function B3(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&j3(f,r.path)?i=!1:fl(r.path,f.path)&&(a=!0)),u--}return!!i&&(a?(function H3(n){n.visibleWrites=uL(n.allWrites,$3,Bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=oL(n.visibleWrites,r.path):os(r.children,m=>{n.visibleWrites=oL(n.visibleWrites,Rr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new yr(null);return null!=r.snap?a=a.set(Bn(),!0):os(r.children,u=>{a=a.set(new Zn(u),!0)}),my(n,new AT(r.path,a,t))}return[]}function zw(n,e,t){return my(n,new pg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function FP(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||DL(a,e))){const f=function _$(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const f=cf(n);if("default"===i)for(const[m,v]of n.views.entries())u=u.concat(vL(v,t,r)),yL(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(u=u.concat(vL(m,t,r)),yL(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!cf(n)&&a.push(new(function p$(){return(0,F.hu)(kT,"Reference.ts has not been loaded"),kT}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function g$(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;u=f.events;const v=-1!==m.findIndex(x=>x._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(i,(x,N)=>cf(N));if(v&&!A){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const N=function S$(n){return n.fold((e,t,r)=>{if(t&&cf(t))return[NT(t)];{let i=[];return t&&(i=IL(t)),os(r,(a,u)=>{i=i.concat(u)}),i}})}(x);for(let $=0;$<N.length;++$){const Y=N[$],Ce=Y.query,Ve=PL(n,Y);n.listenProvider_.startListening(Gw(Ce),UT(n,Ce),Ve.hashFn,Ve.onComplete)}}}!A&&m.length>0&&!r&&(v?n.listenProvider_.stopListening(Gw(e),null):m.forEach(x=>{const N=n.queryToTagMap.get(VT(x));n.listenProvider_.stopListening(Gw(x),N)})),function x$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=VT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return u}function SL(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(x,N)=>{const $=go(x,r);i=i||uf(N,$),a=a||cf(N)});let f,u=n.syncPointTree_.get(r);u?(a=a||cf(u),i=i||uf(u,Bn())):(u=new CL,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?f=!0:(f=!1,i=on.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,$)=>{const Y=uf($,Bn());Y&&(i=i.updateImmediateChild(N,Y))}));const m=DL(u,e);if(!m&&!e._queryParams.loadsAllData()){const x=VT(e);(0,F.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const N=function M$(){return w$++}();n.queryToTagMap.set(x,N),n.tagToQueryMap.set(N,x)}let A=function m$(n,e,t,r,i,a){const u=EL(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function d$(n,e){n.eventRegistrations_.push(e)}(u,t),function h$(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_r,(a,u)=>{r.push(hy(a,u))}),t.isFullyInitialized()&&r.push(tL(t.getNode())),bL(n,r,t.getNode(),e)}(u,t)}(u,e,t,MT(n.pendingWriteTree_,r),i,f);if(!m&&!a){const x=TL(u,e);A=A.concat(function P$(n,e,t){const r=e._path,i=UT(n,e),a=PL(n,t),u=n.listenProvider_.startListening(Gw(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!cf(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,A,x)=>{if(!bn(v)&&A&&cf(A))return[NT(A).query];{let N=[];return A&&(N=N.concat(IL(A).map($=>$.query))),os(x,($,Y)=>{N=N.concat(Y)}),N}});for(let v=0;v<m.length;++v){const A=m[v];n.listenProvider_.stopListening(Gw(A),UT(n,A))}}return u}(n,e,x))}return A}function FT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,f)=>{const v=uf(f,go(u,e));if(v)return v});return cL(i,e,a,t,!0)}function my(n,e){return xL(e,n.syncPointTree_,null,MT(n.pendingWriteTree_,Bn()))}function xL(n,e,t,r){if(bn(n.path))return ML(n,e,t,r);{const i=e.get(Bn());null==t&&null!=i&&(t=uf(i,Bn()));let a=[];const u=wn(n.path),f=n.operationForChild(u),m=e.children.get(u);if(m&&f){const v=t?t.getImmediateChild(u):null,A=hL(r,u);a=a.concat(xL(f,m,v,A))}return i&&(a=a.concat(NP(i,n,r,t))),a}}function ML(n,e,t,r){const i=e.get(Bn());null==t&&null!=i&&(t=uf(i,Bn()));let a=[];return e.children.inorderTraversal((u,f)=>{const m=t?t.getImmediateChild(u):null,v=hL(r,u),A=n.operationForChild(u);A&&(a=a.concat(ML(A,f,m,v)))}),i&&(a=a.concat(NP(i,n,r,t))),a}function PL(n,e){const t=e.query,r=UT(n,t);return{hashFn:()=>(function l$(n){return n.viewCache_.serverCache.getNode()}(e)||on.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function I$(n,e,t){const r=UP(n,t);if(r){const i=VP(r),a=i.path,u=i.queryId,f=go(a,e);return BP(n,a,new Bw(TP(u),f))}return[]}(n,t._path,r):function E$(n,e){return my(n,new Bw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function bH(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return FP(n,t,null,a)}}}}function UT(n,e){const t=VT(e);return n.queryToTagMap.get(t)}function VT(n){return n._path.toString()+"$"+n._queryIdentifier}function UP(n,e){return n.tagToQueryMap.get(e)}function VP(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Zn(n.substr(0,e))}}function BP(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),NP(r,t,MT(n.pendingWriteTree_,e),null)}function Gw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function v$(){return(0,F.hu)(LT,"Reference.ts has not been loaded"),LT}())(n._repo,n._path):n}class jP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new jP(t)}node(){return this.node_}}class HP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Rr(this.path_,e);return new HP(this.syncTree_,t)}node(){return FT(this.syncTree_,this.path_)}}const OL=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?R$(n[".sv"],e,t):"object"==typeof n[".sv"]?k$(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},R$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},k$=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},RL=function(n,e,t,r){return zP(e,new HP(t,n),r)},$P=function(n,e,t){return zP(n,new jP(e),t)};function zP(n,e,t){const r=n.getPriority().val(),i=OL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,f=OL(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new uy(f,Gr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new uy(i))),u.forEachChild(_r,(f,m)=>{const v=zP(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class GP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function BT(n,e){let t=e instanceof Zn?e:new Zn(e),r=n,i=wn(t);for(;null!==i;){const a=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new GP(i,r,a),t=lr(t),i=wn(t)}return r}function _g(n){return n.node.value}function WP(n,e){n.node.value=e,qP(n)}function kL(n){return n.node.childCount>0}function jT(n,e){os(n.node.children,(t,r)=>{e(new GP(t,n,r))})}function NL(n,e,t,r){t&&!r&&e(n),jT(n,i=>{NL(i,e,!0,r)}),t&&r&&e(n)}function Ww(n){return new Zn(null===n.parent?n.name:Ww(n.parent)+"/"+n.name)}function qP(n){null!==n.parent&&function F$(n,e,t){const r=function N$(n){return void 0===_g(n)&&!kL(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,qP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,qP(n))}(n.parent,n.name,n)}const U$=/[\[\].#$\/\u0000-\u001F\u007F]/,V$=/[\[\].#$\u0000-\u001F\u007F]/,ZP=10485760,HT=function(n){return"string"==typeof n&&0!==n.length&&!U$.test(n)},LL=function(n){return"string"==typeof n&&0!==n.length&&!V$.test(n)},qw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!gT(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},mc=function(n,e,t,r){r&&void 0===e||Zw((0,F.gK)(n,"value"),e,t)},Zw=function(n,e,t){const r=t instanceof Zn?new XH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+hg(r));if("function"==typeof e)throw new Error(n+"contains a function "+hg(r)+" with contents = "+e.toString());if(gT(e))throw new Error(n+"contains "+e.toString()+" "+hg(r));if("string"==typeof e&&e.length>ZP/3&&(0,F.ug)(e)>ZP)throw new Error(n+"contains a string greater than "+ZP+" utf8 bytes "+hg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(os(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!HT(u)))throw new Error(n+" contains an invalid key ("+u+") "+hg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function e3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),HN(n)})(r,u),Zw(n,f,r),function t3(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+hg(r)+" in addition to actual children.")}},FL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];os(e,(u,f)=>{const m=new Zn(u);if(Zw(i,f,Rr(t,m)),".priority"===uP(m)&&!qw(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Rw(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!HT(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(JH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&fl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},KP=function(n,e,t){if(!t||void 0!==e){if(gT(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qw(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Kw=function(n,e,t,r){if(!(r&&void 0===t||HT(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yw=function(n,e,t,r){if(!(r&&void 0===t||LL(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gl=function(n,e){if(".info"===wn(e))throw new Error(n+" failed = Can't modify data under /.info/")},UL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!HT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),LL(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $T(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!cP(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function YP(n,e,t){$T(n,t),VL(n,r=>cP(r,e))}function ml(n,e,t){$T(n,t),VL(n,r=>fl(r,e)||fl(e,r))}function VL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(z$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function z$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();cg&&ss("event: "+t.toString()),ay(r)}}}const BL="repo_interrupt";class W${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=DT(),this.transactionQueueTree_=new GP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jL(n){const t=n.infoData_.getNode(new Zn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Qw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:jL(n)})}function HL(n,e,t,r,i){n.dataUpdateCount++;const a=new Zn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,F.UI)(t,v=>Gr(v));u=function D$(n,e,t,r){const i=UP(n,r);if(i){const a=VP(i),u=a.path,f=a.queryId,m=go(u,e),v=yr.fromObject(t);return BP(n,u,new py(TP(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Gr(t);u=function T$(n,e,t,r){const i=UP(n,r);if(null!=i){const a=VP(i),u=a.path,f=a.queryId,m=go(u,e);return BP(n,u,new pg(TP(f),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,F.UI)(t,v=>Gr(v));u=function C$(n,e,t){const r=yr.fromObject(t);return my(n,new py({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Gr(t);u=zw(n.serverSyncTree_,a,m)}let f=a;u.length>0&&(f=yy(n,a)),ml(n.eventQueue_,f,u)}function $L(n,e){QP(n,"connected",e),!1===e&&function Q$(n){_y(n,"onDisconnectEvents");const e=Qw(n),t=DT();CP(n.onDisconnect_,Bn(),(i,a)=>{const u=RL(i,a,n.serverSyncTree_,e);fy(t,i,u)});let r=[];CP(t,Bn(),(i,a)=>{r=r.concat(zw(n.serverSyncTree_,i,a));const u=tO(n,i);yy(n,u)}),n.onDisconnect_=DT(),ml(n.eventQueue_,Bn(),r)}(n)}function QP(n,e,t){const r=new Zn("/.info/"+e),i=Gr(t);n.infoData_.updateSnapshot(r,i);const a=zw(n.infoSyncTree_,r,i);ml(n.eventQueue_,r,a)}function zT(n){return n.nextWriteId_++}function JP(n,e,t,r,i){_y(n,"set",{path:e.toString(),value:t,priority:r});const a=Qw(n),u=Gr(t,r),f=FT(n.serverSyncTree_,e),m=$P(u,f,a),v=zT(n),A=LP(n.serverSyncTree_,e,m,v,!0);$T(n.eventQueue_,A),n.server_.put(e.toString(),u.val(!0),(N,$)=>{const Y="ok"===N;Y||po("set at "+e+" failed: "+N);const Ce=df(n.serverSyncTree_,v,!Y);ml(n.eventQueue_,e,Ce),hf(0,i,N,$)});const x=tO(n,e);yy(n,x),ml(n.eventQueue_,x,[])}function J$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&bP(n.onDisconnect_,e),hf(0,t,r,i)})}function zL(n,e,t,r){const i=Gr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&fy(n.onDisconnect_,e,i),hf(0,r,a,u)})}function XP(n,e,t){let r;r=".info"===wn(e._path)?FP(n.infoSyncTree_,e,t):FP(n.serverSyncTree_,e,t),YP(n.eventQueue_,e._path,r)}function GL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(BL)}function _y(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ss(t,...e)}function hf(n,e,t,r){e&&ay(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function eO(n,e,t){return FT(n.serverSyncTree_,e,t)||on.EMPTY_NODE}function GT(n,e=n.transactionQueueTree_){if(e||WT(n,e),_g(e)){const t=qL(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function iz(n,e,t){const r=t.map(v=>v.currentWriteId),i=eO(n,e,r);let a=i;const u=i.hash();for(let v=0;v<t.length;v++){const A=t[v];(0,F.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const x=go(e,A.path);a=a.updateChild(x,A.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{_y(n,"transaction put response",{path:m.toString(),status:v});let A=[];if("ok"===v){const x=[];for(let N=0;N<t.length;N++)t[N].status=2,A=A.concat(df(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&x.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();WT(n,BT(n.transactionQueueTree_,e)),GT(n,n.transactionQueueTree_),ml(n.eventQueue_,e,A);for(let N=0;N<x.length;N++)ay(x[N])}else{if("datastale"===v)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{po("transaction at "+m.toString()+" failed: "+v);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=v}yy(n,e)}},u)}(n,Ww(e),t)}else kL(e)&&jT(e,t=>{GT(n,t)})}function yy(n,e){const t=WL(n,e),r=Ww(t);return function sz(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=go(t,m.path);let x,A=!1;if((0,F.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)A=!0,x=m.abortReason,i=i.concat(df(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)A=!0,x="maxretry",i=i.concat(df(n.serverSyncTree_,m.currentWriteId,!0));else{const N=eO(n,m.path,u);m.currentInputSnapshot=N;const $=e[f].update(N.val());if(void 0!==$){Zw("transaction failed: Data returned ",$,m.path);let Y=Gr($);"object"==typeof $&&null!=$&&(0,F.r3)($,".priority")||(Y=Y.updatePriority(N.getPriority()));const Ve=m.currentWriteId,ht=Qw(n),it=$P(Y,N,ht);m.currentOutputSnapshotRaw=Y,m.currentOutputSnapshotResolved=it,m.currentWriteId=zT(n),u.splice(u.indexOf(Ve),1),i=i.concat(LP(n.serverSyncTree_,m.path,it,m.currentWriteId,m.applyLocally)),i=i.concat(df(n.serverSyncTree_,Ve,!0))}else A=!0,x="nodata",i=i.concat(df(n.serverSyncTree_,m.currentWriteId,!0))}ml(n.eventQueue_,t,i),i=[],A&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===x?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(x),!1,null)))}WT(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)ay(r[f]);GT(n,n.transactionQueueTree_)}(n,qL(n,t),r),r}function WL(n,e){let t,r=n.transactionQueueTree_;for(t=wn(e);null!==t&&void 0===_g(r);)r=BT(r,t),t=wn(e=lr(e));return r}function qL(n,e){const t=[];return ZL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ZL(n,e,t){const r=_g(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);jT(e,i=>{ZL(n,i,t)})}function WT(n,e){const t=_g(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,WP(e,t.length>0?t:void 0)}jT(e,r=>{WT(n,r)})}function tO(n,e){const t=Ww(WL(n,e)),r=BT(n.transactionQueueTree_,e);return function L$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{nO(n,i)}),nO(n,r),NL(r,i=>{nO(n,i)}),t}function nO(n,e){const t=_g(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,F.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,F.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(df(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?WP(e,void 0):t.length=a+1,ml(n.eventQueue_,Ww(e),i);for(let u=0;u<r.length;u++)ay(r[u])}}const rO=function(n,e){const t=lz(n),r=t.namespace;return"firebase.com"===t.domain&&fc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&fc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&po("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nP(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Zn(t.pathString)}},lz=function(n){let e="",t="",r="",i="",a="",u=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let A=n.indexOf("/");-1===A&&(A=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(A,x)),A<x&&(i=function oz(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(A,x)));const N=function az(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):po(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));v=e.indexOf(":"),v>=0?(u="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const $=e.slice(0,v);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:a}};class KL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class YL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class QL{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class JL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return J$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){gl("OnDisconnect.remove",this._path);const e=new F.BH;return zL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){gl("OnDisconnect.set",this._path),mc("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return zL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){gl("OnDisconnect.setWithPriority",this._path),mc("OnDisconnect.setWithPriority",e,this._path,!1),KP("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function X$(n,e,t,r,i){const a=Gr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,f)=>{"ok"===u&&fy(n.onDisconnect_,e,a),hf(0,i,u,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){gl("OnDisconnect.update",this._path),FL("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function ez(n,e,t,r){if((0,F.xb)(t))return ss("onDisconnect().update() called with empty data.  Don't do anything."),void hf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&os(t,(u,f)=>{const m=Gr(f);fy(n.onDisconnect_,Rr(e,u),m)}),hf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class qo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return bn(this._path)?null:uP(this._path)}get ref(){return new _l(this._repo,this._path)}get _queryIdentifier(){const e=rL(this._queryParams),t=XM(e);return"{}"===t?"default":t}get _queryObject(){return rL(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof qo))return!1;const t=this._repo===e._repo,r=cP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function QH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function qT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ff(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===gc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ad)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==pc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===_r){if(null!=e&&!qw(e)||null!=t&&!qw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof gP||n.getIndex()===mP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ZT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class _l extends qo{constructor(e,t){super(e,t,new ET,!1)}get parent(){const e=jN(this._path);return null===e?null:new _l(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class yg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Zn(e),r=vg(this.ref,e);return new yg(this._node.getChild(t),r,_r)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new yg(i,vg(this.ref,r),_r)))}hasChild(e){const t=new Zn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function XL(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?vg(n._root,e):n._root}function eF(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=rO(e,n._repo.repoInfo_.nodeAdmin);UL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&fc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),XL(n,t.path.toString())}function vg(n,e){return null===wn((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Yw("child","path",t,!1)):Yw("child","path",e,!1),new _l(n._repo,Rr(n._path,e));var t}function iO(n,e){n=(0,F.m9)(n),gl("set",n._path),mc("set",e,n._path,!1);const t=new F.BH;return JP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function fz(n,e){FL("update",e,n._path,!1);const t=new F.BH;return function Y$(n,e,t,r){_y(n,"update",{path:e.toString(),value:t});let i=!0;const a=Qw(n),u={};if(os(t,(f,m)=>{i=!1,u[f]=RL(Rr(e,f),Gr(m),n.serverSyncTree_,a)}),i)ss("update() called with empty data.  Don't do anything."),hf(0,r,"ok",void 0);else{const f=zT(n),m=function b$(n,e,t,r){!function U3(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=AP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=yr.fromObject(t);return my(n,new py({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,f);$T(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,A)=>{const x="ok"===v;x||po("update at "+e+" failed: "+v);const N=df(n.serverSyncTree_,f,!x),$=N.length>0?yy(n,e):e;ml(n.eventQueue_,$,N),hf(0,r,v,A)}),os(t,v=>{const A=tO(n,Rr(e,v));yy(n,A)}),ml(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function pz(n){return function K$(n,e){const t=function A$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,A)=>{const x=go(v,t);r=r||uf(A,x)});let i=n.syncPointTree_.get(t);i?r=r||uf(i,Bn()):(i=new CL,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new af(r,!0,!1):null;return function u$(n){return xT(n.viewCache_)}(EL(i,e,MT(n.pendingWriteTree_,e._path),a?u.getNode():on.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Gr(r).withIndex(e._queryParams.getIndex()),a=zw(n.serverSyncTree_,e._path,i);return YP(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(_y(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new yg(e,new _l(n._repo,n._path),n._queryParams.getIndex()))}class KT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new KL("value",this,new yg(e.snapshotNode,new _l(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YL(this,e,t):null}matches(e){return e instanceof KT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class YT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YL(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=vg(new _l(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new KL(e.type,this,new yg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof YT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Jw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(A,x)=>{XP(n._repo,n,f),m(A,x)};v.userCallback=t.userCallback,v.context=t.context,t=v}const u=new QL(t,a||void 0),f="value"===e?new KT(u):new YT(e,u);return function tz(n,e,t){let r;r=".info"===wn(e._path)?SL(n.infoSyncTree_,e,t):SL(n.serverSyncTree_,e,t),YP(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>XP(n._repo,n,f)}function sO(n,e,t,r){return Jw(n,"value",e,t,r)}function tF(n,e,t,r){return Jw(n,"child_added",e,t,r)}function nF(n,e,t,r){return Jw(n,"child_changed",e,t,r)}function rF(n,e,t,r){return Jw(n,"child_moved",e,t,r)}function iF(n,e,t,r){return Jw(n,"child_removed",e,t,r)}function sF(n,e,t){let r=null;const i=t?new QL(t):null;"value"===e?r=new KT(i):e&&(r=new YT(e,i)),XP(n._repo,n,r)}class Xl{}class oF extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("endAt",this._value,e._path,!0);const t=wP(e._queryParams,this._value,this._key);if(ZT(t),ff(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class mz extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("endBefore",this._value,e._path,!1);const t=function T3(n,e,t){let r,i;return n.index_===gc?("string"==typeof e&&(e=eL(e)),i=wP(n,e,t)):(r=null==t?Ad:eL(t),i=wP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ZT(t),ff(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class aF extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("startAt",this._value,e._path,!0);const t=vP(e._queryParams,this._value,this._key);if(ZT(t),ff(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class vz extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("startAfter",this._value,e._path,!1);const t=function I3(n,e,t){let r;if(n.index_===gc)"string"==typeof e&&(e=XN(e)),r=vP(n,e,t);else{let i;i=null==t?pc:XN(t),r=vP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ZT(t),ff(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class bz extends Xl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qo(e._repo,e._path,function C3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Ez extends Xl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qo(e._repo,e._path,function E3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Tz extends Xl{constructor(e){super(),this._path=e}_apply(e){qT(e,"orderByChild");const t=new Zn(this._path);if(bn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new gP(t),i=IT(e._queryParams,r);return ff(i),new qo(e._repo,e._path,i,!0)}}class Az extends Xl{_apply(e){qT(e,"orderByKey");const t=IT(e._queryParams,gc);return ff(t),new qo(e._repo,e._path,t,!0)}}class xz extends Xl{_apply(e){qT(e,"orderByPriority");const t=IT(e._queryParams,_r);return ff(t),new qo(e._repo,e._path,t,!0)}}class Pz extends Xl{_apply(e){qT(e,"orderByValue");const t=IT(e._queryParams,mP);return ff(t),new qo(e._repo,e._path,t,!0)}}class Rz extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(mc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new oF(this._value,this._key)._apply(new aF(this._value,this._key)._apply(e))}}function eu(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function f$(n){(0,F.hu)(!kT,"__referenceConstructor has already been defined"),kT=n})(_l),function y$(n){(0,F.hu)(!LT,"__referenceConstructor has already been defined"),LT=n}(_l);const oO={};function uF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||fc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ss("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,u=rO(a,i),f=u.repoInfo;"undefined"!=typeof process&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,u=rO(a,i),f=u.repoInfo):m=!u.repoInfo.secure;const A=i&&m?new Mw(Mw.OWNER):new TH(n.name,n.options,e);UL("Invalid Firebase Database URL",u),bn(u.path)||fc("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function Uz(n,e,t,r){let i=oO[e.name];i||(i={},oO[e.name]=i);let a=i[n.toURLString()];return a&&fc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new W$(n,false,t,r),i[n.toURLString()]=a,a}(f,n,A,new IH(n.name,t));return new Bz(x,n)}class Bz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function q$(n,e,t){if(n.stats_=sP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new TT(n.repoInfo_,(r,i,a,u)=>{HL(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>$L(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new fg(n.repoInfo_,e,(r,i,a,u)=>{HL(n,r,i,a,u)},r=>{$L(n,r)},r=>{!function Z$(n,e){os(e,(t,r)=>{QP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function xH(n,e){const t=n.toString();return iP[t]||(iP[t]=e()),iP[t]}(n.repoInfo_,()=>new P3(n.stats_,n.server_)),n.infoData_=new D3,n.infoSyncTree_=new AL({startListening:(r,i,a,u)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=zw(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),QP(n,"connected",!1),n.serverSyncTree_=new AL({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(f,m)=>{const v=u(f,m);ml(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _l(this._repo,Bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Fz(n,e){const t=oO[e];(!t||t[n.key]!==n)&&fc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),GL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fc("Cannot call "+e+" on a deleted database.")}}function zz(n,e){dN(n,e)}const Wz={".sv":"timestamp"};class Kz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}fg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},fg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Gz(n){oN(ci.SDK_VERSION),(0,ci._registerComponent)(new wa.wA("database",(e,{instanceIdentifier:t})=>uF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ci.registerVersion)(iN,"0.12.7",n),(0,ci.registerVersion)(iN,"0.12.7","esm2017")}();const Xz=new ba.Yd("@firebase/database-compat"),cF=function(n){Xz.warn("FIREBASE WARNING: "+n)};class nG{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,cF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class rG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class pf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Yw("DataSnapshot.child","path",e,!1),new pf(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Yw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new pf(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Aa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ts{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const u=Ts.getCancelAndContextArgs_("Query.on",r,i),f=(v,A)=>{t.call(u.context,new pf(this.database,v),A)};f.userCallback=t,f.context=u.context;const m=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return sO(this._delegate,f,m),t;case"child_added":return tF(this._delegate,f,m),t;case"child_removed":return iF(this._delegate,f,m),t;case"child_changed":return nF(this._delegate,f,m),t;case"child_moved":return rF(this._delegate,f,m),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,sF(this._delegate,e,i)}else sF(this._delegate,e)}get(){return pz(this._delegate).then(e=>new pf(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const a=Ts.getCancelAndContextArgs_("Query.once",r,i),u=new F.BH,f=(v,A)=>{const x=new pf(this.database,v);t&&t.call(a.context,x,A),u.resolve(x)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),u.reject(v)};switch(e){case"value":sO(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":tF(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":iF(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":nF(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":rF(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Ts(this.database,eu(this._delegate,function Cz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bz(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Ts(this.database,eu(this._delegate,function Iz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ez(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Ts(this.database,eu(this._delegate,function Dz(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yw("orderByChild","path",n,!1),new Tz(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Ts(this.database,eu(this._delegate,function Sz(){return new Az}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Ts(this.database,eu(this._delegate,function Mz(){return new xz}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Ts(this.database,eu(this._delegate,function Oz(){return new Pz}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Ts(this.database,eu(this._delegate,function yz(n=null,e){return Kw("startAt","key",e,!0),new aF(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Ts(this.database,eu(this._delegate,function wz(n,e){return Kw("startAfter","key",e,!0),new vz(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Ts(this.database,eu(this._delegate,function gz(n,e){return Kw("endAt","key",e,!0),new oF(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Ts(this.database,eu(this._delegate,function _z(n,e){return Kw("endBefore","key",e,!0),new mz(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Ts(this.database,eu(this._delegate,function kz(n,e){return Kw("equalTo","key",e,!0),new Rz(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Aa(this.database,new _l(this._delegate._repo,this._delegate._path))}}class Aa extends Ts{constructor(e,t){super(e,new qo(t._repo,t._path,new ET,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Aa(this.database,vg(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Aa(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Aa(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=iO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,cF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}gl("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=fz(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function hz(n,e,t){if(gl("setWithPriority",n._path),mc("setWithPriority",e,n._path,!1),KP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return JP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function cz(n){return gl("remove",n._path),iO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Yz(n,e,t){var r;if(n=(0,F.m9)(n),gl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new F.BH,f=sO(n,()=>{});return function rz(n,e,t,r,i,a){_y(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:lN(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=eO(n,e,void 0);u.currentInputSnapshot=f;const m=u.update(f.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Zw("transaction failed: Data returned ",m,u.path),u.status=0;const v=BT(n.transactionQueueTree_,e),A=_g(v)||[];let x;A.push(u),WP(v,A),"object"==typeof m&&null!==m&&(0,F.r3)(m,".priority")?(x=(0,F.DV)(m,".priority"),(0,F.hu)(qw(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(FT(n.serverSyncTree_,e)||on.EMPTY_NODE).getPriority().val();const N=Qw(n),$=Gr(m,x),Y=$P($,f,N);u.currentOutputSnapshotRaw=$,u.currentOutputSnapshotResolved=Y,u.currentWriteId=zT(n);const Ce=LP(n.serverSyncTree_,e,Y,u.currentWriteId,u.applyLocally);ml(n.eventQueue_,e,Ce),GT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,A)=>{let x=null;m?a.reject(m):(x=new yg(A,new _l(n._repo,n._path),_r),a.resolve(new Kz(v,x)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new rG(a.committed,new pf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function dz(n,e){n=(0,F.m9)(n),gl("setPriority",n._path),KP("setPriority",e,!1);const t=new F.BH;return JP(n._repo,Rr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function uz(n,e){n=(0,F.m9)(n),gl("push",n._path),mc("push",e,n._path,!0);const t=jL(n._repo),r=y3(t),i=vg(n,r),a=vg(n,r);let u;return u=null!=e?iO(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Aa(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new Aa(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return gl("Reference.onDisconnect",this._delegate._path),new nG(new JL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Xw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function jz(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&fc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&fc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Mw(Mw.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);a=new Mw(u)}!function Lz(n,e,t,r){n.repoInfo_=new nP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Aa){const t=eF(this._delegate,e.toString());return new Aa(this,t)}{const t=XL(this._delegate,e);return new Aa(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=eF(this._delegate,e);return new Aa(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function Hz(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),GL(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function $z(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function nz(n){n.persistentConnection_&&n.persistentConnection_.resume(BL)}(n._repo)}(this._delegate)}}Xw.ServerValue={TIMESTAMP:function qz(){return Wz}(),increment:n=>function Zz(n){return{".sv":{increment:n}}}(n)};var sG=Object.freeze({__proto__:null,initStandalone:function iG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){oN(t);const u=new wa.zt("auth-internal",new wa.H0("database-standalone"));return u.setComponent(new wa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Xw(uF(n,u,void 0,e,a),n),namespace:i}}});const oG=Xw.ServerValue;function dF(n){return null==n}function hF(n){return"function"==typeof n.set}function fF(n,e){return hF(e)?e:n.ref(e)}function pF(n,e){if(function lG(n){return"string"==typeof n}(n))return e.stringCase();if(hF(n))return e.firebaseCase();if(function uG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function eb(n,e,t="on",r=Lv.z){return new Un.y(i=>{let a=null;return a=n[t](e,(u,f)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,yt.U)(i=>{const{snapshot:a,prevKey:u}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:u,key:f}}),(0,pC.B)())}function gF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function hG(n,e){const{payload:t,prevKey:r,key:i}=e,a=gF(n,i),u=function dG(n,e){if(dF(e))return 0;{const t=gF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function mF(n){return(dF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function _F(n,e,t){return function cG(n,e,t){return eb(n,"value","once",t).pipe(vi(r=>{const i=[mt(r)];return e.forEach(a=>i.push(eb(n,a,"on",t))),(0,am.T)(...i).pipe(Vc(hG,[]))}),WC())}(n,e=mF(e),t)}function yF(n,e,t){const r=(e=mF(e)).map(i=>eb(n,i,"on",t));return(0,am.T)(...r)}function vF(n,e){return function(r,i){return pF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function mG(n){return function(t){return t?pF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function wF(n,e){return function(){return eb(n,"value","on",e)}}!function aG(n){n.INTERNAL.registerComponent(new wa.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Xw(i,r)},"PUBLIC").setServiceProps({Reference:Aa,Query:Ts,Database:Xw,DataSnapshot:pf,enableLogging:zz,INTERNAL:sG,ServerValue:oG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(zu.Z);const vG=new d.OlP("angularfire2.realtimeDatabaseURL"),wG=new d.OlP("angularfire2.database.use-emulator");let bG=(()=>{class n{constructor(t,r,i,a,u,f,m,v,A,x,N,$,Y,Ce,Ve){this.schedulers=f;const ht=m,it=(0,ui.on)(t,u,r);v&&$C(it,u,A,N,$,Y,x,Ce),this.database=(0,ui.cc)(`${it.name}.database.${i}`,"AngularFireDatabase",it.name,()=>{const Ft=u.runOutsideAngular(()=>it.database(i||void 0));return ht&&Ft.useEmulator(...ht),Ft},[ht])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>fF(this.database,t));let a=i;return r&&(a=r(i)),function _G(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:vF(r,"update"),set:vF(r,"set"),push:i=>r.push(i),remove:mG(r),snapshotChanges:i=>_F(n,i,t).pipe(nn.iC),stateChanges:i=>yF(n,i,t).pipe(nn.iC),auditTrail:i=>function fG(n,e,t){return function gG(n,e,t){return function pG(n,e){return eb(n,"value","on",e).pipe((0,yt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function hH(...n){const e=(0,Xn.jO)(n);return(0,li.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,pn.Xf)(n[m]).subscribe((0,Gt.x)(r,v=>{a[m]=v,!f&&!u[m]&&(u[m]=!0,(f=u.every(Kd.y))&&(u=null))},dH.Z));t.subscribe((0,Gt.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,yt.U)(([i,a])=>{const u=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:u,loadedKeys:f}}),function fH(n){return(0,li.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Gt.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,yt.U)(i=>i.actions))}(n,yF(n,e).pipe(Vc((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(nn.iC),valueChanges:(i,a)=>_F(n,i,t).pipe((0,yt.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),nn.iC)}}(a,this)}object(t){return function yG(n,e){return{query:n,snapshotChanges:()=>wF(n,e.schedulers.outsideAngular)().pipe(nn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>wF(n,e.schedulers.outsideAngular)().pipe(nn.iC,(0,yt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>fF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(vG,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nn.HU),d.LFG(wG,8),d.LFG(nd,8),d.LFG(Im,8),d.LFG(Tm,8),d.LFG(Dm,8),d.LFG(Am,8),d.LFG(Sm,8),d.LFG(xm,8),d.LFG(td,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CG=(()=>{class n{constructor(){op.Z.registerVersion("angularfire",nn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bG]}),n})();const aO=new d.OlP("@sweetalert2/ngx-sweetalert2#swalProvider"),bF=new d.OlP("@sweetalert2/ngx-sweetalert2#fireOnInit"),CF=new d.OlP("@sweetalert2/ngx-sweetalert2#dismissOnDestroy");let EF=(()=>{class n{constructor(t){this.swalProvider=t}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;const t=function r(a){return"function"==typeof a&&void 0===a.version}(this.swalProvider)?this.swalProvider():Promise.resolve(this.swalProvider);this.swalPromiseCache=t.then(a=>function i(a){return"function"==typeof a}(a)?a:a.default)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(aO))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function EG(){return U.e(226).then(U.t.bind(U,5226,19))}let IG=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[EF,{provide:aO,useValue:t.provideSwal||EG},{provide:bF,useValue:t.fireOnInit||!1},{provide:CF,useValue:t.dismissOnDestroy||!0}]}}static forChild(t={}){return{ngModule:n,providers:[...t.provideSwal?[EF,{provide:aO,useValue:t.provideSwal}]:[],...void 0!==t.fireOnInit?[{provide:bF,useValue:t.fireOnInit}]:[],...void 0!==t.dismissOnDestroy?[{provide:CF,useValue:t.dismissOnDestroy}]:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ou]]}),n})();const IF_firebase={projectId:"tp-saladejuegos-d4757",appId:"1:392246231283:web:c011bf4841c4b040697786",storageBucket:"tp-saladejuegos-d4757.appspot.com",apiKey:"AIzaSyDPDLLA6vRd0MdlBzLXFEUWMd3IEz5DqQU",authDomain:"tp-saladejuegos-d4757.firebaseapp.com",messagingSenderId:"392246231283"};class DF{constructor(){return(0,nn.vb)("auth")}}class cO{constructor(e){return e}}const AF="firestore",dO=new d.OlP("angularfire2.firestore-instances");function MG(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new cO(r)}}const PG={provide:class SG{constructor(){return(0,nn.vb)(AF)}},deps:[[new d.FiY,dO]]},OG={provide:cO,useFactory:function xG(n,e){const t=(0,nn.JM)(AF,n,e);return t&&new cO(t)},deps:[[new d.FiY,dO],ep]};let RG=(()=>{class n{constructor(){(0,dh.KN)("angularfire",nn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[OG,PG]}),n})();function kG(n,...e){return{ngModule:RG,providers:[{provide:dO,useFactory:MG(n),multi:!0,deps:[d.R0b,d.zs3,nn.HU,cm,[new d.FiY,DF],[new d.FiY,td],...e]}]}}const NG=(0,nn.u3)(yU,!0),LG={apiKey:"AIzaSyDPDLLA6vRd0MdlBzLXFEUWMd3IEz5DqQU",authDomain:"tp-saladejuegos-d4757.firebaseapp.com",projectId:"tp-saladejuegos-d4757",storageBucket:"tp-saladejuegos-d4757.appspot.com",messagingSenderId:"392246231283",appId:"1:392246231283:web:c011bf4841c4b040697786"};let FG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[wB]}),n.\u0275inj=d.cJS({providers:[oT],imports:[[qs,gB,Lf,bs,ZV,IA,TV,cH,CG,ui.hO.initializeApp(LG),IG.forRoot({provideSwal:()=>Promise.resolve().then(U.t.bind(U,2454,23))}),mC(()=>NO(IF_firebase)),kG(()=>NG())]]}),n})();(0,d.G48)(),aa().bootstrapModule(FG).catch(n=>console.error(n))},5867:(bt,Me,U)=>{"use strict";U.d(Me,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=U(9681);(0,d.registerVersion)("firebase","9.6.10","app")},127:(bt,Me,U)=>{"use strict";U.d(Me,{Z:()=>d.Z});var d=U(3942);d.Z.registerVersion("firebase","9.6.10","app-compat")},5881:(bt,Me,U)=>{"use strict";U.r(Me);var d=U(5861),G=U(3942),L=U(424),ue=U(2090),ge=(U(9681),U(1877),U(4859));function he(){return window}function Q(){return(Q=(0,d.Z)(function*(V,z,q){var pe;const{BuildInfo:$e}=he();(0,L.ap)(z.sessionId,"AuthEvent did not contain a session ID");const et=yield Ae(z.sessionId),Mt={};return(0,L.aq)()?Mt.ibi=$e.packageName:(0,L.ar)()?Mt.apn=$e.packageName:(0,L.as)(V,"operation-not-supported-in-this-environment"),$e.displayName&&(Mt.appDisplayName=$e.displayName),Mt.sessionId=et,(0,L.at)(V,q,z.type,void 0,null!==(pe=z.eventId)&&void 0!==pe?pe:void 0,Mt)})).apply(this,arguments)}function Ye(){return(Ye=(0,d.Z)(function*(V){const{BuildInfo:z}=he(),q={};(0,L.aq)()?q.iosBundleId=z.packageName:(0,L.ar)()?q.androidPackageName=z.packageName:(0,L.as)(V,"operation-not-supported-in-this-environment"),yield(0,L.au)(V,q)})).apply(this,arguments)}function ze(){return(ze=(0,d.Z)(function*(V,z,q){const{cordova:pe}=he();let $e=()=>{};try{yield new Promise((et,Mt)=>{let ut=null;function Lt(){var rn;et();const Lr=null===(rn=pe.plugins.browsertab)||void 0===rn?void 0:rn.close;"function"==typeof Lr&&Lr(),"function"==typeof(null==q?void 0:q.close)&&q.close()}function On(){ut||(ut=window.setTimeout(()=>{Mt((0,L.av)(V,"redirect-cancelled-by-user"))},2e3))}function cr(){"visible"===(null==document?void 0:document.visibilityState)&&On()}z.addPassiveListener(Lt),document.addEventListener("resume",On,!1),(0,L.ar)()&&document.addEventListener("visibilitychange",cr,!1),$e=()=>{z.removePassiveListener(Lt),document.removeEventListener("resume",On,!1),document.removeEventListener("visibilitychange",cr,!1),ut&&window.clearTimeout(ut)}})}finally{$e()}})).apply(this,arguments)}function Ae(V){return st.apply(this,arguments)}function st(){return(st=(0,d.Z)(function*(V){const z=qe(V),q=yield crypto.subtle.digest("SHA-256",z);return Array.from(new Uint8Array(q)).map($e=>$e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qe(V){if((0,L.ap)(/[0-9a-zA-Z]+/.test(V),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(V);const z=new ArrayBuffer(V.length),q=new Uint8Array(z);for(let pe=0;pe<V.length;pe++)q[pe]=V.charCodeAt(pe);return q}class Re extends L.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(z=>{this.resolveInialized=z})}addPassiveListener(z){this.passiveListeners.add(z)}removePassiveListener(z){this.passiveListeners.delete(z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(z){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(z)),super.onEvent(z)}initialized(){var z=this;return(0,d.Z)(function*(){yield z.initPromise})()}}function B(V){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(V){const z=yield ce()._get(ae(V));return z&&(yield ce()._remove(ae(V))),z})).apply(this,arguments)}function me(){const V=[],z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const pe=Math.floor(Math.random()*z.length);V.push(z.charAt(pe))}return V.join("")}function ce(){return(0,L.ax)(L.b)}function ae(V){return(0,L.ay)("authEvent",V.config.apiKey,V.name)}function St(V){if(!(null==V?void 0:V.includes("?")))return{};const[z,...q]=V.split("?");return(0,ue.zd)(q.join("?"))}function lt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.av)("no-auth-event")}}function Qt(){var V;return(null===(V=null==self?void 0:self.location)||void 0===V?void 0:V.protocol)||null}function Pn(V=(0,ue.z$)()){return!("file:"!==Qt()&&"ionic:"!==Qt()||!V.toLowerCase().match(/iphone|ipad|ipod|android/))}function kr(){try{const V=self.localStorage,z=L.aG();if(V)return V.setItem(z,"1"),V.removeItem(z),!function pi(V=(0,ue.z$)()){return function Ir(){return(0,ue.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ur(V=(0,ue.z$)()){return/Edge\/\d+/.test(V)}(V)}()||(0,ue.hl)()}catch(V){return wr()&&(0,ue.hl)()}return!1}function wr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function dn(){return"http:"===Qt()||"https:"===Qt()}()||(0,ue.ru)()||Pn())&&!function rr(){return(0,ue.b$)()||(0,ue.UG)()}()&&kr()&&!wr()}function Fn(){return Pn()&&"undefined"!=typeof document}function Nr(){return(Nr=(0,d.Z)(function*(){return!!Fn()&&new Promise(V=>{const z=setTimeout(()=>{V(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(z),V(!0)})})})).apply(this,arguments)}const fn={LOCAL:"local",NONE:"none",SESSION:"session"},Yn=L.aw,qr="persistence";function mn(V){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(V){yield V._initializationPromise;const z=Tt(),q=L.ay(qr,V.config.apiKey,V.name);z&&z.setItem(q,V._getPersistence())})).apply(this,arguments)}function Tt(){var V;try{return(null===(V=function hn(){return"undefined"!=typeof window?window:null}())||void 0===V?void 0:V.sessionStorage)||null}catch(z){return null}}const rt=L.aw;class dt{constructor(){this.browserResolver=L.ax(L.k),this.cordovaResolver=L.ax(class jn{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aA}_initialize(z){var q=this;return(0,d.Z)(function*(){const pe=z._key();let $e=q.eventManagers.get(pe);return $e||($e=new Re(z),q.eventManagers.set(pe,$e),q.attachCallbackListeners(z,$e)),$e})()}_openPopup(z){(0,L.as)(z,"operation-not-supported-in-this-environment")}_openRedirect(z,q,pe,$e){var et=this;return(0,d.Z)(function*(){!function we(V){var z,q,pe,$e,et,Mt,ut,Lt,On,cr;const rn=he();(0,L.aw)("function"==typeof(null===(z=null==rn?void 0:rn.universalLinks)||void 0===z?void 0:z.subscribe),V,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aw)(void 0!==(null===(q=null==rn?void 0:rn.BuildInfo)||void 0===q?void 0:q.packageName),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aw)("function"==typeof(null===(et=null===($e=null===(pe=null==rn?void 0:rn.cordova)||void 0===pe?void 0:pe.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===et?void 0:et.openUrl),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aw)("function"==typeof(null===(Lt=null===(ut=null===(Mt=null==rn?void 0:rn.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===ut?void 0:ut.browsertab)||void 0===Lt?void 0:Lt.isAvailable),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aw)("function"==typeof(null===(cr=null===(On=null==rn?void 0:rn.cordova)||void 0===On?void 0:On.InAppBrowser)||void 0===cr?void 0:cr.open),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(z);const Mt=yield et._initialize(z);yield Mt.initialized(),Mt.resetRedirect(),(0,L.aB)(),yield et._originValidation(z);const ut=function Te(V,z,q=null){return{type:z,eventId:q,urlResponse:null,sessionId:me(),postBody:null,tenantId:V.tenantId,error:(0,L.av)(V,"no-auth-event")}}(z,pe,$e);yield function Je(V,z){return ce()._set(ae(V),z)}(z,ut);const Lt=yield function X(V,z,q){return Q.apply(this,arguments)}(z,ut,q),On=yield function Fe(V){const{cordova:z}=he();return new Promise(q=>{z.plugins.browsertab.isAvailable(pe=>{let $e=null;pe?z.plugins.browsertab.openUrl(V):$e=z.InAppBrowser.open(V,(0,L.ao)()?"_blank":"_system","location=yes"),q($e)})})}(Lt);return function He(V,z,q){return ze.apply(this,arguments)}(z,Mt,On)})()}_isIframeWebStorageSupported(z,q){throw new Error("Method not implemented.")}_originValidation(z){const q=z._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function oe(V){return Ye.apply(this,arguments)}(z)),this.originValidationPromises[q]}attachCallbackListeners(z,q){const{universalLinks:pe,handleOpenURL:$e,BuildInfo:et}=he(),Mt=setTimeout((0,d.Z)(function*(){yield B(z),q.onEvent(lt())}),500),ut=function(){var cr=(0,d.Z)(function*(rn){clearTimeout(Mt);const Lr=yield B(z);let xi=null;Lr&&(null==rn?void 0:rn.url)&&(xi=function ne(V,z){var q,pe;const $e=function fe(V){const z=St(V),q=z.link?decodeURIComponent(z.link):void 0,pe=St(q).link,$e=z.deep_link_id?decodeURIComponent(z.deep_link_id):void 0;return St($e).link||$e||pe||q||V}(z);if($e.includes("/__/auth/callback")){const et=St($e),Mt=et.firebaseError?function Be(V){try{return JSON.parse(V)}catch(z){return null}}(decodeURIComponent(et.firebaseError)):null,ut=null===(pe=null===(q=null==Mt?void 0:Mt.code)||void 0===q?void 0:q.split("auth/"))||void 0===pe?void 0:pe[1],Lt=ut?(0,L.av)(ut):null;return Lt?{type:V.type,eventId:V.eventId,tenantId:V.tenantId,error:Lt,urlResponse:null,sessionId:null,postBody:null}:{type:V.type,eventId:V.eventId,tenantId:V.tenantId,sessionId:V.sessionId,urlResponse:$e,postBody:null}}return null}(Lr,rn.url)),q.onEvent(xi||lt())});return function(Lr){return cr.apply(this,arguments)}}();void 0!==pe&&"function"==typeof pe.subscribe&&pe.subscribe(null,ut);const Lt=$e,On=`${et.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var cr=(0,d.Z)(function*(rn){if(rn.toLowerCase().startsWith(On)&&ut({url:rn}),"function"==typeof Lt)try{Lt(rn)}catch(Lr){console.error(Lr)}});return function(rn){return cr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aA}_initialize(z){var q=this;return(0,d.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(z)})()}_openPopup(z,q,pe,$e){var et=this;return(0,d.Z)(function*(){return yield et.selectUnderlyingResolver(),et.assertedUnderlyingResolver._openPopup(z,q,pe,$e)})()}_openRedirect(z,q,pe,$e){var et=this;return(0,d.Z)(function*(){return yield et.selectUnderlyingResolver(),et.assertedUnderlyingResolver._openRedirect(z,q,pe,$e)})()}_isIframeWebStorageSupported(z,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(z,q)}_originValidation(z){return this.assertedUnderlyingResolver._originValidation(z)}get _shouldInitProactively(){return Fn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var z=this;return(0,d.Z)(function*(){if(z.underlyingResolver)return;const q=yield function ct(){return Nr.apply(this,arguments)}();z.underlyingResolver=q?z.cordovaResolver:z.browserResolver})()}}function Tr(V){return V.unwrap()}function Jt(V){return zn(V)}function zn(V){const{_tokenResponse:z}=V instanceof ue.ZR?V.customData:V;if(!z)return null;if(!(V instanceof ue.ZR)&&"temporaryProof"in z&&"phoneNumber"in z)return L.P.credentialFromResult(V);const q=z.providerId;if(!q||q===L.o.PASSWORD)return null;let pe;switch(q){case L.o.GOOGLE:pe=L.N;break;case L.o.FACEBOOK:pe=L.M;break;case L.o.GITHUB:pe=L.Q;break;case L.o.TWITTER:pe=L.V;break;default:const{oauthIdToken:$e,oauthAccessToken:et,oauthTokenSecret:Mt,pendingToken:ut,nonce:Lt}=z;return et||Mt||$e||ut?ut?q.startsWith("saml.")?L.aJ._create(q,ut):L.I._fromParams({providerId:q,signInMethod:q,pendingToken:ut,idToken:$e,accessToken:et}):new L.T(q).credential({idToken:$e,accessToken:et,rawNonce:Lt}):null}return V instanceof ue.ZR?pe.credentialFromError(V):pe.credentialFromResult(V)}function _n(V,z){return z.catch(q=>{throw q instanceof ue.ZR&&function Si(V,z){var q;const pe=null===(q=z.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===z.code)z.resolver=new Xt(V,L.am(V,z));else if(pe){const $e=zn(z),et=z;$e&&(et.credential=$e,et.tenantId=pe.tenantId||void 0,et.email=pe.email||void 0,et.phoneNumber=pe.phoneNumber||void 0)}}(V,q),q}).then(q=>{const $e=q.user;return{operationType:q.operationType,credential:Jt(q),additionalUserInfo:L.ak(q),user:Se.getOrCreate($e)}})}function Dt(V,z){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(V,z){const q=yield z;return{verificationId:q.verificationId,confirm:pe=>_n(V,q.confirm(pe))}})).apply(this,arguments)}class Xt{constructor(z,q){this.resolver=q,this.auth=function $n(V){return V.wrapped()}(z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(z){return _n(Tr(this.auth),this.resolver.resolveSignIn(z))}}class Se{constructor(z){this._delegate=z,this.multiFactor=L.an(z)}static getOrCreate(z){return Se.USER_MAP.has(z)||Se.USER_MAP.set(z,new Se(z)),Se.USER_MAP.get(z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(z){return this._delegate.getIdTokenResult(z)}getIdToken(z){return this._delegate.getIdToken(z)}linkAndRetrieveDataWithCredential(z){return this.linkWithCredential(z)}linkWithCredential(z){var q=this;return(0,d.Z)(function*(){return _n(q.auth,L.Y(q._delegate,z))})()}linkWithPhoneNumber(z,q){var pe=this;return(0,d.Z)(function*(){return Dt(pe.auth,L.l(pe._delegate,z,q))})()}linkWithPopup(z){var q=this;return(0,d.Z)(function*(){return _n(q.auth,L.d(q._delegate,z,dt))})()}linkWithRedirect(z){var q=this;return(0,d.Z)(function*(){return yield mn(L.aC(q.auth)),L.g(q._delegate,z,dt)})()}reauthenticateAndRetrieveDataWithCredential(z){return this.reauthenticateWithCredential(z)}reauthenticateWithCredential(z){var q=this;return(0,d.Z)(function*(){return _n(q.auth,L.Z(q._delegate,z))})()}reauthenticateWithPhoneNumber(z,q){return Dt(this.auth,L.r(this._delegate,z,q))}reauthenticateWithPopup(z){return _n(this.auth,L.e(this._delegate,z,dt))}reauthenticateWithRedirect(z){var q=this;return(0,d.Z)(function*(){return yield mn(L.aC(q.auth)),L.h(q._delegate,z,dt)})()}sendEmailVerification(z){return L.aa(this._delegate,z)}unlink(z){var q=this;return(0,d.Z)(function*(){return yield L.aj(q._delegate,z),q})()}updateEmail(z){return L.af(this._delegate,z)}updatePassword(z){return L.ag(this._delegate,z)}updatePhoneNumber(z){return L.u(this._delegate,z)}updateProfile(z){return L.ae(this._delegate,z)}verifyBeforeUpdateEmail(z,q){return L.ab(this._delegate,z,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Se.USER_MAP=new WeakMap;const xe=L.aw;let ot=(()=>{class V{constructor(q,pe){if(this.app=q,pe.isInitialized())return this._delegate=pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$e}=q.options;xe($e,"invalid-api-key",{appName:q.name}),xe($e,"invalid-api-key",{appName:q.name});const et="undefined"!=typeof window?dt:void 0;this._delegate=pe.initialize({options:{persistence:Ht($e,q.name),popupRedirectResolver:et}}),this._delegate._updateErrorMap(L.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Se.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,pe){L.E(this._delegate,q,pe)}applyActionCode(q){return L.a1(this._delegate,q)}checkActionCode(q){return L.a2(this._delegate,q)}confirmPasswordReset(q,pe){return L.a0(this._delegate,q,pe)}createUserWithEmailAndPassword(q,pe){var $e=this;return(0,d.Z)(function*(){return _n($e._delegate,L.a4($e._delegate,q,pe))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return L.a9(this._delegate,q)}isSignInWithEmailLink(q){return L.a7(this._delegate,q)}getRedirectResult(){var q=this;return(0,d.Z)(function*(){xe(Kn(),q._delegate,"operation-not-supported-in-this-environment");const pe=yield L.j(q._delegate,dt);return pe?_n(q._delegate,Promise.resolve(pe)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function an(V,z){(0,L.aC)(V)._logFramework(z)}(this._delegate,q)}onAuthStateChanged(q,pe,$e){const{next:et,error:Mt,complete:ut}=Ct(q,pe,$e);return this._delegate.onAuthStateChanged(et,Mt,ut)}onIdTokenChanged(q,pe,$e){const{next:et,error:Mt,complete:ut}=Ct(q,pe,$e);return this._delegate.onIdTokenChanged(et,Mt,ut)}sendSignInLinkToEmail(q,pe){return L.a6(this._delegate,q,pe)}sendPasswordResetEmail(q,pe){return L.$(this._delegate,q,pe||void 0)}setPersistence(q){var pe=this;return(0,d.Z)(function*(){let $e;switch(function It(V,z){Yn(Object.values(fn).includes(z),V,"invalid-persistence-type"),(0,ue.b$)()?Yn(z!==fn.SESSION,V,"unsupported-persistence-type"):(0,ue.UG)()?Yn(z===fn.NONE,V,"unsupported-persistence-type"):wr()?Yn(z===fn.NONE||z===fn.LOCAL&&(0,ue.hl)(),V,"unsupported-persistence-type"):Yn(z===fn.NONE||kr(),V,"unsupported-persistence-type")}(pe._delegate,q),q){case fn.SESSION:$e=L.a;break;case fn.LOCAL:$e=(yield L.ax(L.i)._isAvailable())?L.i:L.b;break;case fn.NONE:$e=L.K;break;default:return L.as("argument-error",{appName:pe._delegate.name})}return pe._delegate.setPersistence($e)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return _n(this._delegate,L.W(this._delegate))}signInWithCredential(q){return _n(this._delegate,L.X(this._delegate,q))}signInWithCustomToken(q){return _n(this._delegate,L._(this._delegate,q))}signInWithEmailAndPassword(q,pe){return _n(this._delegate,L.a5(this._delegate,q,pe))}signInWithEmailLink(q,pe){return _n(this._delegate,L.a8(this._delegate,q,pe))}signInWithPhoneNumber(q,pe){return Dt(this._delegate,L.s(this._delegate,q,pe))}signInWithPopup(q){var pe=this;return(0,d.Z)(function*(){return xe(Kn(),pe._delegate,"operation-not-supported-in-this-environment"),_n(pe._delegate,L.c(pe._delegate,q,dt))})()}signInWithRedirect(q){var pe=this;return(0,d.Z)(function*(){return xe(Kn(),pe._delegate,"operation-not-supported-in-this-environment"),yield mn(pe._delegate),L.f(pe._delegate,q,dt)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return L.a3(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return V.Persistence=fn,V})();function Ct(V,z,q){let pe=V;"function"!=typeof V&&({next:pe,error:z,complete:q}=V);const $e=pe;return{next:Mt=>$e(Mt&&Se.getOrCreate(Mt)),error:z,complete:q}}function Ht(V,z){const q=function gi(V,z){const q=Tt();if(!q)return[];const pe=L.ay(qr,V,z);switch(q.getItem(pe)){case fn.NONE:return[L.K];case fn.LOCAL:return[L.i,L.a];case fn.SESSION:return[L.a];default:return[]}}(V,z);if("undefined"!=typeof self&&!q.includes(L.i)&&q.push(L.i),"undefined"!=typeof window)for(const pe of[L.b,L.a])q.includes(pe)||q.push(pe);return q.includes(L.K)||q.push(L.K),q}class kt{constructor(){this.providerId="phone",this._delegate=new L.P(Tr(G.Z.auth()))}static credential(z,q){return L.P.credential(z,q)}verifyPhoneNumber(z,q){return this._delegate.verifyPhoneNumber(z,q)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=L.P.PROVIDER_ID;const ee=L.aw;class W{constructor(z,q,pe=G.Z.app()){var $e;ee(null===($e=pe.options)||void 0===$e?void 0:$e.apiKey,"invalid-api-key",{appName:pe.name}),this._delegate=new L.R(z,q,pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _e(V){V.INTERNAL.registerComponent(new ge.wA("auth-compat",z=>{const q=z.getProvider("app-compat").getImmediate(),pe=z.getProvider("auth");return new ot(q,pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.L,FacebookAuthProvider:L.M,GithubAuthProvider:L.Q,GoogleAuthProvider:L.N,OAuthProvider:L.T,SAMLAuthProvider:L.U,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:W,TwitterAuthProvider:L.V,Auth:ot,AuthCredential:L.G,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.2.11")}(G.Z)},8306:(bt,Me,U)=>{"use strict";U.d(Me,{y:()=>X});var d=U(930),G=U(727),L=U(8822),ue=U(4671);var ge=U(2416),he=U(576),ye=U(2806);let X=(()=>{class Fe{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const we=new Fe;return we.source=this,we.operator=ze,we}subscribe(ze,we,Ae){const st=function Ye(Fe){return Fe&&Fe instanceof d.Lv||function oe(Fe){return Fe&&(0,he.m)(Fe.next)&&(0,he.m)(Fe.error)&&(0,he.m)(Fe.complete)}(Fe)&&(0,G.Nn)(Fe)}(ze)?ze:new d.Hp(ze,we,Ae);return(0,ye.x)(()=>{const{operator:qe,source:Le}=this;st.add(qe?qe.call(st,Le):Le?this._subscribe(st):this._trySubscribe(st))}),st}_trySubscribe(ze){try{return this._subscribe(ze)}catch(we){ze.error(we)}}forEach(ze,we){return new(we=Q(we))((Ae,st)=>{const qe=new d.Hp({next:Le=>{try{ze(Le)}catch(Re){st(Re),qe.unsubscribe()}},error:st,complete:Ae});this.subscribe(qe)})}_subscribe(ze){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(ze)}[L.L](){return this}pipe(...ze){return function Ee(Fe){return 0===Fe.length?ue.y:1===Fe.length?Fe[0]:function(ze){return Fe.reduce((we,Ae)=>Ae(we),ze)}}(ze)(this)}toPromise(ze){return new(ze=Q(ze))((we,Ae)=>{let st;this.subscribe(qe=>st=qe,qe=>Ae(qe),()=>we(st))})}}return Fe.create=He=>new Fe(He),Fe})();function Q(Fe){var He;return null!==(He=null!=Fe?Fe:ge.v.Promise)&&void 0!==He?He:Promise}},7579:(bt,Me,U)=>{"use strict";U.d(Me,{x:()=>ge});var d=U(8306),G=U(727);const ue=(0,U(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=U(8737),Ee=U(2806);let ge=(()=>{class ye extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const oe=new he(this,this);return oe.operator=Q,oe}_throwIfClosed(){if(this.closed)throw new ue}next(Q){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const oe of this.currentObservers)oe.next(Q)}})}error(Q){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:oe}=this;for(;oe.length;)oe.shift().error(Q)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:oe,isStopped:Ye,observers:Fe}=this;return oe||Ye?G.Lc:(this.currentObservers=null,Fe.push(Q),new G.w0(()=>{this.currentObservers=null,(0,le.P)(Fe,Q)}))}_checkFinalizedStatuses(Q){const{hasError:oe,thrownError:Ye,isStopped:Fe}=this;oe?Q.error(Ye):Fe&&Q.complete()}asObservable(){const Q=new d.y;return Q.source=this,Q}}return ye.create=(X,Q)=>new he(X,Q),ye})();class he extends ge{constructor(X,Q){super(),this.destination=X,this.source=Q}next(X){var Q,oe;null===(oe=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===oe||oe.call(Q,X)}error(X){var Q,oe;null===(oe=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===oe||oe.call(Q,X)}complete(){var X,Q;null===(Q=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===Q||Q.call(X)}_subscribe(X){var Q,oe;return null!==(oe=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(X))&&void 0!==oe?oe:G.Lc}}},930:(bt,Me,U)=>{"use strict";U.d(Me,{Hp:()=>ze,Lv:()=>oe});var d=U(576),G=U(727),L=U(2416),ue=U(7849),le=U(5032);const Ee=ye("C",void 0,void 0);function ye(Le,Re,Te){return{kind:Le,value:Re,error:Te}}var X=U(3410),Q=U(2806);class oe extends G.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,G.Nn)(Re)&&Re.add(this)):this.destination=qe}static create(Re,Te,Je){return new ze(Re,Te,Je)}next(Re){this.isStopped?st(function he(Le){return ye("N",Le,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?st(function ge(Le){return ye("E",void 0,Le)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?st(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Fe(Le,Re){return Ye.call(Le,Re)}class He{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Re)}catch(Je){we(Je)}}error(Re){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Re)}catch(Je){we(Je)}else we(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Te){we(Te)}}}class ze extends oe{constructor(Re,Te,Je){let B;if(super(),(0,d.m)(Re)||!Re)B={next:null!=Re?Re:void 0,error:null!=Te?Te:void 0,complete:null!=Je?Je:void 0};else{let Xe;this&&L.v.useDeprecatedNextContext?(Xe=Object.create(Re),Xe.unsubscribe=()=>this.unsubscribe(),B={next:Re.next&&Fe(Re.next,Xe),error:Re.error&&Fe(Re.error,Xe),complete:Re.complete&&Fe(Re.complete,Xe)}):B=Re}this.destination=new He(B)}}function we(Le){L.v.useDeprecatedSynchronousErrorHandling?(0,Q.O)(Le):(0,ue.h)(Le)}function st(Le,Re){const{onStoppedNotification:Te}=L.v;Te&&X.z.setTimeout(()=>Te(Le,Re))}const qe={closed:!0,next:le.Z,error:function Ae(Le){throw Le},complete:le.Z}},727:(bt,Me,U)=>{"use strict";U.d(Me,{Lc:()=>Ee,w0:()=>le,Nn:()=>ge});var d=U(576);const L=(0,U(3888).d)(ye=>function(Q){ye(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((oe,Ye)=>`${Ye+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var ue=U(8737);class le{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const Fe of Q)Fe.remove(this);else Q.remove(this);const{initialTeardown:oe}=this;if((0,d.m)(oe))try{oe()}catch(Fe){X=Fe instanceof L?Fe.errors:[Fe]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Fe of Ye)try{he(Fe)}catch(He){X=null!=X?X:[],He instanceof L?X=[...X,...He.errors]:X.push(He)}}if(X)throw new L(X)}}add(X){var Q;if(X&&X!==this)if(this.closed)he(X);else{if(X instanceof le){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(X)}}_hasParent(X){const{_parentage:Q}=this;return Q===X||Array.isArray(Q)&&Q.includes(X)}_addParent(X){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(X),Q):Q?[Q,X]:X}_removeParent(X){const{_parentage:Q}=this;Q===X?this._parentage=null:Array.isArray(Q)&&(0,ue.P)(Q,X)}remove(X){const{_finalizers:Q}=this;Q&&(0,ue.P)(Q,X),X instanceof le&&X._removeParent(this)}}le.EMPTY=(()=>{const ye=new le;return ye.closed=!0,ye})();const Ee=le.EMPTY;function ge(ye){return ye instanceof le||ye&&"closed"in ye&&(0,d.m)(ye.remove)&&(0,d.m)(ye.add)&&(0,d.m)(ye.unsubscribe)}function he(ye){(0,d.m)(ye)?ye():ye.unsubscribe()}},2416:(bt,Me,U)=>{"use strict";U.d(Me,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Me,U)=>{"use strict";U.d(Me,{E:()=>G});const G=new(U(8306).y)(le=>le.complete())},8996:(bt,Me,U)=>{"use strict";U.d(Me,{D:()=>Re});var d=U(8421),G=U(5363),L=U(9468),Ee=U(8306),he=U(2202),ye=U(576),X=U(9672);function oe(Te,Je){if(!Te)throw new Error("Iterable cannot be null");return new Ee.y(B=>{(0,X.f)(B,Je,()=>{const Xe=Te[Symbol.asyncIterator]();(0,X.f)(B,Je,()=>{Xe.next().then(ne=>{ne.done?B.complete():B.next(ne.value)})},0,!0)})})}var Ye=U(3670),Fe=U(8239),He=U(1144),ze=U(6495),we=U(2206),Ae=U(4532),st=U(3260);function Re(Te,Je){return Je?function Le(Te,Je){if(null!=Te){if((0,Ye.c)(Te))return function ue(Te,Je){return(0,d.Xf)(Te).pipe((0,L.R)(Je),(0,G.Q)(Je))}(Te,Je);if((0,He.z)(Te))return function ge(Te,Je){return new Ee.y(B=>{let Xe=0;return Je.schedule(function(){Xe===Te.length?B.complete():(B.next(Te[Xe++]),B.closed||this.schedule())})})}(Te,Je);if((0,Fe.t)(Te))return function le(Te,Je){return(0,d.Xf)(Te).pipe((0,L.R)(Je),(0,G.Q)(Je))}(Te,Je);if((0,we.D)(Te))return oe(Te,Je);if((0,ze.T)(Te))return function Q(Te,Je){return new Ee.y(B=>{let Xe;return(0,X.f)(B,Je,()=>{Xe=Te[he.h](),(0,X.f)(B,Je,()=>{let ne,me;try{({value:ne,done:me}=Xe.next())}catch(ce){return void B.error(ce)}me?B.complete():B.next(ne)},0,!0)}),()=>(0,ye.m)(null==Xe?void 0:Xe.return)&&Xe.return()})}(Te,Je);if((0,st.L)(Te))return function qe(Te,Je){return oe((0,st.Q)(Te),Je)}(Te,Je)}throw(0,Ae.z)(Te)}(Te,Je):(0,d.Xf)(Te)}},8421:(bt,Me,U)=>{"use strict";U.d(Me,{Xf:()=>Ye});var d=U(655),G=U(1144),L=U(8239),ue=U(8306),le=U(3670),Ee=U(2206),ge=U(4532),he=U(6495),ye=U(3260),X=U(576),Q=U(7849),oe=U(8822);function Ye(Le){if(Le instanceof ue.y)return Le;if(null!=Le){if((0,le.c)(Le))return function Fe(Le){return new ue.y(Re=>{const Te=Le[oe.L]();if((0,X.m)(Te.subscribe))return Te.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,G.z)(Le))return function He(Le){return new ue.y(Re=>{for(let Te=0;Te<Le.length&&!Re.closed;Te++)Re.next(Le[Te]);Re.complete()})}(Le);if((0,L.t)(Le))return function ze(Le){return new ue.y(Re=>{Le.then(Te=>{Re.closed||(Re.next(Te),Re.complete())},Te=>Re.error(Te)).then(null,Q.h)})}(Le);if((0,Ee.D)(Le))return Ae(Le);if((0,he.T)(Le))return function we(Le){return new ue.y(Re=>{for(const Te of Le)if(Re.next(Te),Re.closed)return;Re.complete()})}(Le);if((0,ye.L)(Le))return function st(Le){return Ae((0,ye.Q)(Le))}(Le)}throw(0,ge.z)(Le)}function Ae(Le){return new ue.y(Re=>{(function qe(Le,Re){var Te,Je,B,Xe;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Te=(0,d.KL)(Le);!(Je=yield Te.next()).done;)if(Re.next(Je.value),Re.closed)return}catch(ne){B={error:ne}}finally{try{Je&&!Je.done&&(Xe=Te.return)&&(yield Xe.call(Te))}finally{if(B)throw B.error}}Re.complete()})})(Le,Re).catch(Te=>Re.error(Te))})}},6451:(bt,Me,U)=>{"use strict";U.d(Me,{T:()=>Ee});var d=U(8189),G=U(8421),L=U(515),ue=U(7669),le=U(8996);function Ee(...ge){const he=(0,ue.yG)(ge),ye=(0,ue._6)(ge,1/0),X=ge;return X.length?1===X.length?(0,G.Xf)(X[0]):(0,d.J)(ye)((0,le.D)(X,he)):L.E}},5403:(bt,Me,U)=>{"use strict";U.d(Me,{x:()=>G});var d=U(930);function G(ue,le,Ee,ge,he){return new L(ue,le,Ee,ge,he)}class L extends d.Lv{constructor(le,Ee,ge,he,ye,X){super(le),this.onFinalize=ye,this.shouldUnsubscribe=X,this._next=Ee?function(Q){try{Ee(Q)}catch(oe){le.error(oe)}}:super._next,this._error=he?function(Q){try{he(Q)}catch(oe){le.error(oe)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(Q){le.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(bt,Me,U)=>{"use strict";U.d(Me,{U:()=>L});var d=U(4482),G=U(5403);function L(ue,le){return(0,d.e)((Ee,ge)=>{let he=0;Ee.subscribe((0,G.x)(ge,ye=>{ge.next(ue.call(le,ye,he++))}))})}},8189:(bt,Me,U)=>{"use strict";U.d(Me,{J:()=>L});var d=U(5577),G=U(4671);function L(ue=1/0){return(0,d.z)(G.y,ue)}},5577:(bt,Me,U)=>{"use strict";U.d(Me,{z:()=>he});var d=U(4004),G=U(8421),L=U(4482),ue=U(9672),le=U(5403),ge=U(576);function he(ye,X,Q=1/0){return(0,ge.m)(X)?he((oe,Ye)=>(0,d.U)((Fe,He)=>X(oe,Fe,Ye,He))((0,G.Xf)(ye(oe,Ye))),Q):("number"==typeof X&&(Q=X),(0,L.e)((oe,Ye)=>function Ee(ye,X,Q,oe,Ye,Fe,He,ze){const we=[];let Ae=0,st=0,qe=!1;const Le=()=>{qe&&!we.length&&!Ae&&X.complete()},Re=Je=>Ae<oe?Te(Je):we.push(Je),Te=Je=>{Fe&&X.next(Je),Ae++;let B=!1;(0,G.Xf)(Q(Je,st++)).subscribe((0,le.x)(X,Xe=>{null==Ye||Ye(Xe),Fe?Re(Xe):X.next(Xe)},()=>{B=!0},void 0,()=>{if(B)try{for(Ae--;we.length&&Ae<oe;){const Xe=we.shift();He?(0,ue.f)(X,He,()=>Te(Xe)):Te(Xe)}Le()}catch(Xe){X.error(Xe)}}))};return ye.subscribe((0,le.x)(X,Re,()=>{qe=!0,Le()})),()=>{null==ze||ze()}}(oe,Ye,ye,Q)))}},5363:(bt,Me,U)=>{"use strict";U.d(Me,{Q:()=>ue});var d=U(9672),G=U(4482),L=U(5403);function ue(le,Ee=0){return(0,G.e)((ge,he)=>{ge.subscribe((0,L.x)(he,ye=>(0,d.f)(he,le,()=>he.next(ye),Ee),()=>(0,d.f)(he,le,()=>he.complete(),Ee),ye=>(0,d.f)(he,le,()=>he.error(ye),Ee)))})}},3099:(bt,Me,U)=>{"use strict";U.d(Me,{B:()=>Ee});var d=U(8996),G=U(5698),L=U(7579),ue=U(930),le=U(4482);function Ee(he={}){const{connector:ye=(()=>new L.x),resetOnError:X=!0,resetOnComplete:Q=!0,resetOnRefCountZero:oe=!0}=he;return Ye=>{let Fe=null,He=null,ze=null,we=0,Ae=!1,st=!1;const qe=()=>{null==He||He.unsubscribe(),He=null},Le=()=>{qe(),Fe=ze=null,Ae=st=!1},Re=()=>{const Te=Fe;Le(),null==Te||Te.unsubscribe()};return(0,le.e)((Te,Je)=>{we++,!st&&!Ae&&qe();const B=ze=null!=ze?ze:ye();Je.add(()=>{we--,0===we&&!st&&!Ae&&(He=ge(Re,oe))}),B.subscribe(Je),Fe||(Fe=new ue.Hp({next:Xe=>B.next(Xe),error:Xe=>{st=!0,qe(),He=ge(Le,X,Xe),B.error(Xe)},complete:()=>{Ae=!0,qe(),He=ge(Le,Q),B.complete()}}),(0,d.D)(Te).subscribe(Fe))})(Ye)}}function ge(he,ye,...X){return!0===ye?(he(),null):!1===ye?null:ye(...X).pipe((0,G.q)(1)).subscribe(()=>he())}},9468:(bt,Me,U)=>{"use strict";U.d(Me,{R:()=>G});var d=U(4482);function G(L,ue=0){return(0,d.e)((le,Ee)=>{Ee.add(L.schedule(()=>le.subscribe(Ee),ue))})}},5698:(bt,Me,U)=>{"use strict";U.d(Me,{q:()=>ue});var d=U(515),G=U(4482),L=U(5403);function ue(le){return le<=0?()=>d.E:(0,G.e)((Ee,ge)=>{let he=0;Ee.subscribe((0,L.x)(ge,ye=>{++he<=le&&(ge.next(ye),le<=he&&ge.complete())}))})}},8505:(bt,Me,U)=>{"use strict";U.d(Me,{b:()=>le});var d=U(576),G=U(4482),L=U(5403),ue=U(4671);function le(Ee,ge,he){const ye=(0,d.m)(Ee)||ge||he?{next:Ee,error:ge,complete:he}:Ee;return ye?(0,G.e)((X,Q)=>{var oe;null===(oe=ye.subscribe)||void 0===oe||oe.call(ye);let Ye=!0;X.subscribe((0,L.x)(Q,Fe=>{var He;null===(He=ye.next)||void 0===He||He.call(ye,Fe),Q.next(Fe)},()=>{var Fe;Ye=!1,null===(Fe=ye.complete)||void 0===Fe||Fe.call(ye),Q.complete()},Fe=>{var He;Ye=!1,null===(He=ye.error)||void 0===He||He.call(ye,Fe),Q.error(Fe)},()=>{var Fe,He;Ye&&(null===(Fe=ye.unsubscribe)||void 0===Fe||Fe.call(ye)),null===(He=ye.finalize)||void 0===He||He.call(ye)}))}):ue.y}},4408:(bt,Me,U)=>{"use strict";U.d(Me,{o:()=>le});var d=U(727);class G extends d.w0{constructor(ge,he){super()}schedule(ge,he=0){return this}}const L={setInterval(Ee,ge,...he){const{delegate:ye}=L;return(null==ye?void 0:ye.setInterval)?ye.setInterval(Ee,ge,...he):setInterval(Ee,ge,...he)},clearInterval(Ee){const{delegate:ge}=L;return((null==ge?void 0:ge.clearInterval)||clearInterval)(Ee)},delegate:void 0};var ue=U(8737);class le extends G{constructor(ge,he){super(ge,he),this.scheduler=ge,this.work=he,this.pending=!1}schedule(ge,he=0){if(this.closed)return this;this.state=ge;const ye=this.id,X=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(X,ye,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(X,this.id,he),this}requestAsyncId(ge,he,ye=0){return L.setInterval(ge.flush.bind(ge,this),ye)}recycleAsyncId(ge,he,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return he;L.clearInterval(he)}execute(ge,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(ge,he);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,he){let X,ye=!1;try{this.work(ge)}catch(Q){ye=!0,X=Q||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:ge,scheduler:he}=this,{actions:ye}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ye,this),null!=ge&&(this.id=this.recycleAsyncId(he,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Me,U)=>{"use strict";U.d(Me,{v:()=>L});var d=U(6063);class G{constructor(le,Ee=G.now){this.schedulerActionCtor=le,this.now=Ee}schedule(le,Ee=0,ge){return new this.schedulerActionCtor(this,le).schedule(ge,Ee)}}G.now=d.l.now;class L extends G{constructor(le,Ee=G.now){super(le,Ee),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:Ee}=this;if(this._active)return void Ee.push(le);let ge;this._active=!0;do{if(ge=le.execute(le.state,le.delay))break}while(le=Ee.shift());if(this._active=!1,ge){for(;le=Ee.shift();)le.unsubscribe();throw ge}}}},4986:(bt,Me,U)=>{"use strict";U.d(Me,{z:()=>L});var d=U(4408);const L=new(U(7565).v)(d.o)},6063:(bt,Me,U)=>{"use strict";U.d(Me,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(bt,Me,U)=>{"use strict";U.d(Me,{z:()=>d});const d={setTimeout(G,L,...ue){const{delegate:le}=d;return(null==le?void 0:le.setTimeout)?le.setTimeout(G,L,...ue):setTimeout(G,L,...ue)},clearTimeout(G){const{delegate:L}=d;return((null==L?void 0:L.clearTimeout)||clearTimeout)(G)},delegate:void 0}},2202:(bt,Me,U)=>{"use strict";U.d(Me,{h:()=>G});const G=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Me,U)=>{"use strict";U.d(Me,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(bt,Me,U)=>{"use strict";U.d(Me,{_6:()=>Ee,jO:()=>ue,yG:()=>le});var d=U(576);function L(ge){return ge[ge.length-1]}function ue(ge){return(0,d.m)(L(ge))?ge.pop():void 0}function le(ge){return function G(ge){return ge&&(0,d.m)(ge.schedule)}(L(ge))?ge.pop():void 0}function Ee(ge,he){return"number"==typeof L(ge)?ge.pop():he}},8737:(bt,Me,U)=>{"use strict";function d(G,L){if(G){const ue=G.indexOf(L);0<=ue&&G.splice(ue,1)}}U.d(Me,{P:()=>d})},3888:(bt,Me,U)=>{"use strict";function d(G){const ue=G(le=>{Error.call(le),le.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}U.d(Me,{d:()=>d})},2806:(bt,Me,U)=>{"use strict";U.d(Me,{O:()=>ue,x:()=>L});var d=U(2416);let G=null;function L(le){if(d.v.useDeprecatedSynchronousErrorHandling){const Ee=!G;if(Ee&&(G={errorThrown:!1,error:null}),le(),Ee){const{errorThrown:ge,error:he}=G;if(G=null,ge)throw he}}else le()}function ue(le){d.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=le)}},9672:(bt,Me,U)=>{"use strict";function d(G,L,ue,le=0,Ee=!1){const ge=L.schedule(function(){ue(),Ee?G.add(this.schedule(null,le)):this.unsubscribe()},le);if(G.add(ge),!Ee)return ge}U.d(Me,{f:()=>d})},4671:(bt,Me,U)=>{"use strict";function d(G){return G}U.d(Me,{y:()=>d})},1144:(bt,Me,U)=>{"use strict";U.d(Me,{z:()=>d});const d=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(bt,Me,U)=>{"use strict";U.d(Me,{D:()=>G});var d=U(576);function G(L){return Symbol.asyncIterator&&(0,d.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(bt,Me,U)=>{"use strict";function d(G){return"function"==typeof G}U.d(Me,{m:()=>d})},3670:(bt,Me,U)=>{"use strict";U.d(Me,{c:()=>L});var d=U(8822),G=U(576);function L(ue){return(0,G.m)(ue[d.L])}},6495:(bt,Me,U)=>{"use strict";U.d(Me,{T:()=>L});var d=U(2202),G=U(576);function L(ue){return(0,G.m)(null==ue?void 0:ue[d.h])}},8239:(bt,Me,U)=>{"use strict";U.d(Me,{t:()=>G});var d=U(576);function G(L){return(0,d.m)(null==L?void 0:L.then)}},3260:(bt,Me,U)=>{"use strict";U.d(Me,{L:()=>ue,Q:()=>L});var d=U(655),G=U(576);function L(le){return(0,d.FC)(this,arguments,function*(){const ge=le.getReader();try{for(;;){const{value:he,done:ye}=yield(0,d.qq)(ge.read());if(ye)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{ge.releaseLock()}})}function ue(le){return(0,G.m)(null==le?void 0:le.getReader)}},4482:(bt,Me,U)=>{"use strict";U.d(Me,{A:()=>G,e:()=>L});var d=U(576);function G(ue){return(0,d.m)(null==ue?void 0:ue.lift)}function L(ue){return le=>{if(G(le))return le.lift(function(Ee){try{return ue(Ee,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(bt,Me,U)=>{"use strict";function d(){}U.d(Me,{Z:()=>d})},7849:(bt,Me,U)=>{"use strict";U.d(Me,{h:()=>L});var d=U(2416),G=U(3410);function L(ue){G.z.setTimeout(()=>{const{onUnhandledError:le}=d.v;if(!le)throw ue;le(ue)})}},4532:(bt,Me,U)=>{"use strict";function d(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Me,{z:()=>d})},2454:function(bt){bt.exports=function(){"use strict";const Me="SweetAlert2:",d=C=>C.charAt(0).toUpperCase()+C.slice(1),G=C=>Array.prototype.slice.call(C),L=C=>{console.warn("".concat(Me," ").concat("object"==typeof C?C.join(" "):C))},ue=C=>{console.error("".concat(Me," ").concat(C))},le=[],ge=(C,I)=>{(C=>{le.includes(C)||(le.push(C),L(C))})('"'.concat(C,'" is deprecated and will be removed in the next major release. Please use "').concat(I,'" instead.'))},he=C=>"function"==typeof C?C():C,ye=C=>C&&"function"==typeof C.toPromise,X=C=>ye(C)?C.toPromise():Promise.resolve(C),Q=C=>C&&Promise.resolve(C)===C,oe={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ye=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Fe={},He=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ze=C=>Object.prototype.hasOwnProperty.call(oe,C),we=C=>-1!==Ye.indexOf(C),Ae=C=>Fe[C],st=C=>{ze(C)||L('Unknown parameter "'.concat(C,'"'))},qe=C=>{He.includes(C)&&L('The parameter "'.concat(C,'" is incompatible with toasts'))},Le=C=>{Ae(C)&&ge(C,Ae(C))},Je=C=>{const I={};for(const P in C)I[C[P]]="swal2-"+C[P];return I},B=Je(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Xe=Je(["success","warning","info","question","error"]),ne=()=>document.body.querySelector(".".concat(B.container)),me=C=>{const I=ne();return I?I.querySelector(C):null},ce=C=>me(".".concat(C)),ae=()=>ce(B.popup),Be=()=>ce(B.icon),fe=()=>ce(B.title),St=()=>ce(B["html-container"]),cn=()=>ce(B.image),jn=()=>ce(B["progress-steps"]),pt=()=>ce(B["validation-message"]),lt=()=>me(".".concat(B.actions," .").concat(B.confirm)),an=()=>me(".".concat(B.actions," .").concat(B.deny)),vr=()=>me(".".concat(B.loader)),Yt=()=>me(".".concat(B.actions," .").concat(B.cancel)),Qt=()=>ce(B.actions),dn=()=>ce(B.footer),Pn=()=>ce(B["timer-progress-bar"]),rr=()=>ce(B.close),ur=()=>{const C=G(ae().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((P,K)=>{const Pe=parseInt(P.getAttribute("tabindex")),Ke=parseInt(K.getAttribute("tabindex"));return Pe>Ke?1:Pe<Ke?-1:0}),I=G(ae().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(P=>"-1"!==P.getAttribute("tabindex"));return(C=>{const I=[];for(let P=0;P<C.length;P++)-1===I.indexOf(C[P])&&I.push(C[P]);return I})(C.concat(I)).filter(P=>$n(P))},pi=()=>ct(document.body,B.shown)&&!ct(document.body,B["toast-shown"])&&!ct(document.body,B["no-backdrop"]),kr=()=>ae()&&ct(ae(),B.toast),Kn={previousBodyPadding:null},Fn=(C,I)=>{if(C.textContent="",I){const K=(new DOMParser).parseFromString(I,"text/html");G(K.querySelector("head").childNodes).forEach(Pe=>{C.appendChild(Pe)}),G(K.querySelector("body").childNodes).forEach(Pe=>{C.appendChild(Pe)})}},ct=(C,I)=>{if(!I)return!1;const P=I.split(/\s+/);for(let K=0;K<P.length;K++)if(!C.classList.contains(P[K]))return!1;return!0},hn=(C,I,P)=>{if(((C,I)=>{G(C.classList).forEach(P=>{!Object.values(B).includes(P)&&!Object.values(Xe).includes(P)&&!Object.values(I.showClass).includes(P)&&C.classList.remove(P)})})(C,I),I.customClass&&I.customClass[P]){if("string"!=typeof I.customClass[P]&&!I.customClass[P].forEach)return L("Invalid type of customClass.".concat(P,'! Expected string or iterable object, got "').concat(typeof I.customClass[P],'"'));It(C,I.customClass[P])}},fn=(C,I)=>{if(!I)return null;switch(I){case"select":case"textarea":case"file":return C.querySelector(".".concat(B.popup," > .").concat(B[I]));case"checkbox":return C.querySelector(".".concat(B.popup," > .").concat(B.checkbox," input"));case"radio":return C.querySelector(".".concat(B.popup," > .").concat(B.radio," input:checked"))||C.querySelector(".".concat(B.popup," > .").concat(B.radio," input:first-child"));case"range":return C.querySelector(".".concat(B.popup," > .").concat(B.range," input"));default:return C.querySelector(".".concat(B.popup," > .").concat(B.input))}},Yn=C=>{if(C.focus(),"file"!==C.type){const I=C.value;C.value="",C.value=I}},qr=(C,I,P)=>{!C||!I||("string"==typeof I&&(I=I.split(/\s+/).filter(Boolean)),I.forEach(K=>{Array.isArray(C)?C.forEach(Pe=>{P?Pe.classList.add(K):Pe.classList.remove(K)}):P?C.classList.add(K):C.classList.remove(K)}))},It=(C,I)=>{qr(C,I,!0)},mn=(C,I)=>{qr(C,I,!1)},Hn=(C,I)=>{const P=G(C.childNodes);for(let K=0;K<P.length;K++)if(ct(P[K],I))return P[K]},gi=(C,I,P)=>{P==="".concat(parseInt(P))&&(P=parseInt(P)),P||0===parseInt(P)?C.style[I]="number"==typeof P?"".concat(P,"px"):P:C.style.removeProperty(I)},Tt=function(C){C.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},rt=C=>{C.style.display="none"},dt=(C,I,P,K)=>{const Pe=C.querySelector(I);Pe&&(Pe.style[P]=K)},Tr=(C,I,P)=>{I?Tt(C,P):rt(C)},$n=C=>!(!C||!(C.offsetWidth||C.offsetHeight||C.getClientRects().length)),Si=C=>C.scrollHeight>C.clientHeight,zn=C=>{const I=window.getComputedStyle(C),P=parseFloat(I.getPropertyValue("animation-duration")||"0"),K=parseFloat(I.getPropertyValue("transition-duration")||"0");return P>0||K>0},_n=function(C){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const P=Pn();$n(P)&&(I&&(P.style.transition="none",P.style.width="100%"),setTimeout(()=>{P.style.transition="width ".concat(C/1e3,"s linear"),P.style.width="0%"},10))},Gn=()=>"undefined"==typeof window||"undefined"==typeof document,Se={},ot=C=>new Promise(I=>{if(!C)return I();const P=window.scrollX,K=window.scrollY;Se.restoreFocusTimeout=setTimeout(()=>{Se.previousActiveElement&&Se.previousActiveElement.focus?(Se.previousActiveElement.focus(),Se.previousActiveElement=null):document.body&&document.body.focus(),I()},100),window.scrollTo(P,K)}),Ct='\n <div aria-labelledby="'.concat(B.title,'" aria-describedby="').concat(B["html-container"],'" class="').concat(B.popup,'" tabindex="-1">\n   <button type="button" class="').concat(B.close,'"></button>\n   <ul class="').concat(B["progress-steps"],'"></ul>\n   <div class="').concat(B.icon,'"></div>\n   <img class="').concat(B.image,'" />\n   <h2 class="').concat(B.title,'" id="').concat(B.title,'"></h2>\n   <div class="').concat(B["html-container"],'" id="').concat(B["html-container"],'"></div>\n   <input class="').concat(B.input,'" />\n   <input type="file" class="').concat(B.file,'" />\n   <div class="').concat(B.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(B.select,'"></select>\n   <div class="').concat(B.radio,'"></div>\n   <label for="').concat(B.checkbox,'" class="').concat(B.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(B.label,'"></span>\n   </label>\n   <textarea class="').concat(B.textarea,'"></textarea>\n   <div class="').concat(B["validation-message"],'" id="').concat(B["validation-message"],'"></div>\n   <div class="').concat(B.actions,'">\n     <div class="').concat(B.loader,'"></div>\n     <button type="button" class="').concat(B.confirm,'"></button>\n     <button type="button" class="').concat(B.deny,'"></button>\n     <button type="button" class="').concat(B.cancel,'"></button>\n   </div>\n   <div class="').concat(B.footer,'"></div>\n   <div class="').concat(B["timer-progress-bar-container"],'">\n     <div class="').concat(B["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),kt=()=>{Se.currentInstance.resetValidationMessage()},V=C=>{const I=(()=>{const C=ne();return!!C&&(C.remove(),mn([document.documentElement,document.body],[B["no-backdrop"],B["toast-shown"],B["has-column"]]),!0)})();if(Gn())return void ue("SweetAlert2 requires document to initialize");const P=document.createElement("div");P.className=B.container,I&&It(P,B["no-transition"]),Fn(P,Ct);const K=(C=>"string"==typeof C?document.querySelector(C):C)(C.target);K.appendChild(P),(C=>{const I=ae();I.setAttribute("role",C.toast?"alert":"dialog"),I.setAttribute("aria-live",C.toast?"polite":"assertive"),C.toast||I.setAttribute("aria-modal","true")})(C),(C=>{"rtl"===window.getComputedStyle(C).direction&&It(ne(),B.rtl)})(K),(()=>{const C=ae(),I=Hn(C,B.input),P=Hn(C,B.file),K=C.querySelector(".".concat(B.range," input")),Pe=C.querySelector(".".concat(B.range," output")),Ke=Hn(C,B.select),pn=C.querySelector(".".concat(B.checkbox," input")),Xn=Hn(C,B.textarea);I.oninput=kt,P.onchange=kt,Ke.onchange=kt,pn.onchange=kt,Xn.oninput=kt,K.oninput=()=>{kt(),Pe.value=K.value},K.onchange=()=>{kt(),K.nextSibling.value=K.value}})()},z=(C,I)=>{C instanceof HTMLElement?I.appendChild(C):"object"==typeof C?q(C,I):C&&Fn(I,C)},q=(C,I)=>{C.jquery?pe(I,C):Fn(I,C.toString())},pe=(C,I)=>{if(C.textContent="",0 in I)for(let P=0;P in I;P++)C.appendChild(I[P].cloneNode(!0));else C.appendChild(I.cloneNode(!0))},$e=(()=>{if(Gn())return!1;const C=document.createElement("div"),I={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const P in I)if(Object.prototype.hasOwnProperty.call(I,P)&&void 0!==C.style[P])return I[P];return!1})(),Mt=(C,I)=>{const P=Qt(),K=vr();I.showConfirmButton||I.showDenyButton||I.showCancelButton?Tt(P):rt(P),hn(P,I,"actions"),function ut(C,I,P){const K=lt(),Pe=an(),Ke=Yt();On(K,"confirm",P),On(Pe,"deny",P),On(Ke,"cancel",P),function Lt(C,I,P,K){if(!K.buttonsStyling)return mn([C,I,P],B.styled);It([C,I,P],B.styled),K.confirmButtonColor&&(C.style.backgroundColor=K.confirmButtonColor,It(C,B["default-outline"])),K.denyButtonColor&&(I.style.backgroundColor=K.denyButtonColor,It(I,B["default-outline"])),K.cancelButtonColor&&(P.style.backgroundColor=K.cancelButtonColor,It(P,B["default-outline"]))}(K,Pe,Ke,P),P.reverseButtons&&(P.toast?(C.insertBefore(Ke,K),C.insertBefore(Pe,K)):(C.insertBefore(Ke,I),C.insertBefore(Pe,I),C.insertBefore(K,I)))}(P,K,I),Fn(K,I.loaderHtml),hn(K,I,"loader")};function On(C,I,P){Tr(C,P["show".concat(d(I),"Button")],"inline-block"),Fn(C,P["".concat(I,"ButtonText")]),C.setAttribute("aria-label",P["".concat(I,"ButtonAriaLabel")]),C.className=B[I],hn(C,P,"".concat(I,"Button")),It(C,P["".concat(I,"ButtonClass")])}const xi=(C,I)=>{const P=ne();!P||(function cr(C,I){"string"==typeof I?C.style.background=I:I||It([document.documentElement,document.body],B["no-backdrop"])}(P,I.backdrop),function rn(C,I){I in B?It(C,B[I]):(L('The "position" parameter is not valid, defaulting to "center"'),It(C,B.center))}(P,I.position),function Lr(C,I){if(I&&"string"==typeof I){const P="grow-".concat(I);P in B&&It(C,B[P])}}(P,I.grow),hn(P,I,"container"))};var Et={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Sa=["input","file","range","select","radio","checkbox","textarea"],tt=C=>{if(!en[C.input])return ue('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(C.input,'"'));const I=Dr(C.input),P=en[C.input](I,C);Tt(P),setTimeout(()=>{Yn(P)})},An=(C,I)=>{const P=fn(ae(),C);if(P){(C=>{for(let I=0;I<C.attributes.length;I++){const P=C.attributes[I].name;["type","value","style"].includes(P)||C.removeAttribute(P)}})(P);for(const K in I)P.setAttribute(K,I[K])}},Fr=C=>{const I=Dr(C.input);C.customClass&&It(I,C.customClass.input)},Mi=(C,I)=>{(!C.placeholder||I.inputPlaceholder)&&(C.placeholder=I.inputPlaceholder)},Wn=(C,I,P)=>{if(P.inputLabel){C.id=B.input;const K=document.createElement("label"),Pe=B["input-label"];K.setAttribute("for",C.id),K.className=Pe,It(K,P.customClass.inputLabel),K.innerText=P.inputLabel,I.insertAdjacentElement("beforebegin",K)}},Dr=C=>{const I=B[C]?B[C]:B.input;return Hn(ae(),I)},en={};en.text=en.email=en.password=en.number=en.tel=en.url=(C,I)=>("string"==typeof I.inputValue||"number"==typeof I.inputValue?C.value=I.inputValue:Q(I.inputValue)||L('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof I.inputValue,'"')),Wn(C,C,I),Mi(C,I),C.type=I.input,C),en.file=(C,I)=>(Wn(C,C,I),Mi(C,I),C),en.range=(C,I)=>{const P=C.querySelector("input"),K=C.querySelector("output");return P.value=I.inputValue,P.type=I.input,K.value=I.inputValue,Wn(P,C,I),C},en.select=(C,I)=>{if(C.textContent="",I.inputPlaceholder){const P=document.createElement("option");Fn(P,I.inputPlaceholder),P.value="",P.disabled=!0,P.selected=!0,C.appendChild(P)}return Wn(C,C,I),C},en.radio=C=>(C.textContent="",C),en.checkbox=(C,I)=>{const P=fn(ae(),"checkbox");P.value="1",P.id=B.checkbox,P.checked=Boolean(I.inputValue);const K=C.querySelector("span");return Fn(K,I.inputPlaceholder),C},en.textarea=(C,I)=>{C.value=I.inputValue,Mi(C,I),Wn(C,C,I);return setTimeout(()=>{if("MutationObserver"in window){const K=parseInt(window.getComputedStyle(ae()).width);new MutationObserver(()=>{const Ke=C.offsetWidth+(K=>parseInt(window.getComputedStyle(K).marginLeft)+parseInt(window.getComputedStyle(K).marginRight))(C);ae().style.width=Ke>K?"".concat(Ke,"px"):null}).observe(C,{attributes:!0,attributeFilter:["style"]})}}),C};const Qn=(C,I)=>{const P=St();hn(P,I,"htmlContainer"),I.html?(z(I.html,P),Tt(P,"block")):I.text?(P.textContent=I.text,Tt(P,"block")):rt(P),((C,I)=>{const P=ae(),K=Et.innerParams.get(C),Pe=!K||I.input!==K.input;Sa.forEach(Ke=>{const pn=B[Ke],Xn=Hn(P,pn);An(Ke,I.inputAttributes),Xn.className=pn,Pe&&rt(Xn)}),I.input&&(Pe&&tt(I),Fr(I))})(C,I)},mi=(C,I)=>{for(const P in Xe)I.icon!==P&&mn(C,Xe[P]);It(C,Xe[I.icon]),Bs(C,I),yl(),hn(C,I,"icon")},yl=()=>{const C=ae(),I=window.getComputedStyle(C).getPropertyValue("background-color"),P=C.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let K=0;K<P.length;K++)P[K].style.backgroundColor=I},as=(C,I)=>{C.textContent="",Fn(C,I.iconHtml?dr(I.iconHtml):"success"===I.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===I.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':dr({question:"?",warning:"!",info:"i"}[I.icon]))},Bs=(C,I)=>{if(I.iconColor){C.style.color=I.iconColor,C.style.borderColor=I.iconColor;for(const P of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])dt(C,P,"backgroundColor",I.iconColor);dt(C,".swal2-success-ring","borderColor",I.iconColor)}},dr=C=>'<div class="'.concat(B["icon-content"],'">').concat(C,"</div>"),ni=(C,I)=>{const P=jn();if(!I.progressSteps||0===I.progressSteps.length)return rt(P);Tt(P),P.textContent="",I.currentProgressStep>=I.progressSteps.length&&L("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),I.progressSteps.forEach((K,Pe)=>{const Ke=(C=>{const I=document.createElement("li");return It(I,B["progress-step"]),Fn(I,C),I})(K);if(P.appendChild(Ke),Pe===I.currentProgressStep&&It(Ke,B["active-progress-step"]),Pe!==I.progressSteps.length-1){const pn=(C=>{const I=document.createElement("li");return It(I,B["progress-step-line"]),C.progressStepsDistance&&(I.style.width=C.progressStepsDistance),I})(I);P.appendChild(pn)}})},_o=(C,I)=>{C.className="".concat(B.popup," ").concat($n(C)?I.showClass.popup:""),I.toast?(It([document.documentElement,document.body],B["toast-shown"]),It(C,B.toast)):It(C,B.modal),hn(C,I,"popup"),"string"==typeof I.customClass&&It(C,I.customClass),I.icon&&It(C,B["icon-".concat(I.icon)])},js=(C,I)=>{((C,I)=>{const P=ne(),K=ae();I.toast?(gi(P,"width",I.width),K.style.width="100%",K.insertBefore(vr(),Be())):gi(K,"width",I.width),gi(K,"padding",I.padding),I.color&&(K.style.color=I.color),I.background&&(K.style.background=I.background),rt(pt()),_o(K,I)})(0,I),xi(0,I),ni(0,I),((C,I)=>{const P=Et.innerParams.get(C),K=Be();P&&I.icon===P.icon?(as(K,I),mi(K,I)):I.icon||I.iconHtml?I.icon&&-1===Object.keys(Xe).indexOf(I.icon)?(ue('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(I.icon,'"')),rt(K)):(Tt(K),as(K,I),mi(K,I),It(K,I.showClass.icon)):rt(K)})(C,I),((C,I)=>{const P=cn();if(!I.imageUrl)return rt(P);Tt(P,""),P.setAttribute("src",I.imageUrl),P.setAttribute("alt",I.imageAlt),gi(P,"width",I.imageWidth),gi(P,"height",I.imageHeight),P.className=B.image,hn(P,I,"image")})(0,I),((C,I)=>{const P=fe();Tr(P,I.title||I.titleText,"block"),I.title&&z(I.title,P),I.titleText&&(P.innerText=I.titleText),hn(P,I,"title")})(0,I),((C,I)=>{const P=rr();Fn(P,I.closeButtonHtml),hn(P,I,"closeButton"),Tr(P,I.showCloseButton),P.setAttribute("aria-label",I.closeButtonAriaLabel)})(0,I),Qn(C,I),Mt(0,I),((C,I)=>{const P=dn();Tr(P,I.footer),I.footer&&z(I.footer,P),hn(P,I,"footer")})(0,I),"function"==typeof I.didRender&&I.didRender(ae())},Ar=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Yo=()=>{G(document.body.children).forEach(I=>{I.hasAttribute("data-previous-aria-hidden")?(I.setAttribute("aria-hidden",I.getAttribute("data-previous-aria-hidden")),I.removeAttribute("data-previous-aria-hidden")):I.removeAttribute("aria-hidden")})},ls=["swal-title","swal-html","swal-footer"],xd=C=>{const I={};return G(C.querySelectorAll("swal-param")).forEach(P=>{Ds(P,["name","value"]);const K=P.getAttribute("name"),Pe=P.getAttribute("value");"boolean"==typeof oe[K]&&"false"===Pe&&(I[K]=!1),"object"==typeof oe[K]&&(I[K]=JSON.parse(Pe))}),I},us=C=>{const I={};return G(C.querySelectorAll("swal-button")).forEach(P=>{Ds(P,["type","color","aria-label"]);const K=P.getAttribute("type");I["".concat(K,"ButtonText")]=P.innerHTML,I["show".concat(d(K),"Button")]=!0,P.hasAttribute("color")&&(I["".concat(K,"ButtonColor")]=P.getAttribute("color")),P.hasAttribute("aria-label")&&(I["".concat(K,"ButtonAriaLabel")]=P.getAttribute("aria-label"))}),I},Md=C=>{const I={},P=C.querySelector("swal-image");return P&&(Ds(P,["src","width","height","alt"]),P.hasAttribute("src")&&(I.imageUrl=P.getAttribute("src")),P.hasAttribute("width")&&(I.imageWidth=P.getAttribute("width")),P.hasAttribute("height")&&(I.imageHeight=P.getAttribute("height")),P.hasAttribute("alt")&&(I.imageAlt=P.getAttribute("alt"))),I},ru=C=>{const I={},P=C.querySelector("swal-icon");return P&&(Ds(P,["type","color"]),P.hasAttribute("type")&&(I.icon=P.getAttribute("type")),P.hasAttribute("color")&&(I.iconColor=P.getAttribute("color")),I.iconHtml=P.innerHTML),I},Pd=C=>{const I={},P=C.querySelector("swal-input");P&&(Ds(P,["type","label","placeholder","value"]),I.input=P.getAttribute("type")||"text",P.hasAttribute("label")&&(I.inputLabel=P.getAttribute("label")),P.hasAttribute("placeholder")&&(I.inputPlaceholder=P.getAttribute("placeholder")),P.hasAttribute("value")&&(I.inputValue=P.getAttribute("value")));const K=C.querySelectorAll("swal-input-option");return K.length&&(I.inputOptions={},G(K).forEach(Pe=>{Ds(Pe,["value"]);const Ke=Pe.getAttribute("value");I.inputOptions[Ke]=Pe.innerHTML})),I},Qo=(C,I)=>{const P={};for(const K in I){const Pe=I[K],Ke=C.querySelector(Pe);Ke&&(Ds(Ke,[]),P[Pe.replace(/^swal-/,"")]=Ke.innerHTML.trim())}return P},yo=C=>{const I=ls.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);G(C.children).forEach(P=>{const K=P.tagName.toLowerCase();-1===I.indexOf(K)&&L("Unrecognized element <".concat(K,">"))})},Ds=(C,I)=>{G(C.attributes).forEach(P=>{-1===I.indexOf(P.name)&&L(['Unrecognized attribute "'.concat(P.name,'" on <').concat(C.tagName.toLowerCase(),">."),"".concat(I.length?"Allowed attributes are: ".concat(I.join(", ")):"To set the value, use HTML within the element.")])})};var _c={email:(C,I)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(C)?Promise.resolve():Promise.resolve(I||"Invalid email address"),url:(C,I)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(C)?Promise.resolve():Promise.resolve(I||"Invalid URL")};function vo(C){(function Od(C){C.inputValidator||Object.keys(_c).forEach(I=>{C.input===I&&(C.inputValidator=_c[I])})})(C),C.showLoaderOnConfirm&&!C.preConfirm&&L("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function iu(C){(!C.target||"string"==typeof C.target&&!document.querySelector(C.target)||"string"!=typeof C.target&&!C.target.appendChild)&&(L('Target parameter is not valid, defaulting to "body"'),C.target="body")}(C),"string"==typeof C.title&&(C.title=C.title.split("\n").join("<br />")),V(C)}class Rd{constructor(I,P){this.callback=I,this.remaining=P,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(I){const P=this.running;return P&&this.stop(),this.remaining+=I,P&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const gf=()=>{null===Kn.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Kn.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Kn.previousBodyPadding+(()=>{const C=document.createElement("div");C.className=B["scrollbar-measure"],document.body.appendChild(C);const I=C.getBoundingClientRect().width-C.clientWidth;return document.body.removeChild(C),I})(),"px"))},Ma=()=>{const C=navigator.userAgent,I=!!C.match(/iPad/i)||!!C.match(/iPhone/i),P=!!C.match(/WebKit/i);I&&P&&!C.match(/CriOS/i)&&ae().scrollHeight>window.innerHeight-44&&(ne().style.paddingBottom="".concat(44,"px"))},cs=()=>{const C=ne();let I;C.ontouchstart=P=>{I=Jo(P)},C.ontouchmove=P=>{I&&(P.preventDefault(),P.stopPropagation())}},Jo=C=>{const I=C.target,P=ne();return!(_i(C)||yc(C)||I!==P&&(Si(P)||"INPUT"===I.tagName||"TEXTAREA"===I.tagName||Si(St())&&St().contains(I)))},_i=C=>C.touches&&C.touches.length&&"stylus"===C.touches[0].touchType,yc=C=>C.touches&&C.touches.length>1,vc=C=>{const I=ne(),P=ae();"function"==typeof C.willOpen&&C.willOpen(P);const Pe=window.getComputedStyle(document.body).overflowY;ds(I,P,C),setTimeout(()=>{ou(I,P)},10),pi()&&(Pi(I,C.scrollbarPadding,Pe),G(document.body.children).forEach(I=>{I===ne()||I.contains(ne())||(I.hasAttribute("aria-hidden")&&I.setAttribute("data-previous-aria-hidden",I.getAttribute("aria-hidden")),I.setAttribute("aria-hidden","true"))})),!kr()&&!Se.previousActiveElement&&(Se.previousActiveElement=document.activeElement),"function"==typeof C.didOpen&&setTimeout(()=>C.didOpen(P)),mn(I,B["no-transition"])},bo=C=>{const I=ae();if(C.target!==I)return;const P=ne();I.removeEventListener($e,bo),P.style.overflowY="auto"},ou=(C,I)=>{$e&&zn(I)?(C.style.overflowY="hidden",I.addEventListener($e,bo)):C.style.overflowY="auto"},Pi=(C,I,P)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!ct(document.body,B.iosfix)){const I=document.body.scrollTop;document.body.style.top="".concat(-1*I,"px"),It(document.body,B.iosfix),cs(),Ma()}})(),I&&"hidden"!==P&&gf(),setTimeout(()=>{C.scrollTop=0})},ds=(C,I,P)=>{It(C,P.showClass.backdrop),I.style.setProperty("opacity","0","important"),Tt(I,"grid"),setTimeout(()=>{It(I,P.showClass.popup),I.style.removeProperty("opacity")},10),It([document.documentElement,document.body],B.shown),P.heightAuto&&P.backdrop&&!P.toast&&It([document.documentElement,document.body],B["height-auto"])},hs=C=>{let I=ae();I||new Un,I=ae();const P=vr();kr()?rt(Be()):ea(I,C),Tt(P),I.setAttribute("data-loading",!0),I.setAttribute("aria-busy",!0),I.focus()},ea=(C,I)=>{const P=Qt(),K=vr();!I&&$n(lt())&&(I=lt()),Tt(P),I&&(rt(I),K.setAttribute("data-button-to-replace",I.className)),K.parentNode.insertBefore(K,I),It([C,P],B.loading)},kd=C=>C.checked?1:0,Eo=C=>C.checked?C.value:null,wl=C=>C.files.length?null!==C.getAttribute("multiple")?C.files:C.files[0]:null,au=(C,I)=>{const P=ae(),K=Pe=>Ss[I.input](P,fs(Pe),I);ye(I.inputOptions)||Q(I.inputOptions)?(hs(lt()),X(I.inputOptions).then(Pe=>{C.hideLoading(),K(Pe)})):"object"==typeof I.inputOptions?K(I.inputOptions):ue("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof I.inputOptions))},Pa=(C,I)=>{const P=C.getInput();rt(P),X(I.inputValue).then(K=>{P.value="number"===I.input?parseFloat(K)||0:"".concat(K),Tt(P),P.focus(),C.hideLoading()}).catch(K=>{ue("Error in inputValue promise: ".concat(K)),P.value="",Tt(P),P.focus(),C.hideLoading()})},Ss={select:(C,I,P)=>{const K=Hn(C,B.select),Pe=(Ke,pn,Xn)=>{const Gt=document.createElement("option");Gt.value=Xn,Fn(Gt,pn),Gt.selected=Oa(Xn,P.inputValue),Ke.appendChild(Gt)};I.forEach(Ke=>{const pn=Ke[0],Xn=Ke[1];if(Array.isArray(Xn)){const Gt=document.createElement("optgroup");Gt.label=pn,Gt.disabled=!1,K.appendChild(Gt),Xn.forEach(yt=>Pe(Gt,yt[1],yt[0]))}else Pe(K,Xn,pn)}),K.focus()},radio:(C,I,P)=>{const K=Hn(C,B.radio);I.forEach(Ke=>{const pn=Ke[0],Xn=Ke[1],Gt=document.createElement("input"),yt=document.createElement("label");Gt.type="radio",Gt.name=B.radio,Gt.value=pn,Oa(pn,P.inputValue)&&(Gt.checked=!0);const Rs=document.createElement("span");Fn(Rs,Xn),Rs.className=B.label,yt.appendChild(Gt),yt.appendChild(Rs),K.appendChild(yt)});const Pe=K.querySelectorAll("input");Pe.length&&Pe[0].focus()}},fs=C=>{const I=[];return"undefined"!=typeof Map&&C instanceof Map?C.forEach((P,K)=>{let Pe=P;"object"==typeof Pe&&(Pe=fs(Pe)),I.push([K,Pe])}):Object.keys(C).forEach(P=>{let K=C[P];"object"==typeof K&&(K=fs(K)),I.push([P,K])}),I},Oa=(C,I)=>I&&I.toString()===C.toString();function Sn(){const C=Et.innerParams.get(this);if(!C)return;const I=Et.domCache.get(this);rt(I.loader),kr()?C.icon&&Tt(Be()):Hs(I),mn([I.popup,I.actions],B.loading),I.popup.removeAttribute("aria-busy"),I.popup.removeAttribute("data-loading"),I.confirmButton.disabled=!1,I.denyButton.disabled=!1,I.cancelButton.disabled=!1}const Hs=C=>{const I=C.popup.getElementsByClassName(C.loader.getAttribute("data-button-to-replace"));I.length?Tt(I[0],"inline-block"):!$n(lt())&&!$n(an())&&!$n(Yt())&&rt(C.actions)};var yn={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const zs=()=>lt()&&lt().click(),tr=C=>{C.keydownTarget&&C.keydownHandlerAdded&&(C.keydownTarget.removeEventListener("keydown",C.keydownHandler,{capture:C.keydownListenerCapture}),C.keydownHandlerAdded=!1)},Zr=(C,I,P)=>{const K=ur();if(K.length)return(I+=P)===K.length?I=0:-1===I&&(I=K.length-1),K[I].focus();ae().focus()},Ur=["ArrowRight","ArrowDown"],ps=["ArrowLeft","ArrowUp"],Gs=(C,I,P)=>{const K=Et.innerParams.get(C);!K||I.isComposing||229===I.keyCode||(K.stopKeydownPropagation&&I.stopPropagation(),"Enter"===I.key?Io(C,I,K):"Tab"===I.key?Oi(I,K):[...Ur,...ps].includes(I.key)?Gi(I.key):"Escape"===I.key&&gs(I,K,P))},Io=(C,I,P)=>{if(he(P.allowEnterKey)&&I.target&&C.getInput()&&I.target.outerHTML===C.getInput().outerHTML){if(["textarea","file"].includes(P.input))return;zs(),I.preventDefault()}},Oi=(C,I)=>{const P=C.target,K=ur();let Pe=-1;for(let Ke=0;Ke<K.length;Ke++)if(P===K[Ke]){Pe=Ke;break}Zr(0,Pe,C.shiftKey?-1:1),C.stopPropagation(),C.preventDefault()},Gi=C=>{if(![lt(),an(),Yt()].includes(document.activeElement))return;const Pe=Ur.includes(C)?"nextElementSibling":"previousElementSibling";let Ke=document.activeElement;for(let pn=0;pn<Qt().children.length;pn++){if(Ke=Ke[Pe],!Ke)return;if($n(Ke)&&Ke instanceof HTMLButtonElement)break}Ke instanceof HTMLButtonElement&&Ke.focus()},gs=(C,I,P)=>{he(I.allowEscapeKey)&&(C.preventDefault(),P(Ar.esc))};function At(C,I,P,K){kr()?uu(C,K):(ot(P).then(()=>uu(C,K)),tr(Se)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(I.setAttribute("style","display:none !important"),I.removeAttribute("class"),I.innerHTML=""):I.remove(),pi()&&(null!==Kn.previousBodyPadding&&(document.body.style.paddingRight="".concat(Kn.previousBodyPadding,"px"),Kn.previousBodyPadding=null),(()=>{if(ct(document.body,B.iosfix)){const C=parseInt(document.body.style.top,10);mn(document.body,B.iosfix),document.body.style.top="",document.body.scrollTop=-1*C}})(),Yo()),function ta(){mn([document.documentElement,document.body],[B.shown,B["height-auto"],B["no-backdrop"],B["toast-shown"]])}()}function na(C){C=ia(C);const I=yn.swalPromiseResolve.get(this),P=lu(this);this.isAwaitingPromise()?C.isDismissed||(ra(this),I(C)):P&&I(C)}const lu=C=>{const I=ae();if(!I)return!1;const P=Et.innerParams.get(C);if(!P||ct(I,P.hideClass.popup))return!1;mn(I,P.showClass.popup),It(I,P.hideClass.popup);const K=ne();return mn(K,P.showClass.backdrop),It(K,P.hideClass.backdrop),Oe(C,I,P),!0};const ra=C=>{C.isAwaitingPromise()&&(Et.awaitingPromise.delete(C),Et.innerParams.get(C)||C._destroy())},ia=C=>void 0===C?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},C),Oe=(C,I,P)=>{const K=ne(),Pe=$e&&zn(I);"function"==typeof P.willClose&&P.willClose(I),Pe?zt(C,I,K,P.returnFocus,P.didClose):At(C,K,P.returnFocus,P.didClose)},zt=(C,I,P,K,Pe)=>{Se.swalCloseEventFinishedCallback=At.bind(null,C,P,K,Pe),I.addEventListener($e,function(Ke){Ke.target===I&&(Se.swalCloseEventFinishedCallback(),delete Se.swalCloseEventFinishedCallback)})},uu=(C,I)=>{setTimeout(()=>{"function"==typeof I&&I.bind(C.params)(),C._destroy()})};function kn(C,I,P){const K=Et.domCache.get(C);I.forEach(Pe=>{K[Pe].disabled=P})}function sa(C,I){if(!C)return!1;if("radio"===C.type){const K=C.parentNode.parentNode.querySelectorAll("input");for(let Pe=0;Pe<K.length;Pe++)K[Pe].disabled=I}else C.disabled=I}const hr=C=>{const I={};return Object.keys(C).forEach(P=>{we(P)?I[P]=C[P]:L('Invalid parameter to update: "'.concat(P,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),I};const xo=C=>{Ws(C),delete C.params,delete Se.keydownHandler,delete Se.keydownTarget,delete Se.currentInstance},Ws=C=>{C.isAwaitingPromise()?(Vr(Et,C),Et.awaitingPromise.set(C,!0)):(Vr(yn,C),Vr(Et,C))},Vr=(C,I)=>{for(const P in C)C[P].delete(I)};var cu=Object.freeze({hideLoading:Sn,disableLoading:Sn,getInput:function $s(C){const I=Et.innerParams.get(C||this),P=Et.domCache.get(C||this);return P?fn(P.popup,I.input):null},close:na,isAwaitingPromise:function To(){return!!Et.awaitingPromise.get(this)},rejectPromise:function Do(C){const I=yn.swalPromiseReject.get(this);ra(this),I&&I(C)},handleAwaitingPromise:ra,closePopup:na,closeModal:na,closeToast:na,enableButtons:function Ms(){kn(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Ri(){kn(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Cl(){return sa(this.getInput(),!1)},disableInput:function oa(){return sa(this.getInput(),!0)},showValidationMessage:function Nd(C){const I=Et.domCache.get(this),P=Et.innerParams.get(this);Fn(I.validationMessage,C),I.validationMessage.className=B["validation-message"],P.customClass&&P.customClass.validationMessage&&It(I.validationMessage,P.customClass.validationMessage),Tt(I.validationMessage);const K=this.getInput();K&&(K.setAttribute("aria-invalid",!0),K.setAttribute("aria-describedby",B["validation-message"]),Yn(K),It(K,B.inputerror))},resetValidationMessage:function El(){const C=Et.domCache.get(this);C.validationMessage&&rt(C.validationMessage);const I=this.getInput();I&&(I.removeAttribute("aria-invalid"),I.removeAttribute("aria-describedby"),mn(I,B.inputerror))},getProgressSteps:function Ao(){return Et.domCache.get(this).progressSteps},update:function So(C){const I=ae(),P=Et.innerParams.get(this);if(!I||ct(I,P.hideClass.popup))return L("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const K=hr(C),Pe=Object.assign({},P,K);js(this,Pe),Et.innerParams.set(this,Pe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,C),writable:!1,enumerable:!0}})},_destroy:function Wi(){const C=Et.domCache.get(this),I=Et.innerParams.get(this);I?(C.popup&&Se.swalCloseEventFinishedCallback&&(Se.swalCloseEventFinishedCallback(),delete Se.swalCloseEventFinishedCallback),Se.deferDisposalTimer&&(clearTimeout(Se.deferDisposalTimer),delete Se.deferDisposalTimer),"function"==typeof I.didDestroy&&I.didDestroy(),xo(this)):Ws(this)}});const ka=(C,I)=>{const P=Et.innerParams.get(C);if(!P.input)return ue('The "input" parameter is needed to be set when using returnInputValueOn'.concat(d(I)));const K=((C,I)=>{const P=C.getInput();if(!P)return null;switch(I.input){case"checkbox":return kd(P);case"radio":return Eo(P);case"file":return wl(P);default:return I.inputAutoTrim?P.value.trim():P.value}})(C,P);P.inputValidator?qs(C,K,I):C.getInput().checkValidity()?"deny"===I?Il(C,K):Po(C,K):(C.enableButtons(),C.showValidationMessage(P.validationMessage))},qs=(C,I,P)=>{const K=Et.innerParams.get(C);C.disableInput(),Promise.resolve().then(()=>X(K.inputValidator(I,K.validationMessage))).then(Ke=>{C.enableButtons(),C.enableInput(),Ke?C.showValidationMessage(Ke):"deny"===P?Il(C,I):Po(C,I)})},Il=(C,I)=>{const P=Et.innerParams.get(C||void 0);P.showLoaderOnDeny&&hs(an()),P.preDeny?(Et.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>X(P.preDeny(I,P.validationMessage))).then(Pe=>{!1===Pe?(C.hideLoading(),ra(C)):C.closePopup({isDenied:!0,value:void 0===Pe?I:Pe})}).catch(Pe=>La(C||void 0,Pe))):C.closePopup({isDenied:!0,value:I})},Na=(C,I)=>{C.closePopup({isConfirmed:!0,value:I})},La=(C,I)=>{C.rejectPromise(I)},Po=(C,I)=>{const P=Et.innerParams.get(C||void 0);P.showLoaderOnConfirm&&hs(),P.preConfirm?(C.resetValidationMessage(),Et.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>X(P.preConfirm(I,P.validationMessage))).then(Pe=>{$n(pt())||!1===Pe?(C.hideLoading(),ra(C)):Na(C,void 0===Pe?I:Pe)}).catch(Pe=>La(C||void 0,Pe))):Na(C,I)},Zs=(C,I,P)=>{I.popup.onclick=()=>{const K=Et.innerParams.get(C);K&&(Tl(K)||K.timer||K.input)||P(Ar.close)}},Tl=C=>C.showConfirmButton||C.showDenyButton||C.showCancelButton||C.showCloseButton;let Fa=!1;const hu=C=>{C.popup.onmousedown=()=>{C.container.onmouseup=function(I){C.container.onmouseup=void 0,I.target===C.container&&(Fa=!0)}}},Ks=C=>{C.container.onmousedown=()=>{C.popup.onmouseup=function(I){C.popup.onmouseup=void 0,(I.target===C.popup||C.popup.contains(I.target))&&(Fa=!0)}}},Ps=(C,I,P)=>{I.container.onclick=K=>{const Pe=Et.innerParams.get(C);Fa?Fa=!1:K.target===I.container&&he(Pe.allowOutsideClick)&&P(Ar.backdrop)}},Br=C=>C instanceof Element||(C=>"object"==typeof C&&C.jquery)(C);const mf=()=>{if(Se.timeout)return(()=>{const C=Pn(),I=parseInt(window.getComputedStyle(C).width);C.style.removeProperty("transition"),C.style.width="100%";const K=I/parseInt(window.getComputedStyle(C).width)*100;C.style.removeProperty("transition"),C.style.width="".concat(K,"%")})(),Se.timeout.stop()},Ua=()=>{if(Se.timeout){const C=Se.timeout.start();return _n(C),C}};let Va=!1;const Oo={};const pu=C=>{for(let I=C.target;I&&I!==document;I=I.parentNode)for(const P in Oo){const K=I.getAttribute(P);if(K)return void Oo[P].fire({template:K})}};var gu=Object.freeze({isValidParameter:ze,isUpdatableParameter:we,isDeprecatedParameter:Ae,argsToParams:C=>{const I={};return"object"!=typeof C[0]||Br(C[0])?["title","html","icon"].forEach((P,K)=>{const Pe=C[K];"string"==typeof Pe||Br(Pe)?I[P]=Pe:void 0!==Pe&&ue("Unexpected type of ".concat(P,'! Expected "string" or "Element", got ').concat(typeof Pe))}):Object.assign(I,C[0]),I},isVisible:()=>$n(ae()),clickConfirm:zs,clickDeny:()=>an()&&an().click(),clickCancel:()=>Yt()&&Yt().click(),getContainer:ne,getPopup:ae,getTitle:fe,getHtmlContainer:St,getImage:cn,getIcon:Be,getInputLabel:()=>ce(B["input-label"]),getCloseButton:rr,getActions:Qt,getConfirmButton:lt,getDenyButton:an,getCancelButton:Yt,getLoader:vr,getFooter:dn,getTimerProgressBar:Pn,getFocusableElements:ur,getValidationMessage:pt,isLoading:()=>ae().hasAttribute("data-loading"),fire:function Jn(){const C=this;for(var I=arguments.length,P=new Array(I),K=0;K<I;K++)P[K]=arguments[K];return new C(...P)},mixin:function wc(C){return class I extends(this){_main(K,Pe){return super._main(K,Object.assign({},C,Pe))}}},showLoading:hs,enableLoading:hs,getTimerLeft:()=>Se.timeout&&Se.timeout.getTimerLeft(),stopTimer:mf,resumeTimer:Ua,toggleTimer:()=>{const C=Se.timeout;return C&&(C.running?mf():Ua())},increaseTimer:C=>{if(Se.timeout){const I=Se.timeout.increase(C);return _n(I,!0),I}},isTimerRunning:()=>Se.timeout&&Se.timeout.isRunning(),bindClickHandler:function ir(){Oo[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Va||(document.body.addEventListener("click",pu),Va=!0)}});let ki;class ms{constructor(){if("undefined"==typeof window)return;ki=this;for(var I=arguments.length,P=new Array(I),K=0;K<I;K++)P[K]=arguments[K];const Pe=Object.freeze(this.constructor.argsToParams(P));Object.defineProperties(this,{params:{value:Pe,writable:!1,enumerable:!0,configurable:!0}});const Ke=this._main(this.params);Et.promise.set(this,Ke)}_main(I){let P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(C=>{!C.backdrop&&C.allowOutsideClick&&L('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const I in C)st(I),C.toast&&qe(I),Le(I)})(Object.assign({},P,I)),Se.currentInstance&&(Se.currentInstance._destroy(),pi()&&Yo()),Se.currentInstance=this;const K=bc(I,P);vo(K),Object.freeze(K),Se.timeout&&(Se.timeout.stop(),delete Se.timeout),clearTimeout(Se.restoreFocusTimeout);const Pe=Ro(this);return js(this,K),Et.innerParams.set(this,K),ca(this,Pe,K)}then(I){return Et.promise.get(this).then(I)}finally(I){return Et.promise.get(this).finally(I)}}const ca=(C,I,P)=>new Promise((K,Pe)=>{const Ke=pn=>{C.closePopup({isDismissed:!0,dismiss:pn})};yn.swalPromiseResolve.set(C,K),yn.swalPromiseReject.set(C,Pe),I.confirmButton.onclick=()=>(C=>{const I=Et.innerParams.get(C);C.disableButtons(),I.input?ka(C,"confirm"):Po(C,!0)})(C),I.denyButton.onclick=()=>(C=>{const I=Et.innerParams.get(C);C.disableButtons(),I.returnInputValueOnDeny?ka(C,"deny"):Il(C,!1)})(C),I.cancelButton.onclick=()=>((C,I)=>{C.disableButtons(),I(Ar.cancel)})(C,Ke),I.closeButton.onclick=()=>Ke(Ar.close),((C,I,P)=>{Et.innerParams.get(C).toast?Zs(C,I,P):(hu(I),Ks(I),Ps(C,I,P))})(C,I,Ke),((C,I,P,K)=>{tr(I),P.toast||(I.keydownHandler=Pe=>Gs(C,Pe,K),I.keydownTarget=P.keydownListenerCapture?window:ae(),I.keydownListenerCapture=P.keydownListenerCapture,I.keydownTarget.addEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!0)})(C,Se,P,Ke),((C,I)=>{"select"===I.input||"radio"===I.input?au(C,I):["text","email","number","tel","textarea"].includes(I.input)&&(ye(I.inputValue)||Q(I.inputValue))&&(hs(lt()),Pa(C,I))})(C,P),vc(P),mu(Se,P,Ke),Cc(I,P),setTimeout(()=>{I.container.scrollTop=0})}),bc=(C,I)=>{const P=(C=>{const I="string"==typeof C.template?document.querySelector(C.template):C.template;if(!I)return{};const P=I.content;return yo(P),Object.assign(xd(P),us(P),Md(P),ru(P),Pd(P),Qo(P,ls))})(C),K=Object.assign({},oe,I,P,C);return K.showClass=Object.assign({},oe.showClass,K.showClass),K.hideClass=Object.assign({},oe.hideClass,K.hideClass),K},Ro=C=>{const I={popup:ae(),container:ne(),actions:Qt(),confirmButton:lt(),denyButton:an(),cancelButton:Yt(),loader:vr(),closeButton:rr(),validationMessage:pt(),progressSteps:jn()};return Et.domCache.set(C,I),I},mu=(C,I,P)=>{const K=Pn();rt(K),I.timer&&(C.timeout=new Rd(()=>{P("timer"),delete C.timeout},I.timer),I.timerProgressBar&&(Tt(K),hn(K,I,"timerProgressBar"),setTimeout(()=>{C.timeout&&C.timeout.running&&_n(I.timer)})))},Cc=(C,I)=>{if(!I.toast){if(!he(I.allowEnterKey))return Nn();_f(C,I)||Zr(0,-1,1)}},_f=(C,I)=>I.focusDeny&&$n(C.denyButton)?(C.denyButton.focus(),!0):I.focusCancel&&$n(C.cancelButton)?(C.cancelButton.focus(),!0):!(!I.focusConfirm||!$n(C.confirmButton)||(C.confirmButton.focus(),0)),Nn=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(ms.prototype,cu),Object.assign(ms,gu),Object.keys(cu).forEach(C=>{ms[C]=function(){if(ki)return ki[C](...arguments)}}),ms.DismissReason=Ar,ms.version="11.4.8";const Un=ms;return Un.default=Un,Un}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2)},655:(bt,Me,U)=>{"use strict";function ue(ne,me){var ce={};for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&me.indexOf(ae)<0&&(ce[ae]=ne[ae]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(ne);Be<ae.length;Be++)me.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(ne,ae[Be])&&(ce[ae[Be]]=ne[ae[Be]])}return ce}function he(ne,me,ce,ae){return new(ce||(ce=Promise))(function(fe,St){function cn(lt){try{pt(ae.next(lt))}catch(an){St(an)}}function jn(lt){try{pt(ae.throw(lt))}catch(an){St(an)}}function pt(lt){lt.done?fe(lt.value):function Be(fe){return fe instanceof ce?fe:new ce(function(St){St(fe)})}(lt.value).then(cn,jn)}pt((ae=ae.apply(ne,me||[])).next())})}function we(ne){return this instanceof we?(this.v=ne,this):new we(ne)}function Ae(ne,me,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=ce.apply(ne,me||[]),fe=[];return Be={},St("next"),St("throw"),St("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function St(Tn){ae[Tn]&&(Be[Tn]=function(vr){return new Promise(function(Yt,Qt){fe.push([Tn,vr,Yt,Qt])>1||cn(Tn,vr)})})}function cn(Tn,vr){try{!function jn(Tn){Tn.value instanceof we?Promise.resolve(Tn.value.v).then(pt,lt):an(fe[0][2],Tn)}(ae[Tn](vr))}catch(Yt){an(fe[0][3],Yt)}}function pt(Tn){cn("next",Tn)}function lt(Tn){cn("throw",Tn)}function an(Tn,vr){Tn(vr),fe.shift(),fe.length&&cn(fe[0][0],fe[0][1])}}function qe(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,me=ne[Symbol.asyncIterator];return me?me.call(ne):(ne=function oe(ne){var me="function"==typeof Symbol&&Symbol.iterator,ce=me&&ne[me],ae=0;if(ce)return ce.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&ae>=ne.length&&(ne=void 0),{value:ne&&ne[ae++],done:!ne}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),ce={},ae("next"),ae("throw"),ae("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function ae(fe){ce[fe]=ne[fe]&&function(St){return new Promise(function(cn,jn){!function Be(fe,St,cn,jn){Promise.resolve(jn).then(function(pt){fe({value:pt,done:cn})},St)}(cn,jn,(St=ne[fe](St)).done,St.value)})}}}U.d(Me,{FC:()=>Ae,KL:()=>qe,_T:()=>ue,mG:()=>he,qq:()=>we})},5e3:(bt,Me,U)=>{"use strict";U.d(Me,{$8M:()=>bu,$Z:()=>Pv,AFp:()=>lI,AaK:()=>he,BQk:()=>sp,CHM:()=>uu,CRH:()=>C0,CZH:()=>O0,CqO:()=>wA,DdM:()=>Mp,EJc:()=>D_,EpF:()=>td,F4k:()=>Em,FYo:()=>NE,FiY:()=>Fi,G48:()=>G0,Gf:()=>b0,GfV:()=>FE,Gpc:()=>Q,JOm:()=>Vo,LFG:()=>Ze,LSH:()=>Pg,Lbi:()=>cI,MAs:()=>Cv,MGl:()=>Nv,NdJ:()=>kv,OlP:()=>sr,Oqu:()=>up,PXZ:()=>jp,Q6J:()=>kC,QGY:()=>FC,Qsj:()=>Jr,R0b:()=>ao,RDi:()=>Ss,Rgc:()=>gr,SBq:()=>Mh,Sil:()=>Hh,Suo:()=>tc,TTD:()=>wo,TgZ:()=>Rv,VLi:()=>_d,W1O:()=>nI,X6Q:()=>$p,XFs:()=>ct,Xpm:()=>kt,Y36:()=>yh,YKP:()=>h_,YNc:()=>wv,Yjl:()=>$e,Yz7:()=>Yt,ZZ4:()=>N_,_Bn:()=>h0,_UZ:()=>NC,_Vd:()=>Xu,_c5:()=>LS,_uU:()=>Hv,aQg:()=>zp,c2e:()=>dl,cJS:()=>dn,cg1:()=>gp,dDg:()=>mI,deG:()=>Vd,dqk:()=>Jt,eFA:()=>vI,ekj:()=>rd,g9A:()=>md,h0i:()=>ad,hGG:()=>FS,hij:()=>cp,iGM:()=>Ut,ifc:()=>Tt,ip1:()=>P0,kL8:()=>di,lG2:()=>pe,n5z:()=>wu,oAB:()=>V,oxw:()=>BC,q4F:()=>UE,qLn:()=>li,qOj:()=>_C,qZA:()=>vh,s9C:()=>jC,sBO:()=>CI,sIi:()=>Qc,s_b:()=>y_,soG:()=>ic,tBr:()=>Ns,tb:()=>R0,tp0:()=>ai,uIk:()=>hh,vHH:()=>He,vpe:()=>Ho,wAp:()=>Rt,xp6:()=>Zy,ynx:()=>bm,z2F:()=>P_,zSh:()=>om,zs3:()=>ya});var d=U(7579),G=U(727),L=U(8306),ue=U(6451),le=U(3099);function Ee(s){for(let o in s)if(s[o]===Ee)return o;throw Error("Could not find renamed property on target object.")}function ge(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ye(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const X=Ee({__forward_ref__:Ee});function Q(s){return s.__forward_ref__=Q,s.toString=function(){return he(this())},s}function oe(s){return Ye(s)?s():s}function Ye(s){return"function"==typeof s&&s.hasOwnProperty(X)&&s.__forward_ref__===Q}class He extends Error{constructor(o,l){super(function ze(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function we(s){return"string"==typeof s?s:null==s?"":String(s)}function Ae(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():we(s)}function Re(s,o){const l=o?` in ${o}`:"";throw new He(-201,`No provider for ${Ae(s)} found${l}`)}function pt(s,o){null==s&&function lt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function dn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Pn(s){return rr(s,kr)||rr(s,Kn)}function rr(s,o){return s.hasOwnProperty(o)?s[o]:null}function pi(s){return s&&(s.hasOwnProperty(wr)||s.hasOwnProperty(Fn))?s[wr]:null}const kr=Ee({\u0275prov:Ee}),wr=Ee({\u0275inj:Ee}),Kn=Ee({ngInjectableDef:Ee}),Fn=Ee({ngInjectorDef:Ee});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let Nr;function fn(s){const o=Nr;return Nr=s,o}function Yn(s,o,l){const c=Pn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&ct.Optional?null:void 0!==o?o:void Re(he(s),"Injector")}function It(s){return{toString:s}.toString()}var mn=(()=>((mn=mn||{})[mn.OnPush=0]="OnPush",mn[mn.Default=1]="Default",mn))(),Tt=(()=>{return(s=Tt||(Tt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Tt;var s})();const rt="undefined"!=typeof globalThis&&globalThis,dt="undefined"!=typeof window&&window,Tr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Jt=rt||"undefined"!=typeof global&&global||dt||Tr,_n={},Dt=[],Gn=Ee({\u0275cmp:Ee}),Xt=Ee({\u0275dir:Ee}),Se=Ee({\u0275pipe:Ee}),xe=Ee({\u0275mod:Ee}),ot=Ee({\u0275fac:Ee}),Ct=Ee({__NG_ELEMENT_ID__:Ee});let Ht=0;function kt(s){return It(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===mn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Tt.Emulated,id:"c",styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,y=s.pipes;return c.id+=Ht++,c.inputs=q(s.inputs,l),c.outputs=q(s.outputs),p&&p.forEach(b=>b(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(W):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(te):null,c})}function W(s){return et(s)||function Mt(s){return s[Xt]||null}(s)}function te(s){return function ut(s){return s[Se]||null}(s)}const _e={};function V(s){return It(()=>{const o={type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(_e[s.id]=s.type),o})}function q(s,o){if(null==s)return _n;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=c,o&&(o[h]=p)}return l}const pe=kt;function $e(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function et(s){return s[Gn]||null}function Lt(s,o){const l=s[xe]||null;if(!l&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return l}function ni(s){return Array.isArray(s)&&"object"==typeof s[1]}function zi(s){return Array.isArray(s)&&!0===s[1]}function xa(s){return 0!=(8&s.flags)}function _o(s){return 2==(2&s.flags)}function js(s){return 1==(1&s.flags)}function Ar(s){return null!==s.template}function vl(s){return 0!=(512&s[2])}function _i(s,o){return s.hasOwnProperty(ot)?s[ot]:null}class yc{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function wo(){return Xo}function Xo(s){return s.type.prototype.ngOnChanges&&(s.setInput=bo),vc}function vc(){const s=Pi(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===_n)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function bo(s,o,l,c){const h=Pi(s)||function ds(s,o){return s[ou]=o}(s,{previous:_n,current:null}),p=h.current||(h.current={}),y=h.previous,b=this.declaredInputs[l],T=y[b];p[b]=new yc(T&&T.currentValue,o,y===_n),s[c]=o}wo.ngInherit=!0;const ou="__ngSimpleChanges__";function Pi(s){return s[ou]||null}let Pa;function Ss(s){Pa=s}function Sn(s){return!!s.listen}const Hs={createRenderer:(s,o)=>function fs(){return void 0!==Pa?Pa:"undefined"!=typeof document?document:void 0}()};function yn(s){for(;Array.isArray(s);)s=s[0];return s}function xs(s,o){return yn(o[s])}function Sr(s,o){return yn(o[s.index])}function Ra(s,o){return s.data[o]}function Ur(s,o){const l=o[s];return ni(l)?l:l[0]}function ps(s){return 4==(4&s[2])}function Gs(s){return 128==(128&s[2])}function Oi(s,o){return null==o?null:s[o]}function Gi(s){s[18]=0}function gs(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const At={lFrame:Tl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Do(){return At.bindingsEnabled}function Oe(){return At.lFrame.lView}function zt(){return At.lFrame.tView}function uu(s){return At.lFrame.contextLView=s,s[8]}function kn(){let s=sa();for(;null!==s&&64===s.type;)s=s.parent;return s}function sa(){return At.lFrame.currentTNode}function Ri(s,o){const l=At.lFrame;l.currentTNode=s,l.isParent=o}function Cl(){return At.lFrame.isParent}function oa(){At.lFrame.isParent=!1}function Ao(){return At.isInCheckNoChangesMode}function So(s){At.isInCheckNoChangesMode=s}function Ws(){return At.lFrame.bindingIndex++}function du(s,o){const l=At.lFrame;l.bindingIndex=l.bindingRootIndex=s,ka(o)}function ka(s){At.lFrame.currentDirectiveIndex=s}function Il(){return At.lFrame.currentQueryIndex}function Na(s){At.lFrame.currentQueryIndex=s}function La(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Po(s,o,l){if(l&ct.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&ct.Host||(h=La(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=At.lFrame=Zs();return c.currentTNode=o,c.lView=s,!0}function la(s){const o=Zs(),l=s[1];At.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Zs(){const s=At.lFrame,o=null===s?null:s.child;return null===o?Tl(s):o}function Tl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Fa(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const hu=Fa;function Ks(){const s=Fa();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Br(){return At.lFrame.selectedIndex}function Os(s){At.lFrame.selectedIndex=s}function Jn(){const s=At.lFrame;return Ra(s.tView,s.selectedIndex)}function ua(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:b,ngAfterViewInit:T,ngAfterViewChecked:M,ngOnDestroy:R}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),T&&(s.viewHooks||(s.viewHooks=[])).push(-l,T),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function Va(s,o,l){pu(s,o,3,l)}function Oo(s,o,l,c){(3&s[2])===l&&pu(s,o,l,c)}function ir(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function pu(s,o,l,c){const p=null!=c?c:-1,y=o.length-1;let b=0;for(let T=void 0!==c?65535&s[18]:0;T<y;T++)if("number"==typeof o[T+1]){if(b=o[T],null!=c&&b>=c)break}else o[T]<0&&(s[18]+=65536),(b<p||-1==p)&&(gu(s,l,o,T),s[18]=(4294901760&s[18])+T+2),T++}function gu(s,o,l,c){const h=l[c]<0,p=l[c+1],b=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(b)}finally{}}}else try{p.call(b)}finally{}}class ms{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function C(s,o,l){const c=Sn(s);let h=0;for(;h<l.length;){const p=l[h];if("number"==typeof p){if(0!==p)break;h++;const y=l[h++],b=l[h++],T=l[h++];c?s.setAttribute(o,b,T,y):o.setAttributeNS(y,b,T)}else{const y=p,b=l[++h];P(y)?c&&s.setProperty(o,y,b):c?s.setAttribute(o,y,b):o.setAttribute(y,b),h++}}return h}function I(s){return 3===s||4===s||6===s}function P(s){return 64===s.charCodeAt(0)}function K(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||Pe(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function Pe(s,o,l,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const b=s[p++];if("number"==typeof b){if(b===o){y=-1;break}if(b>o){y=p-1;break}}}for(;p<s.length;){const b=s[p];if("number"==typeof b)break;if(b===l){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Ke(s){return-1!==s}function pn(s){return 32767&s}function Gt(s,o){let l=function Xn(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let yt=!0;function Rs(s){const o=yt;return yt=s,o}let yu=0;function ii(s,o){const l=Ic(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,jr(c.data,s),jr(o,null),jr(c.blueprint,null));const h=si(s,o),p=s.injectorIndex;if(Ke(h)){const y=pn(h),b=Gt(h,o),T=b[1].data;for(let M=0;M<8;M++)o[p+M]=b[y+M]|T[y+M]}return o[p+8]=h,p}function jr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ic(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function si(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const p=h[1],y=p.type;if(c=2===y?p.declTNode:1===y?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Ba(s,o,l){!function Al(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Ct)&&(c=l[Ct]),null==c&&(c=l[Ct]=yu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Sl(s,o,l){if(l&ct.Optional)return s;Re(o,"NodeInjector")}function Qs(s,o,l,c){if(l&ct.Optional&&void 0===c&&(c=null),0==(l&(ct.Self|ct.Host))){const h=s[9],p=fn(void 0);try{return h?h.get(o,c,l&ct.Optional):Yn(o,c,l&ct.Optional)}finally{fn(p)}}return Sl(c,o,l)}function _s(s,o,l,c=ct.Default,h){if(null!==s){const p=function Ld(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ct)?s[Ct]:void 0;return"number"==typeof o?o>=0?255&o:xr:o}(l);if("function"==typeof p){if(!Po(o,s,c))return c&ct.Host?Sl(h,l,c):Qs(o,l,c,h);try{const y=p(c);if(null!=y||c&ct.Optional)return y;Re(l)}finally{hu()}}else if("number"==typeof p){let y=null,b=Ic(s,o),T=-1,M=c&ct.Host?o[16][6]:null;for((-1===b||c&ct.SkipSelf)&&(T=-1===b?si(s,o):o[b+8],-1!==T&&Pl(c,!1)?(y=o[1],b=pn(T),o=Gt(T,o)):b=-1);-1!==b;){const R=o[1];if(Ml(p,b,R.data)){const H=ja(b,o,l,y,c,M);if(H!==da)return H}T=o[b+8],-1!==T&&Pl(c,o[1].data[b+8]===M)&&Ml(p,b,o)?(y=R,b=pn(T),o=Gt(T,o)):b=-1}}}return Qs(o,l,c,h)}const da={};function xr(){return new Js(kn(),Oe())}function ja(s,o,l,c,h,p){const y=o[1],b=y.data[s+8],R=xl(b,y,l,null==c?_o(b)&&yt:c!=y&&0!=(3&b.type),h&ct.Host&&p===b);return null!==R?qi(o,y,R,b):da}function xl(s,o,l,c,h){const p=s.providerIndexes,y=o.data,b=1048575&p,T=s.directiveStart,R=p>>20,J=h?b+R:s.directiveEnd;for(let ie=c?b:b+R;ie<J;ie++){const De=y[ie];if(ie<T&&l===De||ie>=T&&De.type===l)return ie}if(h){const ie=y[T];if(ie&&Ar(ie)&&ie.type===l)return T}return null}function qi(s,o,l,c){let h=s[l];const p=o.data;if(function ca(s){return s instanceof ms}(h)){const y=h;y.resolving&&function st(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new He(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ae(p[l]));const b=Rs(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?fn(y.injectImpl):null;Po(s,c,ct.Default);try{h=s[l]=y.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Ys(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=Xo(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==T&&fn(T),Rs(b),y.resolving=!1,hu()}}return h}function Ml(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Pl(s,o){return!(s&ct.Self||s&ct.Host&&o)}class Js{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return _s(this._tNode,this._lView,o,c,l)}}function wu(s){return It(()=>{const o=s.prototype.constructor,l=o[ot]||ha(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[ot]||ha(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function ha(s){return Ye(s)?()=>{const o=ha(oe(s));return o&&o()}:_i(s)}function bu(s){return function vu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const p=l[h];if(I(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(kn(),s)}const Zi="__parameters__";function to(s,o,l){return It(()=>{const c=function Cu(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return b.annotation=y,b;function b(T,M,R){const H=T.hasOwnProperty(Zi)?T[Zi]:Object.defineProperty(T,Zi,{value:[]})[Zi];for(;H.length<=R;)H.push(null);return(H[R]=H[R]||[]).push(y),T}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class sr{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Yt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vd=new sr("AnalyzeForEntryComponents");function Ni(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Ni(c,o)):o!==s&&o.push(c)}return o}function vs(s,o){s.forEach(l=>Array.isArray(l)?vs(l,o):o(l))}function fa(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function za(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ws(s,o,l){let c=Ga(s,o);return c>=0?s[1|c]=l:(c=~c,function Ol(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function wf(s,o){const l=Ga(s,o);if(l>=0)return s[1|l]}function Ga(s,o){return function Tu(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<l];if(o===y)return p<<l;y>o?h=p:c=p+1}return~(h<<l)}(s,o,1)}const ks={},qa="__NG_DI_FLAG__",Rl="ngTempTokenPath",D=/\n/gm,k="__source",Z=Ee({provide:String,useValue:Ee});let re;function de(s){const o=re;return re=s,o}function je(s,o=ct.Default){if(void 0===re)throw new He(203,"");return null===re?Yn(s,void 0,o):re.get(s,o&ct.Optional?null:void 0,o)}function Ze(s,o=ct.Default){return(function hn(){return Nr}()||je)(oe(s),o)}const Bt=Ze;function sn(s){const o=[];for(let l=0;l<s.length;l++){const c=oe(s[l]);if(Array.isArray(c)){if(0===c.length)throw new He(900,"");let h,p=ct.Default;for(let y=0;y<c.length;y++){const b=c[y],T=Yr(b);"number"==typeof T?-1===T?h=b.token:p|=T:h=b}o.push(Ze(h,p))}else o.push(Ze(c))}return o}function Ot(s,o){return s[qa]=o,s.prototype[qa]=o,s}function Yr(s){return s[qa]}const Ns=Ot(to("Inject",s=>({token:s})),-1),Fi=Ot(to("Optional"),8),ai=Ot(to("SkipSelf"),4);class Pf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ga(s){return s instanceof Pf?s.changingThisBreaksApplicationSecurity:s}const g=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,E=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Qr=(()=>((Qr=Qr||{})[Qr.NONE=0]="NONE",Qr[Qr.HTML=1]="HTML",Qr[Qr.STYLE=2]="STYLE",Qr[Qr.SCRIPT=3]="SCRIPT",Qr[Qr.URL=4]="URL",Qr[Qr.RESOURCE_URL=5]="RESOURCE_URL",Qr))();function Pg(s){const o=function Lf(){const s=Oe();return s&&s[12]}();return o?o.sanitize(Qr.URL,s)||"":function Mu(s,o){const l=function Tg(s){return s instanceof Pf&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?ga(s):function O(s){return(s=String(s)).match(g)||s.match(E)?s:"unsafe:"+s}(we(s))}const nD="__ngContext__";function mt(s,o){s[nD]=o}function io(s){const o=function Fo(s){return s[nD]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Rg(s){return s.ngOriginalError}function cb(s,...o){s.error(...o)}class li{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function Qd(s){return s&&s.ngErrorLogger||cb}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Rg(o);for(;l&&Rg(l);)l=Rg(l);return l||null}}const Jd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Jt))();function Ja(s){return s instanceof Function?s():s}var Vo=(()=>((Vo=Vo||{})[Vo.Important=1]="Important",Vo[Vo.DashCase=2]="DashCase",Vo))();function Ng(s,o){return undefined(s,o)}function Uf(s){const o=s[3];return zi(o)?o[3]:o}function Ly(s){return Fy(s[13])}function Lg(s){return Fy(s[4])}function Fy(s){for(;null!==s&&!zi(s);)s=s[4];return s}function Xd(s,o,l,c,h){if(null!=c){let p,y=!1;zi(c)?p=c:ni(c)&&(y=!0,c=c[0]);const b=yn(c);0===s&&null!==l?null==h?Eb(o,l,b):$c(o,l,b,h||null,!0):1===s&&null!==l?$c(o,l,b,h||null,!0):2===s?function Sb(s,o,l){const c=Ug(s,o);c&&function Ib(s,o,l,c){Sn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,b,y):3===s&&o.destroyNode(b),null!=p&&function Bf(s,o,l,c,h){const p=l[7];p!==yn(l)&&Xd(o,s,c,p,h);for(let b=10;b<l.length;b++){const T=l[b];nh(T[1],T,s,o,c,p)}}(o,s,p,l,h)}}function ln(s,o,l){if(Sn(s))return s.createElement(o,l);{const c=null!==l?function au(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function bb(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,gs(h,-1)),l.splice(c,1)}function Bo(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&bb(h,c),o>0&&(s[l-1][4]=c[4]);const p=za(s,10+o);!function cD(s,o){nh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function By(s,o){if(!(256&o[2])){const l=o[11];Sn(l)&&l.destroyNode&&nh(s,o,l,3,null,null),function Vy(s){let o=s[13];if(!o)return Fg(s[1],s);for(;o;){let l=null;if(ni(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)ni(o)&&Fg(o[1],o),o=o[3];null===o&&(o=s),ni(o)&&Fg(o[1],o),l=o&&o[4]}o=l}}(o)}}function Fg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function gO(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof ms)){const p=l[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const b=h[p[y]],T=p[y+1];try{T.call(b)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function Cb(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const y=l[p+1],b="function"==typeof y?y(o):yn(o[y]),T=c[h=l[p+2]],M=l[p+3];"boolean"==typeof M?b.removeEventListener(l[p],T,M):M>=0?c[h=M]():c[h=-M].unsubscribe(),p+=2}else{const y=c[h=l[p+1]];l[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Sn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&zi(o[3])){l!==o[3]&&bb(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function wi(s,o,l){return function ma(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Tt.None||h===Tt.Emulated)return null}return Sr(c,l)}(s,o.parent,l)}function $c(s,o,l,c,h){Sn(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function Eb(s,o,l){Sn(s)?s.appendChild(o,l):o.appendChild(l)}function jy(s,o,l,c,h){null!==c?$c(s,o,l,c,h):Eb(s,o,l)}function Ug(s,o){return Sn(s)?s.parentNode(o):o.parentNode}let $y=function Hy(s,o,l){return 40&s.type?Sr(s,l):null};function un(s,o,l,c){const h=wi(s,c,o),p=o[11],b=function Db(s,o,l){return $y(s,o,l)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let T=0;T<l.length;T++)jy(p,h,l[T],b,!1);else jy(p,h,l,b,!1)}function Lu(s,o){if(null!==o){const l=o.type;if(3&l)return Sr(o,s);if(4&l)return Ll(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Lu(s,c);{const h=s[o.index];return zi(h)?Ll(-1,h):yn(h)}}if(32&l)return Ng(o,s)()||yn(s[o.index]);{const c=Ab(s,o);return null!==c?Array.isArray(c)?c[0]:Lu(Uf(s[16]),c):Lu(s,o.next)}}return null}function Ab(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ll(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return Lu(c,h)}return o[7]}function Vg(s,o,l,c,h,p,y){for(;null!=l;){const b=c[l.index],T=l.type;if(y&&0===o&&(b&&mt(yn(b),c),l.flags|=4),64!=(64&l.flags))if(8&T)Vg(s,o,l.child,c,h,p,!1),Xd(o,s,h,b,p);else if(32&T){const M=Ng(l,c);let R;for(;R=M();)Xd(o,s,h,R,p);Xd(o,s,h,b,p)}else 16&T?Vf(s,o,c,l,h,p):Xd(o,s,h,b,p);l=y?l.projectionNext:l.next}}function nh(s,o,l,c,h,p){Vg(l,c,s.firstChild,o,h,p,!1)}function Vf(s,o,l,c,h,p){const y=l[16],T=y[6].projection[c.projection];if(Array.isArray(T))for(let M=0;M<T.length;M++)Xd(o,s,h,T[M],p);else Vg(s,o,T,y[3],h,p,!0)}function jf(s,o,l){Sn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function zy(s,o,l){Sn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Bg(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}l=h+1}}const Wy="ng-template";function Mb(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==Bg(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Pb(s){return 4===s.type&&s.value!==Wy}function pD(s,o,l){return o===(4!==s.type||l?s.value:Wy)}function gD(s,o,l){let c=4;const h=s.attrs||[],p=function yD(s){for(let o=0;o<s.length;o++)if(I(s[o]))return o;return s.length}(h);let y=!1;for(let b=0;b<o.length;b++){const T=o[b];if("number"!=typeof T){if(!y)if(4&c){if(c=2|1&c,""!==T&&!pD(s,T,l)||""===T&&1===o.length){if(Ls(c))return!1;y=!0}}else{const M=8&c?T:o[++b];if(8&c&&null!==s.attrs){if(!Mb(s.attrs,M,l)){if(Ls(c))return!1;y=!0}continue}const H=mD(8&c?"class":T,h,Pb(s),l);if(-1===H){if(Ls(c))return!1;y=!0;continue}if(""!==M){let J;J=H>p?"":h[H+1].toLowerCase();const ie=8&c?J:null;if(ie&&-1!==Bg(ie,M,0)||2&c&&M!==J){if(Ls(c))return!1;y=!0}}}}else{if(!y&&!Ls(c)&&!Ls(T))return!1;if(y&&Ls(T))continue;y=!1,c=T|1&c}}return Ls(c)||y}function Ls(s){return 0==(1&s)}function mD(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function vD(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Ob(s,o,l=!1){for(let c=0;c<o.length;c++)if(gD(s,o[c],l))return!0;return!1}function jg(s,o){return s?":not("+o.trim()+")":o}function qy(s){let o=s[0],l=1,c=2,h="",p=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&c){const b=s[++l];h+="["+y+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Ls(y)&&(o+=jg(p,h),h=""),c=y,p=p||!Ls(c);l++}return""!==h&&(o+=jg(p,h)),o}const Wt={};function Zy(s){kb(zt(),Oe(),Br()+s,Ao())}function kb(s,o,l,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Va(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Oo(o,p,0,l)}Os(l)}function Hf(s,o){return s<<17|o<<2}function _a(s){return s>>17&32767}function zf(s){return 2|s}function Xa(s){return(131068&s)>>2}function Gf(s,o){return-131069&s|o<<2}function Ky(s){return 1|s}function Jy(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],p=l[c+1];if(-1!==p){const y=s.data[p];Na(h),y.contentQueries(2,o[p],p)}}}function Vu(s,o,l,c,h,p,y,b,T,M){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,Gi(R),R[3]=R[15]=s,R[8]=l,R[10]=y||s&&s[10],R[11]=b||s&&s[11],R[12]=T||s&&s[12]||null,R[9]=M||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function sh(s,o,l,c,h){let p=s.data[o];if(null===p)p=function Xy(s,o,l,c,h){const p=sa(),y=Cl(),T=s.data[o]=function AD(s,o,l,c,h,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=T),null!==p&&(y?null==p.child&&null!==T.parent&&(p.child=T):null===p.next&&(p.next=T)),T}(s,o,l,c,h),function cu(){return At.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=c,p.attrs=h;const y=function Ms(){const s=At.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Ri(p,!0),p}function oh(s,o,l,c){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Kf(s,o,l){la(o);try{const c=s.viewQuery;null!==c&&lv(1,c,l);const h=s.template;null!==h&&ev(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Jy(s,o),s.staticViewQueries&&lv(2,s.viewQuery,l);const p=s.components;null!==p&&function Kg(s,o){for(let l=0;l<o.length;l++)BD(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ks()}}function Vl(s,o,l,c){const h=o[2];if(256==(256&h))return;la(o);const p=Ao();try{Gi(o),function xo(s){return At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&ev(s,o,l,2,c);const y=3==(3&h);if(!p)if(y){const M=s.preOrderCheckHooks;null!==M&&Va(o,M,null)}else{const M=s.preOrderHooks;null!==M&&Oo(o,M,0,null),ir(o,0)}if(function UD(s){for(let o=Ly(s);null!==o;o=Lg(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],p=h[3];0==(1024&h[2])&&gs(p,1),h[2]|=1024}}}(o),function nC(s){for(let o=Ly(s);null!==o;o=Lg(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];Gs(c)&&Vl(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Jy(s,o),!p)if(y){const M=s.contentCheckHooks;null!==M&&Va(o,M)}else{const M=s.contentHooks;null!==M&&Oo(o,M,1),ir(o,1)}!function jo(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)Os(~h);else{const p=h,y=l[++c],b=l[++c];du(y,p),b(2,o[p])}}}finally{Os(-1)}}(s,o);const b=s.components;null!==b&&function zb(s,o){for(let l=0;l<o.length;l++)VD(s,o[l])}(o,b);const T=s.viewQuery;if(null!==T&&lv(2,T,c),!p)if(y){const M=s.viewCheckHooks;null!==M&&Va(o,M)}else{const M=s.viewHooks;null!==M&&Oo(o,M,2),ir(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,gs(o[3],-1))}finally{Ks()}}function Gb(s,o,l,c){const h=o[10],p=!Ao(),y=ps(o);try{p&&!y&&h.begin&&h.begin(),y&&Kf(s,o,c),Vl(s,o,l,c)}finally{p&&!y&&h.end&&h.end()}}function ev(s,o,l,c,h){const p=Br(),y=2&c;try{Os(-1),y&&o.length>20&&kb(s,o,20,Ao()),l(c,h)}finally{Os(p)}}function Yf(s,o,l){if(xa(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,l[p],p)}}}function Yg(s,o,l){!Do()||(function OD(s,o,l,c){const h=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||ii(l,o),mt(c,o);const y=l.initialInputs;for(let b=h;b<p;b++){const T=s.data[b],M=Ar(T);M&&LD(o,l,T);const R=qi(o,s,b,l);mt(R,o),null!==y&&AO(0,b-h,R,T,0,y),M&&(Ur(l.index,o)[8]=R)}}(s,o,l,Sr(l,o)),128==(128&l.flags)&&function RD(s,o,l){const c=l.directiveStart,h=l.directiveEnd,y=l.index,b=function aa(){return At.lFrame.currentDirectiveIndex}();try{Os(y);for(let T=c;T<h;T++){const M=s.data[T],R=o[T];ka(T),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Yb(M,R)}}finally{Os(-1),ka(b)}}(s,o,l))}function Yc(s,o,l=Sr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],b=-1===y?l(o,s):s[y];s[h++]=b}}}function tv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Qg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Qg(s,o,l,c,h,p,y,b,T,M){const R=20+c,H=R+h,J=function DD(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Wt);return l}(R,H),ie="function"==typeof M?M():M;return J[1]={type:s,blueprint:J,template:l,queries:null,viewQuery:b,declTNode:o,data:J.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:ie,incompleteFirstPass:!1}}function Jg(s,o,l,c){const h=uv(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&sC(s).push(c,h.length-1))}function nv(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function so(s,o,l,c,h,p,y,b){const T=Sr(o,l);let R,M=o.inputs;!b&&null!=M&&(R=M[c])?(aC(s,l,R,c,h),_o(o)&&function em(s,o){const l=Ur(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function SD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,Sn(p)?p.setProperty(T,c,h):P(c)||(T.setProperty?T.setProperty(c,h):T[c]=h))}function rv(s,o,l,c){let h=!1;if(Do()){const p=function kD(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];Ob(l,y.selectors,!1)&&(h||(h=[]),Ba(ii(l,o),s,y.type),Ar(y)?(Qb(s,l),h.unshift(y)):h.push(y))}return h}(s,o,l),y=null===c?null:{"":-1};if(null!==p){h=!0,Xb(l,s.data.length,p.length);for(let R=0;R<p.length;R++){const H=p[R];H.providersResolver&&H.providersResolver(H)}let b=!1,T=!1,M=oh(s,o,p.length,null);for(let R=0;R<p.length;R++){const H=p[R];l.mergedAttrs=K(l.mergedAttrs,H.hostAttrs),eC(s,l,o,M,H),ND(M,H,y),null!==H.contentQueries&&(l.flags|=8),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(l.flags|=128);const J=H.type.prototype;!b&&(J.ngOnChanges||J.ngOnInit||J.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!T&&(J.ngOnChanges||J.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),T=!0),M++}!function Xg(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,y=[];let b=null,T=null;for(let M=o.directiveStart;M<c;M++){const R=h[M],H=R.inputs,J=null===p||Pb(o)?null:tC(H,p);y.push(J),b=nv(H,M,b),T=nv(R.outputs,M,T)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=b,o.outputs=T}(s,l)}y&&function Jb(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new He(-301,!1);c.push(o[h],p)}}}(l,c,y)}return l.mergedAttrs=K(l.mergedAttrs,l.attrs),h}function Kb(s,o,l,c,h,p){const y=p.hostBindings;if(y){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const T=~o.index;(function PD(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=T&&b.push(T),b.push(c,h,y)}}function Yb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Qb(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ND(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Ar(o)&&(l[""]=s)}}function Xb(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function eC(s,o,l,c,h){s.data[c]=h;const p=h.factory||(h.factory=_i(h.type)),y=new ms(p,Ar(h),null);s.blueprint[c]=y,l[c]=y,Kb(s,o,0,c,oh(s,l,h.hostVars,Wt),h)}function LD(s,o,l){const c=Sr(o,s),h=tv(l),p=s[10],y=im(s,Vu(s,h,null,l.onPush?64:16,c,o,p,p.createRenderer(c,l),null,null));s[o.index]=y}function el(s,o,l,c,h,p){const y=Sr(s,o);!function rm(s,o,l,c,h,p,y){if(null==p)Sn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const b=null==y?we(p):y(p,c||"",h);Sn(s)?s.setAttribute(o,h,b,l):l?o.setAttributeNS(l,h,b):o.setAttribute(h,b)}}(o[11],y,p,s.value,l,c,h)}function AO(s,o,l,c,h,p){const y=p[o];if(null!==y){const b=c.setInput;for(let T=0;T<y.length;){const M=y[T++],R=y[T++],H=y[T++];null!==b?c.setInput(l,H,M,R):l[R]=H}}}function tC(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function iv(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function VD(s,o){const l=Ur(o,s);if(Gs(l)){const c=l[1];80&l[2]?Vl(c,l,c.template,l[8]):l[5]>0&&sv(l)}}function sv(s){for(let c=Ly(s);null!==c;c=Lg(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const y=p[1];Vl(y,p,y.template,p[8])}else p[5]>0&&sv(p)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=Ur(l[c],s);Gs(h)&&h[5]>0&&sv(h)}}function BD(s,o){const l=Ur(o,s),c=l[1];(function rC(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Kf(c,l,l[8])}function im(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Qf(s){for(;s;){s[2]|=64;const o=Uf(s);if(vl(s)&&!o)return s;s=o}return null}function av(s,o,l){const c=o[10];c.begin&&c.begin();try{Vl(s,o,s.template,l)}catch(h){throw Ui(o,h),h}finally{c.end&&c.end()}}function sm(s){!function ov(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=io(l),h=c[1];Gb(h,c,h.template,l)}}(s[8])}function lv(s,o,l){Na(0),o(s,l)}const $D=(()=>Promise.resolve(null))();function uv(s){return s[7]||(s[7]=[])}function sC(s){return s.cleanup||(s.cleanup=[])}function Ui(s,o){const l=s[9],c=l?l.get(li,null):null;c&&c.handleError(o)}function aC(s,o,l,c,h){for(let p=0;p<l.length;){const y=l[p++],b=l[p++],T=o[y],M=s.data[y];null!==M.setInput?M.setInput(T,h,c,b):T[b]=h}}function tl(s,o,l){const c=xs(o,s);!function yb(s,o,l){Sn(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function Bl(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const b=o[y];"number"==typeof b?p=b:1==p?h=ye(h,b):2==p&&(c=ye(c,b+": "+o[++y]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const cv=new sr("INJECTOR",-1);class dv{get(o,l=ks){if(l===ks){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return l}}const om=new sr("Set Injector scope."),lh={},lC={};let Xf;function zD(){return void 0===Xf&&(Xf=new dv),Xf}function Bu(s,o=null,l=null,c){const h=hv(s,o,l,c);return h._resolveInjectorDefTypes(),h}function hv(s,o=null,l=null,c){return new GD(s,l,o||zD(),c)}class GD{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];l&&vs(l,b=>this.processProvider(b,o,l)),vs([o],b=>this.processInjectorType(b,[],p)),this.records.set(cv,uh(void 0,this));const y=this.records.get(om);this.scope=null!=y?y.value:null,this.source=h||("object"==typeof o?null:he(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=ks,c=ct.Default){this.assertNotDestroyed();const h=de(this),p=fn(void 0);try{if(!(c&ct.SkipSelf)){let b=this.records.get(o);if(void 0===b){const T=function dC(s){return"function"==typeof s||"object"==typeof s&&s instanceof sr}(o)&&Pn(o);b=T&&this.injectableDefInScope(T)?uh(fv(o),lh):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&ct.Self?zD():this.parent).get(o,l=c&ct.Optional&&l===ks?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[Rl]=y[Rl]||[]).unshift(he(o)),h)throw y;return function Hr(s,o,l,c){const h=s[Rl];throw o[k]&&h.unshift(o[k]),s.message=function No(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let b=o[y];p.push(y+":"+("string"==typeof b?JSON.stringify(b):he(b)))}h=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(D,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Rl]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{fn(p),de(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(he(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processInjectorType(o,l,c){if(!(o=oe(o)))return!1;let h=pi(o);const p=null==h&&o.ngModule||void 0,y=void 0===p?o:p,b=-1!==c.indexOf(y);if(void 0!==p&&(h=pi(p)),null==h)return!1;if(null!=h.imports&&!b){let R;c.push(y);try{vs(h.imports,H=>{this.processInjectorType(H,l,c)&&(void 0===R&&(R=[]),R.push(H))})}finally{}if(void 0!==R)for(let H=0;H<R.length;H++){const{ngModule:J,providers:ie}=R[H];vs(ie,De=>this.processProvider(De,J,ie||Dt))}}this.injectorDefTypes.add(y);const T=_i(y)||(()=>new y);this.records.set(y,uh(T,lh));const M=h.providers;if(null!=M&&!b){const R=o;vs(M,H=>this.processProvider(H,R,M))}return void 0!==p&&void 0!==o.providers}processProvider(o,l,c){let h=ch(o=oe(o))?o:oe(o&&o.provide);const p=function WD(s,o,l){return pv(s)?uh(void 0,s.useValue):uh(cC(s),lh)}(o);if(ch(o)||!0!==o.multi)this.records.get(h);else{let y=this.records.get(h);y||(y=uh(void 0,lh,!0),y.factory=()=>sn(y.multi),this.records.set(h,y)),h=o,y.multi.push(o)}this.records.set(h,p)}hydrate(o,l){return l.value===lh&&(l.value=lC,l.value=l.factory()),"object"==typeof l.value&&l.value&&function YD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=oe(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function fv(s){const o=Pn(s),l=null!==o?o.factory:_i(s);if(null!==l)return l;if(s instanceof sr)throw new He(204,!1);if(s instanceof Function)return function uC(s){const o=s.length;if(o>0)throw function oi(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new He(204,!1);const l=function Ir(s){const o=s&&(s[kr]||s[Kn]);if(o){const l=function ur(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new He(204,!1)}function cC(s,o,l){let c;if(ch(s)){const h=oe(s);return _i(h)||fv(h)}if(pv(s))c=()=>oe(s.useValue);else if(function ZD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...sn(s.deps||[]));else if(function qD(s){return!(!s||!s.useExisting)}(s))c=()=>Ze(oe(s.useExisting));else{const h=oe(s&&(s.useClass||s.provide));if(!function KD(s){return!!s.deps}(s))return _i(h)||fv(h);c=()=>new h(...sn(s.deps))}return c}function uh(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function pv(s){return null!==s&&"object"==typeof s&&Z in s}function ch(s){return"function"==typeof s}let ya=(()=>{class s{static create(l,c){var h;if(Array.isArray(l))return Bu({name:""},c,l,"");{const p=null!==(h=l.name)&&void 0!==h?h:"";return Bu({name:p},l.parent,l.providers,p)}}}return s.THROW_IF_NOT_FOUND=ks,s.NULL=new dv,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>Ze(cv)}),s.__NG_ELEMENT_ID__=-1,s})();function kO(s,o){ua(io(s)[1],kn())}function _C(s){let o=function nA(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(Ar(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new He(903,"");h=o.\u0275dir}if(h){if(l){c.push(h);const y=s;y.inputs=ci(s.inputs),y.declaredInputs=ci(s.declaredInputs),y.outputs=ci(s.outputs);const b=h.hostBindings;b&&ba(s,b);const T=h.viewQuery,M=h.contentQueries;if(T&&wa(s,T),M&&F(s,M),ge(s.inputs,h.inputs),ge(s.declaredInputs,h.declaredInputs),ge(s.outputs,h.outputs),Ar(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const b=p[y];b&&b.ngInherit&&b(s),b===_C&&(l=!1)}}o=Object.getPrototypeOf(o)}!function LO(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=K(h.hostAttrs,l=K(l,h.hostAttrs))}}(c)}function ci(s){return s===_n?{}:s===Dt?[]:s}function wa(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function F(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,p)=>{o(c,h,p),l(c,h,p)}:o}function ba(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let $r=null;function Qi(){if(!$r){const s=Jt.Symbol;if(s&&s.iterator)$r=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&($r=c)}}}return $r}function Qc(s){return!!_v(s)&&(Array.isArray(s)||!(s instanceof Map)&&Qi()in s)}function _v(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ji(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function hh(s,o,l,c){const h=Oe();return Ji(h,Ws(),o)&&(zt(),el(Jn(),h,s,o,l,c)),hh}function fh(s,o,l,c){return Ji(s,Ws(),l)?o+we(l)+c:Wt}function wv(s,o,l,c,h,p,y,b){const T=Oe(),M=zt(),R=s+20,H=M.firstCreatePass?function aA(s,o,l,c,h,p,y,b,T){const M=o.consts,R=sh(o,s,4,y||null,Oi(M,b));rv(o,l,R,Oi(M,T)),ua(o,R);const H=R.tViews=Qg(2,R,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,R),H.queries=o.queries.embeddedTView(R)),R}(R,M,T,o,l,c,h,p,y):M.data[R];Ri(H,!1);const J=T[11].createComment("");un(M,T,J,H),mt(J,T),im(T,T[R]=iv(J,T,J,H)),js(H)&&Yg(M,T,H),null!=y&&Yc(T,H,b)}function Cv(s){return function Zr(s,o){return s[o]}(function El(){return At.lFrame.contextLView}(),20+s)}function yh(s,o=ct.Default){const l=Oe();return null===l?Ze(s,o):_s(kn(),l,oe(s),o)}function Pv(){throw new Error("invalid")}function kC(s,o,l){const c=Oe();return Ji(c,Ws(),o)&&so(zt(),Jn(),c,s,o,c[11],l,!1),kC}function Ov(s,o,l,c,h){const y=h?"class":"style";aC(s,l,o.inputs[y],y,c)}function Rv(s,o,l,c){const h=Oe(),p=zt(),y=20+s,b=h[11],T=h[y]=ln(b,o,function fu(){return At.lFrame.currentNamespace}()),M=p.firstCreatePass?function VO(s,o,l,c,h,p,y){const b=o.consts,M=sh(o,s,2,h,Oi(b,p));return rv(o,l,M,Oi(b,y)),null!==M.attrs&&Bl(M,M.attrs,!1),null!==M.mergedAttrs&&Bl(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(y,p,h,0,o,l,c):p.data[y];Ri(M,!0);const R=M.mergedAttrs;null!==R&&C(b,T,R);const H=M.classes;null!==H&&zy(b,T,H);const J=M.styles;return null!==J&&jf(b,T,J),64!=(64&M.flags)&&un(p,h,T,M),0===function na(){return At.lFrame.elementDepthCount}()&&mt(T,h),function To(){At.lFrame.elementDepthCount++}(),js(M)&&(Yg(p,h,M),Yf(p,M,h)),null!==c&&Yc(h,M),Rv}function vh(){let s=kn();Cl()?oa():(s=s.parent,Ri(s,!1));const o=s;!function lu(){At.lFrame.elementDepthCount--}();const l=zt();return l.firstCreatePass&&(ua(l,s),xa(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Cc(s){return 0!=(16&s.flags)}(o)&&Ov(l,o,Oe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function _f(s){return 0!=(32&s.flags)}(o)&&Ov(l,o,Oe(),o.stylesWithoutHost,!1),vh}function NC(s,o,l,c){return Rv(s,o,l,c),vh(),NC}function bm(s,o,l){const c=Oe(),h=zt(),p=s+20,y=h.firstCreatePass?function LC(s,o,l,c,h){const p=o.consts,y=Oi(p,c),b=sh(o,s,8,"ng-container",y);return null!==y&&Bl(b,y,!0),rv(o,l,b,Oi(p,h)),null!==o.queries&&o.queries.elementStart(o,b),b}(p,h,c,o,l):h.data[p];Ri(y,!0);const b=c[p]=c[11].createComment("");return un(h,c,b,y),mt(b,c),js(y)&&(Yg(h,c,y),Yf(h,y,c)),null!=l&&Yc(c,y),bm}function sp(){let s=kn();const o=zt();return Cl()?oa():(s=s.parent,Ri(s,!1)),o.firstCreatePass&&(ua(o,s),xa(s)&&o.queries.elementEnd(s)),sp}function td(){return Oe()}function FC(s){return!!s&&"function"==typeof s.then}function Em(s){return!!s&&"function"==typeof s.subscribe}const wA=Em;function kv(s,o,l,c){const h=Oe(),p=zt(),y=kn();return function UC(s,o,l,c,h,p,y,b){const T=js(c),R=s.firstCreatePass&&sC(s),H=o[8],J=uv(o);let ie=!0;if(3&c.type||b){const nt=Sr(c,o),_t=b?b(nt):nt,Ne=J.length,Pt=b?vn=>b(yn(vn[c.index])):c.index;if(Sn(l)){let vn=null;if(!b&&T&&(vn=function CA(s,o,l,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===l&&h[p+1]===c){const b=o[7],T=h[p+2];return b.length>T?b[T]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==vn)(vn.__ngLastListenerFn__||vn).__ngNextListenerFn__=p,vn.__ngLastListenerFn__=p,ie=!1;else{p=VC(c,o,H,p,!1);const Vn=l.listen(_t,h,p);J.push(p,Vn),R&&R.push(h,Pt,Ne,Ne+1)}}else p=VC(c,o,H,p,!0),_t.addEventListener(h,p,y),J.push(p),R&&R.push(h,Pt,Ne,y)}else p=VC(c,o,H,p,!1);const De=c.outputs;let We;if(ie&&null!==De&&(We=De[h])){const nt=We.length;if(nt)for(let _t=0;_t<nt;_t+=2){const lo=o[We[_t]][We[_t+1]].subscribe(p),wd=J.length;J.push(p,lo),R&&R.push(h,c.index,wd,-(wd+1))}}}(p,h,h[11],y,s,o,!!l,c),kv}function EA(s,o,l,c){try{return!1!==l(c)}catch(h){return Ui(s,h),!1}}function VC(s,o,l,c,h){return function p(y){if(y===Function)return c;const b=2&s.flags?Ur(s.index,o):o;0==(32&o[2])&&Qf(b);let T=EA(o,0,c,y),M=p.__ngNextListenerFn__;for(;M;)T=EA(o,0,M,y)&&T,M=M.__ngNextListenerFn__;return h&&!1===T&&(y.preventDefault(),y.returnValue=!1),T}}function BC(s=1){return function Ps(s){return(At.lFrame.contextLView=function Dl(s,o){for(;s>0;)o=o[15],s--;return o}(s,At.lFrame.contextLView))[8]}(s)}function jC(s,o,l){return Nv(s,"",o,"",l),jC}function Nv(s,o,l,c,h){const p=Oe(),y=fh(p,o,l,c);return y!==Wt&&so(zt(),Jn(),p,s,y,p[11],h,!1),Nv}function zC(s,o,l,c,h){const p=s[l+1],y=null===o;let b=c?_a(p):Xa(p),T=!1;for(;0!==b&&(!1===T||y);){const R=s[b+1];TA(s[b],o)&&(T=!0,s[b+1]=c?Ky(R):zf(R)),b=c?_a(R):Xa(R)}T&&(s[l+1]=c?zf(p):Ky(p))}function TA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ga(s,o)>=0}function rd(s,o){return function Ea(s,o,l,c){const h=Oe(),p=zt(),y=function Vr(s){const o=At.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);p.firstUpdatePass&&function Ci(s,o,l,c){const h=s.data;if(null===h[l+1]){const p=h[Br()],y=function ap(s,o){return o>=s.expandoStartIndex}(s,l);(function jv(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function Gu(s,o,l,c){const h=function qs(s){const o=At.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=lp(l=Om(null,s,o,l,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(l=Om(h,s,o,l,c),null===p){let T=function MA(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Xa(c))return s[_a(c)]}(s,o,c);void 0!==T&&Array.isArray(T)&&(T=Om(null,s,o,T[1],c),T=lp(T,o.attrs,c),function PA(s,o,l,c){s[_a(l?o.classBindings:o.styleBindings)]=c}(s,o,c,T))}else p=function ZC(s,o,l){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=lp(c,s[p].hostAttrs,l);return lp(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,c),function nd(s,o,l,c,h,p){let y=p?o.classBindings:o.styleBindings,b=_a(y),T=Xa(y);s[c]=l;let R,M=!1;if(Array.isArray(l)){const H=l;R=H[1],(null===R||Ga(H,R)>0)&&(M=!0)}else R=l;if(h)if(0!==T){const J=_a(s[b+1]);s[c+1]=Hf(J,b),0!==J&&(s[J+1]=Gf(s[J+1],c)),s[b+1]=function Nb(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=Hf(b,0),0!==b&&(s[b+1]=Gf(s[b+1],c)),b=c;else s[c+1]=Hf(T,0),0===b?b=c:s[T+1]=Gf(s[T+1],c),T=c;M&&(s[c+1]=zf(s[c+1])),zC(s,R,c,!0),zC(s,R,c,!1),function IA(s,o,l,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ga(p,o)>=0&&(l[c+1]=Ky(l[c+1]))}(o,R,s,c,p),y=Hf(b,T),p?o.classBindings=y:o.styleBindings=y}(h,p,o,l,y,c)}}(p,s,y,c),o!==Wt&&Ji(h,y,o)&&function Bv(s,o,l,c,h,p,y,b){if(!(3&o.type))return;const T=s.data,M=T[b+1];wh(function Hg(s){return 1==(1&s)}(M)?Xi(T,o,l,h,Xa(M),y):void 0)||(wh(p)||function $f(s){return 2==(2&s)}(M)&&(p=Xi(T,null,l,h,b,y)),function xb(s,o,l,c,h){const p=Sn(s);if(o)h?p?s.addClass(l,c):l.classList.add(c):p?s.removeClass(l,c):l.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:Vo.DashCase;if(null==h)p?s.removeStyle(l,c,y):l.style.removeProperty(c);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),y|=Vo.Important),p?s.setStyle(l,c,h,y):l.style.setProperty(c,h,b?"important":"")}}}(c,y,xs(Br(),l),h,p))}(p,p.data[Br()],h,h[11],s,h[y+1]=function Cs(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(ga(s)))),s}(o,l),c,y)}(s,o,null,!0),rd}function Om(s,o,l,c,h){let p=null;const y=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<y&&(p=o[b],c=lp(c,p.hostAttrs,h),p!==s);)b++;return null!==s&&(l.directiveStylingLast=b),c}function lp(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ws(s,y,!!l||o[++p]))}return void 0===s?null:s}function Xi(s,o,l,c,h,p){const y=null===o;let b;for(;h>0;){const T=s[h],M=Array.isArray(T),R=M?T[1]:T,H=null===R;let J=l[h+1];J===Wt&&(J=H?Dt:void 0);let ie=H?wf(J,c):R===c?J:void 0;if(M&&!wh(ie)&&(ie=wf(T,c)),wh(ie)&&(b=ie,y))return b;const De=s[h+1];h=y?_a(De):Xa(De)}if(null!==o){let T=p?o.residualClasses:o.residualStyles;null!=T&&(b=wf(T,c))}return b}function wh(s){return void 0!==s}function Hv(s,o=""){const l=Oe(),c=zt(),h=s+20,p=c.firstCreatePass?sh(c,h,1,o,null):c.data[h],y=l[h]=function Uy(s,o){return Sn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);un(c,l,y,p),Ri(p,!1)}function up(s){return cp("",s,""),up}function cp(s,o,l){const c=Oe(),h=fh(c,s,o,l);return h!==Wt&&tl(c,Br(),h),cp}const Wu=void 0;var rE=["en",[["a","p"],["AM","PM"],Wu],[["AM","PM"],Wu,Wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wu,"{1} 'at' {0}",Wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xv(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let bh={};function gp(s){const o=function VA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Ei(o);if(l)return l;const c=o.split("-")[0];if(l=Ei(c),l)return l;if("en"===c)return rE;throw new Error(`Missing locale data for the locale "${s}".`)}function di(s){return gp(s)[Rt.PluralCase]}function Ei(s){return s in bh||(bh[s]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[s]),bh[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const Hm="en-US";let t0=Hm;function a0(s,o,l,c,h){if(s=oe(s),Array.isArray(s))for(let p=0;p<s.length;p++)a0(s[p],o,l,c,h);else{const p=zt(),y=Oe();let b=ch(s)?s:oe(s.provide),T=cC(s);const M=kn(),R=1048575&M.providerIndexes,H=M.directiveStart,J=M.providerIndexes>>20;if(ch(s)||!s.multi){const ie=new ms(T,h,yh),De=c0(b,o,h?R:R+J,H);-1===De?(Ba(ii(M,y),p,b),l0(p,s,o.length),o.push(b),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(ie),y.push(ie)):(l[De]=ie,y[De]=ie)}else{const ie=c0(b,o,R+J,H),De=c0(b,o,R,R+J),We=ie>=0&&l[ie],nt=De>=0&&l[De];if(h&&!nt||!h&&!We){Ba(ii(M,y),p,b);const _t=function d0(s,o,l,c,h){const p=new ms(s,l,yh);return p.multi=[],p.index=o,p.componentProviders=0,u0(p,h,c&&!l),p}(h?OE:PE,l.length,h,c,T);!h&&nt&&(l[De].providerFactory=_t),l0(p,s,o.length,0),o.push(b),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(_t),y.push(_t)}else l0(p,s,ie>-1?ie:De,u0(l[h?De:ie],T,!h&&c));!h&&c&&nt&&l[De].componentProviders++}}}function l0(s,o,l,c){const h=ch(o),p=function gv(s){return!!s.useClass}(o);if(h||p){const T=(p?oe(o.useClass):o).prototype.ngOnDestroy;if(T){const M=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=M.indexOf(l);-1===R?M.push(l,[c,T]):M[R+1].push(c,T)}else M.push(l,T)}}}function u0(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function c0(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function PE(s,o,l,c){return Ip(this.multi,[])}function OE(s,o,l,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,b=qi(l,l[1],this.providerFactory.index,c);p=b.slice(0,y),Ip(h,p);for(let T=y;T<b.length;T++)p.push(b[T])}else p=[],Ip(h,p);return p}function Ip(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function h0(s,o=[]){return l=>{l.providersResolver=(c,h)=>function xh(s,o,l){const c=zt();if(c.firstCreatePass){const h=Ar(s);a0(l,c.data,c.blueprint,h,!0),a0(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class s_{}class o_{resolveComponentFactory(o){throw function eS(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Xu=(()=>{class s{}return s.NULL=new o_,s})();function a_(){return ec(kn(),Oe())}function ec(s,o){return new Mh(Sr(s,o))}let Mh=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=a_,s})();function Tp(s){return s instanceof Mh?s.nativeElement:s}class NE{}let Jr=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function tS(){const s=Oe(),l=Ur(kn().index,s);return function LE(s){return s[11]}(ni(l)?l:s)}(),s})(),nS=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class FE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const UE=new FE("13.3.2"),u_={};function Dp(s,o,l,c,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(yn(p)),zi(p))for(let b=10;b<p.length;b++){const T=p[b],M=T[1].firstChild;null!==M&&Dp(T[1],T,M,c)}const y=l.type;if(8&y)Dp(s,o,l.child,c);else if(32&y){const b=Ng(l,o);let T;for(;T=b();)c.push(T)}else if(16&y){const b=Ab(o,l);if(Array.isArray(b))c.push(...b);else{const T=Uf(o[16]);Dp(T[1],T,b,c,!0)}}l=h?l.projectionNext:l.next}return c}class Ph{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Dp(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(zi(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Bo(o,c),za(l,c))}this._attachedToViewContainer=!1}By(this._lView[1],this._lView)}onDestroy(o){Jg(this._lView[1],this._lView,null,o)}markForCheck(){Qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){av(this._lView[1],this._lView,this.context)}checkNoChanges(){!function iC(s,o,l){So(!0);try{av(s,o,l)}finally{So(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new He(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wb(s,o){nh(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new He(902,"");this._appRef=o}}class c_ extends Ph{constructor(o){super(o),this._view=o}detectChanges(){sm(this._view)}checkNoChanges(){!function HD(s){So(!0);try{sm(s)}finally{So(!1)}}(this._view)}get context(){return null}}class f0 extends Xu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=et(o);return new Ap(l,this.ngModule)}}function al(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class Ap extends s_{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Fl(s){return s.map(qy).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return al(this.componentDef.inputs)}get outputs(){return al(this.componentDef.outputs)}create(o,l,c,h){const p=(h=h||this.ngModule)?function rS(s,o){return{get:(l,c,h)=>{const p=s.get(l,u_,h);return p!==u_||c===u_?p:o.get(l,c,h)}}}(o,h.injector):o,y=p.get(NE,Hs),b=p.get(nS,null),T=y.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=c?function qb(s,o,l){if(Sn(s))return s.selectRootElement(o,l===Tt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(T,c,this.componentDef.encapsulation):ln(y.createRenderer(null,this.componentDef),M,function VE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),H=this.componentDef.onPush?576:528,J=function tA(s,o){return{components:[],scheduler:s||Jd,clean:$D,playerHandler:o||null,flags:0}}(),ie=Qg(0,null,null,1,0,null,null,null,null,null),De=Vu(null,ie,J,H,null,null,y,T,b,p);let We,nt;la(De);try{const _t=function mC(s,o,l,c,h,p){const y=l[1];l[20]=s;const T=sh(y,20,2,"#host",null),M=T.mergedAttrs=o.hostAttrs;null!==M&&(Bl(T,M,!0),null!==s&&(C(h,s,M),null!==T.classes&&zy(h,s,T.classes),null!==T.styles&&jf(h,s,T.styles)));const R=c.createRenderer(s,o),H=Vu(l,tv(o),null,o.onPush?64:16,l[20],T,c,R,p||null,null);return y.firstCreatePass&&(Ba(ii(T,l),y,o.type),Qb(y,T),Xb(T,l.length,1)),im(l,H),l[20]=H}(R,this.componentDef,De,y,T);if(R)if(c)C(T,R,["ng-version",UE.full]);else{const{attrs:Ne,classes:Pt}=function rh(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&l.push(p);else{if(!Ls(h))break;h=p}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ne&&C(T,R,Ne),Pt&&Pt.length>0&&zy(T,R,Pt.join(" "))}if(nt=Ra(ie,20),void 0!==l){const Ne=nt.projection=[];for(let Pt=0;Pt<this.ngContentSelectors.length;Pt++){const vn=l[Pt];Ne.push(null!=vn?Array.from(vn):null)}}We=function eA(s,o,l,c,h){const p=l[1],y=function MD(s,o,l){const c=kn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),eC(s,c,o,oh(s,o,1,null),l));const h=qi(o,s,c.directiveStart,c);mt(h,o);const p=Sr(c,o);return p&&mt(p,o),h}(p,l,o);if(c.components.push(y),s[8]=y,h&&h.forEach(T=>T(y,o)),o.contentQueries){const T=kn();o.contentQueries(1,y,T.directiveStart)}const b=kn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Os(b.index),Kb(l[1],b,0,b.directiveStart,b.directiveEnd,o),Yb(o,y)),y}(_t,this.componentDef,De,J,[kO]),Kf(ie,De,null)}finally{Ks()}return new p0(this.componentType,We,ec(nt,De),De,nt)}}class p0 extends class RE{}{constructor(o,l,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new c_(h),this.componentType=o}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class ad{}class h_{}const zl=new Map;class f_ extends ad{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new f0(this);const c=Lt(o);this._bootstrapComponents=Ja(c.bootstrap),this._r3Injector=hv(o,l,[{provide:ad,useValue:this},{provide:Xu,useValue:this.componentFactoryResolver}],he(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ya.THROW_IF_NOT_FOUND,c=ct.Default){return o===ya||o===ad||o===cv?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class p_ extends h_{constructor(o){super(),this.moduleType=o,null!==Lt(o)&&function xp(s){const o=new Set;!function l(c){const h=Lt(c,!0),p=h.id;null!==p&&(function g0(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${he(o)} vs ${he(o.name)}`)}(p,zl.get(p),c),zl.set(p,c));const y=Ja(h.imports);for(const b of y)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new f_(this.moduleType,o)}}function Mp(s,o,l){const c=function hr(){const s=At.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,h=Oe();return h[c]===Wt?function Ca(s,o,l){return s[o]=l}(h,c,l?o.call(l):o()):function tp(s,o){return s[o]}(h,c)}function ll(s){return o=>{setTimeout(s,void 0,o)}}const Ho=class Rh extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,p,y;let b=o,T=l||(()=>null),M=c;if(o&&"object"==typeof o){const H=o;b=null===(h=H.next)||void 0===h?void 0:h.bind(H),T=null===(p=H.error)||void 0===p?void 0:p.bind(H),M=null===(y=H.complete)||void 0===y?void 0:y.bind(H)}this.__isAsync&&(T=ll(T),b&&(b=ll(b)),M&&(M=ll(M)));const R=super.subscribe({next:b,error:T,complete:M});return o instanceof G.w0&&o.add(R),R}};function cS(){return this._results[Qi()]()}class Ge{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Qi(),c=Ge.prototype;c[l]||(c[l]=cS)}get changes(){return this._changes||(this._changes=new Ho)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=Ni(o);(this._changesDetected=!function $a(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gr=(()=>{class s{}return s.__NG_ELEMENT_ID__=wt,s})();const Pp=gr,y0=class extends Pp{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=Vu(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(l)),Kf(l,c,o),new Ph(c)}};function wt(){return Vt(kn(),Oe())}function Vt(s,o){return 4&s.type?new y0(o,s,ec(s,o)):null}let y_=(()=>{class s{}return s.__NG_ELEMENT_ID__=at,s})();function at(){return QE(kn(),Oe())}const ve=y_,Ue=class extends ve{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return ec(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const o=si(this._hostTNode,this._hostLView);if(Ke(o)){const l=Gt(o,this._hostLView),c=pn(o);return new Js(l[1].data[c+8],l)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=hi(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,p){const y=o&&!function ys(s){return"function"==typeof s}(o);let b;if(y)b=l;else{const H=l||{};b=H.index,c=H.injector,h=H.projectableNodes,p=H.ngModuleRef}const T=y?o:new Ap(et(o)),M=c||this.parentInjector;if(!p&&null==T.ngModule){const J=(y?M:this.parentInjector).get(ad,null);J&&(p=J)}const R=T.create(M,h,void 0,p);return this.insert(R.hostView,b),R}insert(o,l){const c=o._lView,h=c[1];if(function Io(s){return zi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const H=c[3],J=new Ue(H,H[6],H[3]);J.detach(J.indexOf(o))}}const p=this._adjustIndex(l),y=this._lContainer;!function dD(s,o,l,c){const h=10+c,p=l.length;c>0&&(l[h-1][4]=o),c<p-10?(o[4]=l[h],fa(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const y=o[17];null!==y&&l!==y&&function hD(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(y,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,c,y,p);const b=Ll(p,y),T=c[11],M=Ug(T,y[7]);return null!==M&&function eh(s,o,l,c,h,p){c[0]=h,c[6]=o,nh(s,c,l,1,h,p)}(h,y[6],T,c,M,b),o.attachToViewContainerRef(),fa(v_(y),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=hi(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Bo(this._lContainer,l);c&&(za(v_(this._lContainer),l),By(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Bo(this._lContainer,l);return c&&null!=za(v_(this._lContainer),l)?new Ph(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function hi(s){return s[8]}function v_(s){return s[8]||(s[8]=[])}function QE(s,o){let l;const c=o[s.index];if(zi(c))l=c;else{let h;if(8&s.type)h=yn(c);else{const p=o[11];h=p.createComment("");const y=Sr(s,o);$c(p,Ug(p,y),h,function Tb(s,o){return Sn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=l=iv(c,o,h,s),im(o,l)}return new Ue(l,s,o)}class v0{constructor(o){this.queryList=o,this.matches=null}clone(){return new v0(this.queryList)}setDirty(){this.queryList.setDirty()}}class w_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<c;p++){const y=l.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new w_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==cd(o,l).matches&&this.queries[l].setDirty()}}class JE{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class XE{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new XE(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Is{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Is(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,l,fS(l,p)),this.matchTNodeWithReadOption(o,l,xl(l,o,p,!1,!1))}else c===gr?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,xl(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Mh||h===y_||h===gr&&4&l.type)this.addMatch(l.index,-2);else{const p=xl(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function fS(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function gn(s,o,l,c){return-1===l?function eI(s,o){return 11&s.type?ec(s,o):4&s.type?Vt(s,o):null}(o,s):-2===l?function kh(s,o,l){return l===Mh?ec(o,s):l===gr?Vt(o,s):l===y_?QE(o,s):void 0}(s,o,c):qi(s,s[1],l,o)}function w0(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,y=l.matches,b=[];for(let T=0;T<y.length;T+=2){const M=y[T];b.push(M<0?null:gn(o,p[M],y[T+1],l.metadata.read))}h.matches=b}return h.matches}function Cr(s,o,l,c){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const y=w0(s,o,h,l);for(let b=0;b<p.length;b+=2){const T=p[b];if(T>0)c.push(y[b/2]);else{const M=p[b+1],R=o[-T];for(let H=10;H<R.length;H++){const J=R[H];J[17]===J[3]&&Cr(J[1],J,M,c)}if(null!==R[9]){const H=R[9];for(let J=0;J<H.length;J++){const ie=H[J];Cr(ie[1],ie,M,c)}}}}}return c}function Ut(s){const o=Oe(),l=zt(),c=Il();Na(c+1);const h=cd(l,c);if(s.dirty&&ps(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Cr(l,o,c,[]):w0(l,o,h,c);s.reset(p,Tp),s.notifyOnChanges()}return!0}return!1}function b0(s,o,l){const c=zt();c.firstCreatePass&&(tI(c,new JE(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),En(c,Oe(),o)}function tc(s,o,l,c){const h=zt();if(h.firstCreatePass){const p=kn();tI(h,new JE(o,l,c),p.index),function Ii(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}En(h,Oe(),l)}function C0(){return function Op(s,o){return s[19].queries[o].queryList}(Oe(),Il())}function En(s,o,l){const c=new Ge(4==(4&l));Jg(s,o,c,c.destroy),null===o[19]&&(o[19]=new w_),o[19].queries.push(new v0(c))}function tI(s,o,l){null===s.queries&&(s.queries=new XE),s.queries.track(new Is(o,l))}function cd(s,o){return s.queries.getByIndex(o)}function nI(s,o){return Vt(s,o)}function T_(...s){}const P0=new sr("Application Initializer");let O0=(()=>{class s{constructor(l){this.appInits=l,this.resolve=T_,this.reject=T_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(FC(p))l.push(p);else if(wA(p)){const y=new Promise((b,T)=>{p.subscribe({complete:b,error:T})});l.push(y)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Ze(P0,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const lI=new sr("AppId",{providedIn:"root",factory:function uI(){return`${cl()}${cl()}${cl()}`}});function cl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const md=new sr("Platform Initializer"),cI=new sr("Platform ID"),R0=new sr("appBootstrapListener");let dl=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const ic=new sr("LocaleId",{providedIn:"root",factory:()=>Bt(ic,ct.Optional|ct.SkipSelf)||function dI(){return"undefined"!=typeof $localize&&$localize.locale||Hm}()}),D_=new sr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class N0{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Hh=(()=>{class s{compileModuleSync(l){return new p_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),p=Ja(Lt(l).declarations).reduce((y,b)=>{const T=et(b);return T&&y.push(new Ap(T)),y},[]);return new N0(c,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Up=(()=>Promise.resolve(0))();function A_(s){"undefined"==typeof Zone?Up.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ao{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ho(!1),this.onMicrotaskEmpty=new Ho(!1),this.onStable=new Ho(!1),this.onError=new Ho(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function L0(){let s=Jt.requestAnimationFrame,o=Jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function gI(s){const o=()=>{!function wS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Jt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,x_(s),s.isCheckStableRunning=!0,S_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),x_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,p,y,b)=>{try{return F0(s),l.invokeTask(h,p,y,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Vp(s)}},onInvoke:(l,c,h,p,y,b,T)=>{try{return F0(s),l.invoke(h,p,y,b,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),Vp(s)}},onHasTask:(l,c,h,p)=>{l.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,x_(s),S_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ao.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ao.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,pI,T_,T_);try{return p.runTask(y,l,c)}finally{p.cancelTask(y)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const pI={};function S_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function x_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function F0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Vp(s){s._nesting--,S_(s)}class bS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ho,this.onMicrotaskEmpty=new Ho,this.onStable=new Ho,this.onError=new Ho}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let mI=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ao.assertNotInAngularZone(),A_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())A_(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Ze(ao))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),U0=(()=>{class s{constructor(){this._applications=new Map,M_.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return M_.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();class $h{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function _d(s){M_=s}let Bi,M_=new $h;const V0=new sr("AllowMultipleToken");class jp{constructor(o,l){this.name=o,this.token=l}}function vI(s,o,l=[]){const c=`Platform: ${o}`,h=new sr(c);return(p=[])=>{let y=Hp();if(!y||y.injector.get(V0,!1))if(s)s(l.concat(p).concat({provide:h,useValue:!0}));else{const b=l.concat(p).concat({provide:h,useValue:!0},{provide:om,useValue:"platform"});!function CS(s){if(Bi&&!Bi.destroyed&&!Bi.injector.get(V0,!1))throw new He(400,"");Bi=s.get(wI);const o=s.get(md,null);o&&o.forEach(l=>l())}(ya.create({providers:b,name:c}))}return function Xr(s){const o=Hp();if(!o)throw new He(401,"");return o}()}}function Hp(){return Bi&&!Bi.destroyed?Bi:null}let wI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const b=function j0(s,o){let l;return l="noop"===s?new bS:("zone.js"===s?void 0:s)||new ao({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),T=[{provide:ao,useValue:b}];return b.run(()=>{const M=ya.create({providers:T,parent:this.injector,name:l.moduleType.name}),R=l.create(M),H=R.injector.get(li,null);if(!H)throw new He(402,"");return b.runOutsideAngular(()=>{const J=b.onError.subscribe({next:ie=>{H.handleError(ie)}});R.onDestroy(()=>{yd(this._modules,R),J.unsubscribe()})}),function ES(s,o,l){try{const c=l();return FC(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(H,b,()=>{const J=R.injector.get(O0);return J.runInitializers(),J.donePromise.then(()=>(function HA(s){pt(s,"Expected localeId to be defined"),"string"==typeof s&&(t0=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(ic,Hm)||Hm),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,c=[]){const h=H0({},c);return function _I(s,o,l){const c=new p_(l);return Promise.resolve(c)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const c=l.injector.get(P_);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new He(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Ze(ya))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function H0(s,o){return Array.isArray(o)?o.reduce(H0,s):Object.assign(Object.assign({},s),o)}let P_=(()=>{class s{constructor(l,c,h,p,y){this._zone=l,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new L.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),T=new L.y(M=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{ao.assertNotInAngularZone(),A_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{ao.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{R.unsubscribe(),H.unsubscribe()}});this.isStable=(0,ue.T)(b,T.pipe((0,le.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new He(405,"");let h;h=l instanceof s_?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const p=function yI(s){return s.isBoundToModule}(h)?void 0:this._injector.get(ad),b=h.create(ya.NULL,[],c||h.selector,p),T=b.location.nativeElement,M=b.injector.get(mI,null),R=M&&b.injector.get(U0);return M&&R&&R.registerApplication(T,M),b.onDestroy(()=>{this.detachView(b.hostView),yd(this.components,b),R&&R.unregisterApplication(T)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new He(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;yd(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(R0,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Ze(ao),Ze(ya),Ze(li),Ze(Xu),Ze(O0))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function yd(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let $0=!0,z0=!1;function $p(){return z0=!0,$0}function G0(){if(z0)throw new Error("Cannot enable prod mode after platform setup.");$0=!1}let CI=(()=>{class s{}return s.__NG_ELEMENT_ID__=EI,s})();function EI(s){return function oc(s,o,l){if(_o(s)&&!l){const c=Ur(s.index,o);return new Ph(c,c)}return 47&s.type?new Ph(o[16],o):null}(kn(),Oe(),16==(16&s))}class TI{constructor(){}supports(o){return Qc(o)}create(o){return new AI(o)}}const DI=(s,o)=>o;class AI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||DI}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,p=null;for(;l||c;){const y=!c||l&&l.currentIndex<Wh(c,h,p)?l:c,b=Wh(y,h,p),T=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{p||(p=[]);const M=b-h,R=T-h;if(M!=R){for(let J=0;J<M;J++){const ie=J<p.length?p[J]:p[J]=0,De=ie+J;R<=De&&De<M&&(p[J]=ie+1)}p[y.previousIndex]=R-M}}b!==T&&o(y,b,T)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Qc(o))throw new He(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],y=this._trackByFn(b,p),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,p,y,b)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,y,b),c=!0),l=l._next}else h=0,function oA(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Qi()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,b=>{y=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,b,y,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,y,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new MS(l,c),p,h),o}_verifyReinsertion(o,l,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new SI),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class MS{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class PS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class SI{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new PS,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wh(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class K0{constructor(){}supports(o){return o instanceof Map||_v(o)}create(){return new OS}}class OS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||_v(o)))throw new He(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new Ti(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class Ti{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function k_(){return new N_([new TI])}let N_=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||k_()),deps:[[s,new ai,new Fi]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new He(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:k_}),s})();function Ta(){return new zp([new K0])}let zp=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Ta()),deps:[[s,new ai,new Fi]]}}find(l){const c=this.factories.find(p=>p.supports(l));if(c)return c;throw new He(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:Ta}),s})();const LS=vI(null,"core",[{provide:cI,useValue:"unknown"},{provide:wI,deps:[ya]},{provide:U0,deps:[]},{provide:dl,deps:[]}]);let FS=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Ze(P_))},s.\u0275mod=V({type:s}),s.\u0275inj=dn({}),s})()},3942:(bt,Me,U)=>{"use strict";U.d(Me,{Z:()=>He});var d=U(2090),G=U(4859),L=U(9681),ue=U(1877);class le{constructor(we,Ae){this._delegate=we,this.firebase=Ae,(0,L._addComponent)(we,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(we,Ae=L._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(we);return!qe.isInitialized()&&"EXPLICIT"===(null===(st=qe.getComponent())||void 0===st?void 0:st.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:Ae})}_removeServiceInstance(we,Ae=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(Ae)}_addComponent(we){(0,L._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,L._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function ye(){const ze=function he(ze){const we={},Ae={__esModule:!0,initializeApp:function Le(B,Xe={}){const ne=L.initializeApp(B,Xe);if((0,d.r3)(we,ne.name))return we[ne.name];const me=new ze(ne,Ae);return we[ne.name]=me,me},app:qe,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Te(B){const Xe=B.name,ne=Xe.replace("-compat","");if(L._registerComponent(B)&&"PUBLIC"===B.type){const me=(ce=qe())=>{if("function"!=typeof ce[ne])throw ge.create("invalid-app-argument",{appName:Xe});return ce[ne]()};void 0!==B.serviceProps&&(0,d.ZB)(me,B.serviceProps),Ae[ne]=me,ze.prototype[ne]=function(...ce){return this._getService.bind(this,Xe).apply(this,B.multipleInstances?ce:[])}}return"PUBLIC"===B.type?Ae[ne]:null},removeApp:function st(B){delete we[B]},useAsService:function Je(B,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:L}};function qe(B){if(!(0,d.r3)(we,B=B||L._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:B});return we[B]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Re(){return Object.keys(we).map(B=>we[B])}}),qe.App=ze,Ae}(le);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function we(Ae){(0,d.ZB)(ze,Ae)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ze}(),Q=new ue.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=X;!function Fe(ze){(0,L.registerVersion)("@firebase/app-compat","0.1.21",ze)}()},9681:(bt,Me,U)=>{"use strict";U.r(Me),U.d(Me,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>pi,_DEFAULT_ENTRY_NAME:()=>jn,_addComponent:()=>Tn,_addOrOverwriteComponent:()=>vr,_apps:()=>lt,_clearComponents:()=>Pn,_components:()=>an,_getProvider:()=>Qt,_registerComponent:()=>Yt,_removeServiceInstance:()=>dn,deleteApp:()=>Fn,getApp:()=>wr,getApps:()=>Kn,initializeApp:()=>kr,onLog:()=>hn,registerVersion:()=>Nr,setLogLevel:()=>fn});var d=U(5861),G=U(4859),L=U(1877),ue=U(2090);class le{constructor(xe){this.container=xe}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function Ee(Se){const xe=Se.getComponent();return"VERSION"===(null==xe?void 0:xe.type)}(ot)){const Ct=ot.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(ot=>ot).join(" ")}}const ge="@firebase/app",ye=new L.Yd("@firebase/app"),jn="[DEFAULT]",pt={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,an=new Map;function Tn(Se,xe){try{Se.container.addComponent(xe)}catch(ot){ye.debug(`Component ${xe.name} failed to register with FirebaseApp ${Se.name}`,ot)}}function vr(Se,xe){Se.container.addOrOverwriteComponent(xe)}function Yt(Se){const xe=Se.name;if(an.has(xe))return ye.debug(`There were multiple attempts to register component ${xe}.`),!1;an.set(xe,Se);for(const ot of lt.values())Tn(ot,Se);return!0}function Qt(Se,xe){const ot=Se.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),Se.container.getProvider(xe)}function dn(Se,xe,ot=jn){Qt(Se,xe).clearInstance(ot)}function Pn(){an.clear()}const Ir=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ur{constructor(xe,ot,Ct){this._isDeleted=!1,this._options=Object.assign({},xe),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(xe){this._isDeleted=xe}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}const pi="9.6.10";function kr(Se,xe={}){"object"!=typeof xe&&(xe={name:xe});const ot=Object.assign({name:jn,automaticDataCollectionEnabled:!1},xe),Ct=ot.name;if("string"!=typeof Ct||!Ct)throw Ir.create("bad-app-name",{appName:String(Ct)});const Ht=lt.get(Ct);if(Ht){if((0,ue.vZ)(Se,Ht.options)&&(0,ue.vZ)(ot,Ht.config))return Ht;throw Ir.create("duplicate-app",{appName:Ct})}const kt=new G.H0(Ct);for(const W of an.values())kt.addComponent(W);const ee=new ur(Se,ot,kt);return lt.set(Ct,ee),ee}function wr(Se=jn){const xe=lt.get(Se);if(!xe)throw Ir.create("no-app",{appName:Se});return xe}function Kn(){return Array.from(lt.values())}function Fn(Se){return ct.apply(this,arguments)}function ct(){return(ct=(0,d.Z)(function*(Se){const xe=Se.name;lt.has(xe)&&(lt.delete(xe),yield Promise.all(Se.container.getProviders().map(ot=>ot.delete())),Se.isDeleted=!0)})).apply(this,arguments)}function Nr(Se,xe,ot){var Ct;let Ht=null!==(Ct=pt[Se])&&void 0!==Ct?Ct:Se;ot&&(Ht+=`-${ot}`);const kt=Ht.match(/\s|\//),ee=xe.match(/\s|\//);if(kt||ee){const W=[`Unable to register library "${Ht}" with version "${xe}":`];return kt&&W.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),kt&&ee&&W.push("and"),ee&&W.push(`version name "${xe}" contains illegal characters (whitespace or "/")`),void ye.warn(W.join(" "))}Yt(new G.wA(`${Ht}-version`,()=>({library:Ht,version:xe}),"VERSION"))}function hn(Se,xe){if(null!==Se&&"function"!=typeof Se)throw Ir.create("invalid-log-argument");(0,L.Am)(Se,xe)}function fn(Se){(0,L.Ub)(Se)}const It="firebase-heartbeat-store";let mn=null;function Hn(){return mn||(mn=(0,ue.X3)("firebase-heartbeat-database",1,(Se,xe)=>{0===xe&&Se.createObjectStore(It)}).catch(Se=>{throw Ir.create("storage-open",{originalErrorMessage:Se.message})})),mn}function Tt(){return(Tt=(0,d.Z)(function*(Se){try{return(yield Hn()).transaction(It).objectStore(It).get(Tr(Se))}catch(xe){throw Ir.create("storage-get",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function rt(Se,xe){return dt.apply(this,arguments)}function dt(){return(dt=(0,d.Z)(function*(Se,xe){try{const Ct=(yield Hn()).transaction(It,"readwrite");return yield Ct.objectStore(It).put(xe,Tr(Se)),Ct.complete}catch(ot){throw Ir.create("storage-set",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function Tr(Se){return`${Se.name}!${Se.options.appId}`}class Si{constructor(xe){this.container=xe,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new Dt(ot),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var xe=this;return(0,d.Z)(function*(){const Ct=xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ht=zn();if(null===xe._heartbeatsCache&&(xe._heartbeatsCache=yield xe._heartbeatsCachePromise),xe._heartbeatsCache.lastSentHeartbeatDate!==Ht&&!xe._heartbeatsCache.heartbeats.some(kt=>kt.date===Ht))return xe._heartbeatsCache.heartbeats.push({date:Ht,agent:Ct}),xe._heartbeatsCache.heartbeats=xe._heartbeatsCache.heartbeats.filter(kt=>{const ee=new Date(kt.date).valueOf();return Date.now()-ee<=2592e6}),xe._storage.overwrite(xe._heartbeatsCache)})()}getHeartbeatsHeader(){var xe=this;return(0,d.Z)(function*(){if(null===xe._heartbeatsCache&&(yield xe._heartbeatsCachePromise),null===xe._heartbeatsCache||0===xe._heartbeatsCache.heartbeats.length)return"";const ot=zn(),{heartbeatsToSend:Ct,unsentEntries:Ht}=function _n(Se,xe=1024){const ot=[];let Ct=Se.slice();for(const Ht of Se){const kt=ot.find(ee=>ee.agent===Ht.agent);if(kt){if(kt.dates.push(Ht.date),Gn(ot)>xe){kt.dates.pop();break}}else if(ot.push({agent:Ht.agent,dates:[Ht.date]}),Gn(ot)>xe){ot.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:ot,unsentEntries:Ct}}(xe._heartbeatsCache.heartbeats),kt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Ct}));return xe._heartbeatsCache.lastSentHeartbeatDate=ot,Ht.length>0?(xe._heartbeatsCache.heartbeats=Ht,yield xe._storage.overwrite(xe._heartbeatsCache)):(xe._heartbeatsCache.heartbeats=[],xe._storage.overwrite(xe._heartbeatsCache)),kt})()}}function zn(){return(new Date).toISOString().substring(0,10)}class Dt{constructor(xe){this.app=xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var xe=this;return(0,d.Z)(function*(){return(yield xe._canUseIndexedDBPromise)&&(yield function gi(Se){return Tt.apply(this,arguments)}(xe.app))||{heartbeats:[]}})()}overwrite(xe){var ot=this;return(0,d.Z)(function*(){var Ct;if(yield ot._canUseIndexedDBPromise){const kt=yield ot.read();return rt(ot.app,{lastSentHeartbeatDate:null!==(Ct=xe.lastSentHeartbeatDate)&&void 0!==Ct?Ct:kt.lastSentHeartbeatDate,heartbeats:xe.heartbeats})}})()}add(xe){var ot=this;return(0,d.Z)(function*(){var Ct;if(yield ot._canUseIndexedDBPromise){const kt=yield ot.read();return rt(ot.app,{lastSentHeartbeatDate:null!==(Ct=xe.lastSentHeartbeatDate)&&void 0!==Ct?Ct:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...xe.heartbeats]})}})()}}function Gn(Se){return(0,ue.L)(JSON.stringify({version:2,heartbeats:Se})).length}!function Xt(Se){Yt(new G.wA("platform-logger",xe=>new le(xe),"PRIVATE")),Yt(new G.wA("heartbeat",xe=>new Si(xe),"PRIVATE")),Nr(ge,"0.7.20",Se),Nr(ge,"0.7.20","esm2017"),Nr("fire-js","")}("")},4859:(bt,Me,U)=>{"use strict";U.d(Me,{H0:()=>he,wA:()=>L,zt:()=>le});var d=U(5861),G=U(2090);class L{constructor(X,Q,oe){this.name=X,this.instanceFactory=Q,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const ue="[DEFAULT]";class le{constructor(X,Q){this.name=X,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const Q=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(Q)){const oe=new G.BH;if(this.instancesDeferred.set(Q,oe),this.isInitialized(Q)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:Q});Ye&&oe.resolve(Ye)}catch(Ye){}}return this.instancesDeferred.get(Q).promise}getImmediate(X){var Q;const oe=this.normalizeInstanceIdentifier(null==X?void 0:X.identifier),Ye=null!==(Q=null==X?void 0:X.optional)&&void 0!==Q&&Q;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(Fe){if(Ye)return null;throw Fe}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function ge(ye){return"EAGER"===ye.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(Q){}for(const[Q,oe]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(Q);try{const Fe=this.getOrInitializeService({instanceIdentifier:Ye});oe.resolve(Fe)}catch(Fe){}}}}clearInstance(X=ue){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,d.Z)(function*(){const Q=Array.from(X.instances.values());yield Promise.all([...Q.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...Q.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=ue){return this.instances.has(X)}getOptions(X=ue){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:Q={}}=X,oe=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:oe,options:Q});for(const[Fe,He]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(Fe)&&He.resolve(Ye);return Ye}onInit(X,Q){var oe;const Ye=this.normalizeInstanceIdentifier(Q),Fe=null!==(oe=this.onInitCallbacks.get(Ye))&&void 0!==oe?oe:new Set;Fe.add(X),this.onInitCallbacks.set(Ye,Fe);const He=this.instances.get(Ye);return He&&X(He,Ye),()=>{Fe.delete(X)}}invokeOnInitCallbacks(X,Q){const oe=this.onInitCallbacks.get(Q);if(oe)for(const Ye of oe)try{Ye(X,Q)}catch(Fe){}}getOrInitializeService({instanceIdentifier:X,options:Q={}}){let oe=this.instances.get(X);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=X,ye===ue?void 0:ye),options:Q}),this.instances.set(X,oe),this.instancesOptions.set(X,Q),this.invokeOnInitCallbacks(oe,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,oe)}catch(Ye){}var ye;return oe||null}normalizeInstanceIdentifier(X=ue){return this.component?this.component.multipleInstances?X:ue:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const Q=this.getProvider(X.name);if(Q.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);Q.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const Q=new le(X,this);return this.providers.set(X,Q),Q}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Me,U)=>{"use strict";U.d(Me,{Am:()=>ye,Ub:()=>he,Yd:()=>ge,in:()=>G});const d=[];var G=(()=>{return(X=G||(G={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",G;var X})();const L={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ue=G.INFO,le={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},Ee=(X,Q,...oe)=>{if(Q<X.logLevel)return;const Ye=(new Date).toISOString(),Fe=le[Q];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[Fe](`[${Ye}]  ${X.name}:`,...oe)};class ge{constructor(Q){this.name=Q,this._logLevel=ue,this._logHandler=Ee,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in G))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?L[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...Q),this._logHandler(this,G.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...Q),this._logHandler(this,G.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...Q),this._logHandler(this,G.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...Q),this._logHandler(this,G.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...Q),this._logHandler(this,G.ERROR,...Q)}}function he(X){d.forEach(Q=>{Q.setLogLevel(X)})}function ye(X,Q){for(const oe of d){let Ye=null;Q&&Q.level&&(Ye=L[Q.level]),oe.userLogHandler=null===X?null:(Fe,He,...ze)=>{const we=ze.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(st){return null}}).filter(Ae=>Ae).join(" ");He>=(null!=Ye?Ye:Fe.logLevel)&&X({level:G[He].toLowerCase(),message:we,args:ze,type:Fe.name})}}}},5861:(bt,Me,U)=>{"use strict";function d(L,ue,le,Ee,ge,he,ye){try{var X=L[he](ye),Q=X.value}catch(oe){return void le(oe)}X.done?ue(Q):Promise.resolve(Q).then(Ee,ge)}function G(L){return function(){var ue=this,le=arguments;return new Promise(function(Ee,ge){var he=L.apply(ue,le);function ye(Q){d(he,Ee,ge,ye,X,"next",Q)}function X(Q){d(he,Ee,ge,ye,X,"throw",Q)}ye(void 0)})}}U.d(Me,{Z:()=>G})}},bt=>{bt(bt.s=1832)}]);